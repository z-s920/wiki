2022-07-20 09:30:53.411 INFO  org.hibernate.validator.internal.util.Version     :21  
                [32m                  [0;39m HV000001: Hibernate Validator 6.2.3.Final
2022-07-20 09:30:53.424 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 15764 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 09:30:53.425 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 09:30:53.503 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2022-07-20 09:30:53.601 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2022-07-20 09:30:56.494 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 09:30:56.496 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 09:30:56.524 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2022-07-20 09:30:59.277 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 09:30:59.289 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 09:30:59.290 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 09:30:59.291 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 09:30:59.462 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 09:30:59.462 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 5860 ms
2022-07-20 09:31:03.590 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 09:31:03.626 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 09:31:03.649 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 09:31:03.739 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 12.703 seconds (JVM running for 18.595)
2022-07-20 09:31:03.742 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 09:31:03.743 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 09:31:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204772065981632512[0;39m 更新电子书下的文档数据开始
2022-07-20 09:31:05.045 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204772065981632512[0;39m HikariPool-1 - Starting...
2022-07-20 09:31:05.777 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204772065981632512[0;39m HikariPool-1 - Start completed.
2022-07-20 09:31:05.783 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772065981632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:31:05.803 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772065981632512[0;39m ==> Parameters: 
2022-07-20 09:31:05.830 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772065981632512[0;39m <==    Updates: 7
2022-07-20 09:31:05.831 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204772065981632512[0;39m 更新电子书下的文档数据结束，耗时：820 毫秒
2022-07-20 09:31:05.832 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772069425156096[0;39m 生成今日电子书快照开始
2022-07-20 09:31:05.832 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772069425156096[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:05.833 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772069425156096[0;39m ==> Parameters: 
2022-07-20 09:31:05.963 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772069425156096[0;39m <==    Updates: 7
2022-07-20 09:31:05.964 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772069425156096[0;39m 生成今日电子书快照结束，耗时：132 毫秒
2022-07-20 09:31:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772086944763904[0;39m 生成今日电子书快照开始
2022-07-20 09:31:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772086944763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772086944763904[0;39m ==> Parameters: 
2022-07-20 09:31:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772086944763904[0;39m <==    Updates: 0
2022-07-20 09:31:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772086944763904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:31:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772107907895296[0;39m 生成今日电子书快照开始
2022-07-20 09:31:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772107907895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772107907895296[0;39m ==> Parameters: 
2022-07-20 09:31:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772107907895296[0;39m <==    Updates: 0
2022-07-20 09:31:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772107907895296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:31:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772128908775424[0;39m 生成今日电子书快照开始
2022-07-20 09:31:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772128908775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772128908775424[0;39m ==> Parameters: 
2022-07-20 09:31:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772128908775424[0;39m <==    Updates: 0
2022-07-20 09:31:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772128908775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:31:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772149846740992[0;39m 生成今日电子书快照开始
2022-07-20 09:31:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772149846740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772149846740992[0;39m ==> Parameters: 
2022-07-20 09:31:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772149846740992[0;39m <==    Updates: 0
2022-07-20 09:31:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772149846740992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:31:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772170822455296[0;39m 生成今日电子书快照开始
2022-07-20 09:31:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772170822455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772170822455296[0;39m ==> Parameters: 
2022-07-20 09:31:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772170822455296[0;39m <==    Updates: 0
2022-07-20 09:31:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772170822455296[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 09:31:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204772191827529728[0;39m 更新电子书下的文档数据开始
2022-07-20 09:31:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772191827529728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:31:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772191827529728[0;39m ==> Parameters: 
2022-07-20 09:31:35.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772191827529728[0;39m <==    Updates: 7
2022-07-20 09:31:35.021 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204772191827529728[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 09:31:35.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772191856889856[0;39m 生成今日电子书快照开始
2022-07-20 09:31:35.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772191856889856[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:35.076 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772191856889856[0;39m ==> Parameters: 
2022-07-20 09:31:35.084 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772191856889856[0;39m <==    Updates: 0
2022-07-20 09:31:35.084 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772191856889856[0;39m 生成今日电子书快照结束，耗时：61 毫秒
2022-07-20 09:31:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772212782272512[0;39m 生成今日电子书快照开始
2022-07-20 09:31:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772212782272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772212782272512[0;39m ==> Parameters: 
2022-07-20 09:31:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772212782272512[0;39m <==    Updates: 0
2022-07-20 09:31:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772212782272512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:31:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772233720238080[0;39m 生成今日电子书快照开始
2022-07-20 09:31:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772233720238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772233720238080[0;39m ==> Parameters: 
2022-07-20 09:31:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772233720238080[0;39m <==    Updates: 0
2022-07-20 09:31:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772233720238080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:31:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772254746284032[0;39m 生成今日电子书快照开始
2022-07-20 09:31:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772254746284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772254746284032[0;39m ==> Parameters: 
2022-07-20 09:31:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772254746284032[0;39m <==    Updates: 0
2022-07-20 09:31:50.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772254746284032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:31:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772275684249600[0;39m 生成今日电子书快照开始
2022-07-20 09:31:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772275684249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:31:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772275684249600[0;39m ==> Parameters: 
2022-07-20 09:31:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772275684249600[0;39m <==    Updates: 0
2022-07-20 09:31:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772275684249600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:32:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772296634798080[0;39m 生成今日电子书快照开始
2022-07-20 09:32:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772296634798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772296634798080[0;39m ==> Parameters: 
2022-07-20 09:32:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772296634798080[0;39m <==    Updates: 0
2022-07-20 09:32:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772296634798080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:32:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204772317614706688[0;39m 更新电子书下的文档数据开始
2022-07-20 09:32:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772317614706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:32:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772317614706688[0;39m ==> Parameters: 
2022-07-20 09:32:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772317614706688[0;39m <==    Updates: 7
2022-07-20 09:32:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204772317614706688[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:32:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772317627289600[0;39m 生成今日电子书快照开始
2022-07-20 09:32:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772317627289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772317627289600[0;39m ==> Parameters: 
2022-07-20 09:32:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772317627289600[0;39m <==    Updates: 0
2022-07-20 09:32:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772317627289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:32:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772338573643776[0;39m 生成今日电子书快照开始
2022-07-20 09:32:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772338573643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772338573643776[0;39m ==> Parameters: 
2022-07-20 09:32:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772338573643776[0;39m <==    Updates: 0
2022-07-20 09:32:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772338573643776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:32:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772359566135296[0;39m 生成今日电子书快照开始
2022-07-20 09:32:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772359566135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772359566135296[0;39m ==> Parameters: 
2022-07-20 09:32:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772359566135296[0;39m <==    Updates: 0
2022-07-20 09:32:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772359566135296[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:32:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772380550238208[0;39m 生成今日电子书快照开始
2022-07-20 09:32:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772380550238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772380550238208[0;39m ==> Parameters: 
2022-07-20 09:32:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772380550238208[0;39m <==    Updates: 0
2022-07-20 09:32:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772380550238208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:32:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772401517563904[0;39m 生成今日电子书快照开始
2022-07-20 09:32:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772401517563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:25.062 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772401517563904[0;39m ==> Parameters: 
2022-07-20 09:32:25.063 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772401517563904[0;39m <==    Updates: 0
2022-07-20 09:32:25.063 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772401517563904[0;39m 生成今日电子书快照结束，耗时：53 毫秒
2022-07-20 09:32:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772422489083904[0;39m 生成今日电子书快照开始
2022-07-20 09:32:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772422489083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772422489083904[0;39m ==> Parameters: 
2022-07-20 09:32:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772422489083904[0;39m <==    Updates: 0
2022-07-20 09:32:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772422489083904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:32:30.310 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-07-20 09:32:30.310 INFO  org.springframework.web.servlet.DispatcherServlet :525 
                [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2022-07-20 09:32:30.312 INFO  org.springframework.web.servlet.DispatcherServlet :547 
                [32m                  [0;39m Completed initialization in 2 ms
2022-07-20 09:32:30.474 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772424435240961[0;39m ------------- 开始 -------------
2022-07-20 09:32:30.474 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772424435240962[0;39m ------------- 开始 -------------
2022-07-20 09:32:30.474 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772424435240960[0;39m ------------- 开始 -------------
2022-07-20 09:32:30.475 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772424435240961[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-20 09:32:30.475 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772424435240962[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-20 09:32:30.475 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772424435240960[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-20 09:32:30.475 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772424435240962[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-20 09:32:30.475 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772424435240961[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-20 09:32:30.475 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772424435240960[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-20 09:32:30.475 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772424435240962[0;39m 远程地址: 127.0.0.1
2022-07-20 09:32:30.475 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772424435240961[0;39m 远程地址: 127.0.0.1
2022-07-20 09:32:30.476 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772424435240960[0;39m 远程地址: 127.0.0.1
2022-07-20 09:32:30.483 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：gpg3iblKtw，session id：0，当前连接数：1
2022-07-20 09:32:30.522 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772424435240960[0;39m 请求参数: []
2022-07-20 09:32:30.522 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772424435240962[0;39m 请求参数: []
2022-07-20 09:32:30.522 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772424435240961[0;39m 请求参数: []
2022-07-20 09:32:30.528 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204772424435240962[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 09:32:30.528 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204772424435240961[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 09:32:30.528 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204772424435240962[0;39m ==> Parameters: 
2022-07-20 09:32:30.528 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204772424435240961[0;39m ==> Parameters: 
2022-07-20 09:32:30.551 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204772424435240960[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-20 09:32:30.552 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204772424435240960[0;39m ==> Parameters: 
2022-07-20 09:32:30.555 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204772424435240961[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-20 09:32:30.555 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772424435240962[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-20 09:32:30.556 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204772424435240961[0;39m <==        Row: 2022-07-20, 155, 37, 155, 37
2022-07-20 09:32:30.556 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772424435240962[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-20 09:32:30.560 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==    Columns: id, parent, name, sort
2022-07-20 09:32:30.560 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204772424435240961[0;39m <==      Total: 1
2022-07-20 09:32:30.560 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-20 09:32:30.560 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772424435240962[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-20 09:32:30.561 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 101, 100, Vue, 101
2022-07-20 09:32:30.561 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772424435240962[0;39m <==        Row: 2022-07-14, 47, 13
2022-07-20 09:32:30.562 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772424435240962[0;39m <==        Row: 2022-07-16, 153, 37
2022-07-20 09:32:30.563 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-20 09:32:30.564 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 200, 0, Java, 200
2022-07-20 09:32:30.563 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772424435240962[0;39m <==        Row: 2022-07-17, 2, 0
2022-07-20 09:32:30.565 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-20 09:32:30.566 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-20 09:32:30.567 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204772424435240962[0;39m <==      Total: 5
2022-07-20 09:32:30.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-20 09:32:30.569 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 300, 0, Python, 300
2022-07-20 09:32:30.570 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-20 09:32:30.571 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-20 09:32:30.572 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-20 09:32:30.572 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-20 09:32:30.573 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 500, 0, 其它, 500
2022-07-20 09:32:30.574 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-20 09:32:30.574 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-20 09:32:30.575 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772424435240960[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-20 09:32:30.577 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204772424435240960[0;39m <==      Total: 16
2022-07-20 09:32:30.638 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772424435240960[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-20 09:32:30.639 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772424435240960[0;39m ------------- 结束 耗时：166 ms -------------
2022-07-20 09:32:30.639 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772424435240961[0;39m 返回结果: {"content":[{"date":1658246400000,"viewCount":155,"viewIncrease":155,"voteCount":37,"voteIncrease":37}],"success":true}
2022-07-20 09:32:30.640 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772424435240962[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6},{"date":1657728000000,"viewCount":0,"viewIncrease":47,"voteCount":0,"voteIncrease":13},{"date":1657900800000,"viewCount":0,"viewIncrease":153,"voteCount":0,"voteIncrease":37},{"date":1657987200000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-20 09:32:30.640 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772424435240961[0;39m ------------- 结束 耗时：167 ms -------------
2022-07-20 09:32:30.640 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772424435240962[0;39m ------------- 结束 耗时：167 ms -------------
2022-07-20 09:32:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204772443473186816[0;39m 更新电子书下的文档数据开始
2022-07-20 09:32:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772443473186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:32:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772443473186816[0;39m ==> Parameters: 
2022-07-20 09:32:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772443473186816[0;39m <==    Updates: 7
2022-07-20 09:32:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204772443473186816[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:32:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772443485769728[0;39m 生成今日电子书快照开始
2022-07-20 09:32:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772443485769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772443485769728[0;39m ==> Parameters: 
2022-07-20 09:32:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772443485769728[0;39m <==    Updates: 0
2022-07-20 09:32:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772443485769728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:32:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772464448901120[0;39m 生成今日电子书快照开始
2022-07-20 09:32:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772464448901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772464448901120[0;39m ==> Parameters: 
2022-07-20 09:32:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772464448901120[0;39m <==    Updates: 0
2022-07-20 09:32:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772464448901120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:32:41.669 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：4WFnfEjsQ5，session id：1，当前连接数：2
2022-07-20 09:32:41.863 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772472208363520[0;39m ------------- 开始 -------------
2022-07-20 09:32:41.864 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772472208363520[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-20 09:32:41.864 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772472208363520[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-20 09:32:41.864 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772472208363520[0;39m 远程地址: 127.0.0.1
2022-07-20 09:32:41.865 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772472208363520[0;39m 请求参数: []
2022-07-20 09:32:41.866 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204772472208363520[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 09:32:41.867 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204772472208363520[0;39m ==> Parameters: 
2022-07-20 09:32:41.869 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204772472208363520[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-20 09:32:41.869 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204772472208363520[0;39m <==        Row: 2022-07-20, 155, 37, 155, 37
2022-07-20 09:32:41.870 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772472237723648[0;39m ------------- 开始 -------------
2022-07-20 09:32:41.871 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772472237723648[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-20 09:32:41.871 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772472237723648[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-20 09:32:41.871 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204772472208363520[0;39m <==      Total: 1
2022-07-20 09:32:41.871 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772472237723648[0;39m 远程地址: 127.0.0.1
2022-07-20 09:32:41.872 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772472237723648[0;39m 请求参数: []
2022-07-20 09:32:41.872 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772472208363520[0;39m 返回结果: {"content":[{"date":1658246400000,"viewCount":155,"viewIncrease":155,"voteCount":37,"voteIncrease":37}],"success":true}
2022-07-20 09:32:41.872 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772472208363520[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-20 09:32:41.872 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204772472237723648[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 09:32:41.873 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204772472237723648[0;39m ==> Parameters: 
2022-07-20 09:32:41.876 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772472237723648[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-20 09:32:41.877 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772472237723648[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-20 09:32:41.878 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772472271278080[0;39m ------------- 开始 -------------
2022-07-20 09:32:41.878 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772472271278080[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-20 09:32:41.878 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772472271278080[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-20 09:32:41.878 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772472237723648[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-20 09:32:41.879 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772472271278080[0;39m 远程地址: 127.0.0.1
2022-07-20 09:32:41.879 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772472237723648[0;39m <==        Row: 2022-07-14, 47, 13
2022-07-20 09:32:41.879 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772472271278080[0;39m 请求参数: []
2022-07-20 09:32:41.880 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772472237723648[0;39m <==        Row: 2022-07-16, 153, 37
2022-07-20 09:32:41.880 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204772472271278080[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-20 09:32:41.880 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204772472237723648[0;39m <==        Row: 2022-07-17, 2, 0
2022-07-20 09:32:41.880 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204772472271278080[0;39m ==> Parameters: 
2022-07-20 09:32:41.881 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204772472237723648[0;39m <==      Total: 5
2022-07-20 09:32:41.882 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772472237723648[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6},{"date":1657728000000,"viewCount":0,"viewIncrease":47,"voteCount":0,"voteIncrease":13},{"date":1657900800000,"viewCount":0,"viewIncrease":153,"voteCount":0,"voteIncrease":37},{"date":1657987200000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-20 09:32:41.882 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772472237723648[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-20 09:32:41.882 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==    Columns: id, parent, name, sort
2022-07-20 09:32:41.882 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-20 09:32:41.883 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 101, 100, Vue, 101
2022-07-20 09:32:41.883 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-20 09:32:41.884 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 200, 0, Java, 200
2022-07-20 09:32:41.886 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-20 09:32:41.886 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-20 09:32:41.887 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-20 09:32:41.888 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 300, 0, Python, 300
2022-07-20 09:32:41.889 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-20 09:32:41.889 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-20 09:32:41.890 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-20 09:32:41.892 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-20 09:32:41.893 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 500, 0, 其它, 500
2022-07-20 09:32:41.894 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-20 09:32:41.895 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-20 09:32:41.895 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772472271278080[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-20 09:32:41.896 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204772472271278080[0;39m <==      Total: 16
2022-07-20 09:32:41.897 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772472271278080[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-20 09:32:41.898 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772472271278080[0;39m ------------- 结束 耗时：20 ms -------------
2022-07-20 09:32:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772485420421120[0;39m 生成今日电子书快照开始
2022-07-20 09:32:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772485420421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772485420421120[0;39m ==> Parameters: 
2022-07-20 09:32:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772485420421120[0;39m <==    Updates: 0
2022-07-20 09:32:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772485420421120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:32:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772506404524032[0;39m 生成今日电子书快照开始
2022-07-20 09:32:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772506404524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:50.122 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772506404524032[0;39m ==> Parameters: 
2022-07-20 09:32:50.123 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772506404524032[0;39m <==    Updates: 0
2022-07-20 09:32:50.124 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772506404524032[0;39m 生成今日电子书快照结束，耗时：108 毫秒
2022-07-20 09:32:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772527346683904[0;39m 生成今日电子书快照开始
2022-07-20 09:32:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772527346683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:32:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772527346683904[0;39m ==> Parameters: 
2022-07-20 09:32:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772527346683904[0;39m <==    Updates: 0
2022-07-20 09:32:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772527346683904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:32:56.571 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：4WFnfEjsQ5，session id：1！当前连接数：1
2022-07-20 09:33:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772548305620992[0;39m 生成今日电子书快照开始
2022-07-20 09:33:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772548305620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772548305620992[0;39m ==> Parameters: 
2022-07-20 09:33:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772548305620992[0;39m <==    Updates: 0
2022-07-20 09:33:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772548305620992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:33:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204772569272946688[0;39m 更新电子书下的文档数据开始
2022-07-20 09:33:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772569272946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:33:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772569272946688[0;39m ==> Parameters: 
2022-07-20 09:33:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772569272946688[0;39m <==    Updates: 7
2022-07-20 09:33:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204772569272946688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:33:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772569281335296[0;39m 生成今日电子书快照开始
2022-07-20 09:33:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772569281335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772569281335296[0;39m ==> Parameters: 
2022-07-20 09:33:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772569281335296[0;39m <==    Updates: 0
2022-07-20 09:33:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772569281335296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:33:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772590248660992[0;39m 生成今日电子书快照开始
2022-07-20 09:33:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772590248660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772590248660992[0;39m ==> Parameters: 
2022-07-20 09:33:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772590248660992[0;39m <==    Updates: 0
2022-07-20 09:33:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772590248660992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:33:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772611211792384[0;39m 生成今日电子书快照开始
2022-07-20 09:33:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772611211792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772611211792384[0;39m ==> Parameters: 
2022-07-20 09:33:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772611211792384[0;39m <==    Updates: 0
2022-07-20 09:33:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772611211792384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:33:18.594 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772626269343744[0;39m ------------- 开始 -------------
2022-07-20 09:33:18.594 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772626269343744[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-20 09:33:18.594 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772626269343744[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-20 09:33:18.594 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772626269343744[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:18.596 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772626269343744[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-20 09:33:18.800 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204772626269343744[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-20 09:33:18.801 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204772626269343744[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-20 09:33:18.803 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204772626269343744[0;39m <==    Columns: count(0)
2022-07-20 09:33:18.803 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204772626269343744[0;39m <==        Row: 1
2022-07-20 09:33:18.804 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204772626269343744[0;39m <==      Total: 1
2022-07-20 09:33:18.806 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204772626269343744[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-20 09:33:18.807 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204772626269343744[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-20 09:33:18.808 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772626269343744[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-20 09:33:18.808 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772626269343744[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 13, 42, 12
2022-07-20 09:33:18.809 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204772626269343744[0;39m <==      Total: 1
2022-07-20 09:33:18.810 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m204772626269343744[0;39m 总行数：1
2022-07-20 09:33:18.810 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m204772626269343744[0;39m 总页数：1
2022-07-20 09:33:18.818 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772626269343744[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":13,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":42,"voteCount":12}],"total":1},"success":true}
2022-07-20 09:33:18.818 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772626269343744[0;39m ------------- 结束 耗时：224 ms -------------
2022-07-20 09:33:19.891 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772631709356032[0;39m ------------- 开始 -------------
2022-07-20 09:33:19.891 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772631709356032[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 09:33:19.891 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772631709356032[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 09:33:19.891 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772631709356032[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:19.891 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772631709356032[0;39m 请求参数: [202714600712572928]
2022-07-20 09:33:19.897 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204772631709356032[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 09:33:19.897 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204772631709356032[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 09:33:19.898 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 09:33:19.899 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 8, 1
2022-07-20 09:33:19.899 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 1, 0
2022-07-20 09:33:19.899 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 6, 1
2022-07-20 09:33:19.899 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 09:33:19.900 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 09:33:19.900 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 09:33:19.900 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 09:33:19.901 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 09:33:19.901 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 09:33:19.901 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 09:33:19.901 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 09:33:19.902 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 09:33:19.902 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772631709356032[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 09:33:19.902 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204772631709356032[0;39m <==      Total: 13
2022-07-20 09:33:19.910 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772631709356032[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":6,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 09:33:19.910 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772631709356032[0;39m ------------- 结束 耗时：19 ms -------------
2022-07-20 09:33:19.930 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772631872933888[0;39m ------------- 开始 -------------
2022-07-20 09:33:19.930 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772631872933888[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-20 09:33:19.931 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772631872933888[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 09:33:19.931 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772631872933888[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:19.931 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772631872933888[0;39m 请求参数: [202714909656616960]
2022-07-20 09:33:19.932 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772631872933888[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 09:33:19.932 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772631872933888[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-20 09:33:19.938 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772631872933888[0;39m <==    Columns: id, content
2022-07-20 09:33:19.939 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772631872933888[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-20 09:33:19.939 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772631872933888[0;39m <==      Total: 1
2022-07-20 09:33:19.940 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772631872933888[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 09:33:19.940 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772631872933888[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-20 09:33:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772632204283904[0;39m 生成今日电子书快照开始
2022-07-20 09:33:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772632204283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772632204283904[0;39m ==> Parameters: 
2022-07-20 09:33:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772632204283904[0;39m <==    Updates: 0
2022-07-20 09:33:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772632204283904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:33:20.034 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772631872933888[0;39m <==    Updates: 1
2022-07-20 09:33:20.034 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772631872933888[0;39m 返回结果: {"content":"","success":true}
2022-07-20 09:33:20.034 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772631872933888[0;39m ------------- 结束 耗时：104 ms -------------
2022-07-20 09:33:21.317 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772637690433536[0;39m ------------- 开始 -------------
2022-07-20 09:33:21.317 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772637690433536[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/203684795593658368 GET
2022-07-20 09:33:21.317 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772637690433536[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 09:33:21.317 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772637690433536[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:21.317 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772637690433536[0;39m 请求参数: [203684795593658368]
2022-07-20 09:33:21.318 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772637690433536[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 09:33:21.318 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772637690433536[0;39m ==> Parameters: 203684795593658368(Long)
2022-07-20 09:33:21.319 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772637690433536[0;39m <==    Columns: id, content
2022-07-20 09:33:21.319 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772637690433536[0;39m <==        Row: 203684795593658368, <<BLOB>>
2022-07-20 09:33:21.320 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772637690433536[0;39m <==      Total: 1
2022-07-20 09:33:21.320 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772637690433536[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 09:33:21.321 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772637690433536[0;39m ==> Parameters: 203684795593658368(Long)
2022-07-20 09:33:21.340 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772637690433536[0;39m <==    Updates: 1
2022-07-20 09:33:21.340 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772637690433536[0;39m 返回结果: {"content":"<blockquote><h2 id=\"3151e\"><font face=\"仿宋\" style=\"\"><b>前端：</b>Vue CLI(生成一个前端框架)、Vue3、Ant Design Vue(UI组件)、router、vuex、axios</font></h2><div></div><h2><font id=\"zkp4h\"><b style=\"font-family: 楷体;\">后端：</b><font face=\"仿宋\">SpringBoot核心知识体系AOP、拦截器、过滤器、异步化、定时任务、websocket、多环境、缓存、消息队列...</font></font></h2><br></blockquote>","success":true}
2022-07-20 09:33:21.340 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772637690433536[0;39m ------------- 结束 耗时：23 ms -------------
2022-07-20 09:33:24.079 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772649275101184[0;39m ------------- 开始 -------------
2022-07-20 09:33:24.079 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772649275101184[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 09:33:24.080 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772649275101184[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 09:33:24.080 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772649275101184[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:24.080 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772649275101184[0;39m 请求参数: [202715069841281024]
2022-07-20 09:33:24.080 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772649275101184[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 09:33:24.081 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772649275101184[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 09:33:24.082 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772649275101184[0;39m <==    Columns: id, content
2022-07-20 09:33:24.082 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772649275101184[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 09:33:24.083 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772649275101184[0;39m <==      Total: 1
2022-07-20 09:33:24.083 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772649275101184[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 09:33:24.084 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772649275101184[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 09:33:24.102 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772649275101184[0;39m <==    Updates: 1
2022-07-20 09:33:24.103 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772649275101184[0;39m 返回结果: {"content":"","success":true}
2022-07-20 09:33:24.103 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772649275101184[0;39m ------------- 结束 耗时：24 ms -------------
2022-07-20 09:33:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772653150638080[0;39m 生成今日电子书快照开始
2022-07-20 09:33:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772653150638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772653150638080[0;39m ==> Parameters: 
2022-07-20 09:33:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772653150638080[0;39m <==    Updates: 0
2022-07-20 09:33:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772653150638080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:33:26.138 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772657911173120[0;39m ------------- 开始 -------------
2022-07-20 09:33:26.138 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772657911173120[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/203684795593658368 GET
2022-07-20 09:33:26.138 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772657911173120[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 09:33:26.138 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772657911173120[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:26.138 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772657911173120[0;39m 请求参数: [203684795593658368]
2022-07-20 09:33:26.139 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772657911173120[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 09:33:26.139 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772657911173120[0;39m ==> Parameters: 203684795593658368(Long)
2022-07-20 09:33:26.140 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772657911173120[0;39m <==    Columns: id, content
2022-07-20 09:33:26.140 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772657911173120[0;39m <==        Row: 203684795593658368, <<BLOB>>
2022-07-20 09:33:26.141 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772657911173120[0;39m <==      Total: 1
2022-07-20 09:33:26.141 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772657911173120[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 09:33:26.141 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772657911173120[0;39m ==> Parameters: 203684795593658368(Long)
2022-07-20 09:33:26.163 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772657911173120[0;39m <==    Updates: 1
2022-07-20 09:33:26.163 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772657911173120[0;39m 返回结果: {"content":"<blockquote><h2 id=\"3151e\"><font face=\"仿宋\" style=\"\"><b>前端：</b>Vue CLI(生成一个前端框架)、Vue3、Ant Design Vue(UI组件)、router、vuex、axios</font></h2><div></div><h2><font id=\"zkp4h\"><b style=\"font-family: 楷体;\">后端：</b><font face=\"仿宋\">SpringBoot核心知识体系AOP、拦截器、过滤器、异步化、定时任务、websocket、多环境、缓存、消息队列...</font></font></h2><br></blockquote>","success":true}
2022-07-20 09:33:26.163 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772657911173120[0;39m ------------- 结束 耗时：25 ms -------------
2022-07-20 09:33:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772674159906816[0;39m 生成今日电子书快照开始
2022-07-20 09:33:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772674159906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772674159906816[0;39m ==> Parameters: 
2022-07-20 09:33:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772674159906816[0;39m <==    Updates: 0
2022-07-20 09:33:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772674159906816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:33:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204772695106260992[0;39m 更新电子书下的文档数据开始
2022-07-20 09:33:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772695106260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:33:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772695106260992[0;39m ==> Parameters: 
2022-07-20 09:33:35.058 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772695106260992[0;39m <==    Updates: 7
2022-07-20 09:33:35.058 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204772695106260992[0;39m 更新电子书下的文档数据结束，耗时：52 毫秒
2022-07-20 09:33:35.058 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772695324364800[0;39m 生成今日电子书快照开始
2022-07-20 09:33:35.059 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772695324364800[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:35.059 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772695324364800[0;39m ==> Parameters: 
2022-07-20 09:33:35.089 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772695324364800[0;39m <==    Updates: 0
2022-07-20 09:33:35.090 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772695324364800[0;39m 生成今日电子书快照结束，耗时：32 毫秒
2022-07-20 09:33:36.325 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772700638547968[0;39m ------------- 开始 -------------
2022-07-20 09:33:36.325 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772700638547968[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/login POST
2022-07-20 09:33:36.325 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772700638547968[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.login
2022-07-20 09:33:36.325 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772700638547968[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:36.326 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772700638547968[0;39m 请求参数: [{"loginName":"test"}]
2022-07-20 09:33:36.332 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m204772700638547968[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki WHERE ( login_name = ? )
2022-07-20 09:33:36.332 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m204772700638547968[0;39m ==> Parameters: test(String)
2022-07-20 09:33:36.337 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m204772700638547968[0;39m <==    Columns: id, login_name, name, password
2022-07-20 09:33:36.337 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m204772700638547968[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-20 09:33:36.337 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m204772700638547968[0;39m <==      Total: 1
2022-07-20 09:33:36.342 INFO  com.zs.wikibb.controller.UserwikiController       :83  
                [32m204772700638547968[0;39m 生成单点登录token，并放入redis中
2022-07-20 09:33:37.431 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772700638547968[0;39m 返回结果: {"content":{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"},"success":true}
2022-07-20 09:33:37.431 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772700638547968[0;39m ------------- 结束 耗时：1106 ms -------------
2022-07-20 09:33:39.019 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772711938002944[0;39m ------------- 开始 -------------
2022-07-20 09:33:39.020 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772711938002944[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-20 09:33:39.020 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772711938002944[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-20 09:33:39.020 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772711938002944[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:39.020 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772711938002944[0;39m 请求参数: []
2022-07-20 09:33:39.021 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204772711938002944[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-20 09:33:39.021 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204772711938002944[0;39m ==> Parameters: 
2022-07-20 09:33:39.022 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==    Columns: id, parent, name, sort
2022-07-20 09:33:39.023 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-20 09:33:39.023 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 101, 100, Vue, 101
2022-07-20 09:33:39.024 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-20 09:33:39.024 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 200, 0, Java, 200
2022-07-20 09:33:39.024 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-20 09:33:39.025 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-20 09:33:39.025 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-20 09:33:39.025 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 300, 0, Python, 300
2022-07-20 09:33:39.026 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-20 09:33:39.026 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-20 09:33:39.026 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-20 09:33:39.027 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-20 09:33:39.027 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 500, 0, 其它, 500
2022-07-20 09:33:39.027 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-20 09:33:39.028 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-20 09:33:39.028 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204772711938002944[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-20 09:33:39.028 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204772711938002944[0;39m <==      Total: 16
2022-07-20 09:33:39.029 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772711938002944[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-20 09:33:39.030 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772711938002944[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-20 09:33:39.045 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772712047054848[0;39m ------------- 开始 -------------
2022-07-20 09:33:39.045 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772712047054848[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-20 09:33:39.045 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772712047054848[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-20 09:33:39.045 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772712047054848[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:39.046 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772712047054848[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-20 09:33:39.048 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204772712047054848[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-20 09:33:39.048 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204772712047054848[0;39m ==> Parameters: 
2022-07-20 09:33:39.055 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204772712047054848[0;39m <==    Columns: count(0)
2022-07-20 09:33:39.055 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204772712047054848[0;39m <==        Row: 7
2022-07-20 09:33:39.056 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204772712047054848[0;39m <==      Total: 1
2022-07-20 09:33:39.056 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204772712047054848[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-20 09:33:39.057 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204772712047054848[0;39m ==> Parameters: 4(Integer)
2022-07-20 09:33:39.058 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772712047054848[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-20 09:33:39.059 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772712047054848[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 69, 13
2022-07-20 09:33:39.059 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772712047054848[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-20 09:33:39.059 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772712047054848[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-20 09:33:39.060 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772712047054848[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 0
2022-07-20 09:33:39.060 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204772712047054848[0;39m <==      Total: 4
2022-07-20 09:33:39.060 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m204772712047054848[0;39m 总行数：7
2022-07-20 09:33:39.061 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m204772712047054848[0;39m 总页数：2
2022-07-20 09:33:39.061 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772712047054848[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":69,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":1,"voteCount":0}],"total":7},"success":true}
2022-07-20 09:33:39.061 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772712047054848[0;39m ------------- 结束 耗时：16 ms -------------
2022-07-20 09:33:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772716107141120[0;39m 生成今日电子书快照开始
2022-07-20 09:33:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772716107141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772716107141120[0;39m ==> Parameters: 
2022-07-20 09:33:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772716107141120[0;39m <==    Updates: 0
2022-07-20 09:33:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772716107141120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:33:40.864 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772719676493824[0;39m ------------- 开始 -------------
2022-07-20 09:33:40.864 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772719676493824[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-20 09:33:40.864 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772719676493824[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-20 09:33:40.864 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772719676493824[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:40.865 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772719676493824[0;39m 请求参数: [{"page":2,"size":4}]
2022-07-20 09:33:40.867 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204772719676493824[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-20 09:33:40.867 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204772719676493824[0;39m ==> Parameters: 
2022-07-20 09:33:40.868 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204772719676493824[0;39m <==    Columns: count(0)
2022-07-20 09:33:40.868 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204772719676493824[0;39m <==        Row: 7
2022-07-20 09:33:40.868 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204772719676493824[0;39m <==      Total: 1
2022-07-20 09:33:40.869 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204772719676493824[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2022-07-20 09:33:40.869 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204772719676493824[0;39m ==> Parameters: 4(Long), 4(Integer)
2022-07-20 09:33:40.870 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772719676493824[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-20 09:33:40.870 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772719676493824[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2022-07-20 09:33:40.871 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772719676493824[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 5, 1
2022-07-20 09:33:40.871 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204772719676493824[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 13, 46, 12
2022-07-20 09:33:40.872 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204772719676493824[0;39m <==      Total: 3
2022-07-20 09:33:40.872 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m204772719676493824[0;39m 总行数：7
2022-07-20 09:33:40.872 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m204772719676493824[0;39m 总页数：2
2022-07-20 09:33:40.872 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772719676493824[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":5,"voteCount":1},{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":13,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":46,"voteCount":12}],"total":7},"success":true}
2022-07-20 09:33:40.873 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772719676493824[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-20 09:33:42.316 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772725766623232[0;39m ------------- 开始 -------------
2022-07-20 09:33:42.317 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772725766623232[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 09:33:42.317 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772725766623232[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 09:33:42.317 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772725766623232[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:42.318 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772725766623232[0;39m 请求参数: [202714600712572928]
2022-07-20 09:33:42.319 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204772725766623232[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 09:33:42.319 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204772725766623232[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 09:33:42.321 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 09:33:42.321 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 9, 1
2022-07-20 09:33:42.321 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 3, 0
2022-07-20 09:33:42.322 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 7, 1
2022-07-20 09:33:42.324 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 09:33:42.324 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 09:33:42.324 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 09:33:42.325 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 09:33:42.325 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 09:33:42.325 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 09:33:42.326 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 09:33:42.326 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 09:33:42.326 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 09:33:42.327 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204772725766623232[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 09:33:42.327 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204772725766623232[0;39m <==      Total: 13
2022-07-20 09:33:42.332 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772725766623232[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":9,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":7,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 09:33:42.332 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772725766623232[0;39m ------------- 结束 耗时：16 ms -------------
2022-07-20 09:33:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772737049300992[0;39m 生成今日电子书快照开始
2022-07-20 09:33:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772737049300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772737049300992[0;39m ==> Parameters: 
2022-07-20 09:33:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772737049300992[0;39m <==    Updates: 0
2022-07-20 09:33:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772737049300992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:33:45.863 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772740643819520[0;39m ------------- 开始 -------------
2022-07-20 09:33:45.863 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772740643819520[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 09:33:45.863 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772740643819520[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 09:33:45.863 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772740643819520[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:45.864 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772740643819520[0;39m 请求参数: [202715069841281024]
2022-07-20 09:33:45.864 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772740643819520[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 09:33:45.865 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772740643819520[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 09:33:45.866 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772740643819520[0;39m <==    Columns: id, content
2022-07-20 09:33:45.866 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772740643819520[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 09:33:45.866 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772740643819520[0;39m <==      Total: 1
2022-07-20 09:33:45.867 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772740643819520[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 09:33:45.867 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772740643819520[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 09:33:45.954 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772740643819520[0;39m <==    Updates: 1
2022-07-20 09:33:45.954 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772740643819520[0;39m 返回结果: {"content":"","success":true}
2022-07-20 09:33:45.955 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772740643819520[0;39m ------------- 结束 耗时：92 ms -------------
2022-07-20 09:33:48.061 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204772626269343744[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 09:33:48.061 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204772626269343744[0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2022-07-20 09:33:48.063 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204772711938002944[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 09:33:48.063 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m204772711938002944[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 09:33:48.063 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m204772711938002944[0;39m 登录校验开始，token：204772700709851136
2022-07-20 09:33:48.098 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m204772711938002944[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 09:33:48.118 WARN  c.zs.wikibb.controller.ControllerExceptionHandler :30  
                [32m204772711938002944[0;39m 参数校验失败：【顺序】不能为空！
2022-07-20 09:33:48.119 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m204772711938002944[0;39m Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.zs.wikibb.resp.CommonResp com.zs.wikibb.controller.DocController.save(com.zs.wikibb.req.DocSaveReq) with 3 errors: [Field error in object 'docSaveReq' on field 'sort': rejected value [null]; codes [NotNull.docSaveReq.sort,NotNull.sort,NotNull.java.lang.Integer,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [docSaveReq.sort,sort]; arguments []; default message [sort]]; default message [【顺序】不能为空！]] [Field error in object 'docSaveReq' on field 'parent': rejected value [null]; codes [NotNull.docSaveReq.parent,NotNull.parent,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [docSaveReq.parent,parent]; arguments []; default message [parent]]; default message [【父文档】不能为空！]] [Field error in object 'docSaveReq' on field 'name': rejected value [null]; codes [NotNull.docSaveReq.name,NotNull.name,NotNull.java.lang.String,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [docSaveReq.name,name]; arguments []; default message [name]]; default message [【名称】不能为空！]] ]
2022-07-20 09:33:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772758050181120[0;39m 生成今日电子书快照开始
2022-07-20 09:33:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772758050181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772758050181120[0;39m ==> Parameters: 
2022-07-20 09:33:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772758050181120[0;39m <==    Updates: 0
2022-07-20 09:33:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772758050181120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:33:54.841 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204772778300280832[0;39m ------------- 开始 -------------
2022-07-20 09:33:54.842 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204772778300280832[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 09:33:54.842 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204772778300280832[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 09:33:54.842 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204772778300280832[0;39m 远程地址: 127.0.0.1
2022-07-20 09:33:54.842 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204772778300280832[0;39m 请求参数: [202715069841281024]
2022-07-20 09:33:54.843 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772778300280832[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 09:33:54.843 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772778300280832[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 09:33:54.844 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772778300280832[0;39m <==    Columns: id, content
2022-07-20 09:33:54.845 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204772778300280832[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 09:33:54.845 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204772778300280832[0;39m <==      Total: 1
2022-07-20 09:33:54.846 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772778300280832[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 09:33:54.846 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772778300280832[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 09:33:54.871 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204772778300280832[0;39m <==    Updates: 1
2022-07-20 09:33:54.872 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204772778300280832[0;39m 返回结果: {"content":"","success":true}
2022-07-20 09:33:54.872 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204772778300280832[0;39m ------------- 结束 耗时：31 ms -------------
2022-07-20 09:33:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772778996535296[0;39m 生成今日电子书快照开始
2022-07-20 09:33:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772778996535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:33:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772778996535296[0;39m ==> Parameters: 
2022-07-20 09:33:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772778996535296[0;39m <==    Updates: 0
2022-07-20 09:33:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772778996535296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:34:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772799942889472[0;39m 生成今日电子书快照开始
2022-07-20 09:34:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772799942889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772799942889472[0;39m ==> Parameters: 
2022-07-20 09:34:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772799942889472[0;39m <==    Updates: 0
2022-07-20 09:34:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772799942889472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:34:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204772820922798080[0;39m 更新电子书下的文档数据开始
2022-07-20 09:34:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772820922798080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:34:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772820922798080[0;39m ==> Parameters: 
2022-07-20 09:34:05.070 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772820922798080[0;39m <==    Updates: 7
2022-07-20 09:34:05.070 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204772820922798080[0;39m 更新电子书下的文档数据结束，耗时：67 毫秒
2022-07-20 09:34:05.070 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772821203816448[0;39m 生成今日电子书快照开始
2022-07-20 09:34:05.071 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772821203816448[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:05.071 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772821203816448[0;39m ==> Parameters: 
2022-07-20 09:34:05.102 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772821203816448[0;39m <==    Updates: 0
2022-07-20 09:34:05.102 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772821203816448[0;39m 生成今日电子书快照结束，耗时：31 毫秒
2022-07-20 09:34:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772841894318080[0;39m 生成今日电子书快照开始
2022-07-20 09:34:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772841894318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772841894318080[0;39m ==> Parameters: 
2022-07-20 09:34:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772841894318080[0;39m <==    Updates: 0
2022-07-20 09:34:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772841894318080[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 09:34:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772862861643776[0;39m 生成今日电子书快照开始
2022-07-20 09:34:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772862861643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772862861643776[0;39m ==> Parameters: 
2022-07-20 09:34:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772862861643776[0;39m <==    Updates: 0
2022-07-20 09:34:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772862861643776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:34:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772883845746688[0;39m 生成今日电子书快照开始
2022-07-20 09:34:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772883845746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772883845746688[0;39m ==> Parameters: 
2022-07-20 09:34:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772883845746688[0;39m <==    Updates: 0
2022-07-20 09:34:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772883845746688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:34:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772904842432512[0;39m 生成今日电子书快照开始
2022-07-20 09:34:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772904842432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772904842432512[0;39m ==> Parameters: 
2022-07-20 09:34:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772904842432512[0;39m <==    Updates: 0
2022-07-20 09:34:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772904842432512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:34:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772925788786688[0;39m 生成今日电子书快照开始
2022-07-20 09:34:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772925788786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772925788786688[0;39m ==> Parameters: 
2022-07-20 09:34:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772925788786688[0;39m <==    Updates: 0
2022-07-20 09:34:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772925788786688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:34:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772946810638336[0;39m 生成今日电子书快照开始
2022-07-20 09:34:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772946810638336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772946810638336[0;39m ==> Parameters: 
2022-07-20 09:34:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772946810638336[0;39m <==    Updates: 0
2022-07-20 09:34:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772946810638336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:34:35.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204772946819026944[0;39m 更新电子书下的文档数据开始
2022-07-20 09:34:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772946819026944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:34:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772946819026944[0;39m ==> Parameters: 
2022-07-20 09:34:35.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204772946819026944[0;39m <==    Updates: 7
2022-07-20 09:34:35.021 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204772946819026944[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:34:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772967731826688[0;39m 生成今日电子书快照开始
2022-07-20 09:34:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772967731826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772967731826688[0;39m ==> Parameters: 
2022-07-20 09:34:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772967731826688[0;39m <==    Updates: 0
2022-07-20 09:34:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772967731826688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:34:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204772988736901120[0;39m 生成今日电子书快照开始
2022-07-20 09:34:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772988736901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772988736901120[0;39m ==> Parameters: 
2022-07-20 09:34:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204772988736901120[0;39m <==    Updates: 0
2022-07-20 09:34:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204772988736901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:34:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773009687449600[0;39m 生成今日电子书快照开始
2022-07-20 09:34:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773009687449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773009687449600[0;39m ==> Parameters: 
2022-07-20 09:34:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773009687449600[0;39m <==    Updates: 0
2022-07-20 09:34:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773009687449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:34:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773030650580992[0;39m 生成今日电子书快照开始
2022-07-20 09:34:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773030650580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:34:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773030650580992[0;39m ==> Parameters: 
2022-07-20 09:34:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773030650580992[0;39m <==    Updates: 0
2022-07-20 09:34:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773030650580992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:35:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773051643072512[0;39m 生成今日电子书快照开始
2022-07-20 09:35:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773051643072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773051643072512[0;39m ==> Parameters: 
2022-07-20 09:35:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773051643072512[0;39m <==    Updates: 0
2022-07-20 09:35:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773051643072512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:35:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204773072597815296[0;39m 更新电子书下的文档数据开始
2022-07-20 09:35:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773072597815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:35:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773072597815296[0;39m ==> Parameters: 
2022-07-20 09:35:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773072597815296[0;39m <==    Updates: 7
2022-07-20 09:35:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204773072597815296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:35:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773072606203904[0;39m 生成今日电子书快照开始
2022-07-20 09:35:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773072606203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773072606203904[0;39m ==> Parameters: 
2022-07-20 09:35:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773072606203904[0;39m <==    Updates: 0
2022-07-20 09:35:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773072606203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:35:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773093548363776[0;39m 生成今日电子书快照开始
2022-07-20 09:35:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773093548363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773093548363776[0;39m ==> Parameters: 
2022-07-20 09:35:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773093548363776[0;39m <==    Updates: 0
2022-07-20 09:35:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773093548363776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:35:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773114515689472[0;39m 生成今日电子书快照开始
2022-07-20 09:35:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773114515689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773114515689472[0;39m ==> Parameters: 
2022-07-20 09:35:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773114515689472[0;39m <==    Updates: 0
2022-07-20 09:35:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773114515689472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:35:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773135503986688[0;39m 生成今日电子书快照开始
2022-07-20 09:35:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773135503986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773135503986688[0;39m ==> Parameters: 
2022-07-20 09:35:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773135503986688[0;39m <==    Updates: 0
2022-07-20 09:35:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773135503986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:35:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773156492283904[0;39m 生成今日电子书快照开始
2022-07-20 09:35:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773156492283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773156492283904[0;39m ==> Parameters: 
2022-07-20 09:35:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773156492283904[0;39m <==    Updates: 0
2022-07-20 09:35:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773156492283904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:35:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773177434443776[0;39m 生成今日电子书快照开始
2022-07-20 09:35:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773177434443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773177434443776[0;39m ==> Parameters: 
2022-07-20 09:35:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773177434443776[0;39m <==    Updates: 0
2022-07-20 09:35:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773177434443776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:35:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773198426935296[0;39m 生成今日电子书快照开始
2022-07-20 09:35:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773198426935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773198426935296[0;39m ==> Parameters: 
2022-07-20 09:35:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773198426935296[0;39m <==    Updates: 0
2022-07-20 09:35:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773198426935296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:35:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204773198439518208[0;39m 更新电子书下的文档数据开始
2022-07-20 09:35:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773198439518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:35:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773198439518208[0;39m ==> Parameters: 
2022-07-20 09:35:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773198439518208[0;39m <==    Updates: 7
2022-07-20 09:35:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204773198439518208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:35:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773219394260992[0;39m 生成今日电子书快照开始
2022-07-20 09:35:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773219394260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773219394260992[0;39m ==> Parameters: 
2022-07-20 09:35:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773219394260992[0;39m <==    Updates: 0
2022-07-20 09:35:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773219394260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:35:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773240349003776[0;39m 生成今日电子书快照开始
2022-07-20 09:35:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773240349003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773240349003776[0;39m ==> Parameters: 
2022-07-20 09:35:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773240349003776[0;39m <==    Updates: 0
2022-07-20 09:35:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773240349003776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:35:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773261324718080[0;39m 生成今日电子书快照开始
2022-07-20 09:35:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773261324718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773261324718080[0;39m ==> Parameters: 
2022-07-20 09:35:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773261324718080[0;39m <==    Updates: 0
2022-07-20 09:35:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773261324718080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:35:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773282325598208[0;39m 生成今日电子书快照开始
2022-07-20 09:35:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773282325598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:35:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773282325598208[0;39m ==> Parameters: 
2022-07-20 09:35:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773282325598208[0;39m <==    Updates: 0
2022-07-20 09:35:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773282325598208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:36:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773303280340992[0;39m 生成今日电子书快照开始
2022-07-20 09:36:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773303280340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773303280340992[0;39m ==> Parameters: 
2022-07-20 09:36:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773303280340992[0;39m <==    Updates: 0
2022-07-20 09:36:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773303280340992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:36:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204773324277026816[0;39m 更新电子书下的文档数据开始
2022-07-20 09:36:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773324277026816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:36:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773324277026816[0;39m ==> Parameters: 
2022-07-20 09:36:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773324277026816[0;39m <==    Updates: 7
2022-07-20 09:36:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204773324277026816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:36:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773324281221120[0;39m 生成今日电子书快照开始
2022-07-20 09:36:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773324281221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773324281221120[0;39m ==> Parameters: 
2022-07-20 09:36:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773324281221120[0;39m <==    Updates: 0
2022-07-20 09:36:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773324281221120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:36:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773345223380992[0;39m 生成今日电子书快照开始
2022-07-20 09:36:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773345223380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773345223380992[0;39m ==> Parameters: 
2022-07-20 09:36:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773345223380992[0;39m <==    Updates: 0
2022-07-20 09:36:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773345223380992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:36:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773366211678208[0;39m 生成今日电子书快照开始
2022-07-20 09:36:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773366211678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773366211678208[0;39m ==> Parameters: 
2022-07-20 09:36:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773366211678208[0;39m <==    Updates: 0
2022-07-20 09:36:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773366211678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:36:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773387162226688[0;39m 生成今日电子书快照开始
2022-07-20 09:36:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773387162226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773387162226688[0;39m ==> Parameters: 
2022-07-20 09:36:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773387162226688[0;39m <==    Updates: 0
2022-07-20 09:36:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773387162226688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:36:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773408137940992[0;39m 生成今日电子书快照开始
2022-07-20 09:36:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773408137940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773408137940992[0;39m ==> Parameters: 
2022-07-20 09:36:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773408137940992[0;39m <==    Updates: 0
2022-07-20 09:36:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773408137940992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:36:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773429113655296[0;39m 生成今日电子书快照开始
2022-07-20 09:36:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773429113655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773429113655296[0;39m ==> Parameters: 
2022-07-20 09:36:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773429113655296[0;39m <==    Updates: 0
2022-07-20 09:36:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773429113655296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:36:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773450072592384[0;39m 生成今日电子书快照开始
2022-07-20 09:36:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773450072592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773450072592384[0;39m ==> Parameters: 
2022-07-20 09:36:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773450072592384[0;39m <==    Updates: 0
2022-07-20 09:36:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773450072592384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:36:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204773450085175296[0;39m 更新电子书下的文档数据开始
2022-07-20 09:36:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773450085175296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:36:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773450085175296[0;39m ==> Parameters: 
2022-07-20 09:36:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773450085175296[0;39m <==    Updates: 7
2022-07-20 09:36:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204773450085175296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:36:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773471027335168[0;39m 生成今日电子书快照开始
2022-07-20 09:36:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773471027335168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773471027335168[0;39m ==> Parameters: 
2022-07-20 09:36:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773471027335168[0;39m <==    Updates: 0
2022-07-20 09:36:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773471027335168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:36:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773492032409600[0;39m 生成今日电子书快照开始
2022-07-20 09:36:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773492032409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773492032409600[0;39m ==> Parameters: 
2022-07-20 09:36:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773492032409600[0;39m <==    Updates: 0
2022-07-20 09:36:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773492032409600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:36:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773512974569472[0;39m 生成今日电子书快照开始
2022-07-20 09:36:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773512974569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773512974569472[0;39m ==> Parameters: 
2022-07-20 09:36:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773512974569472[0;39m <==    Updates: 0
2022-07-20 09:36:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773512974569472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:36:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773533958672384[0;39m 生成今日电子书快照开始
2022-07-20 09:36:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773533958672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:36:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773533958672384[0;39m ==> Parameters: 
2022-07-20 09:36:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773533958672384[0;39m <==    Updates: 0
2022-07-20 09:36:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773533958672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:37:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773554946969600[0;39m 生成今日电子书快照开始
2022-07-20 09:37:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773554946969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773554946969600[0;39m ==> Parameters: 
2022-07-20 09:37:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773554946969600[0;39m <==    Updates: 0
2022-07-20 09:37:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773554946969600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:37:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773575905906688[0;39m 生成今日电子书快照开始
2022-07-20 09:37:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773575905906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773575905906688[0;39m ==> Parameters: 
2022-07-20 09:37:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773575905906688[0;39m <==    Updates: 0
2022-07-20 09:37:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773575905906688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:37:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204773575922683904[0;39m 更新电子书下的文档数据开始
2022-07-20 09:37:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773575922683904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:37:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773575922683904[0;39m ==> Parameters: 
2022-07-20 09:37:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773575922683904[0;39m <==    Updates: 7
2022-07-20 09:37:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204773575922683904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:37:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773596894203904[0;39m 生成今日电子书快照开始
2022-07-20 09:37:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773596894203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773596894203904[0;39m ==> Parameters: 
2022-07-20 09:37:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773596894203904[0;39m <==    Updates: 0
2022-07-20 09:37:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773596894203904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:37:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773617857335296[0;39m 生成今日电子书快照开始
2022-07-20 09:37:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773617857335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773617857335296[0;39m ==> Parameters: 
2022-07-20 09:37:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773617857335296[0;39m <==    Updates: 0
2022-07-20 09:37:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773617857335296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:37:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773638854021120[0;39m 生成今日电子书快照开始
2022-07-20 09:37:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773638854021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773638854021120[0;39m ==> Parameters: 
2022-07-20 09:37:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773638854021120[0;39m <==    Updates: 0
2022-07-20 09:37:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773638854021120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:37:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773659775209472[0;39m 生成今日电子书快照开始
2022-07-20 09:37:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773659775209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773659775209472[0;39m ==> Parameters: 
2022-07-20 09:37:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773659775209472[0;39m <==    Updates: 0
2022-07-20 09:37:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773659775209472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:37:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773680759312384[0;39m 生成今日电子书快照开始
2022-07-20 09:37:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773680759312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773680759312384[0;39m ==> Parameters: 
2022-07-20 09:37:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773680759312384[0;39m <==    Updates: 0
2022-07-20 09:37:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773680759312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:37:35.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773701714055168[0;39m 生成今日电子书快照开始
2022-07-20 09:37:35.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773701714055168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773701714055168[0;39m ==> Parameters: 
2022-07-20 09:37:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773701714055168[0;39m <==    Updates: 0
2022-07-20 09:37:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773701714055168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:37:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204773701722443776[0;39m 更新电子书下的文档数据开始
2022-07-20 09:37:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773701722443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:37:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773701722443776[0;39m ==> Parameters: 
2022-07-20 09:37:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773701722443776[0;39m <==    Updates: 7
2022-07-20 09:37:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204773701722443776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:37:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773722710740992[0;39m 生成今日电子书快照开始
2022-07-20 09:37:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773722710740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773722710740992[0;39m ==> Parameters: 
2022-07-20 09:37:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773722710740992[0;39m <==    Updates: 0
2022-07-20 09:37:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773722710740992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:37:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773743686455296[0;39m 生成今日电子书快照开始
2022-07-20 09:37:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773743686455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773743686455296[0;39m ==> Parameters: 
2022-07-20 09:37:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773743686455296[0;39m <==    Updates: 0
2022-07-20 09:37:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773743686455296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:37:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773764691529728[0;39m 生成今日电子书快照开始
2022-07-20 09:37:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773764691529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773764691529728[0;39m ==> Parameters: 
2022-07-20 09:37:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773764691529728[0;39m <==    Updates: 0
2022-07-20 09:37:50.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773764691529728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:37:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773785629495296[0;39m 生成今日电子书快照开始
2022-07-20 09:37:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773785629495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:37:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773785629495296[0;39m ==> Parameters: 
2022-07-20 09:37:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773785629495296[0;39m <==    Updates: 0
2022-07-20 09:37:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773785629495296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:38:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773806605209600[0;39m 生成今日电子书快照开始
2022-07-20 09:38:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773806605209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773806605209600[0;39m ==> Parameters: 
2022-07-20 09:38:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773806605209600[0;39m <==    Updates: 0
2022-07-20 09:38:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773806605209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:38:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204773827593506816[0;39m 更新电子书下的文档数据开始
2022-07-20 09:38:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773827593506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:38:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773827593506816[0;39m ==> Parameters: 
2022-07-20 09:38:05.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773827593506816[0;39m <==    Updates: 7
2022-07-20 09:38:05.021 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204773827593506816[0;39m 更新电子书下的文档数据结束，耗时：8 毫秒
2022-07-20 09:38:05.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773827631255552[0;39m 生成今日电子书快照开始
2022-07-20 09:38:05.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773827631255552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:05.024 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773827631255552[0;39m ==> Parameters: 
2022-07-20 09:38:05.028 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773827631255552[0;39m <==    Updates: 0
2022-07-20 09:38:05.030 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773827631255552[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:38:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773848527278080[0;39m 生成今日电子书快照开始
2022-07-20 09:38:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773848527278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773848527278080[0;39m ==> Parameters: 
2022-07-20 09:38:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773848527278080[0;39m <==    Updates: 0
2022-07-20 09:38:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773848527278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:38:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773869553324032[0;39m 生成今日电子书快照开始
2022-07-20 09:38:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773869553324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773869553324032[0;39m ==> Parameters: 
2022-07-20 09:38:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773869553324032[0;39m <==    Updates: 0
2022-07-20 09:38:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773869553324032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:38:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773890508066816[0;39m 生成今日电子书快照开始
2022-07-20 09:38:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773890508066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773890508066816[0;39m ==> Parameters: 
2022-07-20 09:38:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773890508066816[0;39m <==    Updates: 0
2022-07-20 09:38:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773890508066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:38:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773911441838080[0;39m 生成今日电子书快照开始
2022-07-20 09:38:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773911441838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773911441838080[0;39m ==> Parameters: 
2022-07-20 09:38:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773911441838080[0;39m <==    Updates: 0
2022-07-20 09:38:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773911441838080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:38:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773932417552384[0;39m 生成今日电子书快照开始
2022-07-20 09:38:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773932417552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773932417552384[0;39m ==> Parameters: 
2022-07-20 09:38:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773932417552384[0;39m <==    Updates: 0
2022-07-20 09:38:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773932417552384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:38:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773953414238208[0;39m 生成今日电子书快照开始
2022-07-20 09:38:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773953414238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773953414238208[0;39m ==> Parameters: 
2022-07-20 09:38:35.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773953414238208[0;39m <==    Updates: 0
2022-07-20 09:38:35.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773953414238208[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 09:38:35.023 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204773953468764160[0;39m 更新电子书下的文档数据开始
2022-07-20 09:38:35.024 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773953468764160[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:38:35.025 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773953468764160[0;39m ==> Parameters: 
2022-07-20 09:38:35.028 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204773953468764160[0;39m <==    Updates: 7
2022-07-20 09:38:35.028 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204773953468764160[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 09:38:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773974398341120[0;39m 生成今日电子书快照开始
2022-07-20 09:38:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773974398341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773974398341120[0;39m ==> Parameters: 
2022-07-20 09:38:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773974398341120[0;39m <==    Updates: 0
2022-07-20 09:38:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773974398341120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:38:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204773995319529472[0;39m 生成今日电子书快照开始
2022-07-20 09:38:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773995319529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773995319529472[0;39m ==> Parameters: 
2022-07-20 09:38:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204773995319529472[0;39m <==    Updates: 0
2022-07-20 09:38:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204773995319529472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:38:45.230 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：gpg3iblKtw，session id：0！当前连接数：0
2022-07-20 09:38:45.245 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2022-07-20 09:38:45.353 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-1 - Shutdown completed.
2022-07-20 09:38:45.735 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 15764 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 09:38:45.735 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 09:38:46.005 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 09:38:46.005 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 09:38:46.012 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-07-20 09:38:46.275 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 09:38:46.275 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 09:38:46.276 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 09:38:46.276 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 09:38:46.317 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 09:38:46.317 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 579 ms
2022-07-20 09:38:46.872 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 09:38:46.889 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 09:38:46.892 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 09:38:46.897 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.199 seconds (JVM running for 481.754)
2022-07-20 09:38:46.898 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 09:38:46.899 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 09:38:46.899 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 09:38:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774016295243776[0;39m 生成今日电子书快照开始
2022-07-20 09:38:50.005 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204774016295243776[0;39m HikariPool-2 - Starting...
2022-07-20 09:38:50.016 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204774016295243776[0;39m HikariPool-2 - Start completed.
2022-07-20 09:38:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774016295243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774016295243776[0;39m ==> Parameters: 
2022-07-20 09:38:50.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774016295243776[0;39m <==    Updates: 0
2022-07-20 09:38:50.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774016295243776[0;39m 生成今日电子书快照结束，耗时：15 毫秒
2022-07-20 09:38:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774037308706816[0;39m 生成今日电子书快照开始
2022-07-20 09:38:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774037308706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:38:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774037308706816[0;39m ==> Parameters: 
2022-07-20 09:38:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774037308706816[0;39m <==    Updates: 0
2022-07-20 09:38:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774037308706816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:39:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774058250866688[0;39m 生成今日电子书快照开始
2022-07-20 09:39:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774058250866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774058250866688[0;39m ==> Parameters: 
2022-07-20 09:39:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774058250866688[0;39m <==    Updates: 0
2022-07-20 09:39:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774058250866688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:39:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774079230775296[0;39m 生成今日电子书快照开始
2022-07-20 09:39:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774079230775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774079230775296[0;39m ==> Parameters: 
2022-07-20 09:39:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774079230775296[0;39m <==    Updates: 0
2022-07-20 09:39:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774079230775296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:39:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204774079243358208[0;39m 更新电子书下的文档数据开始
2022-07-20 09:39:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774079243358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:39:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774079243358208[0;39m ==> Parameters: 
2022-07-20 09:39:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774079243358208[0;39m <==    Updates: 7
2022-07-20 09:39:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204774079243358208[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 09:39:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774100219072512[0;39m 生成今日电子书快照开始
2022-07-20 09:39:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774100219072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774100219072512[0;39m ==> Parameters: 
2022-07-20 09:39:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774100219072512[0;39m <==    Updates: 0
2022-07-20 09:39:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774100219072512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:39:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774121182203904[0;39m 生成今日电子书快照开始
2022-07-20 09:39:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774121182203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774121182203904[0;39m ==> Parameters: 
2022-07-20 09:39:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774121182203904[0;39m <==    Updates: 0
2022-07-20 09:39:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774121182203904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:39:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774142170501120[0;39m 生成今日电子书快照开始
2022-07-20 09:39:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774142170501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774142170501120[0;39m ==> Parameters: 
2022-07-20 09:39:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774142170501120[0;39m <==    Updates: 0
2022-07-20 09:39:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774142170501120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:39:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774163100078080[0;39m 生成今日电子书快照开始
2022-07-20 09:39:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774163100078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774163100078080[0;39m ==> Parameters: 
2022-07-20 09:39:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774163100078080[0;39m <==    Updates: 0
2022-07-20 09:39:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774163100078080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:39:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774184088375296[0;39m 生成今日电子书快照开始
2022-07-20 09:39:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774184088375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774184088375296[0;39m ==> Parameters: 
2022-07-20 09:39:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774184088375296[0;39m <==    Updates: 0
2022-07-20 09:39:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774184088375296[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 09:39:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774205034729472[0;39m 生成今日电子书快照开始
2022-07-20 09:39:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774205034729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774205034729472[0;39m ==> Parameters: 
2022-07-20 09:39:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774205034729472[0;39m <==    Updates: 0
2022-07-20 09:39:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774205034729472[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:39:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204774205059895296[0;39m 更新电子书下的文档数据开始
2022-07-20 09:39:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774205059895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:39:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774205059895296[0;39m ==> Parameters: 
2022-07-20 09:39:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774205059895296[0;39m <==    Updates: 7
2022-07-20 09:39:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204774205059895296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:39:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774226039803904[0;39m 生成今日电子书快照开始
2022-07-20 09:39:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774226039803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774226039803904[0;39m ==> Parameters: 
2022-07-20 09:39:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774226039803904[0;39m <==    Updates: 0
2022-07-20 09:39:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774226039803904[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:39:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774246990352384[0;39m 生成今日电子书快照开始
2022-07-20 09:39:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774246990352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774246990352384[0;39m ==> Parameters: 
2022-07-20 09:39:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774246990352384[0;39m <==    Updates: 0
2022-07-20 09:39:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774246990352384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:39:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774267987038208[0;39m 生成今日电子书快照开始
2022-07-20 09:39:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774267987038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774267987038208[0;39m ==> Parameters: 
2022-07-20 09:39:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774267987038208[0;39m <==    Updates: 0
2022-07-20 09:39:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774267987038208[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:39:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774288954363904[0;39m 生成今日电子书快照开始
2022-07-20 09:39:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774288954363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:39:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774288954363904[0;39m ==> Parameters: 
2022-07-20 09:39:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774288954363904[0;39m <==    Updates: 0
2022-07-20 09:39:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774288954363904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:40:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774309904912384[0;39m 生成今日电子书快照开始
2022-07-20 09:40:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774309904912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774309904912384[0;39m ==> Parameters: 
2022-07-20 09:40:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774309904912384[0;39m <==    Updates: 0
2022-07-20 09:40:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774309904912384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:40:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774330914181120[0;39m 生成今日电子书快照开始
2022-07-20 09:40:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774330914181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774330914181120[0;39m ==> Parameters: 
2022-07-20 09:40:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774330914181120[0;39m <==    Updates: 0
2022-07-20 09:40:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774330914181120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:40:05.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204774330939346944[0;39m 更新电子书下的文档数据开始
2022-07-20 09:40:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774330939346944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:40:05.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774330939346944[0;39m ==> Parameters: 
2022-07-20 09:40:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774330939346944[0;39m <==    Updates: 7
2022-07-20 09:40:05.022 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204774330939346944[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:40:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774351860535296[0;39m 生成今日电子书快照开始
2022-07-20 09:40:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774351860535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774351860535296[0;39m ==> Parameters: 
2022-07-20 09:40:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774351860535296[0;39m <==    Updates: 0
2022-07-20 09:40:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774351860535296[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:40:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774372827860992[0;39m 生成今日电子书快照开始
2022-07-20 09:40:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774372827860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774372827860992[0;39m ==> Parameters: 
2022-07-20 09:40:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774372827860992[0;39m <==    Updates: 0
2022-07-20 09:40:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774372827860992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:40:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774393837129728[0;39m 生成今日电子书快照开始
2022-07-20 09:40:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774393837129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774393837129728[0;39m ==> Parameters: 
2022-07-20 09:40:20.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774393837129728[0;39m <==    Updates: 0
2022-07-20 09:40:20.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774393837129728[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:40:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774414766706688[0;39m 生成今日电子书快照开始
2022-07-20 09:40:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774414766706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774414766706688[0;39m ==> Parameters: 
2022-07-20 09:40:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774414766706688[0;39m <==    Updates: 0
2022-07-20 09:40:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774414766706688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:40:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774435759198208[0;39m 生成今日电子书快照开始
2022-07-20 09:40:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774435759198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774435759198208[0;39m ==> Parameters: 
2022-07-20 09:40:30.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774435759198208[0;39m <==    Updates: 0
2022-07-20 09:40:30.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774435759198208[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-20 09:40:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204774456713940992[0;39m 更新电子书下的文档数据开始
2022-07-20 09:40:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774456713940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:40:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774456713940992[0;39m ==> Parameters: 
2022-07-20 09:40:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774456713940992[0;39m <==    Updates: 7
2022-07-20 09:40:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204774456713940992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:40:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774456722329600[0;39m 生成今日电子书快照开始
2022-07-20 09:40:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774456722329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774456722329600[0;39m ==> Parameters: 
2022-07-20 09:40:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774456722329600[0;39m <==    Updates: 0
2022-07-20 09:40:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774456722329600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:40:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774477710626816[0;39m 生成今日电子书快照开始
2022-07-20 09:40:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774477710626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774477710626816[0;39m ==> Parameters: 
2022-07-20 09:40:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774477710626816[0;39m <==    Updates: 0
2022-07-20 09:40:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774477710626816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:40:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774498661175296[0;39m 生成今日电子书快照开始
2022-07-20 09:40:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774498661175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774498661175296[0;39m ==> Parameters: 
2022-07-20 09:40:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774498661175296[0;39m <==    Updates: 0
2022-07-20 09:40:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774498661175296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:40:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774519653666816[0;39m 生成今日电子书快照开始
2022-07-20 09:40:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774519653666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774519653666816[0;39m ==> Parameters: 
2022-07-20 09:40:50.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774519653666816[0;39m <==    Updates: 0
2022-07-20 09:40:50.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774519653666816[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 09:40:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774540591632384[0;39m 生成今日电子书快照开始
2022-07-20 09:40:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774540591632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:40:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774540591632384[0;39m ==> Parameters: 
2022-07-20 09:40:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774540591632384[0;39m <==    Updates: 0
2022-07-20 09:40:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774540591632384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:41:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774561596706816[0;39m 生成今日电子书快照开始
2022-07-20 09:41:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774561596706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774561596706816[0;39m ==> Parameters: 
2022-07-20 09:41:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774561596706816[0;39m <==    Updates: 0
2022-07-20 09:41:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774561596706816[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:41:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774582580809728[0;39m 生成今日电子书快照开始
2022-07-20 09:41:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774582580809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774582580809728[0;39m ==> Parameters: 
2022-07-20 09:41:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774582580809728[0;39m <==    Updates: 0
2022-07-20 09:41:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774582580809728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:41:05.020 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204774582601781248[0;39m 更新电子书下的文档数据开始
2022-07-20 09:41:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774582601781248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:41:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774582601781248[0;39m ==> Parameters: 
2022-07-20 09:41:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774582601781248[0;39m <==    Updates: 7
2022-07-20 09:41:05.022 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204774582601781248[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:41:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774603497803776[0;39m 生成今日电子书快照开始
2022-07-20 09:41:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774603497803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774603497803776[0;39m ==> Parameters: 
2022-07-20 09:41:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774603497803776[0;39m <==    Updates: 0
2022-07-20 09:41:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774603497803776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:41:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774624473518080[0;39m 生成今日电子书快照开始
2022-07-20 09:41:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774624473518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774624473518080[0;39m ==> Parameters: 
2022-07-20 09:41:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774624473518080[0;39m <==    Updates: 0
2022-07-20 09:41:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774624473518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:41:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774645495369728[0;39m 生成今日电子书快照开始
2022-07-20 09:41:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774645495369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774645495369728[0;39m ==> Parameters: 
2022-07-20 09:41:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774645495369728[0;39m <==    Updates: 0
2022-07-20 09:41:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774645495369728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:41:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774666433335296[0;39m 生成今日电子书快照开始
2022-07-20 09:41:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774666433335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774666433335296[0;39m ==> Parameters: 
2022-07-20 09:41:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774666433335296[0;39m <==    Updates: 0
2022-07-20 09:41:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774666433335296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:41:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774687392272384[0;39m 生成今日电子书快照开始
2022-07-20 09:41:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774687392272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774687392272384[0;39m ==> Parameters: 
2022-07-20 09:41:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774687392272384[0;39m <==    Updates: 0
2022-07-20 09:41:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774687392272384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:41:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774708367986688[0;39m 生成今日电子书快照开始
2022-07-20 09:41:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774708367986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774708367986688[0;39m ==> Parameters: 
2022-07-20 09:41:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774708367986688[0;39m <==    Updates: 0
2022-07-20 09:41:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774708367986688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:41:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204774708384763904[0;39m 更新电子书下的文档数据开始
2022-07-20 09:41:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774708384763904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:41:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774708384763904[0;39m ==> Parameters: 
2022-07-20 09:41:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774708384763904[0;39m <==    Updates: 7
2022-07-20 09:41:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204774708384763904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:41:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774729373061120[0;39m 生成今日电子书快照开始
2022-07-20 09:41:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774729373061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774729373061120[0;39m ==> Parameters: 
2022-07-20 09:41:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774729373061120[0;39m <==    Updates: 0
2022-07-20 09:41:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774729373061120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:41:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774750315220992[0;39m 生成今日电子书快照开始
2022-07-20 09:41:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774750315220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774750315220992[0;39m ==> Parameters: 
2022-07-20 09:41:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774750315220992[0;39m <==    Updates: 0
2022-07-20 09:41:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774750315220992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:41:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774771311906816[0;39m 生成今日电子书快照开始
2022-07-20 09:41:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774771311906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774771311906816[0;39m ==> Parameters: 
2022-07-20 09:41:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774771311906816[0;39m <==    Updates: 0
2022-07-20 09:41:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774771311906816[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:41:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774792258260992[0;39m 生成今日电子书快照开始
2022-07-20 09:41:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774792258260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:41:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774792258260992[0;39m ==> Parameters: 
2022-07-20 09:41:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774792258260992[0;39m <==    Updates: 0
2022-07-20 09:41:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774792258260992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:42:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774813229780992[0;39m 生成今日电子书快照开始
2022-07-20 09:42:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774813229780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774813229780992[0;39m ==> Parameters: 
2022-07-20 09:42:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774813229780992[0;39m <==    Updates: 0
2022-07-20 09:42:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774813229780992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:42:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774834188718080[0;39m 生成今日电子书快照开始
2022-07-20 09:42:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774834188718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774834188718080[0;39m ==> Parameters: 
2022-07-20 09:42:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774834188718080[0;39m <==    Updates: 0
2022-07-20 09:42:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774834188718080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:42:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204774834205495296[0;39m 更新电子书下的文档数据开始
2022-07-20 09:42:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774834205495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:42:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774834205495296[0;39m ==> Parameters: 
2022-07-20 09:42:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774834205495296[0;39m <==    Updates: 7
2022-07-20 09:42:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204774834205495296[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:42:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774855197986816[0;39m 生成今日电子书快照开始
2022-07-20 09:42:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774855197986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774855197986816[0;39m ==> Parameters: 
2022-07-20 09:42:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774855197986816[0;39m <==    Updates: 0
2022-07-20 09:42:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774855197986816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:42:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774876156923904[0;39m 生成今日电子书快照开始
2022-07-20 09:42:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774876156923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774876156923904[0;39m ==> Parameters: 
2022-07-20 09:42:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774876156923904[0;39m <==    Updates: 0
2022-07-20 09:42:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774876156923904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:42:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774897132638208[0;39m 生成今日电子书快照开始
2022-07-20 09:42:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774897132638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774897132638208[0;39m ==> Parameters: 
2022-07-20 09:42:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774897132638208[0;39m <==    Updates: 0
2022-07-20 09:42:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774897132638208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:42:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774918095769600[0;39m 生成今日电子书快照开始
2022-07-20 09:42:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774918095769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774918095769600[0;39m ==> Parameters: 
2022-07-20 09:42:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774918095769600[0;39m <==    Updates: 0
2022-07-20 09:42:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774918095769600[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 09:42:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774939050512384[0;39m 生成今日电子书快照开始
2022-07-20 09:42:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774939050512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774939050512384[0;39m ==> Parameters: 
2022-07-20 09:42:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774939050512384[0;39m <==    Updates: 0
2022-07-20 09:42:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774939050512384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:42:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774960047198208[0;39m 生成今日电子书快照开始
2022-07-20 09:42:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774960047198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774960047198208[0;39m ==> Parameters: 
2022-07-20 09:42:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774960047198208[0;39m <==    Updates: 0
2022-07-20 09:42:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774960047198208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:42:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204774960063975424[0;39m 更新电子书下的文档数据开始
2022-07-20 09:42:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774960063975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:42:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774960063975424[0;39m ==> Parameters: 
2022-07-20 09:42:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204774960063975424[0;39m <==    Updates: 7
2022-07-20 09:42:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204774960063975424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:42:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204774981018718208[0;39m 生成今日电子书快照开始
2022-07-20 09:42:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774981018718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774981018718208[0;39m ==> Parameters: 
2022-07-20 09:42:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204774981018718208[0;39m <==    Updates: 0
2022-07-20 09:42:40.110 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204774981018718208[0;39m 生成今日电子书快照结束，耗时：100 毫秒
2022-07-20 09:42:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775001960878080[0;39m 生成今日电子书快照开始
2022-07-20 09:42:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775001960878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775001960878080[0;39m ==> Parameters: 
2022-07-20 09:42:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775001960878080[0;39m <==    Updates: 0
2022-07-20 09:42:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775001960878080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:42:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775022936592384[0;39m 生成今日电子书快照开始
2022-07-20 09:42:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775022936592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775022936592384[0;39m ==> Parameters: 
2022-07-20 09:42:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775022936592384[0;39m <==    Updates: 0
2022-07-20 09:42:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775022936592384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:42:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775043929083904[0;39m 生成今日电子书快照开始
2022-07-20 09:42:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775043929083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:42:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775043929083904[0;39m ==> Parameters: 
2022-07-20 09:42:55.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775043929083904[0;39m <==    Updates: 0
2022-07-20 09:42:55.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775043929083904[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-20 09:43:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775064896409600[0;39m 生成今日电子书快照开始
2022-07-20 09:43:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775064896409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775064896409600[0;39m ==> Parameters: 
2022-07-20 09:43:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775064896409600[0;39m <==    Updates: 0
2022-07-20 09:43:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775064896409600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:43:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775085838569472[0;39m 生成今日电子书快照开始
2022-07-20 09:43:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775085838569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775085838569472[0;39m ==> Parameters: 
2022-07-20 09:43:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775085838569472[0;39m <==    Updates: 0
2022-07-20 09:43:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775085838569472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:43:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204775085851152384[0;39m 更新电子书下的文档数据开始
2022-07-20 09:43:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775085851152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:43:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775085851152384[0;39m ==> Parameters: 
2022-07-20 09:43:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775085851152384[0;39m <==    Updates: 7
2022-07-20 09:43:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204775085851152384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:43:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775106847838208[0;39m 生成今日电子书快照开始
2022-07-20 09:43:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775106847838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775106847838208[0;39m ==> Parameters: 
2022-07-20 09:43:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775106847838208[0;39m <==    Updates: 0
2022-07-20 09:43:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775106847838208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:43:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775127831941120[0;39m 生成今日电子书快照开始
2022-07-20 09:43:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775127831941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775127831941120[0;39m ==> Parameters: 
2022-07-20 09:43:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775127831941120[0;39m <==    Updates: 0
2022-07-20 09:43:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775127831941120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:43:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775148769906688[0;39m 生成今日电子书快照开始
2022-07-20 09:43:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775148769906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775148769906688[0;39m ==> Parameters: 
2022-07-20 09:43:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775148769906688[0;39m <==    Updates: 0
2022-07-20 09:43:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775148769906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:43:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775169745620992[0;39m 生成今日电子书快照开始
2022-07-20 09:43:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775169745620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775169745620992[0;39m ==> Parameters: 
2022-07-20 09:43:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775169745620992[0;39m <==    Updates: 0
2022-07-20 09:43:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775169745620992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:43:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775190742306816[0;39m 生成今日电子书快照开始
2022-07-20 09:43:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775190742306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775190742306816[0;39m ==> Parameters: 
2022-07-20 09:43:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775190742306816[0;39m <==    Updates: 0
2022-07-20 09:43:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775190742306816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:43:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775211726409728[0;39m 生成今日电子书快照开始
2022-07-20 09:43:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775211726409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775211726409728[0;39m ==> Parameters: 
2022-07-20 09:43:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775211726409728[0;39m <==    Updates: 0
2022-07-20 09:43:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775211726409728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:43:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204775211738992640[0;39m 更新电子书下的文档数据开始
2022-07-20 09:43:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775211738992640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:43:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775211738992640[0;39m ==> Parameters: 
2022-07-20 09:43:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775211738992640[0;39m <==    Updates: 7
2022-07-20 09:43:35.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204775211738992640[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:43:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775232676958208[0;39m 生成今日电子书快照开始
2022-07-20 09:43:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775232676958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775232676958208[0;39m ==> Parameters: 
2022-07-20 09:43:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775232676958208[0;39m <==    Updates: 0
2022-07-20 09:43:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775232676958208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:43:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775253614923776[0;39m 生成今日电子书快照开始
2022-07-20 09:43:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775253614923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775253614923776[0;39m ==> Parameters: 
2022-07-20 09:43:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775253614923776[0;39m <==    Updates: 0
2022-07-20 09:43:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775253614923776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:43:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775274624192512[0;39m 生成今日电子书快照开始
2022-07-20 09:43:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775274624192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775274624192512[0;39m ==> Parameters: 
2022-07-20 09:43:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775274624192512[0;39m <==    Updates: 0
2022-07-20 09:43:50.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775274624192512[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:43:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775295591518208[0;39m 生成今日电子书快照开始
2022-07-20 09:43:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775295591518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:43:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775295591518208[0;39m ==> Parameters: 
2022-07-20 09:43:55.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775295591518208[0;39m <==    Updates: 0
2022-07-20 09:43:55.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775295591518208[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 09:44:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775316546260992[0;39m 生成今日电子书快照开始
2022-07-20 09:44:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775316546260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775316546260992[0;39m ==> Parameters: 
2022-07-20 09:44:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775316546260992[0;39m <==    Updates: 0
2022-07-20 09:44:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775316546260992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:44:00.648 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-07-20 09:44:00.648 INFO  org.springframework.web.servlet.DispatcherServlet :525 
                [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2022-07-20 09:44:00.650 INFO  org.springframework.web.servlet.DispatcherServlet :547 
                [32m                  [0;39m Completed initialization in 1 ms
2022-07-20 09:44:00.656 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 09:44:00.658 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/
2022-07-20 09:44:00.658 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m                  [0;39m 登录校验开始，token：null
2022-07-20 09:44:00.658 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :49  
                [32m                  [0;39m token为空，请求被拦截
2022-07-20 09:44:03.070 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 09:44:03.071 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/
2022-07-20 09:44:03.071 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m                  [0;39m 登录校验开始，token：null
2022-07-20 09:44:03.071 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :49  
                [32m                  [0;39m token为空，请求被拦截
2022-07-20 09:44:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775337551335424[0;39m 生成今日电子书快照开始
2022-07-20 09:44:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775337551335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775337551335424[0;39m ==> Parameters: 
2022-07-20 09:44:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775337551335424[0;39m <==    Updates: 0
2022-07-20 09:44:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775337551335424[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:44:05.020 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204775337576501248[0;39m 更新电子书下的文档数据开始
2022-07-20 09:44:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775337576501248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:44:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775337576501248[0;39m ==> Parameters: 
2022-07-20 09:44:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775337576501248[0;39m <==    Updates: 7
2022-07-20 09:44:05.023 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204775337576501248[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:44:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775358531244032[0;39m 生成今日电子书快照开始
2022-07-20 09:44:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775358531244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775358531244032[0;39m ==> Parameters: 
2022-07-20 09:44:10.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775358531244032[0;39m <==    Updates: 0
2022-07-20 09:44:10.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775358531244032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:44:10.776 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 09:44:10.777 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/
2022-07-20 09:44:10.777 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m                  [0;39m 登录校验开始，token：null
2022-07-20 09:44:10.777 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :49  
                [32m                  [0;39m token为空，请求被拦截
2022-07-20 09:44:15.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775379435655168[0;39m 生成今日电子书快照开始
2022-07-20 09:44:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775379435655168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775379435655168[0;39m ==> Parameters: 
2022-07-20 09:44:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775379435655168[0;39m <==    Updates: 0
2022-07-20 09:44:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775379435655168[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:44:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775400461701120[0;39m 生成今日电子书快照开始
2022-07-20 09:44:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775400461701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775400461701120[0;39m ==> Parameters: 
2022-07-20 09:44:20.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775400461701120[0;39m <==    Updates: 0
2022-07-20 09:44:20.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775400461701120[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:44:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775421395472384[0;39m 生成今日电子书快照开始
2022-07-20 09:44:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775421395472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775421395472384[0;39m ==> Parameters: 
2022-07-20 09:44:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775421395472384[0;39m <==    Updates: 0
2022-07-20 09:44:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775421395472384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:44:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775442400546816[0;39m 生成今日电子书快照开始
2022-07-20 09:44:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775442400546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775442400546816[0;39m ==> Parameters: 
2022-07-20 09:44:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775442400546816[0;39m <==    Updates: 0
2022-07-20 09:44:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775442400546816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:44:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775463376261120[0;39m 生成今日电子书快照开始
2022-07-20 09:44:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775463376261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775463376261120[0;39m ==> Parameters: 
2022-07-20 09:44:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775463376261120[0;39m <==    Updates: 0
2022-07-20 09:44:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775463376261120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:44:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204775463380455424[0;39m 更新电子书下的文档数据开始
2022-07-20 09:44:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775463380455424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:44:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775463380455424[0;39m ==> Parameters: 
2022-07-20 09:44:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775463380455424[0;39m <==    Updates: 7
2022-07-20 09:44:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204775463380455424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:44:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775484331003904[0;39m 生成今日电子书快照开始
2022-07-20 09:44:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775484331003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775484331003904[0;39m ==> Parameters: 
2022-07-20 09:44:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775484331003904[0;39m <==    Updates: 0
2022-07-20 09:44:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775484331003904[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:44:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775505289940992[0;39m 生成今日电子书快照开始
2022-07-20 09:44:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775505289940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775505289940992[0;39m ==> Parameters: 
2022-07-20 09:44:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775505289940992[0;39m <==    Updates: 0
2022-07-20 09:44:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775505289940992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:44:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775526299209728[0;39m 生成今日电子书快照开始
2022-07-20 09:44:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775526299209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775526299209728[0;39m ==> Parameters: 
2022-07-20 09:44:50.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775526299209728[0;39m <==    Updates: 0
2022-07-20 09:44:50.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775526299209728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:44:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775547266535424[0;39m 生成今日电子书快照开始
2022-07-20 09:44:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775547266535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:44:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775547266535424[0;39m ==> Parameters: 
2022-07-20 09:44:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775547266535424[0;39m <==    Updates: 0
2022-07-20 09:44:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775547266535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:45:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775568200306688[0;39m 生成今日电子书快照开始
2022-07-20 09:45:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775568200306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775568200306688[0;39m ==> Parameters: 
2022-07-20 09:45:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775568200306688[0;39m <==    Updates: 0
2022-07-20 09:45:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775568200306688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:45:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775589176020992[0;39m 生成今日电子书快照开始
2022-07-20 09:45:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775589176020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775589176020992[0;39m ==> Parameters: 
2022-07-20 09:45:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775589176020992[0;39m <==    Updates: 0
2022-07-20 09:45:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775589176020992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:45:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204775589188603904[0;39m 更新电子书下的文档数据开始
2022-07-20 09:45:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775589188603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:45:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775589188603904[0;39m ==> Parameters: 
2022-07-20 09:45:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775589188603904[0;39m <==    Updates: 7
2022-07-20 09:45:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204775589188603904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:45:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775610185289728[0;39m 生成今日电子书快照开始
2022-07-20 09:45:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775610185289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775610185289728[0;39m ==> Parameters: 
2022-07-20 09:45:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775610185289728[0;39m <==    Updates: 0
2022-07-20 09:45:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775610185289728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:45:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775631123255296[0;39m 生成今日电子书快照开始
2022-07-20 09:45:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775631123255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775631123255296[0;39m ==> Parameters: 
2022-07-20 09:45:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775631123255296[0;39m <==    Updates: 0
2022-07-20 09:45:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775631123255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:45:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775652082192384[0;39m 生成今日电子书快照开始
2022-07-20 09:45:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775652082192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775652082192384[0;39m ==> Parameters: 
2022-07-20 09:45:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775652082192384[0;39m <==    Updates: 0
2022-07-20 09:45:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775652082192384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:45:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775673049518080[0;39m 生成今日电子书快照开始
2022-07-20 09:45:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775673049518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775673049518080[0;39m ==> Parameters: 
2022-07-20 09:45:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775673049518080[0;39m <==    Updates: 0
2022-07-20 09:45:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775673049518080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:45:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775694021038080[0;39m 生成今日电子书快照开始
2022-07-20 09:45:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775694021038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775694021038080[0;39m ==> Parameters: 
2022-07-20 09:45:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775694021038080[0;39m <==    Updates: 0
2022-07-20 09:45:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775694021038080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:45:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775715005140992[0;39m 生成今日电子书快照开始
2022-07-20 09:45:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775715005140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775715005140992[0;39m ==> Parameters: 
2022-07-20 09:45:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775715005140992[0;39m <==    Updates: 0
2022-07-20 09:45:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775715005140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:45:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204775715013529600[0;39m 更新电子书下的文档数据开始
2022-07-20 09:45:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775715013529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:45:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775715013529600[0;39m ==> Parameters: 
2022-07-20 09:45:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775715013529600[0;39m <==    Updates: 7
2022-07-20 09:45:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204775715013529600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:45:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775736001826816[0;39m 生成今日电子书快照开始
2022-07-20 09:45:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775736001826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775736001826816[0;39m ==> Parameters: 
2022-07-20 09:45:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775736001826816[0;39m <==    Updates: 0
2022-07-20 09:45:40.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775736001826816[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 09:45:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775756973346816[0;39m 生成今日电子书快照开始
2022-07-20 09:45:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775756973346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775756973346816[0;39m ==> Parameters: 
2022-07-20 09:45:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775756973346816[0;39m <==    Updates: 0
2022-07-20 09:45:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775756973346816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:45:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775777919700992[0;39m 生成今日电子书快照开始
2022-07-20 09:45:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775777919700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775777919700992[0;39m ==> Parameters: 
2022-07-20 09:45:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775777919700992[0;39m <==    Updates: 0
2022-07-20 09:45:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775777919700992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:45:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775798878638080[0;39m 生成今日电子书快照开始
2022-07-20 09:45:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775798878638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:45:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775798878638080[0;39m ==> Parameters: 
2022-07-20 09:45:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775798878638080[0;39m <==    Updates: 0
2022-07-20 09:45:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775798878638080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:46:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775819862740992[0;39m 生成今日电子书快照开始
2022-07-20 09:46:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775819862740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775819862740992[0;39m ==> Parameters: 
2022-07-20 09:46:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775819862740992[0;39m <==    Updates: 0
2022-07-20 09:46:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775819862740992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:46:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775840867815424[0;39m 生成今日电子书快照开始
2022-07-20 09:46:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775840867815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775840867815424[0;39m ==> Parameters: 
2022-07-20 09:46:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775840867815424[0;39m <==    Updates: 0
2022-07-20 09:46:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775840867815424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:46:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204775840880398336[0;39m 更新电子书下的文档数据开始
2022-07-20 09:46:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775840880398336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:46:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775840880398336[0;39m ==> Parameters: 
2022-07-20 09:46:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775840880398336[0;39m <==    Updates: 7
2022-07-20 09:46:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204775840880398336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:46:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775861797392384[0;39m 生成今日电子书快照开始
2022-07-20 09:46:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775861797392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775861797392384[0;39m ==> Parameters: 
2022-07-20 09:46:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775861797392384[0;39m <==    Updates: 0
2022-07-20 09:46:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775861797392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:46:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775882764718080[0;39m 生成今日电子书快照开始
2022-07-20 09:46:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775882764718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775882764718080[0;39m ==> Parameters: 
2022-07-20 09:46:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775882764718080[0;39m <==    Updates: 0
2022-07-20 09:46:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775882764718080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:46:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775903773986816[0;39m 生成今日电子书快照开始
2022-07-20 09:46:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775903773986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775903773986816[0;39m ==> Parameters: 
2022-07-20 09:46:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775903773986816[0;39m <==    Updates: 0
2022-07-20 09:46:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775903773986816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:46:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775924732923904[0;39m 生成今日电子书快照开始
2022-07-20 09:46:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775924732923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775924732923904[0;39m ==> Parameters: 
2022-07-20 09:46:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775924732923904[0;39m <==    Updates: 0
2022-07-20 09:46:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775924732923904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:46:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775945708638208[0;39m 生成今日电子书快照开始
2022-07-20 09:46:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775945708638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775945708638208[0;39m ==> Parameters: 
2022-07-20 09:46:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775945708638208[0;39m <==    Updates: 0
2022-07-20 09:46:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775945708638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:46:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204775966688546816[0;39m 更新电子书下的文档数据开始
2022-07-20 09:46:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775966688546816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:46:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775966688546816[0;39m ==> Parameters: 
2022-07-20 09:46:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204775966688546816[0;39m <==    Updates: 7
2022-07-20 09:46:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204775966688546816[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:46:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775966701129728[0;39m 生成今日电子书快照开始
2022-07-20 09:46:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775966701129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775966701129728[0;39m ==> Parameters: 
2022-07-20 09:46:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775966701129728[0;39m <==    Updates: 0
2022-07-20 09:46:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775966701129728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:46:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204775987622318080[0;39m 生成今日电子书快照开始
2022-07-20 09:46:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775987622318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775987622318080[0;39m ==> Parameters: 
2022-07-20 09:46:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204775987622318080[0;39m <==    Updates: 0
2022-07-20 09:46:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204775987622318080[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 09:46:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776008585449472[0;39m 生成今日电子书快照开始
2022-07-20 09:46:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776008585449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776008585449472[0;39m ==> Parameters: 
2022-07-20 09:46:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776008585449472[0;39m <==    Updates: 0
2022-07-20 09:46:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776008585449472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:46:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776029594718208[0;39m 生成今日电子书快照开始
2022-07-20 09:46:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776029594718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776029594718208[0;39m ==> Parameters: 
2022-07-20 09:46:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776029594718208[0;39m <==    Updates: 0
2022-07-20 09:46:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776029594718208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:46:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776050553655296[0;39m 生成今日电子书快照开始
2022-07-20 09:46:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776050553655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:46:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776050553655296[0;39m ==> Parameters: 
2022-07-20 09:46:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776050553655296[0;39m <==    Updates: 0
2022-07-20 09:46:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776050553655296[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:47:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776071554535424[0;39m 生成今日电子书快照开始
2022-07-20 09:47:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776071554535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776071554535424[0;39m ==> Parameters: 
2022-07-20 09:47:00.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776071554535424[0;39m <==    Updates: 0
2022-07-20 09:47:00.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776071554535424[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:47:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204776092484112384[0;39m 更新电子书下的文档数据开始
2022-07-20 09:47:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776092484112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:47:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776092484112384[0;39m ==> Parameters: 
2022-07-20 09:47:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776092484112384[0;39m <==    Updates: 7
2022-07-20 09:47:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204776092484112384[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 09:47:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776092500889600[0;39m 生成今日电子书快照开始
2022-07-20 09:47:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776092500889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776092500889600[0;39m ==> Parameters: 
2022-07-20 09:47:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776092500889600[0;39m <==    Updates: 0
2022-07-20 09:47:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776092500889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:47:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776113451438080[0;39m 生成今日电子书快照开始
2022-07-20 09:47:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776113451438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776113451438080[0;39m ==> Parameters: 
2022-07-20 09:47:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776113451438080[0;39m <==    Updates: 0
2022-07-20 09:47:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776113451438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:47:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776134418763776[0;39m 生成今日电子书快照开始
2022-07-20 09:47:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776134418763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776134418763776[0;39m ==> Parameters: 
2022-07-20 09:47:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776134418763776[0;39m <==    Updates: 0
2022-07-20 09:47:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776134418763776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:47:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776155394478080[0;39m 生成今日电子书快照开始
2022-07-20 09:47:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776155394478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776155394478080[0;39m ==> Parameters: 
2022-07-20 09:47:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776155394478080[0;39m <==    Updates: 0
2022-07-20 09:47:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776155394478080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:47:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776176378580992[0;39m 生成今日电子书快照开始
2022-07-20 09:47:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776176378580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776176378580992[0;39m ==> Parameters: 
2022-07-20 09:47:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776176378580992[0;39m <==    Updates: 0
2022-07-20 09:47:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776176378580992[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 09:47:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776197392044032[0;39m 生成今日电子书快照开始
2022-07-20 09:47:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776197392044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776197392044032[0;39m ==> Parameters: 
2022-07-20 09:47:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776197392044032[0;39m <==    Updates: 0
2022-07-20 09:47:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776197392044032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:47:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204776218355175424[0;39m 更新电子书下的文档数据开始
2022-07-20 09:47:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776218355175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:47:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776218355175424[0;39m ==> Parameters: 
2022-07-20 09:47:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776218355175424[0;39m <==    Updates: 7
2022-07-20 09:47:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204776218355175424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:47:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776218363564032[0;39m 生成今日电子书快照开始
2022-07-20 09:47:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776218363564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776218363564032[0;39m ==> Parameters: 
2022-07-20 09:47:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776218363564032[0;39m <==    Updates: 0
2022-07-20 09:47:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776218363564032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:47:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776239301529600[0;39m 生成今日电子书快照开始
2022-07-20 09:47:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776239301529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776239301529600[0;39m ==> Parameters: 
2022-07-20 09:47:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776239301529600[0;39m <==    Updates: 0
2022-07-20 09:47:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776239301529600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:47:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776260268855296[0;39m 生成今日电子书快照开始
2022-07-20 09:47:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776260268855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776260268855296[0;39m ==> Parameters: 
2022-07-20 09:47:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776260268855296[0;39m <==    Updates: 0
2022-07-20 09:47:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776260268855296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:47:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776281223598080[0;39m 生成今日电子书快照开始
2022-07-20 09:47:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776281223598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776281223598080[0;39m ==> Parameters: 
2022-07-20 09:47:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776281223598080[0;39m <==    Updates: 0
2022-07-20 09:47:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776281223598080[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 09:47:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776302211895296[0;39m 生成今日电子书快照开始
2022-07-20 09:47:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776302211895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:47:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776302211895296[0;39m ==> Parameters: 
2022-07-20 09:47:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776302211895296[0;39m <==    Updates: 0
2022-07-20 09:47:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776302211895296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:48:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776323200192512[0;39m 生成今日电子书快照开始
2022-07-20 09:48:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776323200192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776323200192512[0;39m ==> Parameters: 
2022-07-20 09:48:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776323200192512[0;39m <==    Updates: 0
2022-07-20 09:48:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776323200192512[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:48:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776344150740992[0;39m 生成今日电子书快照开始
2022-07-20 09:48:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776344150740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776344150740992[0;39m ==> Parameters: 
2022-07-20 09:48:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776344150740992[0;39m <==    Updates: 0
2022-07-20 09:48:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776344150740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:48:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204776344159129600[0;39m 更新电子书下的文档数据开始
2022-07-20 09:48:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776344159129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:48:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776344159129600[0;39m ==> Parameters: 
2022-07-20 09:48:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776344159129600[0;39m <==    Updates: 7
2022-07-20 09:48:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204776344159129600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:48:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776365160009728[0;39m 生成今日电子书快照开始
2022-07-20 09:48:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776365160009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776365160009728[0;39m ==> Parameters: 
2022-07-20 09:48:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776365160009728[0;39m <==    Updates: 0
2022-07-20 09:48:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776365160009728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:48:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776386093780992[0;39m 生成今日电子书快照开始
2022-07-20 09:48:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776386093780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776386093780992[0;39m ==> Parameters: 
2022-07-20 09:48:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776386093780992[0;39m <==    Updates: 0
2022-07-20 09:48:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776386093780992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:48:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776407090466816[0;39m 生成今日电子书快照开始
2022-07-20 09:48:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776407090466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776407090466816[0;39m ==> Parameters: 
2022-07-20 09:48:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776407090466816[0;39m <==    Updates: 0
2022-07-20 09:48:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776407090466816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:48:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776428041015296[0;39m 生成今日电子书快照开始
2022-07-20 09:48:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776428041015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776428041015296[0;39m ==> Parameters: 
2022-07-20 09:48:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776428041015296[0;39m <==    Updates: 0
2022-07-20 09:48:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776428041015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:48:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776449004146688[0;39m 生成今日电子书快照开始
2022-07-20 09:48:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776449004146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776449004146688[0;39m ==> Parameters: 
2022-07-20 09:48:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776449004146688[0;39m <==    Updates: 0
2022-07-20 09:48:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776449004146688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:48:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776469992443904[0;39m 生成今日电子书快照开始
2022-07-20 09:48:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776469992443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776469992443904[0;39m ==> Parameters: 
2022-07-20 09:48:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776469992443904[0;39m <==    Updates: 0
2022-07-20 09:48:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776469992443904[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:48:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204776470013415424[0;39m 更新电子书下的文档数据开始
2022-07-20 09:48:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776470013415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:48:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776470013415424[0;39m ==> Parameters: 
2022-07-20 09:48:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776470013415424[0;39m <==    Updates: 7
2022-07-20 09:48:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204776470013415424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:48:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776490968158208[0;39m 生成今日电子书快照开始
2022-07-20 09:48:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776490968158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776490968158208[0;39m ==> Parameters: 
2022-07-20 09:48:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776490968158208[0;39m <==    Updates: 0
2022-07-20 09:48:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776490968158208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:48:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776511956455424[0;39m 生成今日电子书快照开始
2022-07-20 09:48:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776511956455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776511956455424[0;39m ==> Parameters: 
2022-07-20 09:48:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776511956455424[0;39m <==    Updates: 0
2022-07-20 09:48:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776511956455424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:48:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776532902809600[0;39m 生成今日电子书快照开始
2022-07-20 09:48:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776532902809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776532902809600[0;39m ==> Parameters: 
2022-07-20 09:48:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776532902809600[0;39m <==    Updates: 0
2022-07-20 09:48:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776532902809600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:48:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776553870135296[0;39m 生成今日电子书快照开始
2022-07-20 09:48:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776553870135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:48:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776553870135296[0;39m ==> Parameters: 
2022-07-20 09:48:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776553870135296[0;39m <==    Updates: 0
2022-07-20 09:48:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776553870135296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:49:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776574841655296[0;39m 生成今日电子书快照开始
2022-07-20 09:49:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776574841655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:00.110 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776574841655296[0;39m ==> Parameters: 
2022-07-20 09:49:00.114 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776574841655296[0;39m <==    Updates: 0
2022-07-20 09:49:00.115 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776574841655296[0;39m 生成今日电子书快照结束，耗时：108 毫秒
2022-07-20 09:49:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204776595808980992[0;39m 更新电子书下的文档数据开始
2022-07-20 09:49:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776595808980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:49:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776595808980992[0;39m ==> Parameters: 
2022-07-20 09:49:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776595808980992[0;39m <==    Updates: 7
2022-07-20 09:49:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204776595808980992[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-20 09:49:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776595838341120[0;39m 生成今日电子书快照开始
2022-07-20 09:49:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776595838341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776595838341120[0;39m ==> Parameters: 
2022-07-20 09:49:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776595838341120[0;39m <==    Updates: 0
2022-07-20 09:49:05.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776595838341120[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 09:49:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776616763723776[0;39m 生成今日电子书快照开始
2022-07-20 09:49:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776616763723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776616763723776[0;39m ==> Parameters: 
2022-07-20 09:49:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776616763723776[0;39m <==    Updates: 0
2022-07-20 09:49:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776616763723776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:49:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776637764603904[0;39m 生成今日电子书快照开始
2022-07-20 09:49:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776637764603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776637764603904[0;39m ==> Parameters: 
2022-07-20 09:49:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776637764603904[0;39m <==    Updates: 0
2022-07-20 09:49:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776637764603904[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:49:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776658715152384[0;39m 生成今日电子书快照开始
2022-07-20 09:49:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776658715152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776658715152384[0;39m ==> Parameters: 
2022-07-20 09:49:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776658715152384[0;39m <==    Updates: 0
2022-07-20 09:49:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776658715152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:49:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776679711838208[0;39m 生成今日电子书快照开始
2022-07-20 09:49:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776679711838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776679711838208[0;39m ==> Parameters: 
2022-07-20 09:49:25.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776679711838208[0;39m <==    Updates: 0
2022-07-20 09:49:25.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776679711838208[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 09:49:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776700687552512[0;39m 生成今日电子书快照开始
2022-07-20 09:49:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776700687552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776700687552512[0;39m ==> Parameters: 
2022-07-20 09:49:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776700687552512[0;39m <==    Updates: 0
2022-07-20 09:49:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776700687552512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:49:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204776721671655424[0;39m 更新电子书下的文档数据开始
2022-07-20 09:49:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776721671655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:49:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776721671655424[0;39m ==> Parameters: 
2022-07-20 09:49:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776721671655424[0;39m <==    Updates: 7
2022-07-20 09:49:35.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204776721671655424[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 09:49:35.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776721701015552[0;39m 生成今日电子书快照开始
2022-07-20 09:49:35.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776721701015552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:35.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776721701015552[0;39m ==> Parameters: 
2022-07-20 09:49:35.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776721701015552[0;39m <==    Updates: 0
2022-07-20 09:49:35.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776721701015552[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:49:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776742651564032[0;39m 生成今日电子书快照开始
2022-07-20 09:49:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776742651564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776742651564032[0;39m ==> Parameters: 
2022-07-20 09:49:40.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776742651564032[0;39m <==    Updates: 0
2022-07-20 09:49:40.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776742651564032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:49:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776763581140992[0;39m 生成今日电子书快照开始
2022-07-20 09:49:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776763581140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776763581140992[0;39m ==> Parameters: 
2022-07-20 09:49:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776763581140992[0;39m <==    Updates: 0
2022-07-20 09:49:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776763581140992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:49:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776784577826816[0;39m 生成今日电子书快照开始
2022-07-20 09:49:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776784577826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776784577826816[0;39m ==> Parameters: 
2022-07-20 09:49:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776784577826816[0;39m <==    Updates: 0
2022-07-20 09:49:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776784577826816[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:49:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776805532569600[0;39m 生成今日电子书快照开始
2022-07-20 09:49:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776805532569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:49:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776805532569600[0;39m ==> Parameters: 
2022-07-20 09:49:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776805532569600[0;39m <==    Updates: 0
2022-07-20 09:49:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776805532569600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:50:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776826491506688[0;39m 生成今日电子书快照开始
2022-07-20 09:50:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776826491506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776826491506688[0;39m ==> Parameters: 
2022-07-20 09:50:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776826491506688[0;39m <==    Updates: 0
2022-07-20 09:50:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776826491506688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:50:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204776847467220992[0;39m 更新电子书下的文档数据开始
2022-07-20 09:50:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776847467220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:50:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776847467220992[0;39m ==> Parameters: 
2022-07-20 09:50:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776847467220992[0;39m <==    Updates: 7
2022-07-20 09:50:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204776847467220992[0;39m 更新电子书下的文档数据结束，耗时：7 毫秒
2022-07-20 09:50:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776847500775424[0;39m 生成今日电子书快照开始
2022-07-20 09:50:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776847500775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776847500775424[0;39m ==> Parameters: 
2022-07-20 09:50:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776847500775424[0;39m <==    Updates: 0
2022-07-20 09:50:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776847500775424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:50:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776868459712512[0;39m 生成今日电子书快照开始
2022-07-20 09:50:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776868459712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776868459712512[0;39m ==> Parameters: 
2022-07-20 09:50:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776868459712512[0;39m <==    Updates: 0
2022-07-20 09:50:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776868459712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:50:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776889422843904[0;39m 生成今日电子书快照开始
2022-07-20 09:50:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776889422843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776889422843904[0;39m ==> Parameters: 
2022-07-20 09:50:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776889422843904[0;39m <==    Updates: 0
2022-07-20 09:50:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776889422843904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:50:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776910394363904[0;39m 生成今日电子书快照开始
2022-07-20 09:50:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776910394363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776910394363904[0;39m ==> Parameters: 
2022-07-20 09:50:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776910394363904[0;39m <==    Updates: 0
2022-07-20 09:50:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776910394363904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:50:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776931361689600[0;39m 生成今日电子书快照开始
2022-07-20 09:50:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776931361689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776931361689600[0;39m ==> Parameters: 
2022-07-20 09:50:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776931361689600[0;39m <==    Updates: 0
2022-07-20 09:50:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776931361689600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:50:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776952320626688[0;39m 生成今日电子书快照开始
2022-07-20 09:50:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776952320626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776952320626688[0;39m ==> Parameters: 
2022-07-20 09:50:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776952320626688[0;39m <==    Updates: 0
2022-07-20 09:50:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776952320626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:50:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204776973338284032[0;39m 更新电子书下的文档数据开始
2022-07-20 09:50:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776973338284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:50:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776973338284032[0;39m ==> Parameters: 
2022-07-20 09:50:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204776973338284032[0;39m <==    Updates: 7
2022-07-20 09:50:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204776973338284032[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:50:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776973346672640[0;39m 生成今日电子书快照开始
2022-07-20 09:50:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776973346672640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776973346672640[0;39m ==> Parameters: 
2022-07-20 09:50:35.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776973346672640[0;39m <==    Updates: 0
2022-07-20 09:50:35.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776973346672640[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:50:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204776994301415424[0;39m 生成今日电子书快照开始
2022-07-20 09:50:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776994301415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776994301415424[0;39m ==> Parameters: 
2022-07-20 09:50:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204776994301415424[0;39m <==    Updates: 0
2022-07-20 09:50:40.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204776994301415424[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:50:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777015264546816[0;39m 生成今日电子书快照开始
2022-07-20 09:50:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777015264546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777015264546816[0;39m ==> Parameters: 
2022-07-20 09:50:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777015264546816[0;39m <==    Updates: 0
2022-07-20 09:50:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777015264546816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:50:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777036219289600[0;39m 生成今日电子书快照开始
2022-07-20 09:50:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777036219289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777036219289600[0;39m ==> Parameters: 
2022-07-20 09:50:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777036219289600[0;39m <==    Updates: 0
2022-07-20 09:50:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777036219289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:50:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777057199198208[0;39m 生成今日电子书快照开始
2022-07-20 09:50:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777057199198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:50:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777057199198208[0;39m ==> Parameters: 
2022-07-20 09:50:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777057199198208[0;39m <==    Updates: 0
2022-07-20 09:50:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777057199198208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:51:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777078158135296[0;39m 生成今日电子书快照开始
2022-07-20 09:51:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777078158135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777078158135296[0;39m ==> Parameters: 
2022-07-20 09:51:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777078158135296[0;39m <==    Updates: 0
2022-07-20 09:51:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777078158135296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:51:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777099133849600[0;39m 生成今日电子书快照开始
2022-07-20 09:51:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777099133849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777099133849600[0;39m ==> Parameters: 
2022-07-20 09:51:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777099133849600[0;39m <==    Updates: 0
2022-07-20 09:51:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777099133849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:51:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204777099146432512[0;39m 更新电子书下的文档数据开始
2022-07-20 09:51:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777099146432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:51:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777099146432512[0;39m ==> Parameters: 
2022-07-20 09:51:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777099146432512[0;39m <==    Updates: 7
2022-07-20 09:51:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204777099146432512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:51:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777120126341120[0;39m 生成今日电子书快照开始
2022-07-20 09:51:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777120126341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777120126341120[0;39m ==> Parameters: 
2022-07-20 09:51:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777120126341120[0;39m <==    Updates: 0
2022-07-20 09:51:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777120126341120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:51:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777141089472512[0;39m 生成今日电子书快照开始
2022-07-20 09:51:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777141089472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777141089472512[0;39m ==> Parameters: 
2022-07-20 09:51:15.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777141089472512[0;39m <==    Updates: 0
2022-07-20 09:51:15.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777141089472512[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 09:51:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777162056798208[0;39m 生成今日电子书快照开始
2022-07-20 09:51:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777162056798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777162056798208[0;39m ==> Parameters: 
2022-07-20 09:51:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777162056798208[0;39m <==    Updates: 0
2022-07-20 09:51:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777162056798208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:51:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777183011540992[0;39m 生成今日电子书快照开始
2022-07-20 09:51:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777183011540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777183011540992[0;39m ==> Parameters: 
2022-07-20 09:51:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777183011540992[0;39m <==    Updates: 0
2022-07-20 09:51:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777183011540992[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:51:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777203978866688[0;39m 生成今日电子书快照开始
2022-07-20 09:51:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777203978866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777203978866688[0;39m ==> Parameters: 
2022-07-20 09:51:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777203978866688[0;39m <==    Updates: 0
2022-07-20 09:51:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777203978866688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:51:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204777224962969600[0;39m 更新电子书下的文档数据开始
2022-07-20 09:51:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777224962969600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:51:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777224962969600[0;39m ==> Parameters: 
2022-07-20 09:51:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777224962969600[0;39m <==    Updates: 7
2022-07-20 09:51:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204777224962969600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:51:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777224971358208[0;39m 生成今日电子书快照开始
2022-07-20 09:51:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777224971358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777224971358208[0;39m ==> Parameters: 
2022-07-20 09:51:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777224971358208[0;39m <==    Updates: 0
2022-07-20 09:51:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777224971358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:51:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777245968044032[0;39m 生成今日电子书快照开始
2022-07-20 09:51:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777245968044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777245968044032[0;39m ==> Parameters: 
2022-07-20 09:51:40.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777245968044032[0;39m <==    Updates: 0
2022-07-20 09:51:40.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777245968044032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:51:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777266935369728[0;39m 生成今日电子书快照开始
2022-07-20 09:51:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777266935369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777266935369728[0;39m ==> Parameters: 
2022-07-20 09:51:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777266935369728[0;39m <==    Updates: 0
2022-07-20 09:51:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777266935369728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:51:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777287885918208[0;39m 生成今日电子书快照开始
2022-07-20 09:51:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777287885918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777287885918208[0;39m ==> Parameters: 
2022-07-20 09:51:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777287885918208[0;39m <==    Updates: 0
2022-07-20 09:51:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777287885918208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:51:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777308836466688[0;39m 生成今日电子书快照开始
2022-07-20 09:51:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777308836466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:51:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777308836466688[0;39m ==> Parameters: 
2022-07-20 09:51:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777308836466688[0;39m <==    Updates: 0
2022-07-20 09:51:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777308836466688[0;39m 生成今日电子书快照结束，耗时：12 毫秒
2022-07-20 09:52:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777329824763904[0;39m 生成今日电子书快照开始
2022-07-20 09:52:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777329824763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777329824763904[0;39m ==> Parameters: 
2022-07-20 09:52:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777329824763904[0;39m <==    Updates: 0
2022-07-20 09:52:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777329824763904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:52:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204777350779506688[0;39m 更新电子书下的文档数据开始
2022-07-20 09:52:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777350779506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:52:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777350779506688[0;39m ==> Parameters: 
2022-07-20 09:52:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777350779506688[0;39m <==    Updates: 7
2022-07-20 09:52:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204777350779506688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:52:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777350783700992[0;39m 生成今日电子书快照开始
2022-07-20 09:52:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777350783700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777350783700992[0;39m ==> Parameters: 
2022-07-20 09:52:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777350783700992[0;39m <==    Updates: 0
2022-07-20 09:52:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777350783700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:52:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777371751026688[0;39m 生成今日电子书快照开始
2022-07-20 09:52:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777371751026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:10.106 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777371751026688[0;39m ==> Parameters: 
2022-07-20 09:52:10.111 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777371751026688[0;39m <==    Updates: 0
2022-07-20 09:52:10.111 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777371751026688[0;39m 生成今日电子书快照结束，耗时：105 毫秒
2022-07-20 09:52:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777392726740992[0;39m 生成今日电子书快照开始
2022-07-20 09:52:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777392726740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777392726740992[0;39m ==> Parameters: 
2022-07-20 09:52:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777392726740992[0;39m <==    Updates: 0
2022-07-20 09:52:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777392726740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:52:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777413702455296[0;39m 生成今日电子书快照开始
2022-07-20 09:52:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777413702455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777413702455296[0;39m ==> Parameters: 
2022-07-20 09:52:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777413702455296[0;39m <==    Updates: 0
2022-07-20 09:52:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777413702455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:52:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777434665586688[0;39m 生成今日电子书快照开始
2022-07-20 09:52:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777434665586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777434665586688[0;39m ==> Parameters: 
2022-07-20 09:52:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777434665586688[0;39m <==    Updates: 0
2022-07-20 09:52:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777434665586688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:52:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777455632912384[0;39m 生成今日电子书快照开始
2022-07-20 09:52:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777455632912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777455632912384[0;39m ==> Parameters: 
2022-07-20 09:52:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777455632912384[0;39m <==    Updates: 0
2022-07-20 09:52:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777455632912384[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 09:52:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777476621209600[0;39m 生成今日电子书快照开始
2022-07-20 09:52:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777476621209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777476621209600[0;39m ==> Parameters: 
2022-07-20 09:52:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777476621209600[0;39m <==    Updates: 0
2022-07-20 09:52:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777476621209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:52:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204777476629598208[0;39m 更新电子书下的文档数据开始
2022-07-20 09:52:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777476629598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:52:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777476629598208[0;39m ==> Parameters: 
2022-07-20 09:52:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777476629598208[0;39m <==    Updates: 7
2022-07-20 09:52:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204777476629598208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:52:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777497592729600[0;39m 生成今日电子书快照开始
2022-07-20 09:52:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777497592729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777497592729600[0;39m ==> Parameters: 
2022-07-20 09:52:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777497592729600[0;39m <==    Updates: 0
2022-07-20 09:52:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777497592729600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:52:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777518589415424[0;39m 生成今日电子书快照开始
2022-07-20 09:52:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777518589415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777518589415424[0;39m ==> Parameters: 
2022-07-20 09:52:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777518589415424[0;39m <==    Updates: 0
2022-07-20 09:52:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777518589415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:52:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777539548352512[0;39m 生成今日电子书快照开始
2022-07-20 09:52:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777539548352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777539548352512[0;39m ==> Parameters: 
2022-07-20 09:52:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777539548352512[0;39m <==    Updates: 0
2022-07-20 09:52:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777539548352512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:52:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777560503095296[0;39m 生成今日电子书快照开始
2022-07-20 09:52:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777560503095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:52:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777560503095296[0;39m ==> Parameters: 
2022-07-20 09:52:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777560503095296[0;39m <==    Updates: 0
2022-07-20 09:52:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777560503095296[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-20 09:53:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777581503975424[0;39m 生成今日电子书快照开始
2022-07-20 09:53:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777581503975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777581503975424[0;39m ==> Parameters: 
2022-07-20 09:53:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777581503975424[0;39m <==    Updates: 0
2022-07-20 09:53:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777581503975424[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:53:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777602425163776[0;39m 生成今日电子书快照开始
2022-07-20 09:53:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777602425163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777602425163776[0;39m ==> Parameters: 
2022-07-20 09:53:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777602425163776[0;39m <==    Updates: 0
2022-07-20 09:53:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777602425163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:53:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204777602437746688[0;39m 更新电子书下的文档数据开始
2022-07-20 09:53:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777602437746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:53:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777602437746688[0;39m ==> Parameters: 
2022-07-20 09:53:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777602437746688[0;39m <==    Updates: 7
2022-07-20 09:53:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204777602437746688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:53:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777623447015424[0;39m 生成今日电子书快照开始
2022-07-20 09:53:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777623447015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777623447015424[0;39m ==> Parameters: 
2022-07-20 09:53:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777623447015424[0;39m <==    Updates: 0
2022-07-20 09:53:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777623447015424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:53:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777644393369600[0;39m 生成今日电子书快照开始
2022-07-20 09:53:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777644393369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777644393369600[0;39m ==> Parameters: 
2022-07-20 09:53:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777644393369600[0;39m <==    Updates: 0
2022-07-20 09:53:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777644393369600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:53:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777665385861120[0;39m 生成今日电子书快照开始
2022-07-20 09:53:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777665385861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777665385861120[0;39m ==> Parameters: 
2022-07-20 09:53:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777665385861120[0;39m <==    Updates: 0
2022-07-20 09:53:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777665385861120[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:53:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777686323826688[0;39m 生成今日电子书快照开始
2022-07-20 09:53:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777686323826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777686323826688[0;39m ==> Parameters: 
2022-07-20 09:53:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777686323826688[0;39m <==    Updates: 0
2022-07-20 09:53:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777686323826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:53:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777707324706816[0;39m 生成今日电子书快照开始
2022-07-20 09:53:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777707324706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777707324706816[0;39m ==> Parameters: 
2022-07-20 09:53:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777707324706816[0;39m <==    Updates: 0
2022-07-20 09:53:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777707324706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:53:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204777728304615424[0;39m 更新电子书下的文档数据开始
2022-07-20 09:53:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777728304615424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:53:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777728304615424[0;39m ==> Parameters: 
2022-07-20 09:53:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777728304615424[0;39m <==    Updates: 7
2022-07-20 09:53:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204777728304615424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:53:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777728313004032[0;39m 生成今日电子书快照开始
2022-07-20 09:53:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777728313004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777728313004032[0;39m ==> Parameters: 
2022-07-20 09:53:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777728313004032[0;39m <==    Updates: 0
2022-07-20 09:53:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777728313004032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:53:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777749267746816[0;39m 生成今日电子书快照开始
2022-07-20 09:53:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777749267746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777749267746816[0;39m ==> Parameters: 
2022-07-20 09:53:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777749267746816[0;39m <==    Updates: 0
2022-07-20 09:53:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777749267746816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:53:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777770209906688[0;39m 生成今日电子书快照开始
2022-07-20 09:53:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777770209906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777770209906688[0;39m ==> Parameters: 
2022-07-20 09:53:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777770209906688[0;39m <==    Updates: 0
2022-07-20 09:53:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777770209906688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:53:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777791177232384[0;39m 生成今日电子书快照开始
2022-07-20 09:53:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777791177232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777791177232384[0;39m ==> Parameters: 
2022-07-20 09:53:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777791177232384[0;39m <==    Updates: 0
2022-07-20 09:53:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777791177232384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:53:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777812199084032[0;39m 生成今日电子书快照开始
2022-07-20 09:53:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777812199084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:53:55.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777812199084032[0;39m ==> Parameters: 
2022-07-20 09:53:55.025 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777812199084032[0;39m <==    Updates: 0
2022-07-20 09:53:55.026 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777812199084032[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 09:54:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777833107689472[0;39m 生成今日电子书快照开始
2022-07-20 09:54:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777833107689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777833107689472[0;39m ==> Parameters: 
2022-07-20 09:54:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777833107689472[0;39m <==    Updates: 0
2022-07-20 09:54:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777833107689472[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 09:54:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777854129541120[0;39m 生成今日电子书快照开始
2022-07-20 09:54:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777854129541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777854129541120[0;39m ==> Parameters: 
2022-07-20 09:54:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777854129541120[0;39m <==    Updates: 0
2022-07-20 09:54:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777854129541120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:54:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204777854142124032[0;39m 更新电子书下的文档数据开始
2022-07-20 09:54:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777854142124032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:54:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777854142124032[0;39m ==> Parameters: 
2022-07-20 09:54:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777854142124032[0;39m <==    Updates: 7
2022-07-20 09:54:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204777854142124032[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:54:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777875092672512[0;39m 生成今日电子书快照开始
2022-07-20 09:54:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777875092672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777875092672512[0;39m ==> Parameters: 
2022-07-20 09:54:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777875092672512[0;39m <==    Updates: 0
2022-07-20 09:54:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777875092672512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:54:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777896026443776[0;39m 生成今日电子书快照开始
2022-07-20 09:54:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777896026443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777896026443776[0;39m ==> Parameters: 
2022-07-20 09:54:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777896026443776[0;39m <==    Updates: 0
2022-07-20 09:54:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777896026443776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:54:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777916993769472[0;39m 生成今日电子书快照开始
2022-07-20 09:54:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777916993769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777916993769472[0;39m ==> Parameters: 
2022-07-20 09:54:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777916993769472[0;39m <==    Updates: 0
2022-07-20 09:54:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777916993769472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:54:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777937994649600[0;39m 生成今日电子书快照开始
2022-07-20 09:54:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777937994649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777937994649600[0;39m ==> Parameters: 
2022-07-20 09:54:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777937994649600[0;39m <==    Updates: 0
2022-07-20 09:54:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777937994649600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:54:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777958966169600[0;39m 生成今日电子书快照开始
2022-07-20 09:54:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777958966169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777958966169600[0;39m ==> Parameters: 
2022-07-20 09:54:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777958966169600[0;39m <==    Updates: 0
2022-07-20 09:54:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777958966169600[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 09:54:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204777979916718080[0;39m 更新电子书下的文档数据开始
2022-07-20 09:54:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777979916718080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:54:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777979916718080[0;39m ==> Parameters: 
2022-07-20 09:54:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204777979916718080[0;39m <==    Updates: 7
2022-07-20 09:54:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204777979916718080[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:54:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204777979929300992[0;39m 生成今日电子书快照开始
2022-07-20 09:54:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777979929300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777979929300992[0;39m ==> Parameters: 
2022-07-20 09:54:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204777979929300992[0;39m <==    Updates: 0
2022-07-20 09:54:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204777979929300992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:54:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778000900820992[0;39m 生成今日电子书快照开始
2022-07-20 09:54:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778000900820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778000900820992[0;39m ==> Parameters: 
2022-07-20 09:54:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778000900820992[0;39m <==    Updates: 0
2022-07-20 09:54:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778000900820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:54:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778021897506816[0;39m 生成今日电子书快照开始
2022-07-20 09:54:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778021897506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778021897506816[0;39m ==> Parameters: 
2022-07-20 09:54:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778021897506816[0;39m <==    Updates: 0
2022-07-20 09:54:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778021897506816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:54:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778042827083776[0;39m 生成今日电子书快照开始
2022-07-20 09:54:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778042827083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778042827083776[0;39m ==> Parameters: 
2022-07-20 09:54:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778042827083776[0;39m <==    Updates: 0
2022-07-20 09:54:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778042827083776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:54:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778063798603776[0;39m 生成今日电子书快照开始
2022-07-20 09:54:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778063798603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:54:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778063798603776[0;39m ==> Parameters: 
2022-07-20 09:54:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778063798603776[0;39m <==    Updates: 0
2022-07-20 09:54:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778063798603776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:55:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778084774318080[0;39m 生成今日电子书快照开始
2022-07-20 09:55:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778084774318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778084774318080[0;39m ==> Parameters: 
2022-07-20 09:55:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778084774318080[0;39m <==    Updates: 0
2022-07-20 09:55:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778084774318080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:55:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204778105737449472[0;39m 更新电子书下的文档数据开始
2022-07-20 09:55:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778105737449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:55:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778105737449472[0;39m ==> Parameters: 
2022-07-20 09:55:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778105737449472[0;39m <==    Updates: 7
2022-07-20 09:55:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204778105737449472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:55:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778105741643776[0;39m 生成今日电子书快照开始
2022-07-20 09:55:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778105741643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778105741643776[0;39m ==> Parameters: 
2022-07-20 09:55:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778105741643776[0;39m <==    Updates: 0
2022-07-20 09:55:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778105741643776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:55:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778126742523904[0;39m 生成今日电子书快照开始
2022-07-20 09:55:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778126742523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778126742523904[0;39m ==> Parameters: 
2022-07-20 09:55:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778126742523904[0;39m <==    Updates: 0
2022-07-20 09:55:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778126742523904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:55:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778147730821120[0;39m 生成今日电子书快照开始
2022-07-20 09:55:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778147730821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778147730821120[0;39m ==> Parameters: 
2022-07-20 09:55:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778147730821120[0;39m <==    Updates: 0
2022-07-20 09:55:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778147730821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:55:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778168652009472[0;39m 生成今日电子书快照开始
2022-07-20 09:55:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778168652009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778168652009472[0;39m ==> Parameters: 
2022-07-20 09:55:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778168652009472[0;39m <==    Updates: 0
2022-07-20 09:55:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778168652009472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:55:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778189652889600[0;39m 生成今日电子书快照开始
2022-07-20 09:55:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778189652889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778189652889600[0;39m ==> Parameters: 
2022-07-20 09:55:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778189652889600[0;39m <==    Updates: 0
2022-07-20 09:55:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778189652889600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:55:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778210607632384[0;39m 生成今日电子书快照开始
2022-07-20 09:55:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778210607632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778210607632384[0;39m ==> Parameters: 
2022-07-20 09:55:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778210607632384[0;39m <==    Updates: 0
2022-07-20 09:55:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778210607632384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:55:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778231625289728[0;39m 生成今日电子书快照开始
2022-07-20 09:55:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778231625289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778231625289728[0;39m ==> Parameters: 
2022-07-20 09:55:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778231625289728[0;39m <==    Updates: 0
2022-07-20 09:55:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778231625289728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:55:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204778231637872640[0;39m 更新电子书下的文档数据开始
2022-07-20 09:55:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778231637872640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:55:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778231637872640[0;39m ==> Parameters: 
2022-07-20 09:55:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778231637872640[0;39m <==    Updates: 7
2022-07-20 09:55:35.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204778231637872640[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 09:55:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778252584226816[0;39m 生成今日电子书快照开始
2022-07-20 09:55:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778252584226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778252584226816[0;39m ==> Parameters: 
2022-07-20 09:55:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778252584226816[0;39m <==    Updates: 0
2022-07-20 09:55:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778252584226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:55:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778273509609472[0;39m 生成今日电子书快照开始
2022-07-20 09:55:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778273509609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778273509609472[0;39m ==> Parameters: 
2022-07-20 09:55:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778273509609472[0;39m <==    Updates: 0
2022-07-20 09:55:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778273509609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:55:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778294497906688[0;39m 生成今日电子书快照开始
2022-07-20 09:55:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778294497906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778294497906688[0;39m ==> Parameters: 
2022-07-20 09:55:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778294497906688[0;39m <==    Updates: 0
2022-07-20 09:55:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778294497906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:55:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778315452649472[0;39m 生成今日电子书快照开始
2022-07-20 09:55:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778315452649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:55:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778315452649472[0;39m ==> Parameters: 
2022-07-20 09:55:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778315452649472[0;39m <==    Updates: 0
2022-07-20 09:55:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778315452649472[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:56:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778336445140992[0;39m 生成今日电子书快照开始
2022-07-20 09:56:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778336445140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778336445140992[0;39m ==> Parameters: 
2022-07-20 09:56:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778336445140992[0;39m <==    Updates: 0
2022-07-20 09:56:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778336445140992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:56:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204778357412466688[0;39m 更新电子书下的文档数据开始
2022-07-20 09:56:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778357412466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:56:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778357412466688[0;39m ==> Parameters: 
2022-07-20 09:56:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778357412466688[0;39m <==    Updates: 7
2022-07-20 09:56:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204778357412466688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:56:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778357420855296[0;39m 生成今日电子书快照开始
2022-07-20 09:56:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778357420855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778357420855296[0;39m ==> Parameters: 
2022-07-20 09:56:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778357420855296[0;39m <==    Updates: 0
2022-07-20 09:56:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778357420855296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 09:56:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778378417541120[0;39m 生成今日电子书快照开始
2022-07-20 09:56:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778378417541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778378417541120[0;39m ==> Parameters: 
2022-07-20 09:56:10.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778378417541120[0;39m <==    Updates: 0
2022-07-20 09:56:10.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778378417541120[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 09:56:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778399351312384[0;39m 生成今日电子书快照开始
2022-07-20 09:56:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778399351312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778399351312384[0;39m ==> Parameters: 
2022-07-20 09:56:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778399351312384[0;39m <==    Updates: 0
2022-07-20 09:56:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778399351312384[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 09:56:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778420356386816[0;39m 生成今日电子书快照开始
2022-07-20 09:56:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778420356386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778420356386816[0;39m ==> Parameters: 
2022-07-20 09:56:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778420356386816[0;39m <==    Updates: 0
2022-07-20 09:56:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778420356386816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:56:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778441332101120[0;39m 生成今日电子书快照开始
2022-07-20 09:56:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778441332101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778441332101120[0;39m ==> Parameters: 
2022-07-20 09:56:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778441332101120[0;39m <==    Updates: 0
2022-07-20 09:56:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778441332101120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:56:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778462312009728[0;39m 生成今日电子书快照开始
2022-07-20 09:56:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778462312009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778462312009728[0;39m ==> Parameters: 
2022-07-20 09:56:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778462312009728[0;39m <==    Updates: 0
2022-07-20 09:56:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778462312009728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:56:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204778483258363904[0;39m 更新电子书下的文档数据开始
2022-07-20 09:56:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778483258363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:56:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778483258363904[0;39m ==> Parameters: 
2022-07-20 09:56:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778483258363904[0;39m <==    Updates: 7
2022-07-20 09:56:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204778483258363904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:56:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778483262558208[0;39m 生成今日电子书快照开始
2022-07-20 09:56:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778483262558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778483262558208[0;39m ==> Parameters: 
2022-07-20 09:56:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778483262558208[0;39m <==    Updates: 0
2022-07-20 09:56:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778483262558208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:56:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778504255049728[0;39m 生成今日电子书快照开始
2022-07-20 09:56:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778504255049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778504255049728[0;39m ==> Parameters: 
2022-07-20 09:56:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778504255049728[0;39m <==    Updates: 0
2022-07-20 09:56:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778504255049728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:56:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778525188820992[0;39m 生成今日电子书快照开始
2022-07-20 09:56:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778525188820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778525188820992[0;39m ==> Parameters: 
2022-07-20 09:56:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778525188820992[0;39m <==    Updates: 0
2022-07-20 09:56:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778525188820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:56:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778546168729600[0;39m 生成今日电子书快照开始
2022-07-20 09:56:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778546168729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778546168729600[0;39m ==> Parameters: 
2022-07-20 09:56:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778546168729600[0;39m <==    Updates: 0
2022-07-20 09:56:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778546168729600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:56:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778567119278080[0;39m 生成今日电子书快照开始
2022-07-20 09:56:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778567119278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:56:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778567119278080[0;39m ==> Parameters: 
2022-07-20 09:56:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778567119278080[0;39m <==    Updates: 0
2022-07-20 09:56:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778567119278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:57:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778588107575296[0;39m 生成今日电子书快照开始
2022-07-20 09:57:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778588107575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778588107575296[0;39m ==> Parameters: 
2022-07-20 09:57:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778588107575296[0;39m <==    Updates: 0
2022-07-20 09:57:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778588107575296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:57:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778609095872512[0;39m 生成今日电子书快照开始
2022-07-20 09:57:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778609095872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778609095872512[0;39m ==> Parameters: 
2022-07-20 09:57:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778609095872512[0;39m <==    Updates: 0
2022-07-20 09:57:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778609095872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:57:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204778609104261120[0;39m 更新电子书下的文档数据开始
2022-07-20 09:57:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778609104261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:57:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778609104261120[0;39m ==> Parameters: 
2022-07-20 09:57:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778609104261120[0;39m <==    Updates: 7
2022-07-20 09:57:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204778609104261120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 09:57:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778630038032384[0;39m 生成今日电子书快照开始
2022-07-20 09:57:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778630038032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778630038032384[0;39m ==> Parameters: 
2022-07-20 09:57:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778630038032384[0;39m <==    Updates: 0
2022-07-20 09:57:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778630038032384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:57:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778651009552384[0;39m 生成今日电子书快照开始
2022-07-20 09:57:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778651009552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778651009552384[0;39m ==> Parameters: 
2022-07-20 09:57:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778651009552384[0;39m <==    Updates: 0
2022-07-20 09:57:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778651009552384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:57:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778672010432512[0;39m 生成今日电子书快照开始
2022-07-20 09:57:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778672010432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778672010432512[0;39m ==> Parameters: 
2022-07-20 09:57:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778672010432512[0;39m <==    Updates: 0
2022-07-20 09:57:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778672010432512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:57:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778692998729728[0;39m 生成今日电子书快照开始
2022-07-20 09:57:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778692998729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778692998729728[0;39m ==> Parameters: 
2022-07-20 09:57:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778692998729728[0;39m <==    Updates: 0
2022-07-20 09:57:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778692998729728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:57:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778713932500992[0;39m 生成今日电子书快照开始
2022-07-20 09:57:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778713932500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778713932500992[0;39m ==> Parameters: 
2022-07-20 09:57:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778713932500992[0;39m <==    Updates: 0
2022-07-20 09:57:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778713932500992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:57:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204778734895632384[0;39m 更新电子书下的文档数据开始
2022-07-20 09:57:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778734895632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:57:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778734895632384[0;39m ==> Parameters: 
2022-07-20 09:57:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778734895632384[0;39m <==    Updates: 7
2022-07-20 09:57:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204778734895632384[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 09:57:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778734912409600[0;39m 生成今日电子书快照开始
2022-07-20 09:57:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778734912409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778734912409600[0;39m ==> Parameters: 
2022-07-20 09:57:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778734912409600[0;39m <==    Updates: 0
2022-07-20 09:57:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778734912409600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:57:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778755871346688[0;39m 生成今日电子书快照开始
2022-07-20 09:57:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778755871346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778755871346688[0;39m ==> Parameters: 
2022-07-20 09:57:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778755871346688[0;39m <==    Updates: 0
2022-07-20 09:57:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778755871346688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:57:45.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778776821895168[0;39m 生成今日电子书快照开始
2022-07-20 09:57:45.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778776821895168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778776821895168[0;39m ==> Parameters: 
2022-07-20 09:57:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778776821895168[0;39m <==    Updates: 0
2022-07-20 09:57:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778776821895168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:57:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778797852135424[0;39m 生成今日电子书快照开始
2022-07-20 09:57:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778797852135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778797852135424[0;39m ==> Parameters: 
2022-07-20 09:57:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778797852135424[0;39m <==    Updates: 0
2022-07-20 09:57:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778797852135424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:57:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778818794295296[0;39m 生成今日电子书快照开始
2022-07-20 09:57:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778818794295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:57:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778818794295296[0;39m ==> Parameters: 
2022-07-20 09:57:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778818794295296[0;39m <==    Updates: 0
2022-07-20 09:57:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778818794295296[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 09:58:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778839761620992[0;39m 生成今日电子书快照开始
2022-07-20 09:58:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778839761620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778839761620992[0;39m ==> Parameters: 
2022-07-20 09:58:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778839761620992[0;39m <==    Updates: 0
2022-07-20 09:58:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778839761620992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:58:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204778860749918208[0;39m 更新电子书下的文档数据开始
2022-07-20 09:58:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778860749918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:58:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778860749918208[0;39m ==> Parameters: 
2022-07-20 09:58:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778860749918208[0;39m <==    Updates: 7
2022-07-20 09:58:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204778860749918208[0;39m 更新电子书下的文档数据结束，耗时：7 毫秒
2022-07-20 09:58:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778860787666944[0;39m 生成今日电子书快照开始
2022-07-20 09:58:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778860787666944[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778860787666944[0;39m ==> Parameters: 
2022-07-20 09:58:05.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778860787666944[0;39m <==    Updates: 0
2022-07-20 09:58:05.024 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778860787666944[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 09:58:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778881746604032[0;39m 生成今日电子书快照开始
2022-07-20 09:58:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778881746604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:10.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778881746604032[0;39m ==> Parameters: 
2022-07-20 09:58:10.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778881746604032[0;39m <==    Updates: 0
2022-07-20 09:58:10.031 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778881746604032[0;39m 生成今日电子书快照结束，耗时：14 毫秒
2022-07-20 09:58:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778902671986688[0;39m 生成今日电子书快照开始
2022-07-20 09:58:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778902671986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778902671986688[0;39m ==> Parameters: 
2022-07-20 09:58:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778902671986688[0;39m <==    Updates: 0
2022-07-20 09:58:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778902671986688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:58:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778923660283904[0;39m 生成今日电子书快照开始
2022-07-20 09:58:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778923660283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778923660283904[0;39m ==> Parameters: 
2022-07-20 09:58:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778923660283904[0;39m <==    Updates: 0
2022-07-20 09:58:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778923660283904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:58:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778944615026688[0;39m 生成今日电子书快照开始
2022-07-20 09:58:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778944615026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778944615026688[0;39m ==> Parameters: 
2022-07-20 09:58:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778944615026688[0;39m <==    Updates: 0
2022-07-20 09:58:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778944615026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:58:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778965590740992[0;39m 生成今日电子书快照开始
2022-07-20 09:58:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778965590740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778965590740992[0;39m ==> Parameters: 
2022-07-20 09:58:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778965590740992[0;39m <==    Updates: 0
2022-07-20 09:58:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778965590740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:58:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204778986545483776[0;39m 生成今日电子书快照开始
2022-07-20 09:58:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778986545483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778986545483776[0;39m ==> Parameters: 
2022-07-20 09:58:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204778986545483776[0;39m <==    Updates: 0
2022-07-20 09:58:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204778986545483776[0;39m 生成今日电子书快照结束，耗时：13 毫秒
2022-07-20 09:58:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204778986604204032[0;39m 更新电子书下的文档数据开始
2022-07-20 09:58:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778986604204032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:58:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778986604204032[0;39m ==> Parameters: 
2022-07-20 09:58:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204778986604204032[0;39m <==    Updates: 7
2022-07-20 09:58:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204778986604204032[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:58:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779007546363904[0;39m 生成今日电子书快照开始
2022-07-20 09:58:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779007546363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779007546363904[0;39m ==> Parameters: 
2022-07-20 09:58:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779007546363904[0;39m <==    Updates: 0
2022-07-20 09:58:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779007546363904[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:58:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779028526272512[0;39m 生成今日电子书快照开始
2022-07-20 09:58:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779028526272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779028526272512[0;39m ==> Parameters: 
2022-07-20 09:58:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779028526272512[0;39m <==    Updates: 0
2022-07-20 09:58:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779028526272512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:58:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779049489403904[0;39m 生成今日电子书快照开始
2022-07-20 09:58:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779049489403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779049489403904[0;39m ==> Parameters: 
2022-07-20 09:58:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779049489403904[0;39m <==    Updates: 0
2022-07-20 09:58:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779049489403904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:58:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779070431563776[0;39m 生成今日电子书快照开始
2022-07-20 09:58:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779070431563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:58:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779070431563776[0;39m ==> Parameters: 
2022-07-20 09:58:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779070431563776[0;39m <==    Updates: 0
2022-07-20 09:58:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779070431563776[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 09:59:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779091436638208[0;39m 生成今日电子书快照开始
2022-07-20 09:59:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779091436638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779091436638208[0;39m ==> Parameters: 
2022-07-20 09:59:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779091436638208[0;39m <==    Updates: 0
2022-07-20 09:59:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779091436638208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:59:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779112420741120[0;39m 生成今日电子书快照开始
2022-07-20 09:59:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779112420741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779112420741120[0;39m ==> Parameters: 
2022-07-20 09:59:05.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779112420741120[0;39m <==    Updates: 0
2022-07-20 09:59:05.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779112420741120[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 09:59:05.023 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204779112462684160[0;39m 更新电子书下的文档数据开始
2022-07-20 09:59:05.023 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779112462684160[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:59:05.024 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779112462684160[0;39m ==> Parameters: 
2022-07-20 09:59:05.025 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779112462684160[0;39m <==    Updates: 7
2022-07-20 09:59:05.026 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204779112462684160[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:59:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779133404844032[0;39m 生成今日电子书快照开始
2022-07-20 09:59:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779133404844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779133404844032[0;39m ==> Parameters: 
2022-07-20 09:59:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779133404844032[0;39m <==    Updates: 0
2022-07-20 09:59:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779133404844032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:59:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779154367975424[0;39m 生成今日电子书快照开始
2022-07-20 09:59:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779154367975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779154367975424[0;39m ==> Parameters: 
2022-07-20 09:59:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779154367975424[0;39m <==    Updates: 0
2022-07-20 09:59:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779154367975424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:59:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779175314329600[0;39m 生成今日电子书快照开始
2022-07-20 09:59:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779175314329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779175314329600[0;39m ==> Parameters: 
2022-07-20 09:59:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779175314329600[0;39m <==    Updates: 0
2022-07-20 09:59:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779175314329600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 09:59:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779196298432512[0;39m 生成今日电子书快照开始
2022-07-20 09:59:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779196298432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779196298432512[0;39m ==> Parameters: 
2022-07-20 09:59:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779196298432512[0;39m <==    Updates: 0
2022-07-20 09:59:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779196298432512[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 09:59:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779217253175296[0;39m 生成今日电子书快照开始
2022-07-20 09:59:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779217253175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779217253175296[0;39m ==> Parameters: 
2022-07-20 09:59:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779217253175296[0;39m <==    Updates: 0
2022-07-20 09:59:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779217253175296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:59:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204779238216306688[0;39m 更新电子书下的文档数据开始
2022-07-20 09:59:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779238216306688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 09:59:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779238216306688[0;39m ==> Parameters: 
2022-07-20 09:59:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779238216306688[0;39m <==    Updates: 7
2022-07-20 09:59:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204779238216306688[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 09:59:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779238228889600[0;39m 生成今日电子书快照开始
2022-07-20 09:59:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779238228889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779238228889600[0;39m ==> Parameters: 
2022-07-20 09:59:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779238228889600[0;39m <==    Updates: 0
2022-07-20 09:59:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779238228889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 09:59:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779259171049472[0;39m 生成今日电子书快照开始
2022-07-20 09:59:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779259171049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779259171049472[0;39m ==> Parameters: 
2022-07-20 09:59:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779259171049472[0;39m <==    Updates: 0
2022-07-20 09:59:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779259171049472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:59:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779280150958080[0;39m 生成今日电子书快照开始
2022-07-20 09:59:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779280150958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779280150958080[0;39m ==> Parameters: 
2022-07-20 09:59:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779280150958080[0;39m <==    Updates: 0
2022-07-20 09:59:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779280150958080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:59:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779301114089472[0;39m 生成今日电子书快照开始
2022-07-20 09:59:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779301114089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779301114089472[0;39m ==> Parameters: 
2022-07-20 09:59:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779301114089472[0;39m <==    Updates: 0
2022-07-20 09:59:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779301114089472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 09:59:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779322102386688[0;39m 生成今日电子书快照开始
2022-07-20 09:59:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779322102386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 09:59:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779322102386688[0;39m ==> Parameters: 
2022-07-20 09:59:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779322102386688[0;39m <==    Updates: 0
2022-07-20 09:59:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779322102386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:00:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779343107461120[0;39m 生成今日电子书快照开始
2022-07-20 10:00:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779343107461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779343107461120[0;39m ==> Parameters: 
2022-07-20 10:00:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779343107461120[0;39m <==    Updates: 0
2022-07-20 10:00:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779343107461120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:00:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779364058009600[0;39m 生成今日电子书快照开始
2022-07-20 10:00:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779364058009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779364058009600[0;39m ==> Parameters: 
2022-07-20 10:00:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779364058009600[0;39m <==    Updates: 0
2022-07-20 10:00:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779364058009600[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:00:05.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204779364104146944[0;39m 更新电子书下的文档数据开始
2022-07-20 10:00:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779364104146944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:00:05.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779364104146944[0;39m ==> Parameters: 
2022-07-20 10:00:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779364104146944[0;39m <==    Updates: 7
2022-07-20 10:00:05.023 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204779364104146944[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 10:00:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779385016946688[0;39m 生成今日电子书快照开始
2022-07-20 10:00:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779385016946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779385016946688[0;39m ==> Parameters: 
2022-07-20 10:00:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779385016946688[0;39m <==    Updates: 0
2022-07-20 10:00:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779385016946688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:00:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779405988466688[0;39m 生成今日电子书快照开始
2022-07-20 10:00:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779405988466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779405988466688[0;39m ==> Parameters: 
2022-07-20 10:00:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779405988466688[0;39m <==    Updates: 0
2022-07-20 10:00:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779405988466688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:00:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779426964180992[0;39m 生成今日电子书快照开始
2022-07-20 10:00:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779426964180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779426964180992[0;39m ==> Parameters: 
2022-07-20 10:00:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779426964180992[0;39m <==    Updates: 0
2022-07-20 10:00:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779426964180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:00:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779447944089600[0;39m 生成今日电子书快照开始
2022-07-20 10:00:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779447944089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779447944089600[0;39m ==> Parameters: 
2022-07-20 10:00:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779447944089600[0;39m <==    Updates: 0
2022-07-20 10:00:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779447944089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:00:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779468915609600[0;39m 生成今日电子书快照开始
2022-07-20 10:00:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779468915609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779468915609600[0;39m ==> Parameters: 
2022-07-20 10:00:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779468915609600[0;39m <==    Updates: 0
2022-07-20 10:00:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779468915609600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:00:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204779489887129600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:00:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779489887129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:00:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779489887129600[0;39m ==> Parameters: 
2022-07-20 10:00:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779489887129600[0;39m <==    Updates: 7
2022-07-20 10:00:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204779489887129600[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-20 10:00:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779489924878336[0;39m 生成今日电子书快照开始
2022-07-20 10:00:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779489924878336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779489924878336[0;39m ==> Parameters: 
2022-07-20 10:00:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779489924878336[0;39m <==    Updates: 0
2022-07-20 10:00:35.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779489924878336[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:00:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779510867038208[0;39m 生成今日电子书快照开始
2022-07-20 10:00:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779510867038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779510867038208[0;39m ==> Parameters: 
2022-07-20 10:00:40.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779510867038208[0;39m <==    Updates: 0
2022-07-20 10:00:40.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779510867038208[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 10:00:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779531851141120[0;39m 生成今日电子书快照开始
2022-07-20 10:00:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779531851141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779531851141120[0;39m ==> Parameters: 
2022-07-20 10:00:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779531851141120[0;39m <==    Updates: 0
2022-07-20 10:00:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779531851141120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:00:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779552822661120[0;39m 生成今日电子书快照开始
2022-07-20 10:00:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779552822661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779552822661120[0;39m ==> Parameters: 
2022-07-20 10:00:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779552822661120[0;39m <==    Updates: 0
2022-07-20 10:00:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779552822661120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:00:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779573756432384[0;39m 生成今日电子书快照开始
2022-07-20 10:00:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779573756432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:00:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779573756432384[0;39m ==> Parameters: 
2022-07-20 10:00:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779573756432384[0;39m <==    Updates: 0
2022-07-20 10:00:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779573756432384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:01:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779594765701120[0;39m 生成今日电子书快照开始
2022-07-20 10:01:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779594765701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779594765701120[0;39m ==> Parameters: 
2022-07-20 10:01:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779594765701120[0;39m <==    Updates: 0
2022-07-20 10:01:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779594765701120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:01:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204779615728832512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:01:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779615728832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:01:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779615728832512[0;39m ==> Parameters: 
2022-07-20 10:01:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779615728832512[0;39m <==    Updates: 7
2022-07-20 10:01:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204779615728832512[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 10:01:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779615753998336[0;39m 生成今日电子书快照开始
2022-07-20 10:01:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779615753998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779615753998336[0;39m ==> Parameters: 
2022-07-20 10:01:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779615753998336[0;39m <==    Updates: 0
2022-07-20 10:01:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779615753998336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:01:10.028 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779636771655680[0;39m 生成今日电子书快照开始
2022-07-20 10:01:10.032 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779636771655680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:10.033 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779636771655680[0;39m ==> Parameters: 
2022-07-20 10:01:10.040 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779636771655680[0;39m <==    Updates: 0
2022-07-20 10:01:10.041 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779636771655680[0;39m 生成今日电子书快照结束，耗时：13 毫秒
2022-07-20 10:01:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779657638318080[0;39m 生成今日电子书快照开始
2022-07-20 10:01:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779657638318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779657638318080[0;39m ==> Parameters: 
2022-07-20 10:01:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779657638318080[0;39m <==    Updates: 0
2022-07-20 10:01:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779657638318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:01:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779678639198208[0;39m 生成今日电子书快照开始
2022-07-20 10:01:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779678639198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779678639198208[0;39m ==> Parameters: 
2022-07-20 10:01:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779678639198208[0;39m <==    Updates: 0
2022-07-20 10:01:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779678639198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:01:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779699593940992[0;39m 生成今日电子书快照开始
2022-07-20 10:01:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779699593940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779699593940992[0;39m ==> Parameters: 
2022-07-20 10:01:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779699593940992[0;39m <==    Updates: 0
2022-07-20 10:01:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779699593940992[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:01:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779720565460992[0;39m 生成今日电子书快照开始
2022-07-20 10:01:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779720565460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779720565460992[0;39m ==> Parameters: 
2022-07-20 10:01:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779720565460992[0;39m <==    Updates: 0
2022-07-20 10:01:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779720565460992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:01:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204779741549563904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:01:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779741549563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:01:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779741549563904[0;39m ==> Parameters: 
2022-07-20 10:01:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779741549563904[0;39m <==    Updates: 7
2022-07-20 10:01:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204779741549563904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:01:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779741557952512[0;39m 生成今日电子书快照开始
2022-07-20 10:01:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779741557952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779741557952512[0;39m ==> Parameters: 
2022-07-20 10:01:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779741557952512[0;39m <==    Updates: 0
2022-07-20 10:01:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779741557952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:01:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779762495918080[0;39m 生成今日电子书快照开始
2022-07-20 10:01:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779762495918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779762495918080[0;39m ==> Parameters: 
2022-07-20 10:01:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779762495918080[0;39m <==    Updates: 0
2022-07-20 10:01:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779762495918080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:01:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779783484215296[0;39m 生成今日电子书快照开始
2022-07-20 10:01:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779783484215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:45.094 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779783484215296[0;39m ==> Parameters: 
2022-07-20 10:01:45.096 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779783484215296[0;39m <==    Updates: 0
2022-07-20 10:01:45.096 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779783484215296[0;39m 生成今日电子书快照结束，耗时：89 毫秒
2022-07-20 10:01:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779804489289728[0;39m 生成今日电子书快照开始
2022-07-20 10:01:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779804489289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779804489289728[0;39m ==> Parameters: 
2022-07-20 10:01:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779804489289728[0;39m <==    Updates: 0
2022-07-20 10:01:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779804489289728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:01:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779825431449600[0;39m 生成今日电子书快照开始
2022-07-20 10:01:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779825431449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:01:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779825431449600[0;39m ==> Parameters: 
2022-07-20 10:01:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779825431449600[0;39m <==    Updates: 0
2022-07-20 10:01:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779825431449600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:02:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779846394580992[0;39m 生成今日电子书快照开始
2022-07-20 10:02:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779846394580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779846394580992[0;39m ==> Parameters: 
2022-07-20 10:02:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779846394580992[0;39m <==    Updates: 0
2022-07-20 10:02:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779846394580992[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:02:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204779867361906688[0;39m 更新电子书下的文档数据开始
2022-07-20 10:02:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779867361906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:02:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779867361906688[0;39m ==> Parameters: 
2022-07-20 10:02:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779867361906688[0;39m <==    Updates: 7
2022-07-20 10:02:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204779867361906688[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 10:02:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779867387072512[0;39m 生成今日电子书快照开始
2022-07-20 10:02:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779867387072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779867387072512[0;39m ==> Parameters: 
2022-07-20 10:02:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779867387072512[0;39m <==    Updates: 0
2022-07-20 10:02:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779867387072512[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:02:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779888346009600[0;39m 生成今日电子书快照开始
2022-07-20 10:02:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779888346009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779888346009600[0;39m ==> Parameters: 
2022-07-20 10:02:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779888346009600[0;39m <==    Updates: 0
2022-07-20 10:02:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779888346009600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:02:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779909292363776[0;39m 生成今日电子书快照开始
2022-07-20 10:02:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779909292363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779909292363776[0;39m ==> Parameters: 
2022-07-20 10:02:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779909292363776[0;39m <==    Updates: 0
2022-07-20 10:02:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779909292363776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:02:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779930272272384[0;39m 生成今日电子书快照开始
2022-07-20 10:02:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779930272272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779930272272384[0;39m ==> Parameters: 
2022-07-20 10:02:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779930272272384[0;39m <==    Updates: 0
2022-07-20 10:02:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779930272272384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:02:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779951294124032[0;39m 生成今日电子书快照开始
2022-07-20 10:02:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779951294124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:25.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779951294124032[0;39m ==> Parameters: 
2022-07-20 10:02:25.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779951294124032[0;39m <==    Updates: 0
2022-07-20 10:02:25.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779951294124032[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:02:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779972261449728[0;39m 生成今日电子书快照开始
2022-07-20 10:02:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779972261449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779972261449728[0;39m ==> Parameters: 
2022-07-20 10:02:30.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779972261449728[0;39m <==    Updates: 0
2022-07-20 10:02:30.024 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779972261449728[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:02:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204779993232969728[0;39m 更新电子书下的文档数据开始
2022-07-20 10:02:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779993232969728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:02:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779993232969728[0;39m ==> Parameters: 
2022-07-20 10:02:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204779993232969728[0;39m <==    Updates: 7
2022-07-20 10:02:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204779993232969728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:02:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204779993241358336[0;39m 生成今日电子书快照开始
2022-07-20 10:02:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779993241358336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779993241358336[0;39m ==> Parameters: 
2022-07-20 10:02:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204779993241358336[0;39m <==    Updates: 0
2022-07-20 10:02:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204779993241358336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:02:36.902 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-2 - Shutdown initiated...
2022-07-20 10:02:36.911 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-2 - Shutdown completed.
2022-07-20 10:02:37.168 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 15764 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:02:37.168 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:02:37.428 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:02:37.428 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:02:37.436 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-07-20 10:02:37.796 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:02:37.797 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:02:37.798 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:02:37.798 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:02:37.846 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:02:37.847 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 675 ms
2022-07-20 10:02:38.557 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:02:38.569 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:02:38.572 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:02:38.578 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.446 seconds (JVM running for 1913.434)
2022-07-20 10:02:38.579 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:02:38.580 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:02:38.580 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:02:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780014154158080[0;39m 生成今日电子书快照开始
2022-07-20 10:02:40.006 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204780014154158080[0;39m HikariPool-3 - Starting...
2022-07-20 10:02:40.022 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204780014154158080[0;39m HikariPool-3 - Start completed.
2022-07-20 10:02:40.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780014154158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:40.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780014154158080[0;39m ==> Parameters: 
2022-07-20 10:02:40.027 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780014154158080[0;39m <==    Updates: 0
2022-07-20 10:02:40.028 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780014154158080[0;39m 生成今日电子书快照结束，耗时：23 毫秒
2022-07-20 10:02:40.418 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-3 - Shutdown initiated...
2022-07-20 10:02:40.422 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-3 - Shutdown completed.
2022-07-20 10:02:40.651 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 15764 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:02:40.651 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:02:40.829 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:02:40.829 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:02:40.838 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2022-07-20 10:02:40.964 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:02:40.964 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:02:40.964 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:02:40.964 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:02:41.010 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:02:41.010 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 355 ms
2022-07-20 10:02:41.616 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:02:41.627 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:02:41.629 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:02:41.632 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.012 seconds (JVM running for 1916.489)
2022-07-20 10:02:41.633 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:02:41.633 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:02:41.633 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:02:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780035171815424[0;39m 生成今日电子书快照开始
2022-07-20 10:02:45.016 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204780035171815424[0;39m HikariPool-4 - Starting...
2022-07-20 10:02:45.020 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204780035171815424[0;39m HikariPool-4 - Start completed.
2022-07-20 10:02:45.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780035171815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:45.037 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780035171815424[0;39m ==> Parameters: 
2022-07-20 10:02:45.039 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780035171815424[0;39m <==    Updates: 0
2022-07-20 10:02:45.040 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780035171815424[0;39m 生成今日电子书快照结束，耗时：24 毫秒
2022-07-20 10:02:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780056143335424[0;39m 生成今日电子书快照开始
2022-07-20 10:02:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780056143335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780056143335424[0;39m ==> Parameters: 
2022-07-20 10:02:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780056143335424[0;39m <==    Updates: 0
2022-07-20 10:02:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780056143335424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:02:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780077093883904[0;39m 生成今日电子书快照开始
2022-07-20 10:02:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780077093883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:02:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780077093883904[0;39m ==> Parameters: 
2022-07-20 10:02:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780077093883904[0;39m <==    Updates: 0
2022-07-20 10:02:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780077093883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:03:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780098090569728[0;39m 生成今日电子书快照开始
2022-07-20 10:03:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780098090569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780098090569728[0;39m ==> Parameters: 
2022-07-20 10:03:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780098090569728[0;39m <==    Updates: 0
2022-07-20 10:03:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780098090569728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:03:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204780119032729600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:03:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780119032729600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:03:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780119032729600[0;39m ==> Parameters: 
2022-07-20 10:03:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780119032729600[0;39m <==    Updates: 7
2022-07-20 10:03:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204780119032729600[0;39m 更新电子书下的文档数据结束，耗时：7 毫秒
2022-07-20 10:03:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780119066284032[0;39m 生成今日电子书快照开始
2022-07-20 10:03:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780119066284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780119066284032[0;39m ==> Parameters: 
2022-07-20 10:03:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780119066284032[0;39m <==    Updates: 0
2022-07-20 10:03:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780119066284032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:03:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780139995860992[0;39m 生成今日电子书快照开始
2022-07-20 10:03:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780139995860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780139995860992[0;39m ==> Parameters: 
2022-07-20 10:03:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780139995860992[0;39m <==    Updates: 0
2022-07-20 10:03:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780139995860992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:03:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780160988352512[0;39m 生成今日电子书快照开始
2022-07-20 10:03:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780160988352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780160988352512[0;39m ==> Parameters: 
2022-07-20 10:03:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780160988352512[0;39m <==    Updates: 0
2022-07-20 10:03:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780160988352512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:03:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780181976649728[0;39m 生成今日电子书快照开始
2022-07-20 10:03:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780181976649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780181976649728[0;39m ==> Parameters: 
2022-07-20 10:03:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780181976649728[0;39m <==    Updates: 0
2022-07-20 10:03:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780181976649728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:03:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780202931392512[0;39m 生成今日电子书快照开始
2022-07-20 10:03:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780202931392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780202931392512[0;39m ==> Parameters: 
2022-07-20 10:03:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780202931392512[0;39m <==    Updates: 0
2022-07-20 10:03:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780202931392512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:03:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780223911301120[0;39m 生成今日电子书快照开始
2022-07-20 10:03:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780223911301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780223911301120[0;39m ==> Parameters: 
2022-07-20 10:03:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780223911301120[0;39m <==    Updates: 0
2022-07-20 10:03:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780223911301120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:03:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204780244849266688[0;39m 更新电子书下的文档数据开始
2022-07-20 10:03:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780244849266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:03:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780244849266688[0;39m ==> Parameters: 
2022-07-20 10:03:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780244849266688[0;39m <==    Updates: 7
2022-07-20 10:03:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204780244849266688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:03:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780244857655296[0;39m 生成今日电子书快照开始
2022-07-20 10:03:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780244857655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780244857655296[0;39m ==> Parameters: 
2022-07-20 10:03:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780244857655296[0;39m <==    Updates: 0
2022-07-20 10:03:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780244857655296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:03:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780265841758208[0;39m 生成今日电子书快照开始
2022-07-20 10:03:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780265841758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780265841758208[0;39m ==> Parameters: 
2022-07-20 10:03:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780265841758208[0;39m <==    Updates: 0
2022-07-20 10:03:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780265841758208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:03:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780286796500992[0;39m 生成今日电子书快照开始
2022-07-20 10:03:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780286796500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780286796500992[0;39m ==> Parameters: 
2022-07-20 10:03:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780286796500992[0;39m <==    Updates: 0
2022-07-20 10:03:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780286796500992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:03:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780307755438080[0;39m 生成今日电子书快照开始
2022-07-20 10:03:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780307755438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780307755438080[0;39m ==> Parameters: 
2022-07-20 10:03:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780307755438080[0;39m <==    Updates: 0
2022-07-20 10:03:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780307755438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:03:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780328739540992[0;39m 生成今日电子书快照开始
2022-07-20 10:03:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780328739540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:03:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780328739540992[0;39m ==> Parameters: 
2022-07-20 10:03:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780328739540992[0;39m <==    Updates: 0
2022-07-20 10:03:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780328739540992[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:04:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780349694283776[0;39m 生成今日电子书快照开始
2022-07-20 10:04:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780349694283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780349694283776[0;39m ==> Parameters: 
2022-07-20 10:04:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780349694283776[0;39m <==    Updates: 0
2022-07-20 10:04:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780349694283776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:04:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204780370665803776[0;39m 更新电子书下的文档数据开始
2022-07-20 10:04:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780370665803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:04:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780370665803776[0;39m ==> Parameters: 
2022-07-20 10:04:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780370665803776[0;39m <==    Updates: 7
2022-07-20 10:04:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204780370665803776[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:04:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780370678386688[0;39m 生成今日电子书快照开始
2022-07-20 10:04:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780370678386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780370678386688[0;39m ==> Parameters: 
2022-07-20 10:04:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780370678386688[0;39m <==    Updates: 0
2022-07-20 10:04:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780370678386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:04:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780391649906688[0;39m 生成今日电子书快照开始
2022-07-20 10:04:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780391649906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780391649906688[0;39m ==> Parameters: 
2022-07-20 10:04:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780391649906688[0;39m <==    Updates: 0
2022-07-20 10:04:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780391649906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:04:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780412604649472[0;39m 生成今日电子书快照开始
2022-07-20 10:04:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780412604649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780412604649472[0;39m ==> Parameters: 
2022-07-20 10:04:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780412604649472[0;39m <==    Updates: 0
2022-07-20 10:04:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780412604649472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:04:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780433613918208[0;39m 生成今日电子书快照开始
2022-07-20 10:04:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780433613918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780433613918208[0;39m ==> Parameters: 
2022-07-20 10:04:20.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780433613918208[0;39m <==    Updates: 0
2022-07-20 10:04:20.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780433613918208[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:04:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780454577049600[0;39m 生成今日电子书快照开始
2022-07-20 10:04:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780454577049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780454577049600[0;39m ==> Parameters: 
2022-07-20 10:04:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780454577049600[0;39m <==    Updates: 0
2022-07-20 10:04:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780454577049600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:04:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780475540180992[0;39m 生成今日电子书快照开始
2022-07-20 10:04:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780475540180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780475540180992[0;39m ==> Parameters: 
2022-07-20 10:04:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780475540180992[0;39m <==    Updates: 0
2022-07-20 10:04:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780475540180992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:04:33.345 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-4 - Shutdown initiated...
2022-07-20 10:04:33.348 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-4 - Shutdown completed.
2022-07-20 10:04:33.533 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 15764 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:04:33.533 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:04:33.763 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:04:33.763 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:04:33.769 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2022-07-20 10:04:34.047 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:04:34.048 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:04:34.048 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:04:34.048 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:04:34.088 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:04:34.088 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 553 ms
2022-07-20 10:04:34.749 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:04:34.761 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:04:34.764 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:04:34.767 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.263 seconds (JVM running for 2029.623)
2022-07-20 10:04:34.768 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:04:34.768 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:04:34.768 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:04:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204780496545255424[0;39m 更新电子书下的文档数据开始
2022-07-20 10:04:35.017 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204780496545255424[0;39m HikariPool-5 - Starting...
2022-07-20 10:04:35.023 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204780496545255424[0;39m HikariPool-5 - Start completed.
2022-07-20 10:04:35.024 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780496545255424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:04:35.024 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780496545255424[0;39m ==> Parameters: 
2022-07-20 10:04:35.026 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780496545255424[0;39m <==    Updates: 7
2022-07-20 10:04:35.027 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204780496545255424[0;39m 更新电子书下的文档数据结束，耗时：12 毫秒
2022-07-20 10:04:35.027 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780496599781376[0;39m 生成今日电子书快照开始
2022-07-20 10:04:35.027 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780496599781376[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:35.028 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780496599781376[0;39m ==> Parameters: 
2022-07-20 10:04:35.030 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780496599781376[0;39m <==    Updates: 0
2022-07-20 10:04:35.030 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780496599781376[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:04:36.562 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-5 - Shutdown initiated...
2022-07-20 10:04:36.565 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-5 - Shutdown completed.
2022-07-20 10:04:36.699 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 15764 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:04:36.699 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:04:36.859 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:04:36.859 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:04:36.865 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2022-07-20 10:04:36.980 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:04:36.980 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:04:36.980 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:04:36.981 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:04:37.016 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:04:37.016 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 314 ms
2022-07-20 10:04:37.588 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:04:37.598 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:04:37.600 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:04:37.604 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 0.936 seconds (JVM running for 2032.461)
2022-07-20 10:04:37.605 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:04:37.605 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:04:37.606 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:04:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780517487415296[0;39m 生成今日电子书快照开始
2022-07-20 10:04:40.009 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204780517487415296[0;39m HikariPool-6 - Starting...
2022-07-20 10:04:40.012 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204780517487415296[0;39m HikariPool-6 - Start completed.
2022-07-20 10:04:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780517487415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780517487415296[0;39m ==> Parameters: 
2022-07-20 10:04:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780517487415296[0;39m <==    Updates: 0
2022-07-20 10:04:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780517487415296[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:04:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780538471518208[0;39m 生成今日电子书快照开始
2022-07-20 10:04:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780538471518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:45.059 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780538471518208[0;39m ==> Parameters: 
2022-07-20 10:04:45.060 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780538471518208[0;39m <==    Updates: 0
2022-07-20 10:04:45.060 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780538471518208[0;39m 生成今日电子书快照结束，耗时：50 毫秒
2022-07-20 10:04:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780559434649600[0;39m 生成今日电子书快照开始
2022-07-20 10:04:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780559434649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780559434649600[0;39m ==> Parameters: 
2022-07-20 10:04:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780559434649600[0;39m <==    Updates: 0
2022-07-20 10:04:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780559434649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:04:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780580427141120[0;39m 生成今日电子书快照开始
2022-07-20 10:04:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780580427141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:04:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780580427141120[0;39m ==> Parameters: 
2022-07-20 10:04:55.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780580427141120[0;39m <==    Updates: 0
2022-07-20 10:04:55.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780580427141120[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:05:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780601394466816[0;39m 生成今日电子书快照开始
2022-07-20 10:05:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780601394466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780601394466816[0;39m ==> Parameters: 
2022-07-20 10:05:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780601394466816[0;39m <==    Updates: 0
2022-07-20 10:05:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780601394466816[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:05:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780622353403904[0;39m 生成今日电子书快照开始
2022-07-20 10:05:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780622353403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780622353403904[0;39m ==> Parameters: 
2022-07-20 10:05:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780622353403904[0;39m <==    Updates: 0
2022-07-20 10:05:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780622353403904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:05:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204780622370181120[0;39m 更新电子书下的文档数据开始
2022-07-20 10:05:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780622370181120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:05:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780622370181120[0;39m ==> Parameters: 
2022-07-20 10:05:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780622370181120[0;39m <==    Updates: 7
2022-07-20 10:05:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204780622370181120[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 10:05:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780643303952384[0;39m 生成今日电子书快照开始
2022-07-20 10:05:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780643303952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780643303952384[0;39m ==> Parameters: 
2022-07-20 10:05:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780643303952384[0;39m <==    Updates: 0
2022-07-20 10:05:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780643303952384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:05:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780664300638208[0;39m 生成今日电子书快照开始
2022-07-20 10:05:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780664300638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780664300638208[0;39m ==> Parameters: 
2022-07-20 10:05:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780664300638208[0;39m <==    Updates: 0
2022-07-20 10:05:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780664300638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:05:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780685238603776[0;39m 生成今日电子书快照开始
2022-07-20 10:05:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780685238603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780685238603776[0;39m ==> Parameters: 
2022-07-20 10:05:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780685238603776[0;39m <==    Updates: 0
2022-07-20 10:05:20.094 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780685238603776[0;39m 生成今日电子书快照结束，耗时：92 毫秒
2022-07-20 10:05:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780706218512384[0;39m 生成今日电子书快照开始
2022-07-20 10:05:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780706218512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780706218512384[0;39m ==> Parameters: 
2022-07-20 10:05:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780706218512384[0;39m <==    Updates: 0
2022-07-20 10:05:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780706218512384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:05:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780727231975424[0;39m 生成今日电子书快照开始
2022-07-20 10:05:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780727231975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780727231975424[0;39m ==> Parameters: 
2022-07-20 10:05:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780727231975424[0;39m <==    Updates: 0
2022-07-20 10:05:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780727231975424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:05:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204780748174135296[0;39m 更新电子书下的文档数据开始
2022-07-20 10:05:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780748174135296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:05:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780748174135296[0;39m ==> Parameters: 
2022-07-20 10:05:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780748174135296[0;39m <==    Updates: 7
2022-07-20 10:05:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204780748174135296[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 10:05:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780748190912512[0;39m 生成今日电子书快照开始
2022-07-20 10:05:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780748190912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780748190912512[0;39m ==> Parameters: 
2022-07-20 10:05:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780748190912512[0;39m <==    Updates: 0
2022-07-20 10:05:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780748190912512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:05:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780769124683776[0;39m 生成今日电子书快照开始
2022-07-20 10:05:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780769124683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780769124683776[0;39m ==> Parameters: 
2022-07-20 10:05:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780769124683776[0;39m <==    Updates: 0
2022-07-20 10:05:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780769124683776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:05:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780790117175296[0;39m 生成今日电子书快照开始
2022-07-20 10:05:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780790117175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780790117175296[0;39m ==> Parameters: 
2022-07-20 10:05:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780790117175296[0;39m <==    Updates: 0
2022-07-20 10:05:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780790117175296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:05:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780811071918080[0;39m 生成今日电子书快照开始
2022-07-20 10:05:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780811071918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780811071918080[0;39m ==> Parameters: 
2022-07-20 10:05:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780811071918080[0;39m <==    Updates: 0
2022-07-20 10:05:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780811071918080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:05:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780832081186816[0;39m 生成今日电子书快照开始
2022-07-20 10:05:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780832081186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:05:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780832081186816[0;39m ==> Parameters: 
2022-07-20 10:05:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780832081186816[0;39m <==    Updates: 0
2022-07-20 10:05:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780832081186816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:06:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780853031735296[0;39m 生成今日电子书快照开始
2022-07-20 10:06:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780853031735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780853031735296[0;39m ==> Parameters: 
2022-07-20 10:06:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780853031735296[0;39m <==    Updates: 0
2022-07-20 10:06:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780853031735296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:06:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780874011643904[0;39m 生成今日电子书快照开始
2022-07-20 10:06:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780874011643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780874011643904[0;39m ==> Parameters: 
2022-07-20 10:06:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780874011643904[0;39m <==    Updates: 0
2022-07-20 10:06:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780874011643904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:06:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204780874024226816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:06:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780874024226816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:06:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780874024226816[0;39m ==> Parameters: 
2022-07-20 10:06:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780874024226816[0;39m <==    Updates: 7
2022-07-20 10:06:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204780874024226816[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:06:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780894957998080[0;39m 生成今日电子书快照开始
2022-07-20 10:06:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780894957998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780894957998080[0;39m ==> Parameters: 
2022-07-20 10:06:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780894957998080[0;39m <==    Updates: 0
2022-07-20 10:06:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780894957998080[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:06:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780915942100992[0;39m 生成今日电子书快照开始
2022-07-20 10:06:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780915942100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780915942100992[0;39m ==> Parameters: 
2022-07-20 10:06:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780915942100992[0;39m <==    Updates: 0
2022-07-20 10:06:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780915942100992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:06:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780936917815296[0;39m 生成今日电子书快照开始
2022-07-20 10:06:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780936917815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780936917815296[0;39m ==> Parameters: 
2022-07-20 10:06:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780936917815296[0;39m <==    Updates: 0
2022-07-20 10:06:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780936917815296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:06:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780957889335296[0;39m 生成今日电子书快照开始
2022-07-20 10:06:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780957889335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780957889335296[0;39m ==> Parameters: 
2022-07-20 10:06:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780957889335296[0;39m <==    Updates: 0
2022-07-20 10:06:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780957889335296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:06:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780978844078080[0;39m 生成今日电子书快照开始
2022-07-20 10:06:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780978844078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780978844078080[0;39m ==> Parameters: 
2022-07-20 10:06:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780978844078080[0;39m <==    Updates: 0
2022-07-20 10:06:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780978844078080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:06:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204780999844958208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:06:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780999844958208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:06:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780999844958208[0;39m ==> Parameters: 
2022-07-20 10:06:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204780999844958208[0;39m <==    Updates: 7
2022-07-20 10:06:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204780999844958208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:06:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204780999849152512[0;39m 生成今日电子书快照开始
2022-07-20 10:06:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780999849152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780999849152512[0;39m ==> Parameters: 
2022-07-20 10:06:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204780999849152512[0;39m <==    Updates: 0
2022-07-20 10:06:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204780999849152512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:06:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781020782923776[0;39m 生成今日电子书快照开始
2022-07-20 10:06:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781020782923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781020782923776[0;39m ==> Parameters: 
2022-07-20 10:06:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781020782923776[0;39m <==    Updates: 0
2022-07-20 10:06:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781020782923776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:06:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781041775415296[0;39m 生成今日电子书快照开始
2022-07-20 10:06:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781041775415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781041775415296[0;39m ==> Parameters: 
2022-07-20 10:06:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781041775415296[0;39m <==    Updates: 0
2022-07-20 10:06:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781041775415296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:06:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781062738546688[0;39m 生成今日电子书快照开始
2022-07-20 10:06:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781062738546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781062738546688[0;39m ==> Parameters: 
2022-07-20 10:06:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781062738546688[0;39m <==    Updates: 0
2022-07-20 10:06:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781062738546688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:06:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781083710066688[0;39m 生成今日电子书快照开始
2022-07-20 10:06:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781083710066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:06:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781083710066688[0;39m ==> Parameters: 
2022-07-20 10:06:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781083710066688[0;39m <==    Updates: 0
2022-07-20 10:06:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781083710066688[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:07:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781104677392384[0;39m 生成今日电子书快照开始
2022-07-20 10:07:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781104677392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781104677392384[0;39m ==> Parameters: 
2022-07-20 10:07:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781104677392384[0;39m <==    Updates: 0
2022-07-20 10:07:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781104677392384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:07:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781125665689600[0;39m 生成今日电子书快照开始
2022-07-20 10:07:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781125665689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781125665689600[0;39m ==> Parameters: 
2022-07-20 10:07:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781125665689600[0;39m <==    Updates: 0
2022-07-20 10:07:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781125665689600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:07:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204781125682466816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:07:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781125682466816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:07:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781125682466816[0;39m ==> Parameters: 
2022-07-20 10:07:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781125682466816[0;39m <==    Updates: 7
2022-07-20 10:07:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204781125682466816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:07:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781146641403904[0;39m 生成今日电子书快照开始
2022-07-20 10:07:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781146641403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781146641403904[0;39m ==> Parameters: 
2022-07-20 10:07:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781146641403904[0;39m <==    Updates: 0
2022-07-20 10:07:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781146641403904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:07:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781167596146688[0;39m 生成今日电子书快照开始
2022-07-20 10:07:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781167596146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781167596146688[0;39m ==> Parameters: 
2022-07-20 10:07:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781167596146688[0;39m <==    Updates: 0
2022-07-20 10:07:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781167596146688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:07:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781188563472384[0;39m 生成今日电子书快照开始
2022-07-20 10:07:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781188563472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781188563472384[0;39m ==> Parameters: 
2022-07-20 10:07:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781188563472384[0;39m <==    Updates: 0
2022-07-20 10:07:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781188563472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:07:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781209530798080[0;39m 生成今日电子书快照开始
2022-07-20 10:07:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781209530798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781209530798080[0;39m ==> Parameters: 
2022-07-20 10:07:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781209530798080[0;39m <==    Updates: 0
2022-07-20 10:07:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781209530798080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:07:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781230552649728[0;39m 生成今日电子书快照开始
2022-07-20 10:07:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781230552649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781230552649728[0;39m ==> Parameters: 
2022-07-20 10:07:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781230552649728[0;39m <==    Updates: 0
2022-07-20 10:07:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781230552649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:07:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204781251499003904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:07:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781251499003904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:07:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781251499003904[0;39m ==> Parameters: 
2022-07-20 10:07:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781251499003904[0;39m <==    Updates: 7
2022-07-20 10:07:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204781251499003904[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:07:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781251511586816[0;39m 生成今日电子书快照开始
2022-07-20 10:07:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781251511586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781251511586816[0;39m ==> Parameters: 
2022-07-20 10:07:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781251511586816[0;39m <==    Updates: 0
2022-07-20 10:07:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781251511586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:07:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781272457940992[0;39m 生成今日电子书快照开始
2022-07-20 10:07:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781272457940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781272457940992[0;39m ==> Parameters: 
2022-07-20 10:07:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781272457940992[0;39m <==    Updates: 0
2022-07-20 10:07:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781272457940992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:07:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781293454626816[0;39m 生成今日电子书快照开始
2022-07-20 10:07:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781293454626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781293454626816[0;39m ==> Parameters: 
2022-07-20 10:07:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781293454626816[0;39m <==    Updates: 0
2022-07-20 10:07:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781293454626816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:07:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781314400980992[0;39m 生成今日电子书快照开始
2022-07-20 10:07:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781314400980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781314400980992[0;39m ==> Parameters: 
2022-07-20 10:07:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781314400980992[0;39m <==    Updates: 0
2022-07-20 10:07:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781314400980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:07:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781335389278208[0;39m 生成今日电子书快照开始
2022-07-20 10:07:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781335389278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:07:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781335389278208[0;39m ==> Parameters: 
2022-07-20 10:07:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781335389278208[0;39m <==    Updates: 0
2022-07-20 10:07:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781335389278208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:08:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781356373381120[0;39m 生成今日电子书快照开始
2022-07-20 10:08:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781356373381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781356373381120[0;39m ==> Parameters: 
2022-07-20 10:08:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781356373381120[0;39m <==    Updates: 0
2022-07-20 10:08:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781356373381120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:08:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204781377294569472[0;39m 更新电子书下的文档数据开始
2022-07-20 10:08:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781377294569472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:08:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781377294569472[0;39m ==> Parameters: 
2022-07-20 10:08:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781377294569472[0;39m <==    Updates: 7
2022-07-20 10:08:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204781377294569472[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:08:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781377307152384[0;39m 生成今日电子书快照开始
2022-07-20 10:08:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781377307152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781377307152384[0;39m ==> Parameters: 
2022-07-20 10:08:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781377307152384[0;39m <==    Updates: 0
2022-07-20 10:08:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781377307152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:08:10.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781398261895168[0;39m 生成今日电子书快照开始
2022-07-20 10:08:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781398261895168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781398261895168[0;39m ==> Parameters: 
2022-07-20 10:08:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781398261895168[0;39m <==    Updates: 0
2022-07-20 10:08:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781398261895168[0;39m 生成今日电子书快照结束，耗时：12 毫秒
2022-07-20 10:08:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781419241803776[0;39m 生成今日电子书快照开始
2022-07-20 10:08:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781419241803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781419241803776[0;39m ==> Parameters: 
2022-07-20 10:08:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781419241803776[0;39m <==    Updates: 0
2022-07-20 10:08:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781419241803776[0;39m 生成今日电子书快照结束，耗时：12 毫秒
2022-07-20 10:08:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781440225906688[0;39m 生成今日电子书快照开始
2022-07-20 10:08:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781440225906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781440225906688[0;39m ==> Parameters: 
2022-07-20 10:08:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781440225906688[0;39m <==    Updates: 0
2022-07-20 10:08:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781440225906688[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:08:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781461189038080[0;39m 生成今日电子书快照开始
2022-07-20 10:08:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781461189038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781461189038080[0;39m ==> Parameters: 
2022-07-20 10:08:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781461189038080[0;39m <==    Updates: 0
2022-07-20 10:08:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781461189038080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:08:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781482160558080[0;39m 生成今日电子书快照开始
2022-07-20 10:08:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781482160558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781482160558080[0;39m ==> Parameters: 
2022-07-20 10:08:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781482160558080[0;39m <==    Updates: 0
2022-07-20 10:08:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781482160558080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:08:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204781503174021120[0;39m 更新电子书下的文档数据开始
2022-07-20 10:08:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781503174021120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:08:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781503174021120[0;39m ==> Parameters: 
2022-07-20 10:08:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781503174021120[0;39m <==    Updates: 7
2022-07-20 10:08:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204781503174021120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:08:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781503182409728[0;39m 生成今日电子书快照开始
2022-07-20 10:08:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781503182409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781503182409728[0;39m ==> Parameters: 
2022-07-20 10:08:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781503182409728[0;39m <==    Updates: 0
2022-07-20 10:08:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781503182409728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:08:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781524111986688[0;39m 生成今日电子书快照开始
2022-07-20 10:08:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781524111986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781524111986688[0;39m ==> Parameters: 
2022-07-20 10:08:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781524111986688[0;39m <==    Updates: 0
2022-07-20 10:08:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781524111986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:08:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781545104478208[0;39m 生成今日电子书快照开始
2022-07-20 10:08:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781545104478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781545104478208[0;39m ==> Parameters: 
2022-07-20 10:08:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781545104478208[0;39m <==    Updates: 0
2022-07-20 10:08:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781545104478208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:08:50.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781566034055168[0;39m 生成今日电子书快照开始
2022-07-20 10:08:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781566034055168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781566034055168[0;39m ==> Parameters: 
2022-07-20 10:08:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781566034055168[0;39m <==    Updates: 0
2022-07-20 10:08:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781566034055168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:08:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781587018158080[0;39m 生成今日电子书快照开始
2022-07-20 10:08:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781587018158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:08:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781587018158080[0;39m ==> Parameters: 
2022-07-20 10:08:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781587018158080[0;39m <==    Updates: 0
2022-07-20 10:08:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781587018158080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:09:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781608023232512[0;39m 生成今日电子书快照开始
2022-07-20 10:09:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781608023232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781608023232512[0;39m ==> Parameters: 
2022-07-20 10:09:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781608023232512[0;39m <==    Updates: 0
2022-07-20 10:09:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781608023232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:09:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204781628986363904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:09:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781628986363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:09:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781628986363904[0;39m ==> Parameters: 
2022-07-20 10:09:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781628986363904[0;39m <==    Updates: 7
2022-07-20 10:09:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204781628986363904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:09:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781628990558208[0;39m 生成今日电子书快照开始
2022-07-20 10:09:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781628990558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781628990558208[0;39m ==> Parameters: 
2022-07-20 10:09:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781628990558208[0;39m <==    Updates: 0
2022-07-20 10:09:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781628990558208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:09:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781649949495296[0;39m 生成今日电子书快照开始
2022-07-20 10:09:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781649949495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781649949495296[0;39m ==> Parameters: 
2022-07-20 10:09:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781649949495296[0;39m <==    Updates: 0
2022-07-20 10:09:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781649949495296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:09:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781670900043776[0;39m 生成今日电子书快照开始
2022-07-20 10:09:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781670900043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781670900043776[0;39m ==> Parameters: 
2022-07-20 10:09:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781670900043776[0;39m <==    Updates: 0
2022-07-20 10:09:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781670900043776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:09:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781691896729600[0;39m 生成今日电子书快照开始
2022-07-20 10:09:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781691896729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781691896729600[0;39m ==> Parameters: 
2022-07-20 10:09:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781691896729600[0;39m <==    Updates: 0
2022-07-20 10:09:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781691896729600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:09:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781712864055296[0;39m 生成今日电子书快照开始
2022-07-20 10:09:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781712864055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781712864055296[0;39m ==> Parameters: 
2022-07-20 10:09:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781712864055296[0;39m <==    Updates: 0
2022-07-20 10:09:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781712864055296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:09:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781733848158208[0;39m 生成今日电子书快照开始
2022-07-20 10:09:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781733848158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781733848158208[0;39m ==> Parameters: 
2022-07-20 10:09:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781733848158208[0;39m <==    Updates: 0
2022-07-20 10:09:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781733848158208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:09:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781754815483904[0;39m 生成今日电子书快照开始
2022-07-20 10:09:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781754815483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781754815483904[0;39m ==> Parameters: 
2022-07-20 10:09:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781754815483904[0;39m <==    Updates: 0
2022-07-20 10:09:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781754815483904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:09:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204781754828066816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:09:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781754828066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:09:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781754828066816[0;39m ==> Parameters: 
2022-07-20 10:09:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781754828066816[0;39m <==    Updates: 7
2022-07-20 10:09:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204781754828066816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:09:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781775791198208[0;39m 生成今日电子书快照开始
2022-07-20 10:09:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781775791198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781775791198208[0;39m ==> Parameters: 
2022-07-20 10:09:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781775791198208[0;39m <==    Updates: 0
2022-07-20 10:09:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781775791198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:09:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781796787884032[0;39m 生成今日电子书快照开始
2022-07-20 10:09:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781796787884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781796787884032[0;39m ==> Parameters: 
2022-07-20 10:09:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781796787884032[0;39m <==    Updates: 0
2022-07-20 10:09:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781796787884032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:09:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781817738432512[0;39m 生成今日电子书快照开始
2022-07-20 10:09:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781817738432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781817738432512[0;39m ==> Parameters: 
2022-07-20 10:09:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781817738432512[0;39m <==    Updates: 0
2022-07-20 10:09:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781817738432512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:09:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781838688980992[0;39m 生成今日电子书快照开始
2022-07-20 10:09:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781838688980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:09:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781838688980992[0;39m ==> Parameters: 
2022-07-20 10:09:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781838688980992[0;39m <==    Updates: 0
2022-07-20 10:09:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781838688980992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:10:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781859677278208[0;39m 生成今日电子书快照开始
2022-07-20 10:10:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781859677278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781859677278208[0;39m ==> Parameters: 
2022-07-20 10:10:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781859677278208[0;39m <==    Updates: 0
2022-07-20 10:10:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781859677278208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:10:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204781880648798208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:10:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781880648798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:10:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781880648798208[0;39m ==> Parameters: 
2022-07-20 10:10:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204781880648798208[0;39m <==    Updates: 7
2022-07-20 10:10:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204781880648798208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:10:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781880657186816[0;39m 生成今日电子书快照开始
2022-07-20 10:10:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781880657186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781880657186816[0;39m ==> Parameters: 
2022-07-20 10:10:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781880657186816[0;39m <==    Updates: 0
2022-07-20 10:10:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781880657186816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:10:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781901595152384[0;39m 生成今日电子书快照开始
2022-07-20 10:10:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781901595152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781901595152384[0;39m ==> Parameters: 
2022-07-20 10:10:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781901595152384[0;39m <==    Updates: 0
2022-07-20 10:10:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781901595152384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:10:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781922612809728[0;39m 生成今日电子书快照开始
2022-07-20 10:10:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781922612809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781922612809728[0;39m ==> Parameters: 
2022-07-20 10:10:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781922612809728[0;39m <==    Updates: 0
2022-07-20 10:10:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781922612809728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:10:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781943533998080[0;39m 生成今日电子书快照开始
2022-07-20 10:10:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781943533998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781943533998080[0;39m ==> Parameters: 
2022-07-20 10:10:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781943533998080[0;39m <==    Updates: 0
2022-07-20 10:10:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781943533998080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:10:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781964522295296[0;39m 生成今日电子书快照开始
2022-07-20 10:10:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781964522295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781964522295296[0;39m ==> Parameters: 
2022-07-20 10:10:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781964522295296[0;39m <==    Updates: 0
2022-07-20 10:10:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781964522295296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:10:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204781985523175424[0;39m 生成今日电子书快照开始
2022-07-20 10:10:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781985523175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781985523175424[0;39m ==> Parameters: 
2022-07-20 10:10:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204781985523175424[0;39m <==    Updates: 0
2022-07-20 10:10:30.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204781985523175424[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:10:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782006456946688[0;39m 生成今日电子书快照开始
2022-07-20 10:10:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782006456946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782006456946688[0;39m ==> Parameters: 
2022-07-20 10:10:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782006456946688[0;39m <==    Updates: 0
2022-07-20 10:10:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782006456946688[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 10:10:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204782006498889728[0;39m 更新电子书下的文档数据开始
2022-07-20 10:10:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782006498889728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:10:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782006498889728[0;39m ==> Parameters: 
2022-07-20 10:10:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782006498889728[0;39m <==    Updates: 7
2022-07-20 10:10:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204782006498889728[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:10:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782027415883776[0;39m 生成今日电子书快照开始
2022-07-20 10:10:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782027415883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782027415883776[0;39m ==> Parameters: 
2022-07-20 10:10:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782027415883776[0;39m <==    Updates: 0
2022-07-20 10:10:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782027415883776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:10:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782048420958208[0;39m 生成今日电子书快照开始
2022-07-20 10:10:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782048420958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782048420958208[0;39m ==> Parameters: 
2022-07-20 10:10:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782048420958208[0;39m <==    Updates: 0
2022-07-20 10:10:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782048420958208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:10:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782069375700992[0;39m 生成今日电子书快照开始
2022-07-20 10:10:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782069375700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782069375700992[0;39m ==> Parameters: 
2022-07-20 10:10:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782069375700992[0;39m <==    Updates: 0
2022-07-20 10:10:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782069375700992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:10:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782090330443776[0;39m 生成今日电子书快照开始
2022-07-20 10:10:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782090330443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:10:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782090330443776[0;39m ==> Parameters: 
2022-07-20 10:10:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782090330443776[0;39m <==    Updates: 0
2022-07-20 10:10:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782090330443776[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:11:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782111339712512[0;39m 生成今日电子书快照开始
2022-07-20 10:11:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782111339712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782111339712512[0;39m ==> Parameters: 
2022-07-20 10:11:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782111339712512[0;39m <==    Updates: 0
2022-07-20 10:11:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782111339712512[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:11:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782132302843904[0;39m 生成今日电子书快照开始
2022-07-20 10:11:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782132302843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782132302843904[0;39m ==> Parameters: 
2022-07-20 10:11:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782132302843904[0;39m <==    Updates: 0
2022-07-20 10:11:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782132302843904[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:11:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204782132340592640[0;39m 更新电子书下的文档数据开始
2022-07-20 10:11:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782132340592640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:11:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782132340592640[0;39m ==> Parameters: 
2022-07-20 10:11:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782132340592640[0;39m <==    Updates: 7
2022-07-20 10:11:05.022 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204782132340592640[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 10:11:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782153245003776[0;39m 生成今日电子书快照开始
2022-07-20 10:11:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782153245003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782153245003776[0;39m ==> Parameters: 
2022-07-20 10:11:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782153245003776[0;39m <==    Updates: 0
2022-07-20 10:11:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782153245003776[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:11:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782174266855424[0;39m 生成今日电子书快照开始
2022-07-20 10:11:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782174266855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782174266855424[0;39m ==> Parameters: 
2022-07-20 10:11:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782174266855424[0;39m <==    Updates: 0
2022-07-20 10:11:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782174266855424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:11:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782195221598208[0;39m 生成今日电子书快照开始
2022-07-20 10:11:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782195221598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782195221598208[0;39m ==> Parameters: 
2022-07-20 10:11:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782195221598208[0;39m <==    Updates: 0
2022-07-20 10:11:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782195221598208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:11:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782216201506816[0;39m 生成今日电子书快照开始
2022-07-20 10:11:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782216201506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782216201506816[0;39m ==> Parameters: 
2022-07-20 10:11:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782216201506816[0;39m <==    Updates: 0
2022-07-20 10:11:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782216201506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:11:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782237168832512[0;39m 生成今日电子书快照开始
2022-07-20 10:11:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782237168832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782237168832512[0;39m ==> Parameters: 
2022-07-20 10:11:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782237168832512[0;39m <==    Updates: 0
2022-07-20 10:11:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782237168832512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:11:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204782258131963904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:11:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782258131963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:11:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782258131963904[0;39m ==> Parameters: 
2022-07-20 10:11:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782258131963904[0;39m <==    Updates: 7
2022-07-20 10:11:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204782258131963904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:11:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782258140352512[0;39m 生成今日电子书快照开始
2022-07-20 10:11:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782258140352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782258140352512[0;39m ==> Parameters: 
2022-07-20 10:11:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782258140352512[0;39m <==    Updates: 0
2022-07-20 10:11:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782258140352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:11:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782279103483904[0;39m 生成今日电子书快照开始
2022-07-20 10:11:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782279103483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782279103483904[0;39m ==> Parameters: 
2022-07-20 10:11:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782279103483904[0;39m <==    Updates: 0
2022-07-20 10:11:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782279103483904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:11:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782300075003904[0;39m 生成今日电子书快照开始
2022-07-20 10:11:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782300075003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782300075003904[0;39m ==> Parameters: 
2022-07-20 10:11:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782300075003904[0;39m <==    Updates: 0
2022-07-20 10:11:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782300075003904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:11:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782321050718208[0;39m 生成今日电子书快照开始
2022-07-20 10:11:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782321050718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782321050718208[0;39m ==> Parameters: 
2022-07-20 10:11:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782321050718208[0;39m <==    Updates: 0
2022-07-20 10:11:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782321050718208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:11:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782342039015424[0;39m 生成今日电子书快照开始
2022-07-20 10:11:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782342039015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:11:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782342039015424[0;39m ==> Parameters: 
2022-07-20 10:11:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782342039015424[0;39m <==    Updates: 0
2022-07-20 10:11:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782342039015424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:12:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782362985369600[0;39m 生成今日电子书快照开始
2022-07-20 10:12:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782362985369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782362985369600[0;39m ==> Parameters: 
2022-07-20 10:12:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782362985369600[0;39m <==    Updates: 0
2022-07-20 10:12:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782362985369600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:12:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204782383982055424[0;39m 更新电子书下的文档数据开始
2022-07-20 10:12:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782383982055424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:12:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782383982055424[0;39m ==> Parameters: 
2022-07-20 10:12:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782383982055424[0;39m <==    Updates: 7
2022-07-20 10:12:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204782383982055424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:12:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782383990444032[0;39m 生成今日电子书快照开始
2022-07-20 10:12:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782383990444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782383990444032[0;39m ==> Parameters: 
2022-07-20 10:12:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782383990444032[0;39m <==    Updates: 0
2022-07-20 10:12:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782383990444032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:12:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782404957769728[0;39m 生成今日电子书快照开始
2022-07-20 10:12:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782404957769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782404957769728[0;39m ==> Parameters: 
2022-07-20 10:12:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782404957769728[0;39m <==    Updates: 0
2022-07-20 10:12:10.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782404957769728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:12:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782425878958080[0;39m 生成今日电子书快照开始
2022-07-20 10:12:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782425878958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782425878958080[0;39m ==> Parameters: 
2022-07-20 10:12:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782425878958080[0;39m <==    Updates: 0
2022-07-20 10:12:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782425878958080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:12:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782446863060992[0;39m 生成今日电子书快照开始
2022-07-20 10:12:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782446863060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782446863060992[0;39m ==> Parameters: 
2022-07-20 10:12:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782446863060992[0;39m <==    Updates: 0
2022-07-20 10:12:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782446863060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:12:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782467842969600[0;39m 生成今日电子书快照开始
2022-07-20 10:12:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782467842969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782467842969600[0;39m ==> Parameters: 
2022-07-20 10:12:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782467842969600[0;39m <==    Updates: 0
2022-07-20 10:12:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782467842969600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:12:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782488827072512[0;39m 生成今日电子书快照开始
2022-07-20 10:12:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782488827072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782488827072512[0;39m ==> Parameters: 
2022-07-20 10:12:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782488827072512[0;39m <==    Updates: 0
2022-07-20 10:12:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782488827072512[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:12:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782509806981120[0;39m 生成今日电子书快照开始
2022-07-20 10:12:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782509806981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782509806981120[0;39m ==> Parameters: 
2022-07-20 10:12:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782509806981120[0;39m <==    Updates: 0
2022-07-20 10:12:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782509806981120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:12:35.030 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204782509878284288[0;39m 更新电子书下的文档数据开始
2022-07-20 10:12:35.031 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782509878284288[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:12:35.031 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782509878284288[0;39m ==> Parameters: 
2022-07-20 10:12:35.032 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782509878284288[0;39m <==    Updates: 7
2022-07-20 10:12:35.032 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204782509878284288[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:12:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782530749140992[0;39m 生成今日电子书快照开始
2022-07-20 10:12:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782530749140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782530749140992[0;39m ==> Parameters: 
2022-07-20 10:12:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782530749140992[0;39m <==    Updates: 0
2022-07-20 10:12:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782530749140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:12:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782551737438208[0;39m 生成今日电子书快照开始
2022-07-20 10:12:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782551737438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782551737438208[0;39m ==> Parameters: 
2022-07-20 10:12:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782551737438208[0;39m <==    Updates: 0
2022-07-20 10:12:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782551737438208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:12:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782572729929728[0;39m 生成今日电子书快照开始
2022-07-20 10:12:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782572729929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782572729929728[0;39m ==> Parameters: 
2022-07-20 10:12:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782572729929728[0;39m <==    Updates: 0
2022-07-20 10:12:50.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782572729929728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:12:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782593655312384[0;39m 生成今日电子书快照开始
2022-07-20 10:12:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782593655312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:12:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782593655312384[0;39m ==> Parameters: 
2022-07-20 10:12:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782593655312384[0;39m <==    Updates: 0
2022-07-20 10:12:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782593655312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:13:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782614622638080[0;39m 生成今日电子书快照开始
2022-07-20 10:13:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782614622638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:13:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782614622638080[0;39m ==> Parameters: 
2022-07-20 10:13:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782614622638080[0;39m <==    Updates: 0
2022-07-20 10:13:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782614622638080[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:13:02.744 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-6 - Shutdown initiated...
2022-07-20 10:13:02.789 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-6 - Shutdown completed.
2022-07-20 10:13:11.288 INFO  org.hibernate.validator.internal.util.Version     :21  
                [32m                  [0;39m HV000001: Hibernate Validator 6.2.3.Final
2022-07-20 10:13:11.296 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 22436 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:13:11.296 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:13:11.360 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2022-07-20 10:13:11.361 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2022-07-20 10:13:12.334 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:13:12.338 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:13:12.385 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 25 ms. Found 0 Redis repository interfaces.
2022-07-20 10:13:12.544 WARN  org.mybatis.spring.mapper.ClassPathMapperScanner  :44  
                [32m                  [0;39m No MyBatis mapper was found in '[com.zs.wikibb]' package. Please check your configuration.
2022-07-20 10:13:13.772 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:13:13.785 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:13:13.786 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:13:13.786 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:13:13.931 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:13:13.932 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 2570 ms
2022-07-20 10:13:14.281 WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext:591 
                [32m                  [0;39m Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'categoryController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'categoryService': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.zs.wikibb.mapper.CategoryMapper' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@javax.annotation.Resource(shareable=true, lookup=, name=, description=, authenticationType=CONTAINER, type=class java.lang.Object, mappedName=)}
2022-07-20 10:13:14.296 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Stopping service [Tomcat]
2022-07-20 10:13:14.312 INFO  o.s.b.a.l.ConditionEvaluationReportLoggingListener:136 
                [32m                  [0;39m 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2022-07-20 10:13:14.336 ERROR o.s.b.diagnostics.LoggingFailureAnalysisReporter  :40  
                [32m                  [0;39m 

***************************
APPLICATION FAILED TO START
***************************

Description:

A component required a bean of type 'com.zs.wikibb.mapper.CategoryMapper' that could not be found.


Action:

Consider defining a bean of type 'com.zs.wikibb.mapper.CategoryMapper' in your configuration.

2022-07-20 10:13:46.017 INFO  org.hibernate.validator.internal.util.Version     :21  
                [32m                  [0;39m HV000001: Hibernate Validator 6.2.3.Final
2022-07-20 10:13:46.020 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 18012 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:13:46.021 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:13:46.090 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2022-07-20 10:13:46.091 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2022-07-20 10:13:47.021 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:13:47.025 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:13:47.065 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 19 ms. Found 0 Redis repository interfaces.
2022-07-20 10:13:48.624 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:13:48.651 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:13:48.652 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:13:48.653 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:13:48.858 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:13:48.859 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 2767 ms
2022-07-20 10:13:51.717 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:13:51.755 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:13:51.779 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:13:51.802 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 6.539 seconds (JVM running for 8.735)
2022-07-20 10:13:51.811 INFO  com.zs.wikibb.WikibbApplication                   :25  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:13:51.812 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:13:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782845330329600[0;39m 生成今日电子书快照开始
2022-07-20 10:13:55.030 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204782845330329600[0;39m HikariPool-1 - Starting...
2022-07-20 10:13:55.342 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204782845330329600[0;39m HikariPool-1 - Start completed.
2022-07-20 10:13:55.353 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782845330329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:13:55.384 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782845330329600[0;39m ==> Parameters: 
2022-07-20 10:13:55.391 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782845330329600[0;39m <==    Updates: 0
2022-07-20 10:13:55.394 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782845330329600[0;39m 生成今日电子书快照结束，耗时：385 毫秒
2022-07-20 10:14:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782866327015424[0;39m 生成今日电子书快照开始
2022-07-20 10:14:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782866327015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782866327015424[0;39m ==> Parameters: 
2022-07-20 10:14:00.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782866327015424[0;39m <==    Updates: 0
2022-07-20 10:14:00.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782866327015424[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:14:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204782887281758208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:14:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782887281758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:14:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782887281758208[0;39m ==> Parameters: 
2022-07-20 10:14:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204782887281758208[0;39m <==    Updates: 7
2022-07-20 10:14:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204782887281758208[0;39m 更新电子书下的文档数据结束，耗时：9 毫秒
2022-07-20 10:14:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782887323701248[0;39m 生成今日电子书快照开始
2022-07-20 10:14:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782887323701248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:05.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782887323701248[0;39m ==> Parameters: 
2022-07-20 10:14:05.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782887323701248[0;39m <==    Updates: 0
2022-07-20 10:14:05.119 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782887323701248[0;39m 生成今日电子书快照结束，耗时：99 毫秒
2022-07-20 10:14:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782908253278208[0;39m 生成今日电子书快照开始
2022-07-20 10:14:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782908253278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782908253278208[0;39m ==> Parameters: 
2022-07-20 10:14:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782908253278208[0;39m <==    Updates: 0
2022-07-20 10:14:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782908253278208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:14:15.028 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782929300295680[0;39m 生成今日电子书快照开始
2022-07-20 10:14:15.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782929300295680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:15.031 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782929300295680[0;39m ==> Parameters: 
2022-07-20 10:14:15.035 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782929300295680[0;39m <==    Updates: 0
2022-07-20 10:14:15.036 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782929300295680[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:14:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782950213095424[0;39m 生成今日电子书快照开始
2022-07-20 10:14:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782950213095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782950213095424[0;39m ==> Parameters: 
2022-07-20 10:14:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782950213095424[0;39m <==    Updates: 0
2022-07-20 10:14:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782950213095424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:14:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782971125895168[0;39m 生成今日电子书快照开始
2022-07-20 10:14:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782971125895168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782971125895168[0;39m ==> Parameters: 
2022-07-20 10:14:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782971125895168[0;39m <==    Updates: 0
2022-07-20 10:14:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782971125895168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:14:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204782992122580992[0;39m 生成今日电子书快照开始
2022-07-20 10:14:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782992122580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782992122580992[0;39m ==> Parameters: 
2022-07-20 10:14:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204782992122580992[0;39m <==    Updates: 0
2022-07-20 10:14:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204782992122580992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:14:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783013094100992[0;39m 生成今日电子书快照开始
2022-07-20 10:14:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783013094100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783013094100992[0;39m ==> Parameters: 
2022-07-20 10:14:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783013094100992[0;39m <==    Updates: 0
2022-07-20 10:14:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783013094100992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:14:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204783013115072512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:14:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783013115072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:14:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783013115072512[0;39m ==> Parameters: 
2022-07-20 10:14:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783013115072512[0;39m <==    Updates: 7
2022-07-20 10:14:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204783013115072512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:14:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783034094981120[0;39m 生成今日电子书快照开始
2022-07-20 10:14:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783034094981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783034094981120[0;39m ==> Parameters: 
2022-07-20 10:14:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783034094981120[0;39m <==    Updates: 0
2022-07-20 10:14:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783034094981120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:14:40.513 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2022-07-20 10:14:40.528 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-1 - Shutdown completed.
2022-07-20 10:14:40.815 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 18012 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:14:40.815 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:14:41.079 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:14:41.080 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:14:41.091 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 10 ms. Found 0 Redis repository interfaces.
2022-07-20 10:14:41.421 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:14:41.422 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:14:41.422 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:14:41.422 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:14:41.465 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:14:41.467 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 648 ms
2022-07-20 10:14:42.375 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:14:42.393 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:14:42.396 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:14:42.408 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.639 seconds (JVM running for 59.342)
2022-07-20 10:14:42.410 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:14:42.411 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:14:42.411 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:14:44.596 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 18012 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:14:44.597 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:14:44.783 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:14:44.785 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:14:44.791 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2022-07-20 10:14:44.931 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:14:44.932 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:14:44.932 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:14:44.933 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:14:44.972 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:14:44.972 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 369 ms
2022-07-20 10:14:46.053 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:14:46.069 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:14:46.073 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:14:46.078 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.518 seconds (JVM running for 63.012)
2022-07-20 10:14:46.081 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:14:46.082 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:14:46.082 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:14:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783076046409728[0;39m 生成今日电子书快照开始
2022-07-20 10:14:50.017 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204783076046409728[0;39m HikariPool-2 - Starting...
2022-07-20 10:14:50.024 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204783076046409728[0;39m HikariPool-2 - Start completed.
2022-07-20 10:14:50.025 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783076046409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:50.118 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783076046409728[0;39m ==> Parameters: 
2022-07-20 10:14:50.122 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783076046409728[0;39m <==    Updates: 0
2022-07-20 10:14:50.124 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783076046409728[0;39m 生成今日电子书快照结束，耗时：108 毫秒
2022-07-20 10:14:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783096996958208[0;39m 生成今日电子书快照开始
2022-07-20 10:14:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783096996958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:14:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783096996958208[0;39m ==> Parameters: 
2022-07-20 10:14:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783096996958208[0;39m <==    Updates: 0
2022-07-20 10:14:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783096996958208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:15:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783117976866816[0;39m 生成今日电子书快照开始
2022-07-20 10:15:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783117976866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783117976866816[0;39m ==> Parameters: 
2022-07-20 10:15:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783117976866816[0;39m <==    Updates: 0
2022-07-20 10:15:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783117976866816[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:15:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204783138931609600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:15:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783138931609600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:15:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783138931609600[0;39m ==> Parameters: 
2022-07-20 10:15:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783138931609600[0;39m <==    Updates: 7
2022-07-20 10:15:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204783138931609600[0;39m 更新电子书下的文档数据结束，耗时：8 毫秒
2022-07-20 10:15:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783138965164032[0;39m 生成今日电子书快照开始
2022-07-20 10:15:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783138965164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783138965164032[0;39m ==> Parameters: 
2022-07-20 10:15:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783138965164032[0;39m <==    Updates: 0
2022-07-20 10:15:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783138965164032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:15:09.962 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-2 - Shutdown initiated...
2022-07-20 10:15:09.967 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-2 - Shutdown completed.
2022-07-20 10:15:10.214 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 18012 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:15:10.215 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:15:10.448 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:15:10.449 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:15:10.462 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2022-07-20 10:15:10.610 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:15:10.611 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:15:10.611 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:15:10.612 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:15:10.741 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:15:10.741 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 524 ms
2022-07-20 10:15:11.441 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:15:11.457 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:15:11.459 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:15:11.464 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.293 seconds (JVM running for 88.398)
2022-07-20 10:15:11.466 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:15:11.466 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:15:11.466 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:15:13.440 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 18012 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:15:13.441 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:15:13.631 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:15:13.631 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:15:13.639 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-07-20 10:15:13.870 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:15:13.871 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:15:13.872 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:15:13.872 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:15:13.907 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:15:13.907 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 464 ms
2022-07-20 10:15:14.465 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:15:14.486 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:15:14.488 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:15:14.493 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.079 seconds (JVM running for 91.426)
2022-07-20 10:15:14.494 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:15:14.494 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:15:14.495 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:15:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783180891426816[0;39m 生成今日电子书快照开始
2022-07-20 10:15:15.012 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204783180891426816[0;39m HikariPool-3 - Starting...
2022-07-20 10:15:15.015 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204783180891426816[0;39m HikariPool-3 - Start completed.
2022-07-20 10:15:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783180891426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783180891426816[0;39m ==> Parameters: 
2022-07-20 10:15:15.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783180891426816[0;39m <==    Updates: 0
2022-07-20 10:15:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783180891426816[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:15:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783201883918336[0;39m 生成今日电子书快照开始
2022-07-20 10:15:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783201883918336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:20.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783201883918336[0;39m ==> Parameters: 
2022-07-20 10:15:20.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783201883918336[0;39m <==    Updates: 0
2022-07-20 10:15:20.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783201883918336[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:15:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783222817689600[0;39m 生成今日电子书快照开始
2022-07-20 10:15:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783222817689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783222817689600[0;39m ==> Parameters: 
2022-07-20 10:15:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783222817689600[0;39m <==    Updates: 0
2022-07-20 10:15:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783222817689600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:15:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783243768238080[0;39m 生成今日电子书快照开始
2022-07-20 10:15:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783243768238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783243768238080[0;39m ==> Parameters: 
2022-07-20 10:15:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783243768238080[0;39m <==    Updates: 0
2022-07-20 10:15:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783243768238080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:15:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204783264752340992[0;39m 更新电子书下的文档数据开始
2022-07-20 10:15:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783264752340992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:15:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783264752340992[0;39m ==> Parameters: 
2022-07-20 10:15:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783264752340992[0;39m <==    Updates: 7
2022-07-20 10:15:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204783264752340992[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 10:15:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783264781701120[0;39m 生成今日电子书快照开始
2022-07-20 10:15:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783264781701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783264781701120[0;39m ==> Parameters: 
2022-07-20 10:15:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783264781701120[0;39m <==    Updates: 0
2022-07-20 10:15:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783264781701120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:15:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783285740638208[0;39m 生成今日电子书快照开始
2022-07-20 10:15:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783285740638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783285740638208[0;39m ==> Parameters: 
2022-07-20 10:15:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783285740638208[0;39m <==    Updates: 0
2022-07-20 10:15:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783285740638208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:15:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783306691186688[0;39m 生成今日电子书快照开始
2022-07-20 10:15:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783306691186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783306691186688[0;39m ==> Parameters: 
2022-07-20 10:15:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783306691186688[0;39m <==    Updates: 0
2022-07-20 10:15:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783306691186688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:15:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783327671095296[0;39m 生成今日电子书快照开始
2022-07-20 10:15:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783327671095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783327671095296[0;39m ==> Parameters: 
2022-07-20 10:15:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783327671095296[0;39m <==    Updates: 0
2022-07-20 10:15:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783327671095296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:15:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783348642615296[0;39m 生成今日电子书快照开始
2022-07-20 10:15:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783348642615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:15:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783348642615296[0;39m ==> Parameters: 
2022-07-20 10:15:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783348642615296[0;39m <==    Updates: 0
2022-07-20 10:15:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783348642615296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:16:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783369588969472[0;39m 生成今日电子书快照开始
2022-07-20 10:16:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783369588969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783369588969472[0;39m ==> Parameters: 
2022-07-20 10:16:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783369588969472[0;39m <==    Updates: 0
2022-07-20 10:16:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783369588969472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:16:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204783390564683776[0;39m 更新电子书下的文档数据开始
2022-07-20 10:16:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783390564683776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:16:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783390564683776[0;39m ==> Parameters: 
2022-07-20 10:16:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783390564683776[0;39m <==    Updates: 7
2022-07-20 10:16:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204783390564683776[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:16:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783390581460992[0;39m 生成今日电子书快照开始
2022-07-20 10:16:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783390581460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783390581460992[0;39m ==> Parameters: 
2022-07-20 10:16:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783390581460992[0;39m <==    Updates: 0
2022-07-20 10:16:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783390581460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:16:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783411552980992[0;39m 生成今日电子书快照开始
2022-07-20 10:16:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783411552980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783411552980992[0;39m ==> Parameters: 
2022-07-20 10:16:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783411552980992[0;39m <==    Updates: 0
2022-07-20 10:16:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783411552980992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:16:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783432553861120[0;39m 生成今日电子书快照开始
2022-07-20 10:16:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783432553861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783432553861120[0;39m ==> Parameters: 
2022-07-20 10:16:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783432553861120[0;39m <==    Updates: 0
2022-07-20 10:16:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783432553861120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:16:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783453533769728[0;39m 生成今日电子书快照开始
2022-07-20 10:16:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783453533769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783453533769728[0;39m ==> Parameters: 
2022-07-20 10:16:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783453533769728[0;39m <==    Updates: 0
2022-07-20 10:16:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783453533769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:16:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783474454958080[0;39m 生成今日电子书快照开始
2022-07-20 10:16:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783474454958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783474454958080[0;39m ==> Parameters: 
2022-07-20 10:16:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783474454958080[0;39m <==    Updates: 0
2022-07-20 10:16:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783474454958080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:16:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783495451643904[0;39m 生成今日电子书快照开始
2022-07-20 10:16:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783495451643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783495451643904[0;39m ==> Parameters: 
2022-07-20 10:16:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783495451643904[0;39m <==    Updates: 0
2022-07-20 10:16:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783495451643904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:16:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204783516444135424[0;39m 更新电子书下的文档数据开始
2022-07-20 10:16:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783516444135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:16:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783516444135424[0;39m ==> Parameters: 
2022-07-20 10:16:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783516444135424[0;39m <==    Updates: 7
2022-07-20 10:16:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204783516444135424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:16:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783516452524032[0;39m 生成今日电子书快照开始
2022-07-20 10:16:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783516452524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783516452524032[0;39m ==> Parameters: 
2022-07-20 10:16:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783516452524032[0;39m <==    Updates: 0
2022-07-20 10:16:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783516452524032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:16:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783537369518080[0;39m 生成今日电子书快照开始
2022-07-20 10:16:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783537369518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783537369518080[0;39m ==> Parameters: 
2022-07-20 10:16:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783537369518080[0;39m <==    Updates: 0
2022-07-20 10:16:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783537369518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:16:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783558378786816[0;39m 生成今日电子书快照开始
2022-07-20 10:16:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783558378786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783558378786816[0;39m ==> Parameters: 
2022-07-20 10:16:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783558378786816[0;39m <==    Updates: 0
2022-07-20 10:16:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783558378786816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:16:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783579329335296[0;39m 生成今日电子书快照开始
2022-07-20 10:16:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783579329335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783579329335296[0;39m ==> Parameters: 
2022-07-20 10:16:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783579329335296[0;39m <==    Updates: 0
2022-07-20 10:16:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783579329335296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:16:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783600279883776[0;39m 生成今日电子书快照开始
2022-07-20 10:16:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783600279883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:16:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783600279883776[0;39m ==> Parameters: 
2022-07-20 10:16:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783600279883776[0;39m <==    Updates: 0
2022-07-20 10:16:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783600279883776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:17:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783621284958208[0;39m 生成今日电子书快照开始
2022-07-20 10:17:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783621284958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783621284958208[0;39m ==> Parameters: 
2022-07-20 10:17:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783621284958208[0;39m <==    Updates: 0
2022-07-20 10:17:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783621284958208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:17:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783642277449728[0;39m 生成今日电子书快照开始
2022-07-20 10:17:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783642277449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783642277449728[0;39m ==> Parameters: 
2022-07-20 10:17:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783642277449728[0;39m <==    Updates: 0
2022-07-20 10:17:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783642277449728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:17:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204783642290032640[0;39m 更新电子书下的文档数据开始
2022-07-20 10:17:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783642290032640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:17:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783642290032640[0;39m ==> Parameters: 
2022-07-20 10:17:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783642290032640[0;39m <==    Updates: 7
2022-07-20 10:17:05.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204783642290032640[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:17:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783663236386816[0;39m 生成今日电子书快照开始
2022-07-20 10:17:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783663236386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783663236386816[0;39m ==> Parameters: 
2022-07-20 10:17:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783663236386816[0;39m <==    Updates: 0
2022-07-20 10:17:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783663236386816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:17:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783684199518208[0;39m 生成今日电子书快照开始
2022-07-20 10:17:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783684199518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783684199518208[0;39m ==> Parameters: 
2022-07-20 10:17:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783684199518208[0;39m <==    Updates: 0
2022-07-20 10:17:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783684199518208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:17:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783705137483776[0;39m 生成今日电子书快照开始
2022-07-20 10:17:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783705137483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783705137483776[0;39m ==> Parameters: 
2022-07-20 10:17:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783705137483776[0;39m <==    Updates: 0
2022-07-20 10:17:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783705137483776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:17:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783726150946816[0;39m 生成今日电子书快照开始
2022-07-20 10:17:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783726150946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783726150946816[0;39m ==> Parameters: 
2022-07-20 10:17:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783726150946816[0;39m <==    Updates: 0
2022-07-20 10:17:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783726150946816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:17:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783747130855424[0;39m 生成今日电子书快照开始
2022-07-20 10:17:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783747130855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783747130855424[0;39m ==> Parameters: 
2022-07-20 10:17:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783747130855424[0;39m <==    Updates: 0
2022-07-20 10:17:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783747130855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:17:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204783768085598208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:17:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783768085598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:17:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783768085598208[0;39m ==> Parameters: 
2022-07-20 10:17:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783768085598208[0;39m <==    Updates: 7
2022-07-20 10:17:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204783768085598208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:17:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783768093986816[0;39m 生成今日电子书快照开始
2022-07-20 10:17:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783768093986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783768093986816[0;39m ==> Parameters: 
2022-07-20 10:17:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783768093986816[0;39m <==    Updates: 0
2022-07-20 10:17:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783768093986816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:17:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783789048729600[0;39m 生成今日电子书快照开始
2022-07-20 10:17:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783789048729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783789048729600[0;39m ==> Parameters: 
2022-07-20 10:17:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783789048729600[0;39m <==    Updates: 0
2022-07-20 10:17:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783789048729600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:17:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783809995083776[0;39m 生成今日电子书快照开始
2022-07-20 10:17:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783809995083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783809995083776[0;39m ==> Parameters: 
2022-07-20 10:17:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783809995083776[0;39m <==    Updates: 0
2022-07-20 10:17:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783809995083776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:17:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783830987575296[0;39m 生成今日电子书快照开始
2022-07-20 10:17:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783830987575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783830987575296[0;39m ==> Parameters: 
2022-07-20 10:17:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783830987575296[0;39m <==    Updates: 0
2022-07-20 10:17:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783830987575296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:17:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783851980066816[0;39m 生成今日电子书快照开始
2022-07-20 10:17:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783851980066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:17:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783851980066816[0;39m ==> Parameters: 
2022-07-20 10:17:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783851980066816[0;39m <==    Updates: 0
2022-07-20 10:17:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783851980066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:18:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783872922226688[0;39m 生成今日电子书快照开始
2022-07-20 10:18:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783872922226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783872922226688[0;39m ==> Parameters: 
2022-07-20 10:18:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783872922226688[0;39m <==    Updates: 0
2022-07-20 10:18:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783872922226688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:18:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204783893876969472[0;39m 更新电子书下的文档数据开始
2022-07-20 10:18:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783893876969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:18:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783893876969472[0;39m ==> Parameters: 
2022-07-20 10:18:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204783893876969472[0;39m <==    Updates: 7
2022-07-20 10:18:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204783893876969472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:18:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783893885358080[0;39m 生成今日电子书快照开始
2022-07-20 10:18:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783893885358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783893885358080[0;39m ==> Parameters: 
2022-07-20 10:18:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783893885358080[0;39m <==    Updates: 0
2022-07-20 10:18:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783893885358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:18:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783914856878080[0;39m 生成今日电子书快照开始
2022-07-20 10:18:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783914856878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783914856878080[0;39m ==> Parameters: 
2022-07-20 10:18:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783914856878080[0;39m <==    Updates: 0
2022-07-20 10:18:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783914856878080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:18:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783935832592384[0;39m 生成今日电子书快照开始
2022-07-20 10:18:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783935832592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783935832592384[0;39m ==> Parameters: 
2022-07-20 10:18:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783935832592384[0;39m <==    Updates: 0
2022-07-20 10:18:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783935832592384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:18:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783956804112384[0;39m 生成今日电子书快照开始
2022-07-20 10:18:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783956804112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783956804112384[0;39m ==> Parameters: 
2022-07-20 10:18:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783956804112384[0;39m <==    Updates: 0
2022-07-20 10:18:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783956804112384[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:18:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783977775632384[0;39m 生成今日电子书快照开始
2022-07-20 10:18:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783977775632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783977775632384[0;39m ==> Parameters: 
2022-07-20 10:18:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783977775632384[0;39m <==    Updates: 0
2022-07-20 10:18:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783977775632384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:18:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204783998747152384[0;39m 生成今日电子书快照开始
2022-07-20 10:18:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783998747152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783998747152384[0;39m ==> Parameters: 
2022-07-20 10:18:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204783998747152384[0;39m <==    Updates: 0
2022-07-20 10:18:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204783998747152384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:18:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204784019743838208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:18:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784019743838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:18:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784019743838208[0;39m ==> Parameters: 
2022-07-20 10:18:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784019743838208[0;39m <==    Updates: 7
2022-07-20 10:18:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204784019743838208[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 10:18:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784019764809728[0;39m 生成今日电子书快照开始
2022-07-20 10:18:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784019764809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784019764809728[0;39m ==> Parameters: 
2022-07-20 10:18:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784019764809728[0;39m <==    Updates: 0
2022-07-20 10:18:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784019764809728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:18:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784040723746816[0;39m 生成今日电子书快照开始
2022-07-20 10:18:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784040723746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784040723746816[0;39m ==> Parameters: 
2022-07-20 10:18:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784040723746816[0;39m <==    Updates: 0
2022-07-20 10:18:40.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784040723746816[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:18:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784061707849728[0;39m 生成今日电子书快照开始
2022-07-20 10:18:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784061707849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784061707849728[0;39m ==> Parameters: 
2022-07-20 10:18:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784061707849728[0;39m <==    Updates: 0
2022-07-20 10:18:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784061707849728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:18:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784082675175424[0;39m 生成今日电子书快照开始
2022-07-20 10:18:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784082675175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784082675175424[0;39m ==> Parameters: 
2022-07-20 10:18:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784082675175424[0;39m <==    Updates: 0
2022-07-20 10:18:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784082675175424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:18:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784103646695424[0;39m 生成今日电子书快照开始
2022-07-20 10:18:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784103646695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:18:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784103646695424[0;39m ==> Parameters: 
2022-07-20 10:18:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784103646695424[0;39m <==    Updates: 0
2022-07-20 10:18:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784103646695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:19:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784124588855296[0;39m 生成今日电子书快照开始
2022-07-20 10:19:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784124588855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784124588855296[0;39m ==> Parameters: 
2022-07-20 10:19:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784124588855296[0;39m <==    Updates: 0
2022-07-20 10:19:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784124588855296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:19:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784145581346816[0;39m 生成今日电子书快照开始
2022-07-20 10:19:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784145581346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784145581346816[0;39m ==> Parameters: 
2022-07-20 10:19:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784145581346816[0;39m <==    Updates: 0
2022-07-20 10:19:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784145581346816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:19:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204784145598124032[0;39m 更新电子书下的文档数据开始
2022-07-20 10:19:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784145598124032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:19:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784145598124032[0;39m ==> Parameters: 
2022-07-20 10:19:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784145598124032[0;39m <==    Updates: 7
2022-07-20 10:19:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204784145598124032[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:19:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784166557061120[0;39m 生成今日电子书快照开始
2022-07-20 10:19:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784166557061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784166557061120[0;39m ==> Parameters: 
2022-07-20 10:19:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784166557061120[0;39m <==    Updates: 0
2022-07-20 10:19:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784166557061120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:19:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784187524386816[0;39m 生成今日电子书快照开始
2022-07-20 10:19:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784187524386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784187524386816[0;39m ==> Parameters: 
2022-07-20 10:19:15.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784187524386816[0;39m <==    Updates: 0
2022-07-20 10:19:15.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784187524386816[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:19:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784208453963776[0;39m 生成今日电子书快照开始
2022-07-20 10:19:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784208453963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784208453963776[0;39m ==> Parameters: 
2022-07-20 10:19:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784208453963776[0;39m <==    Updates: 0
2022-07-20 10:19:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784208453963776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:19:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784229450649600[0;39m 生成今日电子书快照开始
2022-07-20 10:19:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784229450649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784229450649600[0;39m ==> Parameters: 
2022-07-20 10:19:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784229450649600[0;39m <==    Updates: 0
2022-07-20 10:19:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784229450649600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:19:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784250417975296[0;39m 生成今日电子书快照开始
2022-07-20 10:19:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784250417975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784250417975296[0;39m ==> Parameters: 
2022-07-20 10:19:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784250417975296[0;39m <==    Updates: 0
2022-07-20 10:19:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784250417975296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:19:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784271372718080[0;39m 生成今日电子书快照开始
2022-07-20 10:19:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784271372718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784271372718080[0;39m ==> Parameters: 
2022-07-20 10:19:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784271372718080[0;39m <==    Updates: 0
2022-07-20 10:19:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784271372718080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:19:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204784271389495296[0;39m 更新电子书下的文档数据开始
2022-07-20 10:19:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784271389495296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:19:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784271389495296[0;39m ==> Parameters: 
2022-07-20 10:19:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784271389495296[0;39m <==    Updates: 7
2022-07-20 10:19:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204784271389495296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:19:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784292335849472[0;39m 生成今日电子书快照开始
2022-07-20 10:19:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784292335849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784292335849472[0;39m ==> Parameters: 
2022-07-20 10:19:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784292335849472[0;39m <==    Updates: 0
2022-07-20 10:19:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784292335849472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:19:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784313349312512[0;39m 生成今日电子书快照开始
2022-07-20 10:19:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784313349312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784313349312512[0;39m ==> Parameters: 
2022-07-20 10:19:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784313349312512[0;39m <==    Updates: 0
2022-07-20 10:19:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784313349312512[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:19:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784334320832512[0;39m 生成今日电子书快照开始
2022-07-20 10:19:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784334320832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784334320832512[0;39m ==> Parameters: 
2022-07-20 10:19:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784334320832512[0;39m <==    Updates: 0
2022-07-20 10:19:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784334320832512[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:19:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784355296546816[0;39m 生成今日电子书快照开始
2022-07-20 10:19:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784355296546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:19:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784355296546816[0;39m ==> Parameters: 
2022-07-20 10:19:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784355296546816[0;39m <==    Updates: 0
2022-07-20 10:19:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784355296546816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:20:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784376251289600[0;39m 生成今日电子书快照开始
2022-07-20 10:20:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784376251289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784376251289600[0;39m ==> Parameters: 
2022-07-20 10:20:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784376251289600[0;39m <==    Updates: 0
2022-07-20 10:20:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784376251289600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:20:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784397193449472[0;39m 生成今日电子书快照开始
2022-07-20 10:20:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784397193449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784397193449472[0;39m ==> Parameters: 
2022-07-20 10:20:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784397193449472[0;39m <==    Updates: 0
2022-07-20 10:20:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784397193449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:20:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204784397201838080[0;39m 更新电子书下的文档数据开始
2022-07-20 10:20:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784397201838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:20:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784397201838080[0;39m ==> Parameters: 
2022-07-20 10:20:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784397201838080[0;39m <==    Updates: 7
2022-07-20 10:20:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204784397201838080[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:20:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784418194329600[0;39m 生成今日电子书快照开始
2022-07-20 10:20:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784418194329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784418194329600[0;39m ==> Parameters: 
2022-07-20 10:20:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784418194329600[0;39m <==    Updates: 0
2022-07-20 10:20:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784418194329600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:20:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784439161655296[0;39m 生成今日电子书快照开始
2022-07-20 10:20:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784439161655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784439161655296[0;39m ==> Parameters: 
2022-07-20 10:20:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784439161655296[0;39m <==    Updates: 0
2022-07-20 10:20:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784439161655296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:20:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784460124786688[0;39m 生成今日电子书快照开始
2022-07-20 10:20:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784460124786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784460124786688[0;39m ==> Parameters: 
2022-07-20 10:20:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784460124786688[0;39m <==    Updates: 0
2022-07-20 10:20:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784460124786688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:20:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784481121472512[0;39m 生成今日电子书快照开始
2022-07-20 10:20:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784481121472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784481121472512[0;39m ==> Parameters: 
2022-07-20 10:20:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784481121472512[0;39m <==    Updates: 0
2022-07-20 10:20:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784481121472512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:20:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784502092992512[0;39m 生成今日电子书快照开始
2022-07-20 10:20:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784502092992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784502092992512[0;39m ==> Parameters: 
2022-07-20 10:20:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784502092992512[0;39m <==    Updates: 0
2022-07-20 10:20:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784502092992512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:20:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784523056123904[0;39m 生成今日电子书快照开始
2022-07-20 10:20:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784523056123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784523056123904[0;39m ==> Parameters: 
2022-07-20 10:20:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784523056123904[0;39m <==    Updates: 0
2022-07-20 10:20:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784523056123904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:20:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204784523072901120[0;39m 更新电子书下的文档数据开始
2022-07-20 10:20:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784523072901120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:20:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784523072901120[0;39m ==> Parameters: 
2022-07-20 10:20:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784523072901120[0;39m <==    Updates: 7
2022-07-20 10:20:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204784523072901120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:20:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784544002478080[0;39m 生成今日电子书快照开始
2022-07-20 10:20:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784544002478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784544002478080[0;39m ==> Parameters: 
2022-07-20 10:20:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784544002478080[0;39m <==    Updates: 0
2022-07-20 10:20:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784544002478080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:20:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784564986580992[0;39m 生成今日电子书快照开始
2022-07-20 10:20:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784564986580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784564986580992[0;39m ==> Parameters: 
2022-07-20 10:20:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784564986580992[0;39m <==    Updates: 0
2022-07-20 10:20:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784564986580992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:20:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784585941323776[0;39m 生成今日电子书快照开始
2022-07-20 10:20:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784585941323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784585941323776[0;39m ==> Parameters: 
2022-07-20 10:20:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784585941323776[0;39m <==    Updates: 0
2022-07-20 10:20:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784585941323776[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:20:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784606925426688[0;39m 生成今日电子书快照开始
2022-07-20 10:20:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784606925426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:20:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784606925426688[0;39m ==> Parameters: 
2022-07-20 10:20:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784606925426688[0;39m <==    Updates: 0
2022-07-20 10:20:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784606925426688[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:21:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784627905335296[0;39m 生成今日电子书快照开始
2022-07-20 10:21:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784627905335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784627905335296[0;39m ==> Parameters: 
2022-07-20 10:21:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784627905335296[0;39m <==    Updates: 0
2022-07-20 10:21:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784627905335296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:21:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784648881049600[0;39m 生成今日电子书快照开始
2022-07-20 10:21:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784648881049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784648881049600[0;39m ==> Parameters: 
2022-07-20 10:21:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784648881049600[0;39m <==    Updates: 0
2022-07-20 10:21:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784648881049600[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:21:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204784648906215424[0;39m 更新电子书下的文档数据开始
2022-07-20 10:21:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784648906215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:21:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784648906215424[0;39m ==> Parameters: 
2022-07-20 10:21:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784648906215424[0;39m <==    Updates: 7
2022-07-20 10:21:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204784648906215424[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:21:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784669873541120[0;39m 生成今日电子书快照开始
2022-07-20 10:21:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784669873541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784669873541120[0;39m ==> Parameters: 
2022-07-20 10:21:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784669873541120[0;39m <==    Updates: 0
2022-07-20 10:21:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784669873541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:21:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784690811506688[0;39m 生成今日电子书快照开始
2022-07-20 10:21:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784690811506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784690811506688[0;39m ==> Parameters: 
2022-07-20 10:21:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784690811506688[0;39m <==    Updates: 0
2022-07-20 10:21:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784690811506688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:21:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784711803998208[0;39m 生成今日电子书快照开始
2022-07-20 10:21:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784711803998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784711803998208[0;39m ==> Parameters: 
2022-07-20 10:21:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784711803998208[0;39m <==    Updates: 0
2022-07-20 10:21:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784711803998208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:21:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784732783906816[0;39m 生成今日电子书快照开始
2022-07-20 10:21:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784732783906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784732783906816[0;39m ==> Parameters: 
2022-07-20 10:21:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784732783906816[0;39m <==    Updates: 0
2022-07-20 10:21:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784732783906816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:21:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784753734455296[0;39m 生成今日电子书快照开始
2022-07-20 10:21:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784753734455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784753734455296[0;39m ==> Parameters: 
2022-07-20 10:21:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784753734455296[0;39m <==    Updates: 0
2022-07-20 10:21:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784753734455296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:21:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784774722752512[0;39m 生成今日电子书快照开始
2022-07-20 10:21:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784774722752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784774722752512[0;39m ==> Parameters: 
2022-07-20 10:21:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784774722752512[0;39m <==    Updates: 0
2022-07-20 10:21:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784774722752512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:21:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204784774735335424[0;39m 更新电子书下的文档数据开始
2022-07-20 10:21:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784774735335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:21:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784774735335424[0;39m ==> Parameters: 
2022-07-20 10:21:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784774735335424[0;39m <==    Updates: 7
2022-07-20 10:21:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204784774735335424[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:21:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784795685883904[0;39m 生成今日电子书快照开始
2022-07-20 10:21:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784795685883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784795685883904[0;39m ==> Parameters: 
2022-07-20 10:21:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784795685883904[0;39m <==    Updates: 0
2022-07-20 10:21:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784795685883904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:21:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784816674181120[0;39m 生成今日电子书快照开始
2022-07-20 10:21:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784816674181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784816674181120[0;39m ==> Parameters: 
2022-07-20 10:21:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784816674181120[0;39m <==    Updates: 0
2022-07-20 10:21:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784816674181120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:21:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784837628923904[0;39m 生成今日电子书快照开始
2022-07-20 10:21:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784837628923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784837628923904[0;39m ==> Parameters: 
2022-07-20 10:21:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784837628923904[0;39m <==    Updates: 0
2022-07-20 10:21:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784837628923904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:21:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784858583666688[0;39m 生成今日电子书快照开始
2022-07-20 10:21:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784858583666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:21:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784858583666688[0;39m ==> Parameters: 
2022-07-20 10:21:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784858583666688[0;39m <==    Updates: 0
2022-07-20 10:21:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784858583666688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:22:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784879559380992[0;39m 生成今日电子书快照开始
2022-07-20 10:22:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784879559380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784879559380992[0;39m ==> Parameters: 
2022-07-20 10:22:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784879559380992[0;39m <==    Updates: 0
2022-07-20 10:22:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784879559380992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:22:05.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204784900505735168[0;39m 更新电子书下的文档数据开始
2022-07-20 10:22:05.000 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784900505735168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:22:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784900505735168[0;39m ==> Parameters: 
2022-07-20 10:22:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204784900505735168[0;39m <==    Updates: 7
2022-07-20 10:22:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204784900505735168[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:22:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784900518318080[0;39m 生成今日电子书快照开始
2022-07-20 10:22:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784900518318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784900518318080[0;39m ==> Parameters: 
2022-07-20 10:22:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784900518318080[0;39m <==    Updates: 0
2022-07-20 10:22:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784900518318080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:22:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784921544364032[0;39m 生成今日电子书快照开始
2022-07-20 10:22:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784921544364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:10.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784921544364032[0;39m ==> Parameters: 
2022-07-20 10:22:10.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784921544364032[0;39m <==    Updates: 0
2022-07-20 10:22:10.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784921544364032[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:22:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784942452969472[0;39m 生成今日电子书快照开始
2022-07-20 10:22:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784942452969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784942452969472[0;39m ==> Parameters: 
2022-07-20 10:22:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784942452969472[0;39m <==    Updates: 0
2022-07-20 10:22:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784942452969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:22:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784963483209728[0;39m 生成今日电子书快照开始
2022-07-20 10:22:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784963483209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784963483209728[0;39m ==> Parameters: 
2022-07-20 10:22:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784963483209728[0;39m <==    Updates: 0
2022-07-20 10:22:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784963483209728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:22:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204784984421175296[0;39m 生成今日电子书快照开始
2022-07-20 10:22:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784984421175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784984421175296[0;39m ==> Parameters: 
2022-07-20 10:22:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204784984421175296[0;39m <==    Updates: 0
2022-07-20 10:22:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204784984421175296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:22:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785005384306688[0;39m 生成今日电子书快照开始
2022-07-20 10:22:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785005384306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785005384306688[0;39m ==> Parameters: 
2022-07-20 10:22:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785005384306688[0;39m <==    Updates: 0
2022-07-20 10:22:30.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785005384306688[0;39m 生成今日电子书快照结束，耗时：12 毫秒
2022-07-20 10:22:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785026339049472[0;39m 生成今日电子书快照开始
2022-07-20 10:22:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785026339049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785026339049472[0;39m ==> Parameters: 
2022-07-20 10:22:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785026339049472[0;39m <==    Updates: 0
2022-07-20 10:22:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785026339049472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:22:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204785026347438080[0;39m 更新电子书下的文档数据开始
2022-07-20 10:22:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785026347438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:22:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785026347438080[0;39m ==> Parameters: 
2022-07-20 10:22:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785026347438080[0;39m <==    Updates: 7
2022-07-20 10:22:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204785026347438080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:22:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785047356706816[0;39m 生成今日电子书快照开始
2022-07-20 10:22:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785047356706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785047356706816[0;39m ==> Parameters: 
2022-07-20 10:22:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785047356706816[0;39m <==    Updates: 0
2022-07-20 10:22:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785047356706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:22:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785068328226816[0;39m 生成今日电子书快照开始
2022-07-20 10:22:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785068328226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785068328226816[0;39m ==> Parameters: 
2022-07-20 10:22:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785068328226816[0;39m <==    Updates: 0
2022-07-20 10:22:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785068328226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:22:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785089295552512[0;39m 生成今日电子书快照开始
2022-07-20 10:22:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785089295552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785089295552512[0;39m ==> Parameters: 
2022-07-20 10:22:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785089295552512[0;39m <==    Updates: 0
2022-07-20 10:22:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785089295552512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:22:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785110233518080[0;39m 生成今日电子书快照开始
2022-07-20 10:22:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785110233518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:22:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785110233518080[0;39m ==> Parameters: 
2022-07-20 10:22:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785110233518080[0;39m <==    Updates: 0
2022-07-20 10:22:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785110233518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:23:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785131217620992[0;39m 生成今日电子书快照开始
2022-07-20 10:23:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785131217620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785131217620992[0;39m ==> Parameters: 
2022-07-20 10:23:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785131217620992[0;39m <==    Updates: 0
2022-07-20 10:23:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785131217620992[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:23:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204785152201723904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:23:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785152201723904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:23:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785152201723904[0;39m ==> Parameters: 
2022-07-20 10:23:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785152201723904[0;39m <==    Updates: 7
2022-07-20 10:23:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204785152201723904[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:23:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785152218501120[0;39m 生成今日电子书快照开始
2022-07-20 10:23:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785152218501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785152218501120[0;39m ==> Parameters: 
2022-07-20 10:23:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785152218501120[0;39m <==    Updates: 0
2022-07-20 10:23:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785152218501120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:23:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785173190021120[0;39m 生成今日电子书快照开始
2022-07-20 10:23:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785173190021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785173190021120[0;39m ==> Parameters: 
2022-07-20 10:23:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785173190021120[0;39m <==    Updates: 0
2022-07-20 10:23:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785173190021120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:23:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785194153152512[0;39m 生成今日电子书快照开始
2022-07-20 10:23:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785194153152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785194153152512[0;39m ==> Parameters: 
2022-07-20 10:23:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785194153152512[0;39m <==    Updates: 0
2022-07-20 10:23:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785194153152512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:23:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785215091118080[0;39m 生成今日电子书快照开始
2022-07-20 10:23:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785215091118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785215091118080[0;39m ==> Parameters: 
2022-07-20 10:23:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785215091118080[0;39m <==    Updates: 0
2022-07-20 10:23:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785215091118080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:23:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785236062638080[0;39m 生成今日电子书快照开始
2022-07-20 10:23:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785236062638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785236062638080[0;39m ==> Parameters: 
2022-07-20 10:23:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785236062638080[0;39m <==    Updates: 0
2022-07-20 10:23:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785236062638080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:23:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785257067712512[0;39m 生成今日电子书快照开始
2022-07-20 10:23:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785257067712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785257067712512[0;39m ==> Parameters: 
2022-07-20 10:23:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785257067712512[0;39m <==    Updates: 0
2022-07-20 10:23:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785257067712512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:23:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204785278039232512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:23:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785278039232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:23:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785278039232512[0;39m ==> Parameters: 
2022-07-20 10:23:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785278039232512[0;39m <==    Updates: 7
2022-07-20 10:23:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204785278039232512[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 10:23:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785278060204032[0;39m 生成今日电子书快照开始
2022-07-20 10:23:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785278060204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785278060204032[0;39m ==> Parameters: 
2022-07-20 10:23:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785278060204032[0;39m <==    Updates: 0
2022-07-20 10:23:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785278060204032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:23:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785299023335424[0;39m 生成今日电子书快照开始
2022-07-20 10:23:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785299023335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785299023335424[0;39m ==> Parameters: 
2022-07-20 10:23:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785299023335424[0;39m <==    Updates: 0
2022-07-20 10:23:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785299023335424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:23:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785319986466816[0;39m 生成今日电子书快照开始
2022-07-20 10:23:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785319986466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785319986466816[0;39m ==> Parameters: 
2022-07-20 10:23:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785319986466816[0;39m <==    Updates: 0
2022-07-20 10:23:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785319986466816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:23:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785340962181120[0;39m 生成今日电子书快照开始
2022-07-20 10:23:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785340962181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785340962181120[0;39m ==> Parameters: 
2022-07-20 10:23:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785340962181120[0;39m <==    Updates: 0
2022-07-20 10:23:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785340962181120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:23:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785361925312512[0;39m 生成今日电子书快照开始
2022-07-20 10:23:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785361925312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:23:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785361925312512[0;39m ==> Parameters: 
2022-07-20 10:23:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785361925312512[0;39m <==    Updates: 0
2022-07-20 10:23:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785361925312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:24:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785382871666688[0;39m 生成今日电子书快照开始
2022-07-20 10:24:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785382871666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785382871666688[0;39m ==> Parameters: 
2022-07-20 10:24:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785382871666688[0;39m <==    Updates: 0
2022-07-20 10:24:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785382871666688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:24:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204785403855769600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:24:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785403855769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:24:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785403855769600[0;39m ==> Parameters: 
2022-07-20 10:24:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785403855769600[0;39m <==    Updates: 7
2022-07-20 10:24:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204785403855769600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:24:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785403859963904[0;39m 生成今日电子书快照开始
2022-07-20 10:24:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785403859963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785403859963904[0;39m ==> Parameters: 
2022-07-20 10:24:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785403859963904[0;39m <==    Updates: 0
2022-07-20 10:24:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785403859963904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:24:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785424802123776[0;39m 生成今日电子书快照开始
2022-07-20 10:24:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785424802123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785424802123776[0;39m ==> Parameters: 
2022-07-20 10:24:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785424802123776[0;39m <==    Updates: 0
2022-07-20 10:24:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785424802123776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:24:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785445769449472[0;39m 生成今日电子书快照开始
2022-07-20 10:24:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785445769449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785445769449472[0;39m ==> Parameters: 
2022-07-20 10:24:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785445769449472[0;39m <==    Updates: 0
2022-07-20 10:24:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785445769449472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:24:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785466749358080[0;39m 生成今日电子书快照开始
2022-07-20 10:24:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785466749358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785466749358080[0;39m ==> Parameters: 
2022-07-20 10:24:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785466749358080[0;39m <==    Updates: 0
2022-07-20 10:24:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785466749358080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:24:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785487712489472[0;39m 生成今日电子书快照开始
2022-07-20 10:24:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785487712489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785487712489472[0;39m ==> Parameters: 
2022-07-20 10:24:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785487712489472[0;39m <==    Updates: 0
2022-07-20 10:24:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785487712489472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:24:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785508688203776[0;39m 生成今日电子书快照开始
2022-07-20 10:24:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785508688203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785508688203776[0;39m ==> Parameters: 
2022-07-20 10:24:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785508688203776[0;39m <==    Updates: 0
2022-07-20 10:24:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785508688203776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:24:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785529710055424[0;39m 生成今日电子书快照开始
2022-07-20 10:24:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785529710055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785529710055424[0;39m ==> Parameters: 
2022-07-20 10:24:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785529710055424[0;39m <==    Updates: 0
2022-07-20 10:24:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785529710055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:24:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204785529718444032[0;39m 更新电子书下的文档数据开始
2022-07-20 10:24:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785529718444032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:24:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785529718444032[0;39m ==> Parameters: 
2022-07-20 10:24:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785529718444032[0;39m <==    Updates: 7
2022-07-20 10:24:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204785529718444032[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:24:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785550694158336[0;39m 生成今日电子书快照开始
2022-07-20 10:24:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785550694158336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785550694158336[0;39m ==> Parameters: 
2022-07-20 10:24:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785550694158336[0;39m <==    Updates: 0
2022-07-20 10:24:40.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785550694158336[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:24:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785571632123904[0;39m 生成今日电子书快照开始
2022-07-20 10:24:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785571632123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785571632123904[0;39m ==> Parameters: 
2022-07-20 10:24:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785571632123904[0;39m <==    Updates: 0
2022-07-20 10:24:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785571632123904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:24:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785592574283776[0;39m 生成今日电子书快照开始
2022-07-20 10:24:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785592574283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785592574283776[0;39m ==> Parameters: 
2022-07-20 10:24:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785592574283776[0;39m <==    Updates: 0
2022-07-20 10:24:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785592574283776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:24:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785613583552512[0;39m 生成今日电子书快照开始
2022-07-20 10:24:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785613583552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:24:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785613583552512[0;39m ==> Parameters: 
2022-07-20 10:24:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785613583552512[0;39m <==    Updates: 0
2022-07-20 10:24:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785613583552512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:25:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785634555072512[0;39m 生成今日电子书快照开始
2022-07-20 10:25:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785634555072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785634555072512[0;39m ==> Parameters: 
2022-07-20 10:25:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785634555072512[0;39m <==    Updates: 0
2022-07-20 10:25:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785634555072512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:25:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785655518203904[0;39m 生成今日电子书快照开始
2022-07-20 10:25:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785655518203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785655518203904[0;39m ==> Parameters: 
2022-07-20 10:25:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785655518203904[0;39m <==    Updates: 0
2022-07-20 10:25:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785655518203904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:25:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204785655530786816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:25:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785655530786816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:25:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785655530786816[0;39m ==> Parameters: 
2022-07-20 10:25:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785655530786816[0;39m <==    Updates: 7
2022-07-20 10:25:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204785655530786816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:25:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785676489723904[0;39m 生成今日电子书快照开始
2022-07-20 10:25:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785676489723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785676489723904[0;39m ==> Parameters: 
2022-07-20 10:25:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785676489723904[0;39m <==    Updates: 0
2022-07-20 10:25:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785676489723904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:25:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785697440272384[0;39m 生成今日电子书快照开始
2022-07-20 10:25:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785697440272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785697440272384[0;39m ==> Parameters: 
2022-07-20 10:25:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785697440272384[0;39m <==    Updates: 0
2022-07-20 10:25:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785697440272384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:25:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785718403403776[0;39m 生成今日电子书快照开始
2022-07-20 10:25:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785718403403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785718403403776[0;39m ==> Parameters: 
2022-07-20 10:25:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785718403403776[0;39m <==    Updates: 0
2022-07-20 10:25:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785718403403776[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:25:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785739374923776[0;39m 生成今日电子书快照开始
2022-07-20 10:25:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785739374923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785739374923776[0;39m ==> Parameters: 
2022-07-20 10:25:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785739374923776[0;39m <==    Updates: 0
2022-07-20 10:25:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785739374923776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:25:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785760379998208[0;39m 生成今日电子书快照开始
2022-07-20 10:25:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785760379998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785760379998208[0;39m ==> Parameters: 
2022-07-20 10:25:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785760379998208[0;39m <==    Updates: 0
2022-07-20 10:25:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785760379998208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:25:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204785781359906816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:25:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785781359906816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:25:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785781359906816[0;39m ==> Parameters: 
2022-07-20 10:25:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785781359906816[0;39m <==    Updates: 7
2022-07-20 10:25:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204785781359906816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:25:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785781364101120[0;39m 生成今日电子书快照开始
2022-07-20 10:25:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785781364101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785781364101120[0;39m ==> Parameters: 
2022-07-20 10:25:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785781364101120[0;39m <==    Updates: 0
2022-07-20 10:25:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785781364101120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:25:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785802310455296[0;39m 生成今日电子书快照开始
2022-07-20 10:25:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785802310455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785802310455296[0;39m ==> Parameters: 
2022-07-20 10:25:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785802310455296[0;39m <==    Updates: 0
2022-07-20 10:25:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785802310455296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:25:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785823307141120[0;39m 生成今日电子书快照开始
2022-07-20 10:25:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785823307141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785823307141120[0;39m ==> Parameters: 
2022-07-20 10:25:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785823307141120[0;39m <==    Updates: 0
2022-07-20 10:25:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785823307141120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:25:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785844245106688[0;39m 生成今日电子书快照开始
2022-07-20 10:25:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785844245106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785844245106688[0;39m ==> Parameters: 
2022-07-20 10:25:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785844245106688[0;39m <==    Updates: 0
2022-07-20 10:25:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785844245106688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:25:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785865216626688[0;39m 生成今日电子书快照开始
2022-07-20 10:25:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785865216626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:25:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785865216626688[0;39m ==> Parameters: 
2022-07-20 10:25:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785865216626688[0;39m <==    Updates: 0
2022-07-20 10:25:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785865216626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:26:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785886204923904[0;39m 生成今日电子书快照开始
2022-07-20 10:26:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785886204923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785886204923904[0;39m ==> Parameters: 
2022-07-20 10:26:00.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785886204923904[0;39m <==    Updates: 0
2022-07-20 10:26:00.025 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785886204923904[0;39m 生成今日电子书快照结束，耗时：15 毫秒
2022-07-20 10:26:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785907172249600[0;39m 生成今日电子书快照开始
2022-07-20 10:26:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785907172249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785907172249600[0;39m ==> Parameters: 
2022-07-20 10:26:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785907172249600[0;39m <==    Updates: 0
2022-07-20 10:26:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785907172249600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:26:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204785907184832512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:26:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785907184832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:26:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785907184832512[0;39m ==> Parameters: 
2022-07-20 10:26:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204785907184832512[0;39m <==    Updates: 7
2022-07-20 10:26:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204785907184832512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:26:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785928152158208[0;39m 生成今日电子书快照开始
2022-07-20 10:26:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785928152158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785928152158208[0;39m ==> Parameters: 
2022-07-20 10:26:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785928152158208[0;39m <==    Updates: 0
2022-07-20 10:26:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785928152158208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:26:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785949102706688[0;39m 生成今日电子书快照开始
2022-07-20 10:26:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785949102706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785949102706688[0;39m ==> Parameters: 
2022-07-20 10:26:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785949102706688[0;39m <==    Updates: 0
2022-07-20 10:26:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785949102706688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:26:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785970061643776[0;39m 生成今日电子书快照开始
2022-07-20 10:26:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785970061643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785970061643776[0;39m ==> Parameters: 
2022-07-20 10:26:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785970061643776[0;39m <==    Updates: 0
2022-07-20 10:26:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785970061643776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:26:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204785991070912512[0;39m 生成今日电子书快照开始
2022-07-20 10:26:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785991070912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785991070912512[0;39m ==> Parameters: 
2022-07-20 10:26:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204785991070912512[0;39m <==    Updates: 0
2022-07-20 10:26:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204785991070912512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:26:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786012004683776[0;39m 生成今日电子书快照开始
2022-07-20 10:26:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786012004683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786012004683776[0;39m ==> Parameters: 
2022-07-20 10:26:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786012004683776[0;39m <==    Updates: 0
2022-07-20 10:26:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786012004683776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:26:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204786033005563904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:26:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786033005563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:26:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786033005563904[0;39m ==> Parameters: 
2022-07-20 10:26:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786033005563904[0;39m <==    Updates: 7
2022-07-20 10:26:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204786033005563904[0;39m 更新电子书下的文档数据结束，耗时：7 毫秒
2022-07-20 10:26:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786033043312640[0;39m 生成今日电子书快照开始
2022-07-20 10:26:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786033043312640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:35.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786033043312640[0;39m ==> Parameters: 
2022-07-20 10:26:35.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786033043312640[0;39m <==    Updates: 0
2022-07-20 10:26:35.024 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786033043312640[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:26:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786053947723776[0;39m 生成今日电子书快照开始
2022-07-20 10:26:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786053947723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786053947723776[0;39m ==> Parameters: 
2022-07-20 10:26:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786053947723776[0;39m <==    Updates: 0
2022-07-20 10:26:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786053947723776[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:26:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786074927632384[0;39m 生成今日电子书快照开始
2022-07-20 10:26:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786074927632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786074927632384[0;39m ==> Parameters: 
2022-07-20 10:26:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786074927632384[0;39m <==    Updates: 0
2022-07-20 10:26:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786074927632384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:26:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786095915929600[0;39m 生成今日电子书快照开始
2022-07-20 10:26:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786095915929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786095915929600[0;39m ==> Parameters: 
2022-07-20 10:26:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786095915929600[0;39m <==    Updates: 0
2022-07-20 10:26:50.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786095915929600[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-20 10:26:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786116862283776[0;39m 生成今日电子书快照开始
2022-07-20 10:26:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786116862283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:26:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786116862283776[0;39m ==> Parameters: 
2022-07-20 10:26:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786116862283776[0;39m <==    Updates: 0
2022-07-20 10:26:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786116862283776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:27:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786137867358208[0;39m 生成今日电子书快照开始
2022-07-20 10:27:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786137867358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786137867358208[0;39m ==> Parameters: 
2022-07-20 10:27:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786137867358208[0;39m <==    Updates: 0
2022-07-20 10:27:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786137867358208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:27:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204786158838878208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:27:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786158838878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:27:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786158838878208[0;39m ==> Parameters: 
2022-07-20 10:27:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786158838878208[0;39m <==    Updates: 7
2022-07-20 10:27:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204786158838878208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:27:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786158847266816[0;39m 生成今日电子书快照开始
2022-07-20 10:27:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786158847266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786158847266816[0;39m ==> Parameters: 
2022-07-20 10:27:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786158847266816[0;39m <==    Updates: 0
2022-07-20 10:27:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786158847266816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:27:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786179831369728[0;39m 生成今日电子书快照开始
2022-07-20 10:27:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786179831369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:10.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786179831369728[0;39m ==> Parameters: 
2022-07-20 10:27:10.025 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786179831369728[0;39m <==    Updates: 0
2022-07-20 10:27:10.026 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786179831369728[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 10:27:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786200765140992[0;39m 生成今日电子书快照开始
2022-07-20 10:27:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786200765140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786200765140992[0;39m ==> Parameters: 
2022-07-20 10:27:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786200765140992[0;39m <==    Updates: 0
2022-07-20 10:27:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786200765140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:27:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786221770215424[0;39m 生成今日电子书快照开始
2022-07-20 10:27:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786221770215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786221770215424[0;39m ==> Parameters: 
2022-07-20 10:27:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786221770215424[0;39m <==    Updates: 0
2022-07-20 10:27:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786221770215424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:27:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786242716569600[0;39m 生成今日电子书快照开始
2022-07-20 10:27:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786242716569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786242716569600[0;39m ==> Parameters: 
2022-07-20 10:27:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786242716569600[0;39m <==    Updates: 0
2022-07-20 10:27:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786242716569600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:27:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786263658729472[0;39m 生成今日电子书快照开始
2022-07-20 10:27:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786263658729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786263658729472[0;39m ==> Parameters: 
2022-07-20 10:27:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786263658729472[0;39m <==    Updates: 0
2022-07-20 10:27:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786263658729472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:27:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204786284647026688[0;39m 更新电子书下的文档数据开始
2022-07-20 10:27:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786284647026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:27:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786284647026688[0;39m ==> Parameters: 
2022-07-20 10:27:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786284647026688[0;39m <==    Updates: 7
2022-07-20 10:27:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204786284647026688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:27:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786284659609600[0;39m 生成今日电子书快照开始
2022-07-20 10:27:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786284659609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786284659609600[0;39m ==> Parameters: 
2022-07-20 10:27:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786284659609600[0;39m <==    Updates: 0
2022-07-20 10:27:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786284659609600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:27:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786305660489728[0;39m 生成今日电子书快照开始
2022-07-20 10:27:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786305660489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786305660489728[0;39m ==> Parameters: 
2022-07-20 10:27:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786305660489728[0;39m <==    Updates: 0
2022-07-20 10:27:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786305660489728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:27:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786326636204032[0;39m 生成今日电子书快照开始
2022-07-20 10:27:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786326636204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786326636204032[0;39m ==> Parameters: 
2022-07-20 10:27:45.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786326636204032[0;39m <==    Updates: 0
2022-07-20 10:27:45.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786326636204032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:27:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786347595141120[0;39m 生成今日电子书快照开始
2022-07-20 10:27:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786347595141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786347595141120[0;39m ==> Parameters: 
2022-07-20 10:27:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786347595141120[0;39m <==    Updates: 0
2022-07-20 10:27:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786347595141120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:27:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786368516329472[0;39m 生成今日电子书快照开始
2022-07-20 10:27:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786368516329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:27:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786368516329472[0;39m ==> Parameters: 
2022-07-20 10:27:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786368516329472[0;39m <==    Updates: 0
2022-07-20 10:27:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786368516329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:28:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786389487849472[0;39m 生成今日电子书快照开始
2022-07-20 10:28:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786389487849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786389487849472[0;39m ==> Parameters: 
2022-07-20 10:28:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786389487849472[0;39m <==    Updates: 0
2022-07-20 10:28:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786389487849472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:28:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204786410476146688[0;39m 更新电子书下的文档数据开始
2022-07-20 10:28:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786410476146688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:28:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786410476146688[0;39m ==> Parameters: 
2022-07-20 10:28:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786410476146688[0;39m <==    Updates: 7
2022-07-20 10:28:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204786410476146688[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:28:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786410492923904[0;39m 生成今日电子书快照开始
2022-07-20 10:28:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786410492923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786410492923904[0;39m ==> Parameters: 
2022-07-20 10:28:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786410492923904[0;39m <==    Updates: 0
2022-07-20 10:28:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786410492923904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:28:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786431447666688[0;39m 生成今日电子书快照开始
2022-07-20 10:28:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786431447666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786431447666688[0;39m ==> Parameters: 
2022-07-20 10:28:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786431447666688[0;39m <==    Updates: 0
2022-07-20 10:28:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786431447666688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:28:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786452423380992[0;39m 生成今日电子书快照开始
2022-07-20 10:28:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786452423380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786452423380992[0;39m ==> Parameters: 
2022-07-20 10:28:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786452423380992[0;39m <==    Updates: 0
2022-07-20 10:28:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786452423380992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:28:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786473394900992[0;39m 生成今日电子书快照开始
2022-07-20 10:28:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786473394900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786473394900992[0;39m ==> Parameters: 
2022-07-20 10:28:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786473394900992[0;39m <==    Updates: 0
2022-07-20 10:28:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786473394900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:28:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786494387392512[0;39m 生成今日电子书快照开始
2022-07-20 10:28:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786494387392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786494387392512[0;39m ==> Parameters: 
2022-07-20 10:28:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786494387392512[0;39m <==    Updates: 0
2022-07-20 10:28:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786494387392512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:28:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786515346329600[0;39m 生成今日电子书快照开始
2022-07-20 10:28:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786515346329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786515346329600[0;39m ==> Parameters: 
2022-07-20 10:28:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786515346329600[0;39m <==    Updates: 0
2022-07-20 10:28:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786515346329600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:28:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204786536334626816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:28:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786536334626816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:28:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786536334626816[0;39m ==> Parameters: 
2022-07-20 10:28:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786536334626816[0;39m <==    Updates: 7
2022-07-20 10:28:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204786536334626816[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:28:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786536347209728[0;39m 生成今日电子书快照开始
2022-07-20 10:28:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786536347209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786536347209728[0;39m ==> Parameters: 
2022-07-20 10:28:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786536347209728[0;39m <==    Updates: 0
2022-07-20 10:28:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786536347209728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:28:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786557264203776[0;39m 生成今日电子书快照开始
2022-07-20 10:28:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786557264203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786557264203776[0;39m ==> Parameters: 
2022-07-20 10:28:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786557264203776[0;39m <==    Updates: 0
2022-07-20 10:28:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786557264203776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:28:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786578269278208[0;39m 生成今日电子书快照开始
2022-07-20 10:28:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786578269278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786578269278208[0;39m ==> Parameters: 
2022-07-20 10:28:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786578269278208[0;39m <==    Updates: 0
2022-07-20 10:28:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786578269278208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:28:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786599257575424[0;39m 生成今日电子书快照开始
2022-07-20 10:28:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786599257575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786599257575424[0;39m ==> Parameters: 
2022-07-20 10:28:50.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786599257575424[0;39m <==    Updates: 0
2022-07-20 10:28:50.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786599257575424[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:28:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786620199735296[0;39m 生成今日电子书快照开始
2022-07-20 10:28:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786620199735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:28:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786620199735296[0;39m ==> Parameters: 
2022-07-20 10:28:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786620199735296[0;39m <==    Updates: 0
2022-07-20 10:28:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786620199735296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:29:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786641179643904[0;39m 生成今日电子书快照开始
2022-07-20 10:29:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786641179643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786641179643904[0;39m ==> Parameters: 
2022-07-20 10:29:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786641179643904[0;39m <==    Updates: 0
2022-07-20 10:29:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786641179643904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:29:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786662159552512[0;39m 生成今日电子书快照开始
2022-07-20 10:29:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786662159552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786662159552512[0;39m ==> Parameters: 
2022-07-20 10:29:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786662159552512[0;39m <==    Updates: 0
2022-07-20 10:29:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786662159552512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:29:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204786662172135424[0;39m 更新电子书下的文档数据开始
2022-07-20 10:29:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786662172135424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:29:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786662172135424[0;39m ==> Parameters: 
2022-07-20 10:29:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786662172135424[0;39m <==    Updates: 7
2022-07-20 10:29:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204786662172135424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:29:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786683131072512[0;39m 生成今日电子书快照开始
2022-07-20 10:29:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786683131072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786683131072512[0;39m ==> Parameters: 
2022-07-20 10:29:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786683131072512[0;39m <==    Updates: 0
2022-07-20 10:29:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786683131072512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:29:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786704094203904[0;39m 生成今日电子书快照开始
2022-07-20 10:29:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786704094203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786704094203904[0;39m ==> Parameters: 
2022-07-20 10:29:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786704094203904[0;39m <==    Updates: 0
2022-07-20 10:29:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786704094203904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:29:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786725078306816[0;39m 生成今日电子书快照开始
2022-07-20 10:29:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786725078306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786725078306816[0;39m ==> Parameters: 
2022-07-20 10:29:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786725078306816[0;39m <==    Updates: 0
2022-07-20 10:29:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786725078306816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:29:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786746007883776[0;39m 生成今日电子书快照开始
2022-07-20 10:29:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786746007883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786746007883776[0;39m ==> Parameters: 
2022-07-20 10:29:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786746007883776[0;39m <==    Updates: 0
2022-07-20 10:29:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786746007883776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:29:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786766979403776[0;39m 生成今日电子书快照开始
2022-07-20 10:29:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786766979403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786766979403776[0;39m ==> Parameters: 
2022-07-20 10:29:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786766979403776[0;39m <==    Updates: 0
2022-07-20 10:29:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786766979403776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:29:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786787992866816[0;39m 生成今日电子书快照开始
2022-07-20 10:29:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786787992866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786787992866816[0;39m ==> Parameters: 
2022-07-20 10:29:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786787992866816[0;39m <==    Updates: 0
2022-07-20 10:29:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786787992866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:29:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204786788005449728[0;39m 更新电子书下的文档数据开始
2022-07-20 10:29:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786788005449728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:29:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786788005449728[0;39m ==> Parameters: 
2022-07-20 10:29:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786788005449728[0;39m <==    Updates: 7
2022-07-20 10:29:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204786788005449728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:29:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786808926638080[0;39m 生成今日电子书快照开始
2022-07-20 10:29:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786808926638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786808926638080[0;39m ==> Parameters: 
2022-07-20 10:29:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786808926638080[0;39m <==    Updates: 0
2022-07-20 10:29:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786808926638080[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:29:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786829935906816[0;39m 生成今日电子书快照开始
2022-07-20 10:29:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786829935906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786829935906816[0;39m ==> Parameters: 
2022-07-20 10:29:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786829935906816[0;39m <==    Updates: 0
2022-07-20 10:29:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786829935906816[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:29:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786850911621120[0;39m 生成今日电子书快照开始
2022-07-20 10:29:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786850911621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786850911621120[0;39m ==> Parameters: 
2022-07-20 10:29:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786850911621120[0;39m <==    Updates: 0
2022-07-20 10:29:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786850911621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:29:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786871853780992[0;39m 生成今日电子书快照开始
2022-07-20 10:29:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786871853780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:29:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786871853780992[0;39m ==> Parameters: 
2022-07-20 10:29:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786871853780992[0;39m <==    Updates: 0
2022-07-20 10:29:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786871853780992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:30:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786892804329472[0;39m 生成今日电子书快照开始
2022-07-20 10:30:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786892804329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786892804329472[0;39m ==> Parameters: 
2022-07-20 10:30:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786892804329472[0;39m <==    Updates: 0
2022-07-20 10:30:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786892804329472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:30:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204786913805209600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:30:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786913805209600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:30:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786913805209600[0;39m ==> Parameters: 
2022-07-20 10:30:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204786913805209600[0;39m <==    Updates: 7
2022-07-20 10:30:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204786913805209600[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:30:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786913821986816[0;39m 生成今日电子书快照开始
2022-07-20 10:30:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786913821986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786913821986816[0;39m ==> Parameters: 
2022-07-20 10:30:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786913821986816[0;39m <==    Updates: 0
2022-07-20 10:30:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786913821986816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:30:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786934764146688[0;39m 生成今日电子书快照开始
2022-07-20 10:30:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786934764146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786934764146688[0;39m ==> Parameters: 
2022-07-20 10:30:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786934764146688[0;39m <==    Updates: 0
2022-07-20 10:30:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786934764146688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:30:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786955744055296[0;39m 生成今日电子书快照开始
2022-07-20 10:30:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786955744055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786955744055296[0;39m ==> Parameters: 
2022-07-20 10:30:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786955744055296[0;39m <==    Updates: 0
2022-07-20 10:30:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786955744055296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:30:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786976740741120[0;39m 生成今日电子书快照开始
2022-07-20 10:30:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786976740741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786976740741120[0;39m ==> Parameters: 
2022-07-20 10:30:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786976740741120[0;39m <==    Updates: 0
2022-07-20 10:30:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786976740741120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:30:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204786997699678208[0;39m 生成今日电子书快照开始
2022-07-20 10:30:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786997699678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786997699678208[0;39m ==> Parameters: 
2022-07-20 10:30:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204786997699678208[0;39m <==    Updates: 0
2022-07-20 10:30:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204786997699678208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:30:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787018658615296[0;39m 生成今日电子书快照开始
2022-07-20 10:30:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787018658615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787018658615296[0;39m ==> Parameters: 
2022-07-20 10:30:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787018658615296[0;39m <==    Updates: 0
2022-07-20 10:30:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787018658615296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:30:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204787039663689728[0;39m 更新电子书下的文档数据开始
2022-07-20 10:30:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787039663689728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:30:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787039663689728[0;39m ==> Parameters: 
2022-07-20 10:30:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787039663689728[0;39m <==    Updates: 7
2022-07-20 10:30:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204787039663689728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:30:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787039672078336[0;39m 生成今日电子书快照开始
2022-07-20 10:30:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787039672078336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787039672078336[0;39m ==> Parameters: 
2022-07-20 10:30:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787039672078336[0;39m <==    Updates: 0
2022-07-20 10:30:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787039672078336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:30:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787060601655296[0;39m 生成今日电子书快照开始
2022-07-20 10:30:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787060601655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787060601655296[0;39m ==> Parameters: 
2022-07-20 10:30:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787060601655296[0;39m <==    Updates: 0
2022-07-20 10:30:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787060601655296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:30:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787081577369600[0;39m 生成今日电子书快照开始
2022-07-20 10:30:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787081577369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787081577369600[0;39m ==> Parameters: 
2022-07-20 10:30:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787081577369600[0;39m <==    Updates: 0
2022-07-20 10:30:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787081577369600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:30:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787102532112384[0;39m 生成今日电子书快照开始
2022-07-20 10:30:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787102532112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787102532112384[0;39m ==> Parameters: 
2022-07-20 10:30:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787102532112384[0;39m <==    Updates: 0
2022-07-20 10:30:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787102532112384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:30:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787123495243776[0;39m 生成今日电子书快照开始
2022-07-20 10:30:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787123495243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:30:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787123495243776[0;39m ==> Parameters: 
2022-07-20 10:30:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787123495243776[0;39m <==    Updates: 0
2022-07-20 10:30:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787123495243776[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:31:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787144512901120[0;39m 生成今日电子书快照开始
2022-07-20 10:31:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787144512901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787144512901120[0;39m ==> Parameters: 
2022-07-20 10:31:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787144512901120[0;39m <==    Updates: 0
2022-07-20 10:31:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787144512901120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:31:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787165438283776[0;39m 生成今日电子书快照开始
2022-07-20 10:31:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787165438283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787165438283776[0;39m ==> Parameters: 
2022-07-20 10:31:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787165438283776[0;39m <==    Updates: 0
2022-07-20 10:31:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787165438283776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:31:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204787165455060992[0;39m 更新电子书下的文档数据开始
2022-07-20 10:31:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787165455060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:31:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787165455060992[0;39m ==> Parameters: 
2022-07-20 10:31:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787165455060992[0;39m <==    Updates: 7
2022-07-20 10:31:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204787165455060992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:31:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787186409803776[0;39m 生成今日电子书快照开始
2022-07-20 10:31:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787186409803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787186409803776[0;39m ==> Parameters: 
2022-07-20 10:31:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787186409803776[0;39m <==    Updates: 0
2022-07-20 10:31:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787186409803776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:31:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787207377129472[0;39m 生成今日电子书快照开始
2022-07-20 10:31:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787207377129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787207377129472[0;39m ==> Parameters: 
2022-07-20 10:31:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787207377129472[0;39m <==    Updates: 0
2022-07-20 10:31:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787207377129472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:31:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787228403175424[0;39m 生成今日电子书快照开始
2022-07-20 10:31:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787228403175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787228403175424[0;39m ==> Parameters: 
2022-07-20 10:31:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787228403175424[0;39m <==    Updates: 0
2022-07-20 10:31:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787228403175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:31:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787249357918208[0;39m 生成今日电子书快照开始
2022-07-20 10:31:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787249357918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787249357918208[0;39m ==> Parameters: 
2022-07-20 10:31:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787249357918208[0;39m <==    Updates: 0
2022-07-20 10:31:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787249357918208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:31:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787270321049600[0;39m 生成今日电子书快照开始
2022-07-20 10:31:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787270321049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787270321049600[0;39m ==> Parameters: 
2022-07-20 10:31:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787270321049600[0;39m <==    Updates: 0
2022-07-20 10:31:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787270321049600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:31:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787291271598080[0;39m 生成今日电子书快照开始
2022-07-20 10:31:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787291271598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787291271598080[0;39m ==> Parameters: 
2022-07-20 10:31:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787291271598080[0;39m <==    Updates: 0
2022-07-20 10:31:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787291271598080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:31:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204787291292569600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:31:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787291292569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:31:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787291292569600[0;39m ==> Parameters: 
2022-07-20 10:31:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787291292569600[0;39m <==    Updates: 7
2022-07-20 10:31:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204787291292569600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:31:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787312259895296[0;39m 生成今日电子书快照开始
2022-07-20 10:31:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787312259895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787312259895296[0;39m ==> Parameters: 
2022-07-20 10:31:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787312259895296[0;39m <==    Updates: 0
2022-07-20 10:31:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787312259895296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:31:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787333269164032[0;39m 生成今日电子书快照开始
2022-07-20 10:31:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787333269164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787333269164032[0;39m ==> Parameters: 
2022-07-20 10:31:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787333269164032[0;39m <==    Updates: 0
2022-07-20 10:31:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787333269164032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:31:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787354223906816[0;39m 生成今日电子书快照开始
2022-07-20 10:31:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787354223906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787354223906816[0;39m ==> Parameters: 
2022-07-20 10:31:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787354223906816[0;39m <==    Updates: 0
2022-07-20 10:31:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787354223906816[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:31:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787375178649600[0;39m 生成今日电子书快照开始
2022-07-20 10:31:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787375178649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:31:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787375178649600[0;39m ==> Parameters: 
2022-07-20 10:31:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787375178649600[0;39m <==    Updates: 0
2022-07-20 10:31:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787375178649600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:32:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787396133392384[0;39m 生成今日电子书快照开始
2022-07-20 10:32:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787396133392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787396133392384[0;39m ==> Parameters: 
2022-07-20 10:32:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787396133392384[0;39m <==    Updates: 0
2022-07-20 10:32:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787396133392384[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:32:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204787417125883904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:32:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787417125883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:32:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787417125883904[0;39m ==> Parameters: 
2022-07-20 10:32:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787417125883904[0;39m <==    Updates: 7
2022-07-20 10:32:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204787417125883904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:32:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787417134272512[0;39m 生成今日电子书快照开始
2022-07-20 10:32:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787417134272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787417134272512[0;39m ==> Parameters: 
2022-07-20 10:32:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787417134272512[0;39m <==    Updates: 0
2022-07-20 10:32:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787417134272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:32:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787438118375424[0;39m 生成今日电子书快照开始
2022-07-20 10:32:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787438118375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787438118375424[0;39m ==> Parameters: 
2022-07-20 10:32:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787438118375424[0;39m <==    Updates: 0
2022-07-20 10:32:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787438118375424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:32:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787459098284032[0;39m 生成今日电子书快照开始
2022-07-20 10:32:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787459098284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787459098284032[0;39m ==> Parameters: 
2022-07-20 10:32:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787459098284032[0;39m <==    Updates: 0
2022-07-20 10:32:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787459098284032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:32:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787480027860992[0;39m 生成今日电子书快照开始
2022-07-20 10:32:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787480027860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787480027860992[0;39m ==> Parameters: 
2022-07-20 10:32:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787480027860992[0;39m <==    Updates: 0
2022-07-20 10:32:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787480027860992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:32:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787500990992384[0;39m 生成今日电子书快照开始
2022-07-20 10:32:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787500990992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787500990992384[0;39m ==> Parameters: 
2022-07-20 10:32:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787500990992384[0;39m <==    Updates: 0
2022-07-20 10:32:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787500990992384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:32:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787521979289600[0;39m 生成今日电子书快照开始
2022-07-20 10:32:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787521979289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787521979289600[0;39m ==> Parameters: 
2022-07-20 10:32:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787521979289600[0;39m <==    Updates: 0
2022-07-20 10:32:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787521979289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:32:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787542959198208[0;39m 生成今日电子书快照开始
2022-07-20 10:32:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787542959198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787542959198208[0;39m ==> Parameters: 
2022-07-20 10:32:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787542959198208[0;39m <==    Updates: 0
2022-07-20 10:32:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787542959198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:32:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204787542967586816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:32:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787542967586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:32:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787542967586816[0;39m ==> Parameters: 
2022-07-20 10:32:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787542967586816[0;39m <==    Updates: 7
2022-07-20 10:32:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204787542967586816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:32:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787563897163776[0;39m 生成今日电子书快照开始
2022-07-20 10:32:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787563897163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787563897163776[0;39m ==> Parameters: 
2022-07-20 10:32:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787563897163776[0;39m <==    Updates: 0
2022-07-20 10:32:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787563897163776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:32:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787584914821120[0;39m 生成今日电子书快照开始
2022-07-20 10:32:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787584914821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:45.032 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787584914821120[0;39m ==> Parameters: 
2022-07-20 10:32:45.033 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787584914821120[0;39m <==    Updates: 0
2022-07-20 10:32:45.034 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787584914821120[0;39m 生成今日电子书快照结束，耗时：21 毫秒
2022-07-20 10:32:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787605869563904[0;39m 生成今日电子书快照开始
2022-07-20 10:32:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787605869563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787605869563904[0;39m ==> Parameters: 
2022-07-20 10:32:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787605869563904[0;39m <==    Updates: 0
2022-07-20 10:32:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787605869563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:32:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787626857861120[0;39m 生成今日电子书快照开始
2022-07-20 10:32:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787626857861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:32:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787626857861120[0;39m ==> Parameters: 
2022-07-20 10:32:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787626857861120[0;39m <==    Updates: 0
2022-07-20 10:32:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787626857861120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:33:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787647841964032[0;39m 生成今日电子书快照开始
2022-07-20 10:33:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787647841964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787647841964032[0;39m ==> Parameters: 
2022-07-20 10:33:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787647841964032[0;39m <==    Updates: 0
2022-07-20 10:33:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787647841964032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:33:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787668754763776[0;39m 生成今日电子书快照开始
2022-07-20 10:33:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787668754763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787668754763776[0;39m ==> Parameters: 
2022-07-20 10:33:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787668754763776[0;39m <==    Updates: 0
2022-07-20 10:33:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787668754763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:33:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204787668763152384[0;39m 更新电子书下的文档数据开始
2022-07-20 10:33:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787668763152384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:33:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787668763152384[0;39m ==> Parameters: 
2022-07-20 10:33:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787668763152384[0;39m <==    Updates: 7
2022-07-20 10:33:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204787668763152384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:33:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787689738866688[0;39m 生成今日电子书快照开始
2022-07-20 10:33:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787689738866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787689738866688[0;39m ==> Parameters: 
2022-07-20 10:33:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787689738866688[0;39m <==    Updates: 0
2022-07-20 10:33:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787689738866688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:33:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787710718775296[0;39m 生成今日电子书快照开始
2022-07-20 10:33:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787710718775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787710718775296[0;39m ==> Parameters: 
2022-07-20 10:33:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787710718775296[0;39m <==    Updates: 0
2022-07-20 10:33:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787710718775296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:33:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787731711266816[0;39m 生成今日电子书快照开始
2022-07-20 10:33:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787731711266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787731711266816[0;39m ==> Parameters: 
2022-07-20 10:33:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787731711266816[0;39m <==    Updates: 0
2022-07-20 10:33:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787731711266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:33:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787752686981120[0;39m 生成今日电子书快照开始
2022-07-20 10:33:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787752686981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787752686981120[0;39m ==> Parameters: 
2022-07-20 10:33:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787752686981120[0;39m <==    Updates: 0
2022-07-20 10:33:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787752686981120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:33:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787773645918208[0;39m 生成今日电子书快照开始
2022-07-20 10:33:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787773645918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787773645918208[0;39m ==> Parameters: 
2022-07-20 10:33:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787773645918208[0;39m <==    Updates: 0
2022-07-20 10:33:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787773645918208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:33:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204787794604855296[0;39m 更新电子书下的文档数据开始
2022-07-20 10:33:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787794604855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:33:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787794604855296[0;39m ==> Parameters: 
2022-07-20 10:33:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787794604855296[0;39m <==    Updates: 7
2022-07-20 10:33:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204787794604855296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:33:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787794613243904[0;39m 生成今日电子书快照开始
2022-07-20 10:33:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787794613243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787794613243904[0;39m ==> Parameters: 
2022-07-20 10:33:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787794613243904[0;39m <==    Updates: 0
2022-07-20 10:33:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787794613243904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:33:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787815572180992[0;39m 生成今日电子书快照开始
2022-07-20 10:33:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787815572180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787815572180992[0;39m ==> Parameters: 
2022-07-20 10:33:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787815572180992[0;39m <==    Updates: 0
2022-07-20 10:33:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787815572180992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:33:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787836560478208[0;39m 生成今日电子书快照开始
2022-07-20 10:33:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787836560478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787836560478208[0;39m ==> Parameters: 
2022-07-20 10:33:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787836560478208[0;39m <==    Updates: 0
2022-07-20 10:33:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787836560478208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:33:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787857506832384[0;39m 生成今日电子书快照开始
2022-07-20 10:33:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787857506832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787857506832384[0;39m ==> Parameters: 
2022-07-20 10:33:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787857506832384[0;39m <==    Updates: 0
2022-07-20 10:33:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787857506832384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:33:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787878507712512[0;39m 生成今日电子书快照开始
2022-07-20 10:33:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787878507712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:33:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787878507712512[0;39m ==> Parameters: 
2022-07-20 10:33:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787878507712512[0;39m <==    Updates: 0
2022-07-20 10:33:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787878507712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:34:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787899449872384[0;39m 生成今日电子书快照开始
2022-07-20 10:34:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787899449872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787899449872384[0;39m ==> Parameters: 
2022-07-20 10:34:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787899449872384[0;39m <==    Updates: 0
2022-07-20 10:34:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787899449872384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:34:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204787920429780992[0;39m 更新电子书下的文档数据开始
2022-07-20 10:34:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787920429780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:34:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787920429780992[0;39m ==> Parameters: 
2022-07-20 10:34:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204787920429780992[0;39m <==    Updates: 7
2022-07-20 10:34:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204787920429780992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:34:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787920438169600[0;39m 生成今日电子书快照开始
2022-07-20 10:34:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787920438169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787920438169600[0;39m ==> Parameters: 
2022-07-20 10:34:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787920438169600[0;39m <==    Updates: 0
2022-07-20 10:34:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787920438169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:34:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787941413883904[0;39m 生成今日电子书快照开始
2022-07-20 10:34:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787941413883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787941413883904[0;39m ==> Parameters: 
2022-07-20 10:34:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787941413883904[0;39m <==    Updates: 0
2022-07-20 10:34:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787941413883904[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:34:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787962402181120[0;39m 生成今日电子书快照开始
2022-07-20 10:34:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787962402181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787962402181120[0;39m ==> Parameters: 
2022-07-20 10:34:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787962402181120[0;39m <==    Updates: 0
2022-07-20 10:34:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787962402181120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:34:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204787983340146688[0;39m 生成今日电子书快照开始
2022-07-20 10:34:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787983340146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787983340146688[0;39m ==> Parameters: 
2022-07-20 10:34:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204787983340146688[0;39m <==    Updates: 0
2022-07-20 10:34:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204787983340146688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:34:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788004307472384[0;39m 生成今日电子书快照开始
2022-07-20 10:34:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788004307472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788004307472384[0;39m ==> Parameters: 
2022-07-20 10:34:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788004307472384[0;39m <==    Updates: 0
2022-07-20 10:34:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788004307472384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:34:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788025270603776[0;39m 生成今日电子书快照开始
2022-07-20 10:34:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788025270603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788025270603776[0;39m ==> Parameters: 
2022-07-20 10:34:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788025270603776[0;39m <==    Updates: 0
2022-07-20 10:34:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788025270603776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:34:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204788046271483904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:34:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788046271483904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:34:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788046271483904[0;39m ==> Parameters: 
2022-07-20 10:34:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788046271483904[0;39m <==    Updates: 7
2022-07-20 10:34:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204788046271483904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:34:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788046279872512[0;39m 生成今日电子书快照开始
2022-07-20 10:34:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788046279872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788046279872512[0;39m ==> Parameters: 
2022-07-20 10:34:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788046279872512[0;39m <==    Updates: 0
2022-07-20 10:34:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788046279872512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:34:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788067255586816[0;39m 生成今日电子书快照开始
2022-07-20 10:34:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788067255586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788067255586816[0;39m ==> Parameters: 
2022-07-20 10:34:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788067255586816[0;39m <==    Updates: 0
2022-07-20 10:34:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788067255586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:34:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788088197746688[0;39m 生成今日电子书快照开始
2022-07-20 10:34:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788088197746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788088197746688[0;39m ==> Parameters: 
2022-07-20 10:34:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788088197746688[0;39m <==    Updates: 0
2022-07-20 10:34:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788088197746688[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:34:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788109190238208[0;39m 生成今日电子书快照开始
2022-07-20 10:34:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788109190238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788109190238208[0;39m ==> Parameters: 
2022-07-20 10:34:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788109190238208[0;39m <==    Updates: 0
2022-07-20 10:34:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788109190238208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:34:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788130186924032[0;39m 生成今日电子书快照开始
2022-07-20 10:34:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788130186924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:34:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788130186924032[0;39m ==> Parameters: 
2022-07-20 10:34:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788130186924032[0;39m <==    Updates: 0
2022-07-20 10:34:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788130186924032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:35:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788151141666816[0;39m 生成今日电子书快照开始
2022-07-20 10:35:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788151141666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788151141666816[0;39m ==> Parameters: 
2022-07-20 10:35:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788151141666816[0;39m <==    Updates: 0
2022-07-20 10:35:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788151141666816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:35:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204788172100603904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:35:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788172100603904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:35:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788172100603904[0;39m ==> Parameters: 
2022-07-20 10:35:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788172100603904[0;39m <==    Updates: 7
2022-07-20 10:35:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204788172100603904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:35:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788172108992512[0;39m 生成今日电子书快照开始
2022-07-20 10:35:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788172108992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788172108992512[0;39m ==> Parameters: 
2022-07-20 10:35:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788172108992512[0;39m <==    Updates: 0
2022-07-20 10:35:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788172108992512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:35:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788193059540992[0;39m 生成今日电子书快照开始
2022-07-20 10:35:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788193059540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788193059540992[0;39m ==> Parameters: 
2022-07-20 10:35:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788193059540992[0;39m <==    Updates: 0
2022-07-20 10:35:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788193059540992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:35:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788214026866688[0;39m 生成今日电子书快照开始
2022-07-20 10:35:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788214026866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788214026866688[0;39m ==> Parameters: 
2022-07-20 10:35:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788214026866688[0;39m <==    Updates: 0
2022-07-20 10:35:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788214026866688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:35:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788235019358208[0;39m 生成今日电子书快照开始
2022-07-20 10:35:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788235019358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788235019358208[0;39m ==> Parameters: 
2022-07-20 10:35:20.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788235019358208[0;39m <==    Updates: 0
2022-07-20 10:35:20.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788235019358208[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-20 10:35:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788255974100992[0;39m 生成今日电子书快照开始
2022-07-20 10:35:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788255974100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788255974100992[0;39m ==> Parameters: 
2022-07-20 10:35:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788255974100992[0;39m <==    Updates: 0
2022-07-20 10:35:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788255974100992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:35:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788276928843776[0;39m 生成今日电子书快照开始
2022-07-20 10:35:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788276928843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788276928843776[0;39m ==> Parameters: 
2022-07-20 10:35:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788276928843776[0;39m <==    Updates: 0
2022-07-20 10:35:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788276928843776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:35:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788297954889728[0;39m 生成今日电子书快照开始
2022-07-20 10:35:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788297954889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788297954889728[0;39m ==> Parameters: 
2022-07-20 10:35:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788297954889728[0;39m <==    Updates: 0
2022-07-20 10:35:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788297954889728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:35:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204788297967472640[0;39m 更新电子书下的文档数据开始
2022-07-20 10:35:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788297967472640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:35:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788297967472640[0;39m ==> Parameters: 
2022-07-20 10:35:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788297967472640[0;39m <==    Updates: 7
2022-07-20 10:35:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204788297967472640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:35:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788318909632512[0;39m 生成今日电子书快照开始
2022-07-20 10:35:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788318909632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788318909632512[0;39m ==> Parameters: 
2022-07-20 10:35:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788318909632512[0;39m <==    Updates: 0
2022-07-20 10:35:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788318909632512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:35:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788339851792384[0;39m 生成今日电子书快照开始
2022-07-20 10:35:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788339851792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788339851792384[0;39m ==> Parameters: 
2022-07-20 10:35:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788339851792384[0;39m <==    Updates: 0
2022-07-20 10:35:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788339851792384[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:35:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788360840089600[0;39m 生成今日电子书快照开始
2022-07-20 10:35:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788360840089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788360840089600[0;39m ==> Parameters: 
2022-07-20 10:35:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788360840089600[0;39m <==    Updates: 0
2022-07-20 10:35:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788360840089600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:35:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788381815803904[0;39m 生成今日电子书快照开始
2022-07-20 10:35:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788381815803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:35:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788381815803904[0;39m ==> Parameters: 
2022-07-20 10:35:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788381815803904[0;39m <==    Updates: 0
2022-07-20 10:35:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788381815803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:36:00.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788402749575168[0;39m 生成今日电子书快照开始
2022-07-20 10:36:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788402749575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788402749575168[0;39m ==> Parameters: 
2022-07-20 10:36:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788402749575168[0;39m <==    Updates: 0
2022-07-20 10:36:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788402749575168[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:36:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788423767232512[0;39m 生成今日电子书快照开始
2022-07-20 10:36:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788423767232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788423767232512[0;39m ==> Parameters: 
2022-07-20 10:36:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788423767232512[0;39m <==    Updates: 0
2022-07-20 10:36:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788423767232512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:36:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204788423784009728[0;39m 更新电子书下的文档数据开始
2022-07-20 10:36:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788423784009728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:36:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788423784009728[0;39m ==> Parameters: 
2022-07-20 10:36:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788423784009728[0;39m <==    Updates: 7
2022-07-20 10:36:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204788423784009728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:36:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788444713586688[0;39m 生成今日电子书快照开始
2022-07-20 10:36:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788444713586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788444713586688[0;39m ==> Parameters: 
2022-07-20 10:36:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788444713586688[0;39m <==    Updates: 0
2022-07-20 10:36:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788444713586688[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:36:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788465672523776[0;39m 生成今日电子书快照开始
2022-07-20 10:36:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788465672523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788465672523776[0;39m ==> Parameters: 
2022-07-20 10:36:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788465672523776[0;39m <==    Updates: 0
2022-07-20 10:36:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788465672523776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:36:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788486669209600[0;39m 生成今日电子书快照开始
2022-07-20 10:36:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788486669209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788486669209600[0;39m ==> Parameters: 
2022-07-20 10:36:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788486669209600[0;39m <==    Updates: 0
2022-07-20 10:36:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788486669209600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:36:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788507657506816[0;39m 生成今日电子书快照开始
2022-07-20 10:36:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788507657506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788507657506816[0;39m ==> Parameters: 
2022-07-20 10:36:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788507657506816[0;39m <==    Updates: 0
2022-07-20 10:36:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788507657506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:36:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788528645804032[0;39m 生成今日电子书快照开始
2022-07-20 10:36:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788528645804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788528645804032[0;39m ==> Parameters: 
2022-07-20 10:36:30.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788528645804032[0;39m <==    Updates: 0
2022-07-20 10:36:30.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788528645804032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:36:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788549571186688[0;39m 生成今日电子书快照开始
2022-07-20 10:36:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788549571186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788549571186688[0;39m ==> Parameters: 
2022-07-20 10:36:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788549571186688[0;39m <==    Updates: 0
2022-07-20 10:36:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788549571186688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:36:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204788549583769600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:36:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788549583769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:36:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788549583769600[0;39m ==> Parameters: 
2022-07-20 10:36:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788549583769600[0;39m <==    Updates: 7
2022-07-20 10:36:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204788549583769600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:36:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788570551095296[0;39m 生成今日电子书快照开始
2022-07-20 10:36:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788570551095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788570551095296[0;39m ==> Parameters: 
2022-07-20 10:36:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788570551095296[0;39m <==    Updates: 0
2022-07-20 10:36:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788570551095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:36:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788591497449472[0;39m 生成今日电子书快照开始
2022-07-20 10:36:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788591497449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788591497449472[0;39m ==> Parameters: 
2022-07-20 10:36:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788591497449472[0;39m <==    Updates: 0
2022-07-20 10:36:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788591497449472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:36:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788612473163776[0;39m 生成今日电子书快照开始
2022-07-20 10:36:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788612473163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788612473163776[0;39m ==> Parameters: 
2022-07-20 10:36:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788612473163776[0;39m <==    Updates: 0
2022-07-20 10:36:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788612473163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:36:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788633453072384[0;39m 生成今日电子书快照开始
2022-07-20 10:36:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788633453072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:36:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788633453072384[0;39m ==> Parameters: 
2022-07-20 10:36:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788633453072384[0;39m <==    Updates: 0
2022-07-20 10:36:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788633453072384[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 10:37:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788654466535424[0;39m 生成今日电子书快照开始
2022-07-20 10:37:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788654466535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788654466535424[0;39m ==> Parameters: 
2022-07-20 10:37:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788654466535424[0;39m <==    Updates: 0
2022-07-20 10:37:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788654466535424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:37:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788675396112384[0;39m 生成今日电子书快照开始
2022-07-20 10:37:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788675396112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788675396112384[0;39m ==> Parameters: 
2022-07-20 10:37:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788675396112384[0;39m <==    Updates: 0
2022-07-20 10:37:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788675396112384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:37:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204788675404500992[0;39m 更新电子书下的文档数据开始
2022-07-20 10:37:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788675404500992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:37:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788675404500992[0;39m ==> Parameters: 
2022-07-20 10:37:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788675404500992[0;39m <==    Updates: 7
2022-07-20 10:37:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204788675404500992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:37:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788696409575424[0;39m 生成今日电子书快照开始
2022-07-20 10:37:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788696409575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788696409575424[0;39m ==> Parameters: 
2022-07-20 10:37:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788696409575424[0;39m <==    Updates: 0
2022-07-20 10:37:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788696409575424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:37:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788717351735296[0;39m 生成今日电子书快照开始
2022-07-20 10:37:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788717351735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788717351735296[0;39m ==> Parameters: 
2022-07-20 10:37:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788717351735296[0;39m <==    Updates: 0
2022-07-20 10:37:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788717351735296[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-20 10:37:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788738323255296[0;39m 生成今日电子书快照开始
2022-07-20 10:37:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788738323255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788738323255296[0;39m ==> Parameters: 
2022-07-20 10:37:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788738323255296[0;39m <==    Updates: 0
2022-07-20 10:37:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788738323255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:37:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788759273803776[0;39m 生成今日电子书快照开始
2022-07-20 10:37:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788759273803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788759273803776[0;39m ==> Parameters: 
2022-07-20 10:37:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788759273803776[0;39m <==    Updates: 0
2022-07-20 10:37:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788759273803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:37:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788780249518080[0;39m 生成今日电子书快照开始
2022-07-20 10:37:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788780249518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788780249518080[0;39m ==> Parameters: 
2022-07-20 10:37:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788780249518080[0;39m <==    Updates: 0
2022-07-20 10:37:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788780249518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:37:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204788801242009600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:37:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788801242009600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:37:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788801242009600[0;39m ==> Parameters: 
2022-07-20 10:37:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788801242009600[0;39m <==    Updates: 7
2022-07-20 10:37:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204788801242009600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:37:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788801250398208[0;39m 生成今日电子书快照开始
2022-07-20 10:37:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788801250398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788801250398208[0;39m ==> Parameters: 
2022-07-20 10:37:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788801250398208[0;39m <==    Updates: 0
2022-07-20 10:37:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788801250398208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:37:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788822226112512[0;39m 生成今日电子书快照开始
2022-07-20 10:37:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788822226112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788822226112512[0;39m ==> Parameters: 
2022-07-20 10:37:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788822226112512[0;39m <==    Updates: 0
2022-07-20 10:37:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788822226112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:37:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788843185049600[0;39m 生成今日电子书快照开始
2022-07-20 10:37:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788843185049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788843185049600[0;39m ==> Parameters: 
2022-07-20 10:37:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788843185049600[0;39m <==    Updates: 0
2022-07-20 10:37:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788843185049600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:37:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788864139792384[0;39m 生成今日电子书快照开始
2022-07-20 10:37:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788864139792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788864139792384[0;39m ==> Parameters: 
2022-07-20 10:37:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788864139792384[0;39m <==    Updates: 0
2022-07-20 10:37:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788864139792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:37:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788885161644032[0;39m 生成今日电子书快照开始
2022-07-20 10:37:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788885161644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:37:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788885161644032[0;39m ==> Parameters: 
2022-07-20 10:37:55.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788885161644032[0;39m <==    Updates: 0
2022-07-20 10:37:55.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788885161644032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:38:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788906124775424[0;39m 生成今日电子书快照开始
2022-07-20 10:38:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788906124775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788906124775424[0;39m ==> Parameters: 
2022-07-20 10:38:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788906124775424[0;39m <==    Updates: 0
2022-07-20 10:38:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788906124775424[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:38:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788927096295424[0;39m 生成今日电子书快照开始
2022-07-20 10:38:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788927096295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788927096295424[0;39m ==> Parameters: 
2022-07-20 10:38:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788927096295424[0;39m <==    Updates: 0
2022-07-20 10:38:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788927096295424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:38:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204788927108878336[0;39m 更新电子书下的文档数据开始
2022-07-20 10:38:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788927108878336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:38:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788927108878336[0;39m ==> Parameters: 
2022-07-20 10:38:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204788927108878336[0;39m <==    Updates: 7
2022-07-20 10:38:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204788927108878336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:38:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788948055232512[0;39m 生成今日电子书快照开始
2022-07-20 10:38:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788948055232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788948055232512[0;39m ==> Parameters: 
2022-07-20 10:38:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788948055232512[0;39m <==    Updates: 0
2022-07-20 10:38:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788948055232512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:38:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788969047724032[0;39m 生成今日电子书快照开始
2022-07-20 10:38:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788969047724032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788969047724032[0;39m ==> Parameters: 
2022-07-20 10:38:15.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788969047724032[0;39m <==    Updates: 0
2022-07-20 10:38:15.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788969047724032[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:38:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204788989985689600[0;39m 生成今日电子书快照开始
2022-07-20 10:38:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788989985689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788989985689600[0;39m ==> Parameters: 
2022-07-20 10:38:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204788989985689600[0;39m <==    Updates: 0
2022-07-20 10:38:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204788989985689600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:38:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789010986569728[0;39m 生成今日电子书快照开始
2022-07-20 10:38:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789010986569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789010986569728[0;39m ==> Parameters: 
2022-07-20 10:38:25.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789010986569728[0;39m <==    Updates: 0
2022-07-20 10:38:25.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789010986569728[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:38:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789031928729600[0;39m 生成今日电子书快照开始
2022-07-20 10:38:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789031928729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789031928729600[0;39m ==> Parameters: 
2022-07-20 10:38:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789031928729600[0;39m <==    Updates: 0
2022-07-20 10:38:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789031928729600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:38:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204789052900249600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:38:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789052900249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:38:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789052900249600[0;39m ==> Parameters: 
2022-07-20 10:38:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789052900249600[0;39m <==    Updates: 7
2022-07-20 10:38:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204789052900249600[0;39m 更新电子书下的文档数据结束，耗时：8 毫秒
2022-07-20 10:38:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789052937998336[0;39m 生成今日电子书快照开始
2022-07-20 10:38:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789052937998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789052937998336[0;39m ==> Parameters: 
2022-07-20 10:38:35.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789052937998336[0;39m <==    Updates: 0
2022-07-20 10:38:35.024 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789052937998336[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:38:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789073875963904[0;39m 生成今日电子书快照开始
2022-07-20 10:38:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789073875963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789073875963904[0;39m ==> Parameters: 
2022-07-20 10:38:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789073875963904[0;39m <==    Updates: 0
2022-07-20 10:38:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789073875963904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:38:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789094822318080[0;39m 生成今日电子书快照开始
2022-07-20 10:38:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789094822318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789094822318080[0;39m ==> Parameters: 
2022-07-20 10:38:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789094822318080[0;39m <==    Updates: 0
2022-07-20 10:38:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789094822318080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:38:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789115798032384[0;39m 生成今日电子书快照开始
2022-07-20 10:38:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789115798032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789115798032384[0;39m ==> Parameters: 
2022-07-20 10:38:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789115798032384[0;39m <==    Updates: 0
2022-07-20 10:38:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789115798032384[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:38:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789136819884032[0;39m 生成今日电子书快照开始
2022-07-20 10:38:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789136819884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:38:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789136819884032[0;39m ==> Parameters: 
2022-07-20 10:38:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789136819884032[0;39m <==    Updates: 0
2022-07-20 10:38:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789136819884032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:39:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789157774626816[0;39m 生成今日电子书快照开始
2022-07-20 10:39:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789157774626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789157774626816[0;39m ==> Parameters: 
2022-07-20 10:39:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789157774626816[0;39m <==    Updates: 0
2022-07-20 10:39:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789157774626816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:39:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204789178737758208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:39:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789178737758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:39:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789178737758208[0;39m ==> Parameters: 
2022-07-20 10:39:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789178737758208[0;39m <==    Updates: 7
2022-07-20 10:39:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204789178737758208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:39:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789178746146816[0;39m 生成今日电子书快照开始
2022-07-20 10:39:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789178746146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789178746146816[0;39m ==> Parameters: 
2022-07-20 10:39:05.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789178746146816[0;39m <==    Updates: 0
2022-07-20 10:39:05.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789178746146816[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-20 10:39:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789199730249728[0;39m 生成今日电子书快照开始
2022-07-20 10:39:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789199730249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789199730249728[0;39m ==> Parameters: 
2022-07-20 10:39:10.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789199730249728[0;39m <==    Updates: 0
2022-07-20 10:39:10.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789199730249728[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:39:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789220680798208[0;39m 生成今日电子书快照开始
2022-07-20 10:39:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789220680798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789220680798208[0;39m ==> Parameters: 
2022-07-20 10:39:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789220680798208[0;39m <==    Updates: 0
2022-07-20 10:39:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789220680798208[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:39:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789241643929600[0;39m 生成今日电子书快照开始
2022-07-20 10:39:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789241643929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789241643929600[0;39m ==> Parameters: 
2022-07-20 10:39:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789241643929600[0;39m <==    Updates: 0
2022-07-20 10:39:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789241643929600[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:39:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789262611255296[0;39m 生成今日电子书快照开始
2022-07-20 10:39:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789262611255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789262611255296[0;39m ==> Parameters: 
2022-07-20 10:39:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789262611255296[0;39m <==    Updates: 0
2022-07-20 10:39:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789262611255296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:39:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789283599552512[0;39m 生成今日电子书快照开始
2022-07-20 10:39:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789283599552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789283599552512[0;39m ==> Parameters: 
2022-07-20 10:39:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789283599552512[0;39m <==    Updates: 0
2022-07-20 10:39:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789283599552512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:39:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789304529129472[0;39m 生成今日电子书快照开始
2022-07-20 10:39:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789304529129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789304529129472[0;39m ==> Parameters: 
2022-07-20 10:39:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789304529129472[0;39m <==    Updates: 0
2022-07-20 10:39:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789304529129472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:39:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204789304554295296[0;39m 更新电子书下的文档数据开始
2022-07-20 10:39:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789304554295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:39:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789304554295296[0;39m ==> Parameters: 
2022-07-20 10:39:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789304554295296[0;39m <==    Updates: 7
2022-07-20 10:39:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204789304554295296[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:39:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789325517426688[0;39m 生成今日电子书快照开始
2022-07-20 10:39:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789325517426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789325517426688[0;39m ==> Parameters: 
2022-07-20 10:39:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789325517426688[0;39m <==    Updates: 0
2022-07-20 10:39:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789325517426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:39:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789346514112512[0;39m 生成今日电子书快照开始
2022-07-20 10:39:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789346514112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789346514112512[0;39m ==> Parameters: 
2022-07-20 10:39:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789346514112512[0;39m <==    Updates: 0
2022-07-20 10:39:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789346514112512[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:39:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789367485632512[0;39m 生成今日电子书快照开始
2022-07-20 10:39:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789367485632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789367485632512[0;39m ==> Parameters: 
2022-07-20 10:39:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789367485632512[0;39m <==    Updates: 0
2022-07-20 10:39:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789367485632512[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:39:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789388431986688[0;39m 生成今日电子书快照开始
2022-07-20 10:39:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789388431986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:39:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789388431986688[0;39m ==> Parameters: 
2022-07-20 10:39:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789388431986688[0;39m <==    Updates: 0
2022-07-20 10:39:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789388431986688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:40:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789409411895296[0;39m 生成今日电子书快照开始
2022-07-20 10:40:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789409411895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789409411895296[0;39m ==> Parameters: 
2022-07-20 10:40:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789409411895296[0;39m <==    Updates: 0
2022-07-20 10:40:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789409411895296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:40:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204789430375026688[0;39m 更新电子书下的文档数据开始
2022-07-20 10:40:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789430375026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:40:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789430375026688[0;39m ==> Parameters: 
2022-07-20 10:40:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789430375026688[0;39m <==    Updates: 7
2022-07-20 10:40:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204789430375026688[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:40:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789430387609600[0;39m 生成今日电子书快照开始
2022-07-20 10:40:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789430387609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789430387609600[0;39m ==> Parameters: 
2022-07-20 10:40:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789430387609600[0;39m <==    Updates: 0
2022-07-20 10:40:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789430387609600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:40:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789451384295424[0;39m 生成今日电子书快照开始
2022-07-20 10:40:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789451384295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789451384295424[0;39m ==> Parameters: 
2022-07-20 10:40:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789451384295424[0;39m <==    Updates: 0
2022-07-20 10:40:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789451384295424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:40:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789472301289472[0;39m 生成今日电子书快照开始
2022-07-20 10:40:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789472301289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789472301289472[0;39m ==> Parameters: 
2022-07-20 10:40:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789472301289472[0;39m <==    Updates: 0
2022-07-20 10:40:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789472301289472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:40:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789493277003776[0;39m 生成今日电子书快照开始
2022-07-20 10:40:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789493277003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789493277003776[0;39m ==> Parameters: 
2022-07-20 10:40:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789493277003776[0;39m <==    Updates: 0
2022-07-20 10:40:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789493277003776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:40:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789514273689600[0;39m 生成今日电子书快照开始
2022-07-20 10:40:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789514273689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789514273689600[0;39m ==> Parameters: 
2022-07-20 10:40:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789514273689600[0;39m <==    Updates: 0
2022-07-20 10:40:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789514273689600[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:40:30.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789535211655168[0;39m 生成今日电子书快照开始
2022-07-20 10:40:30.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789535211655168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789535211655168[0;39m ==> Parameters: 
2022-07-20 10:40:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789535211655168[0;39m <==    Updates: 0
2022-07-20 10:40:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789535211655168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:40:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204789556225118208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:40:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789556225118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:40:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789556225118208[0;39m ==> Parameters: 
2022-07-20 10:40:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789556225118208[0;39m <==    Updates: 7
2022-07-20 10:40:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204789556225118208[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:40:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789556241895424[0;39m 生成今日电子书快照开始
2022-07-20 10:40:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789556241895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789556241895424[0;39m ==> Parameters: 
2022-07-20 10:40:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789556241895424[0;39m <==    Updates: 0
2022-07-20 10:40:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789556241895424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:40:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789577163083776[0;39m 生成今日电子书快照开始
2022-07-20 10:40:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789577163083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789577163083776[0;39m ==> Parameters: 
2022-07-20 10:40:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789577163083776[0;39m <==    Updates: 0
2022-07-20 10:40:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789577163083776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:40:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789598176546816[0;39m 生成今日电子书快照开始
2022-07-20 10:40:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789598176546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789598176546816[0;39m ==> Parameters: 
2022-07-20 10:40:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789598176546816[0;39m <==    Updates: 0
2022-07-20 10:40:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789598176546816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:40:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789619148066816[0;39m 生成今日电子书快照开始
2022-07-20 10:40:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789619148066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789619148066816[0;39m ==> Parameters: 
2022-07-20 10:40:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789619148066816[0;39m <==    Updates: 0
2022-07-20 10:40:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789619148066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:40:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789640132169728[0;39m 生成今日电子书快照开始
2022-07-20 10:40:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789640132169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:40:55.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789640132169728[0;39m ==> Parameters: 
2022-07-20 10:40:55.026 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789640132169728[0;39m <==    Updates: 0
2022-07-20 10:40:55.026 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789640132169728[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:41:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789661082718208[0;39m 生成今日电子书快照开始
2022-07-20 10:41:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789661082718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789661082718208[0;39m ==> Parameters: 
2022-07-20 10:41:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789661082718208[0;39m <==    Updates: 0
2022-07-20 10:41:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789661082718208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:41:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204789682045849600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:41:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789682045849600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:41:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789682045849600[0;39m ==> Parameters: 
2022-07-20 10:41:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789682045849600[0;39m <==    Updates: 7
2022-07-20 10:41:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204789682045849600[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 10:41:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789682066821120[0;39m 生成今日电子书快照开始
2022-07-20 10:41:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789682066821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789682066821120[0;39m ==> Parameters: 
2022-07-20 10:41:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789682066821120[0;39m <==    Updates: 0
2022-07-20 10:41:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789682066821120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:41:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789703000592384[0;39m 生成今日电子书快照开始
2022-07-20 10:41:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789703000592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789703000592384[0;39m ==> Parameters: 
2022-07-20 10:41:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789703000592384[0;39m <==    Updates: 0
2022-07-20 10:41:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789703000592384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:41:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789724014055424[0;39m 生成今日电子书快照开始
2022-07-20 10:41:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789724014055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789724014055424[0;39m ==> Parameters: 
2022-07-20 10:41:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789724014055424[0;39m <==    Updates: 0
2022-07-20 10:41:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789724014055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:41:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789744935243776[0;39m 生成今日电子书快照开始
2022-07-20 10:41:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789744935243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789744935243776[0;39m ==> Parameters: 
2022-07-20 10:41:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789744935243776[0;39m <==    Updates: 0
2022-07-20 10:41:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789744935243776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:41:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789765940318208[0;39m 生成今日电子书快照开始
2022-07-20 10:41:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789765940318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789765940318208[0;39m ==> Parameters: 
2022-07-20 10:41:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789765940318208[0;39m <==    Updates: 0
2022-07-20 10:41:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789765940318208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:41:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789786899255296[0;39m 生成今日电子书快照开始
2022-07-20 10:41:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789786899255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789786899255296[0;39m ==> Parameters: 
2022-07-20 10:41:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789786899255296[0;39m <==    Updates: 0
2022-07-20 10:41:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789786899255296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:41:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789807866580992[0;39m 生成今日电子书快照开始
2022-07-20 10:41:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789807866580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789807866580992[0;39m ==> Parameters: 
2022-07-20 10:41:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789807866580992[0;39m <==    Updates: 0
2022-07-20 10:41:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789807866580992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:41:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204789807883358208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:41:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789807883358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:41:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789807883358208[0;39m ==> Parameters: 
2022-07-20 10:41:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789807883358208[0;39m <==    Updates: 7
2022-07-20 10:41:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204789807883358208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:41:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789828829712384[0;39m 生成今日电子书快照开始
2022-07-20 10:41:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789828829712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789828829712384[0;39m ==> Parameters: 
2022-07-20 10:41:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789828829712384[0;39m <==    Updates: 0
2022-07-20 10:41:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789828829712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:41:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789849818009600[0;39m 生成今日电子书快照开始
2022-07-20 10:41:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789849818009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789849818009600[0;39m ==> Parameters: 
2022-07-20 10:41:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789849818009600[0;39m <==    Updates: 0
2022-07-20 10:41:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789849818009600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:41:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789870764363776[0;39m 生成今日电子书快照开始
2022-07-20 10:41:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789870764363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789870764363776[0;39m ==> Parameters: 
2022-07-20 10:41:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789870764363776[0;39m <==    Updates: 0
2022-07-20 10:41:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789870764363776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:41:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789891765243904[0;39m 生成今日电子书快照开始
2022-07-20 10:41:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789891765243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:41:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789891765243904[0;39m ==> Parameters: 
2022-07-20 10:41:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789891765243904[0;39m <==    Updates: 0
2022-07-20 10:41:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789891765243904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:42:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789912719986688[0;39m 生成今日电子书快照开始
2022-07-20 10:42:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789912719986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789912719986688[0;39m ==> Parameters: 
2022-07-20 10:42:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789912719986688[0;39m <==    Updates: 0
2022-07-20 10:42:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789912719986688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:42:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204789933725061120[0;39m 更新电子书下的文档数据开始
2022-07-20 10:42:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789933725061120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:42:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789933725061120[0;39m ==> Parameters: 
2022-07-20 10:42:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204789933725061120[0;39m <==    Updates: 7
2022-07-20 10:42:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204789933725061120[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 10:42:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789933741838336[0;39m 生成今日电子书快照开始
2022-07-20 10:42:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789933741838336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789933741838336[0;39m ==> Parameters: 
2022-07-20 10:42:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789933741838336[0;39m <==    Updates: 0
2022-07-20 10:42:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789933741838336[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:42:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789954709164032[0;39m 生成今日电子书快照开始
2022-07-20 10:42:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789954709164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789954709164032[0;39m ==> Parameters: 
2022-07-20 10:42:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789954709164032[0;39m <==    Updates: 0
2022-07-20 10:42:10.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789954709164032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:42:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789975638740992[0;39m 生成今日电子书快照开始
2022-07-20 10:42:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789975638740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789975638740992[0;39m ==> Parameters: 
2022-07-20 10:42:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789975638740992[0;39m <==    Updates: 0
2022-07-20 10:42:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789975638740992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:42:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204789996606066688[0;39m 生成今日电子书快照开始
2022-07-20 10:42:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789996606066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789996606066688[0;39m ==> Parameters: 
2022-07-20 10:42:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204789996606066688[0;39m <==    Updates: 0
2022-07-20 10:42:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204789996606066688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:42:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790017560809472[0;39m 生成今日电子书快照开始
2022-07-20 10:42:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790017560809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790017560809472[0;39m ==> Parameters: 
2022-07-20 10:42:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790017560809472[0;39m <==    Updates: 0
2022-07-20 10:42:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790017560809472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:42:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790038540718080[0;39m 生成今日电子书快照开始
2022-07-20 10:42:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790038540718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790038540718080[0;39m ==> Parameters: 
2022-07-20 10:42:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790038540718080[0;39m <==    Updates: 0
2022-07-20 10:42:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790038540718080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:42:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790059537403904[0;39m 生成今日电子书快照开始
2022-07-20 10:42:35.106 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790059537403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:35.107 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790059537403904[0;39m ==> Parameters: 
2022-07-20 10:42:35.108 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790059537403904[0;39m <==    Updates: 0
2022-07-20 10:42:35.109 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790059537403904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:42:35.109 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204790059956834304[0;39m 更新电子书下的文档数据开始
2022-07-20 10:42:35.109 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790059956834304[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:42:35.109 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790059956834304[0;39m ==> Parameters: 
2022-07-20 10:42:35.110 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790059956834304[0;39m <==    Updates: 7
2022-07-20 10:42:35.111 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204790059956834304[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:42:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790080475369472[0;39m 生成今日电子书快照开始
2022-07-20 10:42:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790080475369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790080475369472[0;39m ==> Parameters: 
2022-07-20 10:42:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790080475369472[0;39m <==    Updates: 0
2022-07-20 10:42:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790080475369472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:42:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790101476249600[0;39m 生成今日电子书快照开始
2022-07-20 10:42:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790101476249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790101476249600[0;39m ==> Parameters: 
2022-07-20 10:42:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790101476249600[0;39m <==    Updates: 0
2022-07-20 10:42:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790101476249600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:42:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790122426798080[0;39m 生成今日电子书快照开始
2022-07-20 10:42:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790122426798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790122426798080[0;39m ==> Parameters: 
2022-07-20 10:42:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790122426798080[0;39m <==    Updates: 0
2022-07-20 10:42:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790122426798080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:42:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790143419289600[0;39m 生成今日电子书快照开始
2022-07-20 10:42:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790143419289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:42:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790143419289600[0;39m ==> Parameters: 
2022-07-20 10:42:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790143419289600[0;39m <==    Updates: 0
2022-07-20 10:42:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790143419289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:43:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790164399198208[0;39m 生成今日电子书快照开始
2022-07-20 10:43:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790164399198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790164399198208[0;39m ==> Parameters: 
2022-07-20 10:43:00.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790164399198208[0;39m <==    Updates: 0
2022-07-20 10:43:00.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790164399198208[0;39m 生成今日电子书快照结束，耗时：12 毫秒
2022-07-20 10:43:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790185370718208[0;39m 生成今日电子书快照开始
2022-07-20 10:43:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790185370718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790185370718208[0;39m ==> Parameters: 
2022-07-20 10:43:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790185370718208[0;39m <==    Updates: 0
2022-07-20 10:43:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790185370718208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:43:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204790185387495424[0;39m 更新电子书下的文档数据开始
2022-07-20 10:43:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790185387495424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:43:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790185387495424[0;39m ==> Parameters: 
2022-07-20 10:43:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790185387495424[0;39m <==    Updates: 7
2022-07-20 10:43:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204790185387495424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:43:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790206317072384[0;39m 生成今日电子书快照开始
2022-07-20 10:43:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790206317072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790206317072384[0;39m ==> Parameters: 
2022-07-20 10:43:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790206317072384[0;39m <==    Updates: 0
2022-07-20 10:43:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790206317072384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:43:11.414 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-3 - Shutdown initiated...
2022-07-20 10:43:11.418 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-3 - Shutdown completed.
2022-07-20 10:43:11.708 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 18012 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:43:11.709 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:43:12.747 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:43:12.747 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:43:12.755 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-07-20 10:43:13.051 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:43:13.051 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:43:13.051 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:43:13.051 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:43:13.098 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:43:13.098 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 1385 ms
2022-07-20 10:43:13.965 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:43:13.982 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:43:13.983 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:43:13.989 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 2.403 seconds (JVM running for 1770.923)
2022-07-20 10:43:13.990 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:43:13.991 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:43:13.991 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:43:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790227334729728[0;39m 生成今日电子书快照开始
2022-07-20 10:43:15.016 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204790227334729728[0;39m HikariPool-4 - Starting...
2022-07-20 10:43:15.028 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204790227334729728[0;39m HikariPool-4 - Start completed.
2022-07-20 10:43:15.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790227334729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:15.030 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790227334729728[0;39m ==> Parameters: 
2022-07-20 10:43:15.032 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790227334729728[0;39m <==    Updates: 0
2022-07-20 10:43:15.032 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790227334729728[0;39m 生成今日电子书快照结束，耗时：16 毫秒
2022-07-20 10:43:15.800 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-4 - Shutdown initiated...
2022-07-20 10:43:15.804 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-4 - Shutdown completed.
2022-07-20 10:43:16.014 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 18012 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-20 10:43:16.014 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-20 10:43:16.203 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-20 10:43:16.203 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-20 10:43:16.212 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2022-07-20 10:43:16.327 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-20 10:43:16.327 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-20 10:43:16.327 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-20 10:43:16.327 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-20 10:43:16.362 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-20 10:43:16.362 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 346 ms
2022-07-20 10:43:16.892 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-20 10:43:16.904 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-20 10:43:16.907 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-20 10:43:16.911 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 0.934 seconds (JVM running for 1773.845)
2022-07-20 10:43:16.912 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-20 10:43:16.912 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-20 10:43:16.912 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-20 10:43:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790248272695296[0;39m 生成今日电子书快照开始
2022-07-20 10:43:20.008 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m204790248272695296[0;39m HikariPool-5 - Starting...
2022-07-20 10:43:20.015 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m204790248272695296[0;39m HikariPool-5 - Start completed.
2022-07-20 10:43:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790248272695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:20.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790248272695296[0;39m ==> Parameters: 
2022-07-20 10:43:20.031 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790248272695296[0;39m <==    Updates: 0
2022-07-20 10:43:20.031 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790248272695296[0;39m 生成今日电子书快照结束，耗时：23 毫秒
2022-07-20 10:43:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790269273575424[0;39m 生成今日电子书快照开始
2022-07-20 10:43:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790269273575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790269273575424[0;39m ==> Parameters: 
2022-07-20 10:43:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790269273575424[0;39m <==    Updates: 0
2022-07-20 10:43:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790269273575424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:43:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790290215735296[0;39m 生成今日电子书快照开始
2022-07-20 10:43:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790290215735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790290215735296[0;39m ==> Parameters: 
2022-07-20 10:43:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790290215735296[0;39m <==    Updates: 0
2022-07-20 10:43:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790290215735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:43:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204790311166283776[0;39m 更新电子书下的文档数据开始
2022-07-20 10:43:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790311166283776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:43:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790311166283776[0;39m ==> Parameters: 
2022-07-20 10:43:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790311166283776[0;39m <==    Updates: 7
2022-07-20 10:43:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204790311166283776[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 10:43:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790311187255296[0;39m 生成今日电子书快照开始
2022-07-20 10:43:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790311187255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790311187255296[0;39m ==> Parameters: 
2022-07-20 10:43:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790311187255296[0;39m <==    Updates: 0
2022-07-20 10:43:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790311187255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:43:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790332154580992[0;39m 生成今日电子书快照开始
2022-07-20 10:43:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790332154580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790332154580992[0;39m ==> Parameters: 
2022-07-20 10:43:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790332154580992[0;39m <==    Updates: 0
2022-07-20 10:43:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790332154580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:43:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790353138683904[0;39m 生成今日电子书快照开始
2022-07-20 10:43:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790353138683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790353138683904[0;39m ==> Parameters: 
2022-07-20 10:43:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790353138683904[0;39m <==    Updates: 0
2022-07-20 10:43:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790353138683904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:43:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790374080843776[0;39m 生成今日电子书快照开始
2022-07-20 10:43:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790374080843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790374080843776[0;39m ==> Parameters: 
2022-07-20 10:43:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790374080843776[0;39m <==    Updates: 0
2022-07-20 10:43:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790374080843776[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 10:43:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790395085918208[0;39m 生成今日电子书快照开始
2022-07-20 10:43:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790395085918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:43:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790395085918208[0;39m ==> Parameters: 
2022-07-20 10:43:55.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790395085918208[0;39m <==    Updates: 0
2022-07-20 10:43:55.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790395085918208[0;39m 生成今日电子书快照结束，耗时：12 毫秒
2022-07-20 10:44:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790416019689472[0;39m 生成今日电子书快照开始
2022-07-20 10:44:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790416019689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790416019689472[0;39m ==> Parameters: 
2022-07-20 10:44:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790416019689472[0;39m <==    Updates: 0
2022-07-20 10:44:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790416019689472[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:44:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204790437033152512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:44:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790437033152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:44:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790437033152512[0;39m ==> Parameters: 
2022-07-20 10:44:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790437033152512[0;39m <==    Updates: 7
2022-07-20 10:44:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204790437033152512[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:44:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790437045735424[0;39m 生成今日电子书快照开始
2022-07-20 10:44:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790437045735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790437045735424[0;39m ==> Parameters: 
2022-07-20 10:44:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790437045735424[0;39m <==    Updates: 0
2022-07-20 10:44:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790437045735424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:44:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790457971118080[0;39m 生成今日电子书快照开始
2022-07-20 10:44:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790457971118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790457971118080[0;39m ==> Parameters: 
2022-07-20 10:44:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790457971118080[0;39m <==    Updates: 0
2022-07-20 10:44:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790457971118080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:44:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790478946832384[0;39m 生成今日电子书快照开始
2022-07-20 10:44:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790478946832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790478946832384[0;39m ==> Parameters: 
2022-07-20 10:44:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790478946832384[0;39m <==    Updates: 0
2022-07-20 10:44:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790478946832384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:44:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790499922546688[0;39m 生成今日电子书快照开始
2022-07-20 10:44:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790499922546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790499922546688[0;39m ==> Parameters: 
2022-07-20 10:44:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790499922546688[0;39m <==    Updates: 0
2022-07-20 10:44:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790499922546688[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:44:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790520877289472[0;39m 生成今日电子书快照开始
2022-07-20 10:44:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790520877289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790520877289472[0;39m ==> Parameters: 
2022-07-20 10:44:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790520877289472[0;39m <==    Updates: 0
2022-07-20 10:44:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790520877289472[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 10:44:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790541848809472[0;39m 生成今日电子书快照开始
2022-07-20 10:44:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790541848809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790541848809472[0;39m ==> Parameters: 
2022-07-20 10:44:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790541848809472[0;39m <==    Updates: 0
2022-07-20 10:44:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790541848809472[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 10:44:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204790562841300992[0;39m 更新电子书下的文档数据开始
2022-07-20 10:44:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790562841300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:44:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790562841300992[0;39m ==> Parameters: 
2022-07-20 10:44:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790562841300992[0;39m <==    Updates: 7
2022-07-20 10:44:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204790562841300992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:44:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790562853883904[0;39m 生成今日电子书快照开始
2022-07-20 10:44:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790562853883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790562853883904[0;39m ==> Parameters: 
2022-07-20 10:44:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790562853883904[0;39m <==    Updates: 0
2022-07-20 10:44:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790562853883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:44:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790583804432384[0;39m 生成今日电子书快照开始
2022-07-20 10:44:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790583804432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790583804432384[0;39m ==> Parameters: 
2022-07-20 10:44:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790583804432384[0;39m <==    Updates: 0
2022-07-20 10:44:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790583804432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:44:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790604822089728[0;39m 生成今日电子书快照开始
2022-07-20 10:44:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790604822089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790604822089728[0;39m ==> Parameters: 
2022-07-20 10:44:45.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790604822089728[0;39m <==    Updates: 0
2022-07-20 10:44:45.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790604822089728[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:44:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790625739083776[0;39m 生成今日电子书快照开始
2022-07-20 10:44:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790625739083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790625739083776[0;39m ==> Parameters: 
2022-07-20 10:44:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790625739083776[0;39m <==    Updates: 0
2022-07-20 10:44:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790625739083776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:44:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790646706409472[0;39m 生成今日电子书快照开始
2022-07-20 10:44:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790646706409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:44:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790646706409472[0;39m ==> Parameters: 
2022-07-20 10:44:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790646706409472[0;39m <==    Updates: 0
2022-07-20 10:44:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790646706409472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:45:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790667677929472[0;39m 生成今日电子书快照开始
2022-07-20 10:45:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790667677929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790667677929472[0;39m ==> Parameters: 
2022-07-20 10:45:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790667677929472[0;39m <==    Updates: 0
2022-07-20 10:45:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790667677929472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:45:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790688666226688[0;39m 生成今日电子书快照开始
2022-07-20 10:45:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790688666226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790688666226688[0;39m ==> Parameters: 
2022-07-20 10:45:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790688666226688[0;39m <==    Updates: 0
2022-07-20 10:45:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790688666226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:45:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204790688678809600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:45:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790688678809600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:45:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790688678809600[0;39m ==> Parameters: 
2022-07-20 10:45:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790688678809600[0;39m <==    Updates: 7
2022-07-20 10:45:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204790688678809600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:45:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790709625163776[0;39m 生成今日电子书快照开始
2022-07-20 10:45:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790709625163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790709625163776[0;39m ==> Parameters: 
2022-07-20 10:45:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790709625163776[0;39m <==    Updates: 0
2022-07-20 10:45:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790709625163776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:45:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790730634432512[0;39m 生成今日电子书快照开始
2022-07-20 10:45:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790730634432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790730634432512[0;39m ==> Parameters: 
2022-07-20 10:45:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790730634432512[0;39m <==    Updates: 0
2022-07-20 10:45:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790730634432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:45:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790751618535424[0;39m 生成今日电子书快照开始
2022-07-20 10:45:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790751618535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790751618535424[0;39m ==> Parameters: 
2022-07-20 10:45:20.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790751618535424[0;39m <==    Updates: 0
2022-07-20 10:45:20.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790751618535424[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:45:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790772564889600[0;39m 生成今日电子书快照开始
2022-07-20 10:45:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790772564889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790772564889600[0;39m ==> Parameters: 
2022-07-20 10:45:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790772564889600[0;39m <==    Updates: 0
2022-07-20 10:45:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790772564889600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:45:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790793523826688[0;39m 生成今日电子书快照开始
2022-07-20 10:45:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790793523826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790793523826688[0;39m ==> Parameters: 
2022-07-20 10:45:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790793523826688[0;39m <==    Updates: 0
2022-07-20 10:45:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790793523826688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:45:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790814545678336[0;39m 生成今日电子书快照开始
2022-07-20 10:45:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790814545678336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790814545678336[0;39m ==> Parameters: 
2022-07-20 10:45:35.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790814545678336[0;39m <==    Updates: 0
2022-07-20 10:45:35.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790814545678336[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:45:35.021 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204790814562455552[0;39m 更新电子书下的文档数据开始
2022-07-20 10:45:35.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790814562455552[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:45:35.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790814562455552[0;39m ==> Parameters: 
2022-07-20 10:45:35.023 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790814562455552[0;39m <==    Updates: 7
2022-07-20 10:45:35.024 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204790814562455552[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:45:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790835500421120[0;39m 生成今日电子书快照开始
2022-07-20 10:45:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790835500421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790835500421120[0;39m ==> Parameters: 
2022-07-20 10:45:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790835500421120[0;39m <==    Updates: 0
2022-07-20 10:45:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790835500421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:45:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790856446775296[0;39m 生成今日电子书快照开始
2022-07-20 10:45:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790856446775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790856446775296[0;39m ==> Parameters: 
2022-07-20 10:45:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790856446775296[0;39m <==    Updates: 0
2022-07-20 10:45:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790856446775296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:45:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790877443461120[0;39m 生成今日电子书快照开始
2022-07-20 10:45:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790877443461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790877443461120[0;39m ==> Parameters: 
2022-07-20 10:45:50.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790877443461120[0;39m <==    Updates: 0
2022-07-20 10:45:50.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790877443461120[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:45:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790898364649472[0;39m 生成今日电子书快照开始
2022-07-20 10:45:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790898364649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:45:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790898364649472[0;39m ==> Parameters: 
2022-07-20 10:45:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790898364649472[0;39m <==    Updates: 0
2022-07-20 10:45:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790898364649472[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:46:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790919336169472[0;39m 生成今日电子书快照开始
2022-07-20 10:46:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790919336169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790919336169472[0;39m ==> Parameters: 
2022-07-20 10:46:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790919336169472[0;39m <==    Updates: 0
2022-07-20 10:46:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790919336169472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:46:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204790940316078080[0;39m 更新电子书下的文档数据开始
2022-07-20 10:46:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790940316078080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:46:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790940316078080[0;39m ==> Parameters: 
2022-07-20 10:46:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204790940316078080[0;39m <==    Updates: 7
2022-07-20 10:46:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204790940316078080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:46:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790940324466688[0;39m 生成今日电子书快照开始
2022-07-20 10:46:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790940324466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790940324466688[0;39m ==> Parameters: 
2022-07-20 10:46:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790940324466688[0;39m <==    Updates: 0
2022-07-20 10:46:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790940324466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:46:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790961279209472[0;39m 生成今日电子书快照开始
2022-07-20 10:46:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790961279209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790961279209472[0;39m ==> Parameters: 
2022-07-20 10:46:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790961279209472[0;39m <==    Updates: 0
2022-07-20 10:46:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790961279209472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:46:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204790982284283904[0;39m 生成今日电子书快照开始
2022-07-20 10:46:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790982284283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790982284283904[0;39m ==> Parameters: 
2022-07-20 10:46:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204790982284283904[0;39m <==    Updates: 0
2022-07-20 10:46:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204790982284283904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:46:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791003230638080[0;39m 生成今日电子书快照开始
2022-07-20 10:46:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791003230638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791003230638080[0;39m ==> Parameters: 
2022-07-20 10:46:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791003230638080[0;39m <==    Updates: 0
2022-07-20 10:46:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791003230638080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:46:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791024256684032[0;39m 生成今日电子书快照开始
2022-07-20 10:46:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791024256684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:25.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791024256684032[0;39m ==> Parameters: 
2022-07-20 10:46:25.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791024256684032[0;39m <==    Updates: 0
2022-07-20 10:46:25.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791024256684032[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:46:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791045177872384[0;39m 生成今日电子书快照开始
2022-07-20 10:46:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791045177872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791045177872384[0;39m ==> Parameters: 
2022-07-20 10:46:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791045177872384[0;39m <==    Updates: 0
2022-07-20 10:46:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791045177872384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:46:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791066149392384[0;39m 生成今日电子书快照开始
2022-07-20 10:46:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791066149392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791066149392384[0;39m ==> Parameters: 
2022-07-20 10:46:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791066149392384[0;39m <==    Updates: 0
2022-07-20 10:46:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791066149392384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:46:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204791066161975296[0;39m 更新电子书下的文档数据开始
2022-07-20 10:46:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791066161975296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:46:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791066161975296[0;39m ==> Parameters: 
2022-07-20 10:46:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791066161975296[0;39m <==    Updates: 7
2022-07-20 10:46:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204791066161975296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:46:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791087133495296[0;39m 生成今日电子书快照开始
2022-07-20 10:46:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791087133495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791087133495296[0;39m ==> Parameters: 
2022-07-20 10:46:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791087133495296[0;39m <==    Updates: 0
2022-07-20 10:46:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791087133495296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:46:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791108121792512[0;39m 生成今日电子书快照开始
2022-07-20 10:46:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791108121792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791108121792512[0;39m ==> Parameters: 
2022-07-20 10:46:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791108121792512[0;39m <==    Updates: 0
2022-07-20 10:46:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791108121792512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:46:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791129068146688[0;39m 生成今日电子书快照开始
2022-07-20 10:46:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791129068146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791129068146688[0;39m ==> Parameters: 
2022-07-20 10:46:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791129068146688[0;39m <==    Updates: 0
2022-07-20 10:46:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791129068146688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:46:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791150069026816[0;39m 生成今日电子书快照开始
2022-07-20 10:46:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791150069026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:46:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791150069026816[0;39m ==> Parameters: 
2022-07-20 10:46:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791150069026816[0;39m <==    Updates: 0
2022-07-20 10:46:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791150069026816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:47:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791171015380992[0;39m 生成今日电子书快照开始
2022-07-20 10:47:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791171015380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791171015380992[0;39m ==> Parameters: 
2022-07-20 10:47:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791171015380992[0;39m <==    Updates: 0
2022-07-20 10:47:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791171015380992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:47:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204791191991095296[0;39m 更新电子书下的文档数据开始
2022-07-20 10:47:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791191991095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:47:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791191991095296[0;39m ==> Parameters: 
2022-07-20 10:47:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791191991095296[0;39m <==    Updates: 7
2022-07-20 10:47:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204791191991095296[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 10:47:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791192007872512[0;39m 生成今日电子书快照开始
2022-07-20 10:47:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791192007872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791192007872512[0;39m ==> Parameters: 
2022-07-20 10:47:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791192007872512[0;39m <==    Updates: 0
2022-07-20 10:47:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791192007872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:47:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791212991975424[0;39m 生成今日电子书快照开始
2022-07-20 10:47:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791212991975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791212991975424[0;39m ==> Parameters: 
2022-07-20 10:47:10.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791212991975424[0;39m <==    Updates: 0
2022-07-20 10:47:10.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791212991975424[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:47:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791233942523904[0;39m 生成今日电子书快照开始
2022-07-20 10:47:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791233942523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791233942523904[0;39m ==> Parameters: 
2022-07-20 10:47:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791233942523904[0;39m <==    Updates: 0
2022-07-20 10:47:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791233942523904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:47:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791254914043904[0;39m 生成今日电子书快照开始
2022-07-20 10:47:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791254914043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791254914043904[0;39m ==> Parameters: 
2022-07-20 10:47:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791254914043904[0;39m <==    Updates: 0
2022-07-20 10:47:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791254914043904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:47:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791275864592384[0;39m 生成今日电子书快照开始
2022-07-20 10:47:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791275864592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791275864592384[0;39m ==> Parameters: 
2022-07-20 10:47:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791275864592384[0;39m <==    Updates: 0
2022-07-20 10:47:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791275864592384[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 10:47:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791296827723776[0;39m 生成今日电子书快照开始
2022-07-20 10:47:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791296827723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791296827723776[0;39m ==> Parameters: 
2022-07-20 10:47:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791296827723776[0;39m <==    Updates: 0
2022-07-20 10:47:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791296827723776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:47:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204791317836992512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:47:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791317836992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:47:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791317836992512[0;39m ==> Parameters: 
2022-07-20 10:47:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791317836992512[0;39m <==    Updates: 7
2022-07-20 10:47:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204791317836992512[0;39m 更新电子书下的文档数据结束，耗时：7 毫秒
2022-07-20 10:47:35.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791317874741248[0;39m 生成今日电子书快照开始
2022-07-20 10:47:35.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791317874741248[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:35.026 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791317874741248[0;39m ==> Parameters: 
2022-07-20 10:47:35.031 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791317874741248[0;39m <==    Updates: 0
2022-07-20 10:47:35.032 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791317874741248[0;39m 生成今日电子书快照结束，耗时：12 毫秒
2022-07-20 10:47:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791338766569472[0;39m 生成今日电子书快照开始
2022-07-20 10:47:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791338766569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791338766569472[0;39m ==> Parameters: 
2022-07-20 10:47:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791338766569472[0;39m <==    Updates: 0
2022-07-20 10:47:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791338766569472[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 10:47:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791359763255296[0;39m 生成今日电子书快照开始
2022-07-20 10:47:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791359763255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791359763255296[0;39m ==> Parameters: 
2022-07-20 10:47:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791359763255296[0;39m <==    Updates: 0
2022-07-20 10:47:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791359763255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:47:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791380717998080[0;39m 生成今日电子书快照开始
2022-07-20 10:47:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791380717998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791380717998080[0;39m ==> Parameters: 
2022-07-20 10:47:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791380717998080[0;39m <==    Updates: 0
2022-07-20 10:47:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791380717998080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:47:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791401697906688[0;39m 生成今日电子书快照开始
2022-07-20 10:47:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791401697906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:47:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791401697906688[0;39m ==> Parameters: 
2022-07-20 10:47:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791401697906688[0;39m <==    Updates: 0
2022-07-20 10:47:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791401697906688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:48:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791422690398208[0;39m 生成今日电子书快照开始
2022-07-20 10:48:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791422690398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791422690398208[0;39m ==> Parameters: 
2022-07-20 10:48:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791422690398208[0;39m <==    Updates: 0
2022-07-20 10:48:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791422690398208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:48:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204791443666112512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:48:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791443666112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:48:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791443666112512[0;39m ==> Parameters: 
2022-07-20 10:48:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791443666112512[0;39m <==    Updates: 7
2022-07-20 10:48:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204791443666112512[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:48:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791443678695424[0;39m 生成今日电子书快照开始
2022-07-20 10:48:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791443678695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791443678695424[0;39m ==> Parameters: 
2022-07-20 10:48:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791443678695424[0;39m <==    Updates: 0
2022-07-20 10:48:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791443678695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:48:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791464646021120[0;39m 生成今日电子书快照开始
2022-07-20 10:48:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791464646021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791464646021120[0;39m ==> Parameters: 
2022-07-20 10:48:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791464646021120[0;39m <==    Updates: 0
2022-07-20 10:48:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791464646021120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:48:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791485621735424[0;39m 生成今日电子书快照开始
2022-07-20 10:48:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791485621735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791485621735424[0;39m ==> Parameters: 
2022-07-20 10:48:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791485621735424[0;39m <==    Updates: 0
2022-07-20 10:48:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791485621735424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:48:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791506572283904[0;39m 生成今日电子书快照开始
2022-07-20 10:48:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791506572283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791506572283904[0;39m ==> Parameters: 
2022-07-20 10:48:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791506572283904[0;39m <==    Updates: 0
2022-07-20 10:48:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791506572283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:48:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791527552192512[0;39m 生成今日电子书快照开始
2022-07-20 10:48:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791527552192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791527552192512[0;39m ==> Parameters: 
2022-07-20 10:48:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791527552192512[0;39m <==    Updates: 0
2022-07-20 10:48:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791527552192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:48:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791548490158080[0;39m 生成今日电子书快照开始
2022-07-20 10:48:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791548490158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791548490158080[0;39m ==> Parameters: 
2022-07-20 10:48:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791548490158080[0;39m <==    Updates: 0
2022-07-20 10:48:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791548490158080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:48:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791569503621120[0;39m 生成今日电子书快照开始
2022-07-20 10:48:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791569503621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791569503621120[0;39m ==> Parameters: 
2022-07-20 10:48:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791569503621120[0;39m <==    Updates: 0
2022-07-20 10:48:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791569503621120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:48:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204791569520398336[0;39m 更新电子书下的文档数据开始
2022-07-20 10:48:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791569520398336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:48:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791569520398336[0;39m ==> Parameters: 
2022-07-20 10:48:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791569520398336[0;39m <==    Updates: 7
2022-07-20 10:48:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204791569520398336[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:48:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791590433198080[0;39m 生成今日电子书快照开始
2022-07-20 10:48:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791590433198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791590433198080[0;39m ==> Parameters: 
2022-07-20 10:48:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791590433198080[0;39m <==    Updates: 0
2022-07-20 10:48:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791590433198080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:48:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791611429883904[0;39m 生成今日电子书快照开始
2022-07-20 10:48:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791611429883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791611429883904[0;39m ==> Parameters: 
2022-07-20 10:48:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791611429883904[0;39m <==    Updates: 0
2022-07-20 10:48:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791611429883904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:48:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791632367849472[0;39m 生成今日电子书快照开始
2022-07-20 10:48:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791632367849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791632367849472[0;39m ==> Parameters: 
2022-07-20 10:48:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791632367849472[0;39m <==    Updates: 0
2022-07-20 10:48:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791632367849472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:48:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791653381312512[0;39m 生成今日电子书快照开始
2022-07-20 10:48:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791653381312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:48:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791653381312512[0;39m ==> Parameters: 
2022-07-20 10:48:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791653381312512[0;39m <==    Updates: 0
2022-07-20 10:48:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791653381312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:49:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791674327666688[0;39m 生成今日电子书快照开始
2022-07-20 10:49:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791674327666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791674327666688[0;39m ==> Parameters: 
2022-07-20 10:49:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791674327666688[0;39m <==    Updates: 0
2022-07-20 10:49:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791674327666688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:49:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791695320158208[0;39m 生成今日电子书快照开始
2022-07-20 10:49:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791695320158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791695320158208[0;39m ==> Parameters: 
2022-07-20 10:49:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791695320158208[0;39m <==    Updates: 0
2022-07-20 10:49:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791695320158208[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 10:49:05.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204791695357906944[0;39m 更新电子书下的文档数据开始
2022-07-20 10:49:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791695357906944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:49:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791695357906944[0;39m ==> Parameters: 
2022-07-20 10:49:05.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791695357906944[0;39m <==    Updates: 7
2022-07-20 10:49:05.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204791695357906944[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:49:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791716291678208[0;39m 生成今日电子书快照开始
2022-07-20 10:49:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791716291678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791716291678208[0;39m ==> Parameters: 
2022-07-20 10:49:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791716291678208[0;39m <==    Updates: 0
2022-07-20 10:49:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791716291678208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:49:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791737229643776[0;39m 生成今日电子书快照开始
2022-07-20 10:49:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791737229643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791737229643776[0;39m ==> Parameters: 
2022-07-20 10:49:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791737229643776[0;39m <==    Updates: 0
2022-07-20 10:49:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791737229643776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:49:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791758205358080[0;39m 生成今日电子书快照开始
2022-07-20 10:49:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791758205358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791758205358080[0;39m ==> Parameters: 
2022-07-20 10:49:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791758205358080[0;39m <==    Updates: 0
2022-07-20 10:49:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791758205358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:49:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791779218821120[0;39m 生成今日电子书快照开始
2022-07-20 10:49:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791779218821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791779218821120[0;39m ==> Parameters: 
2022-07-20 10:49:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791779218821120[0;39m <==    Updates: 0
2022-07-20 10:49:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791779218821120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:49:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791800144203776[0;39m 生成今日电子书快照开始
2022-07-20 10:49:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791800144203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791800144203776[0;39m ==> Parameters: 
2022-07-20 10:49:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791800144203776[0;39m <==    Updates: 0
2022-07-20 10:49:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791800144203776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:49:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204791821140889600[0;39m 更新电子书下的文档数据开始
2022-07-20 10:49:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791821140889600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:49:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791821140889600[0;39m ==> Parameters: 
2022-07-20 10:49:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791821140889600[0;39m <==    Updates: 7
2022-07-20 10:49:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204791821140889600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:49:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791821149278208[0;39m 生成今日电子书快照开始
2022-07-20 10:49:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791821149278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791821149278208[0;39m ==> Parameters: 
2022-07-20 10:49:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791821149278208[0;39m <==    Updates: 0
2022-07-20 10:49:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791821149278208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:49:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791842145964032[0;39m 生成今日电子书快照开始
2022-07-20 10:49:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791842145964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791842145964032[0;39m ==> Parameters: 
2022-07-20 10:49:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791842145964032[0;39m <==    Updates: 0
2022-07-20 10:49:40.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791842145964032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:49:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791863054569472[0;39m 生成今日电子书快照开始
2022-07-20 10:49:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791863054569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791863054569472[0;39m ==> Parameters: 
2022-07-20 10:49:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791863054569472[0;39m <==    Updates: 0
2022-07-20 10:49:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791863054569472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:49:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791884038672384[0;39m 生成今日电子书快照开始
2022-07-20 10:49:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791884038672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791884038672384[0;39m ==> Parameters: 
2022-07-20 10:49:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791884038672384[0;39m <==    Updates: 0
2022-07-20 10:49:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791884038672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:49:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791905035358208[0;39m 生成今日电子书快照开始
2022-07-20 10:49:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791905035358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:49:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791905035358208[0;39m ==> Parameters: 
2022-07-20 10:49:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791905035358208[0;39m <==    Updates: 0
2022-07-20 10:49:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791905035358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:50:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791925973323776[0;39m 生成今日电子书快照开始
2022-07-20 10:50:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791925973323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791925973323776[0;39m ==> Parameters: 
2022-07-20 10:50:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791925973323776[0;39m <==    Updates: 0
2022-07-20 10:50:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791925973323776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:50:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791947007758336[0;39m 生成今日电子书快照开始
2022-07-20 10:50:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791947007758336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791947007758336[0;39m ==> Parameters: 
2022-07-20 10:50:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791947007758336[0;39m <==    Updates: 0
2022-07-20 10:50:05.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791947007758336[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:50:05.022 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204791947024535552[0;39m 更新电子书下的文档数据开始
2022-07-20 10:50:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791947024535552[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:50:05.023 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791947024535552[0;39m ==> Parameters: 
2022-07-20 10:50:05.024 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204791947024535552[0;39m <==    Updates: 7
2022-07-20 10:50:05.024 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204791947024535552[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:50:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791967966695424[0;39m 生成今日电子书快照开始
2022-07-20 10:50:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791967966695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791967966695424[0;39m ==> Parameters: 
2022-07-20 10:50:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791967966695424[0;39m <==    Updates: 0
2022-07-20 10:50:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791967966695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:50:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204791988908855296[0;39m 生成今日电子书快照开始
2022-07-20 10:50:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791988908855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791988908855296[0;39m ==> Parameters: 
2022-07-20 10:50:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204791988908855296[0;39m <==    Updates: 0
2022-07-20 10:50:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204791988908855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:50:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792009876180992[0;39m 生成今日电子书快照开始
2022-07-20 10:50:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792009876180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792009876180992[0;39m ==> Parameters: 
2022-07-20 10:50:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792009876180992[0;39m <==    Updates: 0
2022-07-20 10:50:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792009876180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:50:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792030864478208[0;39m 生成今日电子书快照开始
2022-07-20 10:50:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792030864478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792030864478208[0;39m ==> Parameters: 
2022-07-20 10:50:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792030864478208[0;39m <==    Updates: 0
2022-07-20 10:50:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792030864478208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:50:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792051831803904[0;39m 生成今日电子书快照开始
2022-07-20 10:50:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792051831803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792051831803904[0;39m ==> Parameters: 
2022-07-20 10:50:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792051831803904[0;39m <==    Updates: 0
2022-07-20 10:50:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792051831803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:50:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204792072807518208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:50:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792072807518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:50:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792072807518208[0;39m ==> Parameters: 
2022-07-20 10:50:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792072807518208[0;39m <==    Updates: 7
2022-07-20 10:50:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204792072807518208[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:50:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792072820101120[0;39m 生成今日电子书快照开始
2022-07-20 10:50:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792072820101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792072820101120[0;39m ==> Parameters: 
2022-07-20 10:50:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792072820101120[0;39m <==    Updates: 0
2022-07-20 10:50:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792072820101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:50:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792093753872384[0;39m 生成今日电子书快照开始
2022-07-20 10:50:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792093753872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792093753872384[0;39m ==> Parameters: 
2022-07-20 10:50:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792093753872384[0;39m <==    Updates: 0
2022-07-20 10:50:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792093753872384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:50:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792114729586688[0;39m 生成今日电子书快照开始
2022-07-20 10:50:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792114729586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792114729586688[0;39m ==> Parameters: 
2022-07-20 10:50:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792114729586688[0;39m <==    Updates: 0
2022-07-20 10:50:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792114729586688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:50:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792135713689600[0;39m 生成今日电子书快照开始
2022-07-20 10:50:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792135713689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792135713689600[0;39m ==> Parameters: 
2022-07-20 10:50:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792135713689600[0;39m <==    Updates: 0
2022-07-20 10:50:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792135713689600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:50:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792156685209600[0;39m 生成今日电子书快照开始
2022-07-20 10:50:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792156685209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:50:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792156685209600[0;39m ==> Parameters: 
2022-07-20 10:50:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792156685209600[0;39m <==    Updates: 0
2022-07-20 10:50:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792156685209600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:51:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792177660923904[0;39m 生成今日电子书快照开始
2022-07-20 10:51:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792177660923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792177660923904[0;39m ==> Parameters: 
2022-07-20 10:51:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792177660923904[0;39m <==    Updates: 0
2022-07-20 10:51:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792177660923904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:51:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792198640832512[0;39m 生成今日电子书快照开始
2022-07-20 10:51:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792198640832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792198640832512[0;39m ==> Parameters: 
2022-07-20 10:51:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792198640832512[0;39m <==    Updates: 0
2022-07-20 10:51:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792198640832512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:51:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204792198653415424[0;39m 更新电子书下的文档数据开始
2022-07-20 10:51:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792198653415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:51:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792198653415424[0;39m ==> Parameters: 
2022-07-20 10:51:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792198653415424[0;39m <==    Updates: 7
2022-07-20 10:51:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204792198653415424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:51:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792219591380992[0;39m 生成今日电子书快照开始
2022-07-20 10:51:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792219591380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792219591380992[0;39m ==> Parameters: 
2022-07-20 10:51:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792219591380992[0;39m <==    Updates: 0
2022-07-20 10:51:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792219591380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:51:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792240558706688[0;39m 生成今日电子书快照开始
2022-07-20 10:51:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792240558706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792240558706688[0;39m ==> Parameters: 
2022-07-20 10:51:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792240558706688[0;39m <==    Updates: 0
2022-07-20 10:51:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792240558706688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:51:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792261530226688[0;39m 生成今日电子书快照开始
2022-07-20 10:51:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792261530226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792261530226688[0;39m ==> Parameters: 
2022-07-20 10:51:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792261530226688[0;39m <==    Updates: 0
2022-07-20 10:51:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792261530226688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:51:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792282526912512[0;39m 生成今日电子书快照开始
2022-07-20 10:51:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792282526912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792282526912512[0;39m ==> Parameters: 
2022-07-20 10:51:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792282526912512[0;39m <==    Updates: 0
2022-07-20 10:51:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792282526912512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:51:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792303456489472[0;39m 生成今日电子书快照开始
2022-07-20 10:51:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792303456489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792303456489472[0;39m ==> Parameters: 
2022-07-20 10:51:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792303456489472[0;39m <==    Updates: 0
2022-07-20 10:51:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792303456489472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:51:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792324461563904[0;39m 生成今日电子书快照开始
2022-07-20 10:51:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792324461563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792324461563904[0;39m ==> Parameters: 
2022-07-20 10:51:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792324461563904[0;39m <==    Updates: 0
2022-07-20 10:51:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792324461563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:51:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204792324469952512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:51:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792324469952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:51:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792324469952512[0;39m ==> Parameters: 
2022-07-20 10:51:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792324469952512[0;39m <==    Updates: 7
2022-07-20 10:51:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204792324469952512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:51:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792345420500992[0;39m 生成今日电子书快照开始
2022-07-20 10:51:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792345420500992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792345420500992[0;39m ==> Parameters: 
2022-07-20 10:51:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792345420500992[0;39m <==    Updates: 0
2022-07-20 10:51:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792345420500992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:51:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792366392020992[0;39m 生成今日电子书快照开始
2022-07-20 10:51:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792366392020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792366392020992[0;39m ==> Parameters: 
2022-07-20 10:51:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792366392020992[0;39m <==    Updates: 0
2022-07-20 10:51:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792366392020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:51:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792387342569472[0;39m 生成今日电子书快照开始
2022-07-20 10:51:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792387342569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792387342569472[0;39m ==> Parameters: 
2022-07-20 10:51:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792387342569472[0;39m <==    Updates: 0
2022-07-20 10:51:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792387342569472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:51:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792408339255296[0;39m 生成今日电子书快照开始
2022-07-20 10:51:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792408339255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:51:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792408339255296[0;39m ==> Parameters: 
2022-07-20 10:51:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792408339255296[0;39m <==    Updates: 0
2022-07-20 10:51:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792408339255296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:52:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792429323358208[0;39m 生成今日电子书快照开始
2022-07-20 10:52:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792429323358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792429323358208[0;39m ==> Parameters: 
2022-07-20 10:52:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792429323358208[0;39m <==    Updates: 0
2022-07-20 10:52:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792429323358208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:52:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204792450299072512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:52:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792450299072512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:52:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792450299072512[0;39m ==> Parameters: 
2022-07-20 10:52:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792450299072512[0;39m <==    Updates: 7
2022-07-20 10:52:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204792450299072512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:52:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792450307461120[0;39m 生成今日电子书快照开始
2022-07-20 10:52:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792450307461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792450307461120[0;39m ==> Parameters: 
2022-07-20 10:52:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792450307461120[0;39m <==    Updates: 0
2022-07-20 10:52:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792450307461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:52:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792471266398208[0;39m 生成今日电子书快照开始
2022-07-20 10:52:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792471266398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792471266398208[0;39m ==> Parameters: 
2022-07-20 10:52:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792471266398208[0;39m <==    Updates: 0
2022-07-20 10:52:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792471266398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:52:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792492250501120[0;39m 生成今日电子书快照开始
2022-07-20 10:52:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792492250501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792492250501120[0;39m ==> Parameters: 
2022-07-20 10:52:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792492250501120[0;39m <==    Updates: 0
2022-07-20 10:52:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792492250501120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:52:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792513184272384[0;39m 生成今日电子书快照开始
2022-07-20 10:52:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792513184272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792513184272384[0;39m ==> Parameters: 
2022-07-20 10:52:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792513184272384[0;39m <==    Updates: 0
2022-07-20 10:52:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792513184272384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:52:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792534147403776[0;39m 生成今日电子书快照开始
2022-07-20 10:52:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792534147403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792534147403776[0;39m ==> Parameters: 
2022-07-20 10:52:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792534147403776[0;39m <==    Updates: 0
2022-07-20 10:52:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792534147403776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:52:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792555127312384[0;39m 生成今日电子书快照开始
2022-07-20 10:52:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792555127312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792555127312384[0;39m ==> Parameters: 
2022-07-20 10:52:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792555127312384[0;39m <==    Updates: 0
2022-07-20 10:52:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792555127312384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:52:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792576128192512[0;39m 生成今日电子书快照开始
2022-07-20 10:52:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792576128192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792576128192512[0;39m ==> Parameters: 
2022-07-20 10:52:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792576128192512[0;39m <==    Updates: 0
2022-07-20 10:52:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792576128192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:52:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204792576140775424[0;39m 更新电子书下的文档数据开始
2022-07-20 10:52:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792576140775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:52:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792576140775424[0;39m ==> Parameters: 
2022-07-20 10:52:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792576140775424[0;39m <==    Updates: 7
2022-07-20 10:52:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204792576140775424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:52:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792597061963776[0;39m 生成今日电子书快照开始
2022-07-20 10:52:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792597061963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792597061963776[0;39m ==> Parameters: 
2022-07-20 10:52:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792597061963776[0;39m <==    Updates: 0
2022-07-20 10:52:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792597061963776[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:52:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792618054455296[0;39m 生成今日电子书快照开始
2022-07-20 10:52:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792618054455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792618054455296[0;39m ==> Parameters: 
2022-07-20 10:52:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792618054455296[0;39m <==    Updates: 0
2022-07-20 10:52:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792618054455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:52:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792639046946816[0;39m 生成今日电子书快照开始
2022-07-20 10:52:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792639046946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792639046946816[0;39m ==> Parameters: 
2022-07-20 10:52:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792639046946816[0;39m <==    Updates: 0
2022-07-20 10:52:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792639046946816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:52:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792659997495296[0;39m 生成今日电子书快照开始
2022-07-20 10:52:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792659997495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:52:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792659997495296[0;39m ==> Parameters: 
2022-07-20 10:52:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792659997495296[0;39m <==    Updates: 0
2022-07-20 10:52:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792659997495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:53:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792680973209600[0;39m 生成今日电子书快照开始
2022-07-20 10:53:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792680973209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792680973209600[0;39m ==> Parameters: 
2022-07-20 10:53:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792680973209600[0;39m <==    Updates: 0
2022-07-20 10:53:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792680973209600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:53:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204792701961506816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:53:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792701961506816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:53:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792701961506816[0;39m ==> Parameters: 
2022-07-20 10:53:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792701961506816[0;39m <==    Updates: 7
2022-07-20 10:53:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204792701961506816[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 10:53:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792701978284032[0;39m 生成今日电子书快照开始
2022-07-20 10:53:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792701978284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792701978284032[0;39m ==> Parameters: 
2022-07-20 10:53:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792701978284032[0;39m <==    Updates: 0
2022-07-20 10:53:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792701978284032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:53:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792722903666688[0;39m 生成今日电子书快照开始
2022-07-20 10:53:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792722903666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792722903666688[0;39m ==> Parameters: 
2022-07-20 10:53:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792722903666688[0;39m <==    Updates: 0
2022-07-20 10:53:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792722903666688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:53:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792743887769600[0;39m 生成今日电子书快照开始
2022-07-20 10:53:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792743887769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792743887769600[0;39m ==> Parameters: 
2022-07-20 10:53:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792743887769600[0;39m <==    Updates: 0
2022-07-20 10:53:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792743887769600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:53:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792764871872512[0;39m 生成今日电子书快照开始
2022-07-20 10:53:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792764871872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792764871872512[0;39m ==> Parameters: 
2022-07-20 10:53:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792764871872512[0;39m <==    Updates: 0
2022-07-20 10:53:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792764871872512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:53:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792785839198208[0;39m 生成今日电子书快照开始
2022-07-20 10:53:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792785839198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792785839198208[0;39m ==> Parameters: 
2022-07-20 10:53:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792785839198208[0;39m <==    Updates: 0
2022-07-20 10:53:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792785839198208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:53:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792806781358080[0;39m 生成今日电子书快照开始
2022-07-20 10:53:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792806781358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792806781358080[0;39m ==> Parameters: 
2022-07-20 10:53:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792806781358080[0;39m <==    Updates: 0
2022-07-20 10:53:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792806781358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:53:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792827786432512[0;39m 生成今日电子书快照开始
2022-07-20 10:53:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792827786432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792827786432512[0;39m ==> Parameters: 
2022-07-20 10:53:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792827786432512[0;39m <==    Updates: 0
2022-07-20 10:53:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792827786432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:53:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204792827794821120[0;39m 更新电子书下的文档数据开始
2022-07-20 10:53:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792827794821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:53:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792827794821120[0;39m ==> Parameters: 
2022-07-20 10:53:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792827794821120[0;39m <==    Updates: 7
2022-07-20 10:53:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204792827794821120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:53:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792848724398080[0;39m 生成今日电子书快照开始
2022-07-20 10:53:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792848724398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792848724398080[0;39m ==> Parameters: 
2022-07-20 10:53:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792848724398080[0;39m <==    Updates: 0
2022-07-20 10:53:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792848724398080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:53:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792869700112384[0;39m 生成今日电子书快照开始
2022-07-20 10:53:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792869700112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792869700112384[0;39m ==> Parameters: 
2022-07-20 10:53:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792869700112384[0;39m <==    Updates: 0
2022-07-20 10:53:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792869700112384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:53:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792890667438080[0;39m 生成今日电子书快照开始
2022-07-20 10:53:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792890667438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792890667438080[0;39m ==> Parameters: 
2022-07-20 10:53:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792890667438080[0;39m <==    Updates: 0
2022-07-20 10:53:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792890667438080[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 10:53:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792911668318208[0;39m 生成今日电子书快照开始
2022-07-20 10:53:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792911668318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:53:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792911668318208[0;39m ==> Parameters: 
2022-07-20 10:53:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792911668318208[0;39m <==    Updates: 0
2022-07-20 10:53:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792911668318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:54:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792932623060992[0;39m 生成今日电子书快照开始
2022-07-20 10:54:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792932623060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792932623060992[0;39m ==> Parameters: 
2022-07-20 10:54:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792932623060992[0;39m <==    Updates: 0
2022-07-20 10:54:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792932623060992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:54:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792953607163904[0;39m 生成今日电子书快照开始
2022-07-20 10:54:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792953607163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792953607163904[0;39m ==> Parameters: 
2022-07-20 10:54:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792953607163904[0;39m <==    Updates: 0
2022-07-20 10:54:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792953607163904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:54:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204792953619746816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:54:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792953619746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:54:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792953619746816[0;39m ==> Parameters: 
2022-07-20 10:54:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204792953619746816[0;39m <==    Updates: 7
2022-07-20 10:54:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204792953619746816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:54:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792974566100992[0;39m 生成今日电子书快照开始
2022-07-20 10:54:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792974566100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792974566100992[0;39m ==> Parameters: 
2022-07-20 10:54:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792974566100992[0;39m <==    Updates: 0
2022-07-20 10:54:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792974566100992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:54:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204792995554398208[0;39m 生成今日电子书快照开始
2022-07-20 10:54:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792995554398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792995554398208[0;39m ==> Parameters: 
2022-07-20 10:54:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204792995554398208[0;39m <==    Updates: 0
2022-07-20 10:54:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204792995554398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:54:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793016509140992[0;39m 生成今日电子书快照开始
2022-07-20 10:54:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793016509140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793016509140992[0;39m ==> Parameters: 
2022-07-20 10:54:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793016509140992[0;39m <==    Updates: 0
2022-07-20 10:54:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793016509140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:54:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793037484855296[0;39m 生成今日电子书快照开始
2022-07-20 10:54:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793037484855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793037484855296[0;39m ==> Parameters: 
2022-07-20 10:54:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793037484855296[0;39m <==    Updates: 0
2022-07-20 10:54:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793037484855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:54:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793058473152512[0;39m 生成今日电子书快照开始
2022-07-20 10:54:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793058473152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793058473152512[0;39m ==> Parameters: 
2022-07-20 10:54:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793058473152512[0;39m <==    Updates: 0
2022-07-20 10:54:30.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793058473152512[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 10:54:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204793079415312384[0;39m 更新电子书下的文档数据开始
2022-07-20 10:54:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793079415312384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:54:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793079415312384[0;39m ==> Parameters: 
2022-07-20 10:54:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793079415312384[0;39m <==    Updates: 7
2022-07-20 10:54:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204793079415312384[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 10:54:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793079427895296[0;39m 生成今日电子书快照开始
2022-07-20 10:54:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793079427895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793079427895296[0;39m ==> Parameters: 
2022-07-20 10:54:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793079427895296[0;39m <==    Updates: 0
2022-07-20 10:54:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793079427895296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:54:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793100411998208[0;39m 生成今日电子书快照开始
2022-07-20 10:54:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793100411998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793100411998208[0;39m ==> Parameters: 
2022-07-20 10:54:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793100411998208[0;39m <==    Updates: 0
2022-07-20 10:54:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793100411998208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:54:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793121408684032[0;39m 生成今日电子书快照开始
2022-07-20 10:54:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793121408684032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:45.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793121408684032[0;39m ==> Parameters: 
2022-07-20 10:54:45.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793121408684032[0;39m <==    Updates: 0
2022-07-20 10:54:45.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793121408684032[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:54:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793142346649600[0;39m 生成今日电子书快照开始
2022-07-20 10:54:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793142346649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793142346649600[0;39m ==> Parameters: 
2022-07-20 10:54:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793142346649600[0;39m <==    Updates: 0
2022-07-20 10:54:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793142346649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:54:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793163318169600[0;39m 生成今日电子书快照开始
2022-07-20 10:54:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793163318169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:54:55.104 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793163318169600[0;39m ==> Parameters: 
2022-07-20 10:54:55.105 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793163318169600[0;39m <==    Updates: 0
2022-07-20 10:54:55.105 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793163318169600[0;39m 生成今日电子书快照结束，耗时：97 毫秒
2022-07-20 10:55:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793184272912384[0;39m 生成今日电子书快照开始
2022-07-20 10:55:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793184272912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793184272912384[0;39m ==> Parameters: 
2022-07-20 10:55:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793184272912384[0;39m <==    Updates: 0
2022-07-20 10:55:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793184272912384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:55:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793205286375424[0;39m 生成今日电子书快照开始
2022-07-20 10:55:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793205286375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793205286375424[0;39m ==> Parameters: 
2022-07-20 10:55:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793205286375424[0;39m <==    Updates: 0
2022-07-20 10:55:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793205286375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:55:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204793205294764032[0;39m 更新电子书下的文档数据开始
2022-07-20 10:55:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793205294764032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:55:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793205294764032[0;39m ==> Parameters: 
2022-07-20 10:55:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793205294764032[0;39m <==    Updates: 7
2022-07-20 10:55:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204793205294764032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:55:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793226207563776[0;39m 生成今日电子书快照开始
2022-07-20 10:55:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793226207563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793226207563776[0;39m ==> Parameters: 
2022-07-20 10:55:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793226207563776[0;39m <==    Updates: 0
2022-07-20 10:55:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793226207563776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:55:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793247212638208[0;39m 生成今日电子书快照开始
2022-07-20 10:55:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793247212638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793247212638208[0;39m ==> Parameters: 
2022-07-20 10:55:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793247212638208[0;39m <==    Updates: 0
2022-07-20 10:55:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793247212638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:55:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793268205129728[0;39m 生成今日电子书快照开始
2022-07-20 10:55:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793268205129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793268205129728[0;39m ==> Parameters: 
2022-07-20 10:55:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793268205129728[0;39m <==    Updates: 0
2022-07-20 10:55:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793268205129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:55:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793289143095296[0;39m 生成今日电子书快照开始
2022-07-20 10:55:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793289143095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793289143095296[0;39m ==> Parameters: 
2022-07-20 10:55:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793289143095296[0;39m <==    Updates: 0
2022-07-20 10:55:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793289143095296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:55:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793310139781120[0;39m 生成今日电子书快照开始
2022-07-20 10:55:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793310139781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793310139781120[0;39m ==> Parameters: 
2022-07-20 10:55:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793310139781120[0;39m <==    Updates: 0
2022-07-20 10:55:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793310139781120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:55:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793331069358080[0;39m 生成今日电子书快照开始
2022-07-20 10:55:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793331069358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793331069358080[0;39m ==> Parameters: 
2022-07-20 10:55:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793331069358080[0;39m <==    Updates: 0
2022-07-20 10:55:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793331069358080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:55:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204793331081940992[0;39m 更新电子书下的文档数据开始
2022-07-20 10:55:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793331081940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:55:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793331081940992[0;39m ==> Parameters: 
2022-07-20 10:55:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793331081940992[0;39m <==    Updates: 7
2022-07-20 10:55:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204793331081940992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:55:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793352036683776[0;39m 生成今日电子书快照开始
2022-07-20 10:55:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793352036683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793352036683776[0;39m ==> Parameters: 
2022-07-20 10:55:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793352036683776[0;39m <==    Updates: 0
2022-07-20 10:55:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793352036683776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:55:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793373012398080[0;39m 生成今日电子书快照开始
2022-07-20 10:55:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793373012398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793373012398080[0;39m ==> Parameters: 
2022-07-20 10:55:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793373012398080[0;39m <==    Updates: 0
2022-07-20 10:55:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793373012398080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:55:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793394009083904[0;39m 生成今日电子书快照开始
2022-07-20 10:55:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793394009083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793394009083904[0;39m ==> Parameters: 
2022-07-20 10:55:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793394009083904[0;39m <==    Updates: 0
2022-07-20 10:55:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793394009083904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:55:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793414984798208[0;39m 生成今日电子书快照开始
2022-07-20 10:55:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793414984798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:55:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793414984798208[0;39m ==> Parameters: 
2022-07-20 10:55:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793414984798208[0;39m <==    Updates: 0
2022-07-20 10:55:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793414984798208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:56:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793435947929600[0;39m 生成今日电子书快照开始
2022-07-20 10:56:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793435947929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793435947929600[0;39m ==> Parameters: 
2022-07-20 10:56:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793435947929600[0;39m <==    Updates: 0
2022-07-20 10:56:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793435947929600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:56:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793456906866688[0;39m 生成今日电子书快照开始
2022-07-20 10:56:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793456906866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793456906866688[0;39m ==> Parameters: 
2022-07-20 10:56:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793456906866688[0;39m <==    Updates: 0
2022-07-20 10:56:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793456906866688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 10:56:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204793456911060992[0;39m 更新电子书下的文档数据开始
2022-07-20 10:56:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793456911060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:56:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793456911060992[0;39m ==> Parameters: 
2022-07-20 10:56:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793456911060992[0;39m <==    Updates: 7
2022-07-20 10:56:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204793456911060992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:56:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793477878386688[0;39m 生成今日电子书快照开始
2022-07-20 10:56:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793477878386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793477878386688[0;39m ==> Parameters: 
2022-07-20 10:56:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793477878386688[0;39m <==    Updates: 0
2022-07-20 10:56:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793477878386688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:56:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793498887655424[0;39m 生成今日电子书快照开始
2022-07-20 10:56:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793498887655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793498887655424[0;39m ==> Parameters: 
2022-07-20 10:56:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793498887655424[0;39m <==    Updates: 0
2022-07-20 10:56:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793498887655424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:56:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793519834009600[0;39m 生成今日电子书快照开始
2022-07-20 10:56:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793519834009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793519834009600[0;39m ==> Parameters: 
2022-07-20 10:56:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793519834009600[0;39m <==    Updates: 0
2022-07-20 10:56:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793519834009600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:56:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793540809723904[0;39m 生成今日电子书快照开始
2022-07-20 10:56:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793540809723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793540809723904[0;39m ==> Parameters: 
2022-07-20 10:56:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793540809723904[0;39m <==    Updates: 0
2022-07-20 10:56:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793540809723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:56:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793561772855296[0;39m 生成今日电子书快照开始
2022-07-20 10:56:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793561772855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793561772855296[0;39m ==> Parameters: 
2022-07-20 10:56:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793561772855296[0;39m <==    Updates: 0
2022-07-20 10:56:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793561772855296[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:56:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793582735986688[0;39m 生成今日电子书快照开始
2022-07-20 10:56:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793582735986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793582735986688[0;39m ==> Parameters: 
2022-07-20 10:56:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793582735986688[0;39m <==    Updates: 0
2022-07-20 10:56:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793582735986688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:56:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204793582761152512[0;39m 更新电子书下的文档数据开始
2022-07-20 10:56:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793582761152512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:56:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793582761152512[0;39m ==> Parameters: 
2022-07-20 10:56:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793582761152512[0;39m <==    Updates: 7
2022-07-20 10:56:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204793582761152512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:56:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793603745255424[0;39m 生成今日电子书快照开始
2022-07-20 10:56:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793603745255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793603745255424[0;39m ==> Parameters: 
2022-07-20 10:56:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793603745255424[0;39m <==    Updates: 0
2022-07-20 10:56:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793603745255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:56:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793624687415296[0;39m 生成今日电子书快照开始
2022-07-20 10:56:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793624687415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793624687415296[0;39m ==> Parameters: 
2022-07-20 10:56:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793624687415296[0;39m <==    Updates: 0
2022-07-20 10:56:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793624687415296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:56:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793645688295424[0;39m 生成今日电子书快照开始
2022-07-20 10:56:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793645688295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793645688295424[0;39m ==> Parameters: 
2022-07-20 10:56:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793645688295424[0;39m <==    Updates: 0
2022-07-20 10:56:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793645688295424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:56:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793666655621120[0;39m 生成今日电子书快照开始
2022-07-20 10:56:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793666655621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:56:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793666655621120[0;39m ==> Parameters: 
2022-07-20 10:56:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793666655621120[0;39m <==    Updates: 0
2022-07-20 10:56:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793666655621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:57:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793687614558208[0;39m 生成今日电子书快照开始
2022-07-20 10:57:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793687614558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793687614558208[0;39m ==> Parameters: 
2022-07-20 10:57:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793687614558208[0;39m <==    Updates: 0
2022-07-20 10:57:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793687614558208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:57:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793708569300992[0;39m 生成今日电子书快照开始
2022-07-20 10:57:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793708569300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793708569300992[0;39m ==> Parameters: 
2022-07-20 10:57:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793708569300992[0;39m <==    Updates: 0
2022-07-20 10:57:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793708569300992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:57:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204793708581883904[0;39m 更新电子书下的文档数据开始
2022-07-20 10:57:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793708581883904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:57:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793708581883904[0;39m ==> Parameters: 
2022-07-20 10:57:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793708581883904[0;39m <==    Updates: 7
2022-07-20 10:57:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204793708581883904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:57:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793729549209600[0;39m 生成今日电子书快照开始
2022-07-20 10:57:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793729549209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793729549209600[0;39m ==> Parameters: 
2022-07-20 10:57:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793729549209600[0;39m <==    Updates: 0
2022-07-20 10:57:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793729549209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:57:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793750524923904[0;39m 生成今日电子书快照开始
2022-07-20 10:57:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793750524923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793750524923904[0;39m ==> Parameters: 
2022-07-20 10:57:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793750524923904[0;39m <==    Updates: 0
2022-07-20 10:57:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793750524923904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:57:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793771479666688[0;39m 生成今日电子书快照开始
2022-07-20 10:57:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793771479666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793771479666688[0;39m ==> Parameters: 
2022-07-20 10:57:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793771479666688[0;39m <==    Updates: 0
2022-07-20 10:57:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793771479666688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:57:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793792455380992[0;39m 生成今日电子书快照开始
2022-07-20 10:57:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793792455380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793792455380992[0;39m ==> Parameters: 
2022-07-20 10:57:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793792455380992[0;39m <==    Updates: 0
2022-07-20 10:57:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793792455380992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 10:57:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793813426900992[0;39m 生成今日电子书快照开始
2022-07-20 10:57:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793813426900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793813426900992[0;39m ==> Parameters: 
2022-07-20 10:57:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793813426900992[0;39m <==    Updates: 0
2022-07-20 10:57:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793813426900992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:57:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793834411003904[0;39m 生成今日电子书快照开始
2022-07-20 10:57:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793834411003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793834411003904[0;39m ==> Parameters: 
2022-07-20 10:57:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793834411003904[0;39m <==    Updates: 0
2022-07-20 10:57:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793834411003904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:57:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204793834423586816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:57:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793834423586816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:57:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793834423586816[0;39m ==> Parameters: 
2022-07-20 10:57:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793834423586816[0;39m <==    Updates: 7
2022-07-20 10:57:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204793834423586816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:57:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793855416078336[0;39m 生成今日电子书快照开始
2022-07-20 10:57:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793855416078336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:40.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793855416078336[0;39m ==> Parameters: 
2022-07-20 10:57:40.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793855416078336[0;39m <==    Updates: 0
2022-07-20 10:57:40.030 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793855416078336[0;39m 生成今日电子书快照结束，耗时：12 毫秒
2022-07-20 10:57:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793876337266688[0;39m 生成今日电子书快照开始
2022-07-20 10:57:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793876337266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793876337266688[0;39m ==> Parameters: 
2022-07-20 10:57:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793876337266688[0;39m <==    Updates: 0
2022-07-20 10:57:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793876337266688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:57:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793897329758208[0;39m 生成今日电子书快照开始
2022-07-20 10:57:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793897329758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793897329758208[0;39m ==> Parameters: 
2022-07-20 10:57:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793897329758208[0;39m <==    Updates: 0
2022-07-20 10:57:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793897329758208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:57:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793918271918080[0;39m 生成今日电子书快照开始
2022-07-20 10:57:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793918271918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:57:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793918271918080[0;39m ==> Parameters: 
2022-07-20 10:57:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793918271918080[0;39m <==    Updates: 0
2022-07-20 10:57:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793918271918080[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:58:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793939285381120[0;39m 生成今日电子书快照开始
2022-07-20 10:58:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793939285381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793939285381120[0;39m ==> Parameters: 
2022-07-20 10:58:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793939285381120[0;39m <==    Updates: 0
2022-07-20 10:58:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793939285381120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:58:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204793960214958080[0;39m 更新电子书下的文档数据开始
2022-07-20 10:58:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793960214958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:58:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793960214958080[0;39m ==> Parameters: 
2022-07-20 10:58:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204793960214958080[0;39m <==    Updates: 7
2022-07-20 10:58:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204793960214958080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:58:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793960223346688[0;39m 生成今日电子书快照开始
2022-07-20 10:58:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793960223346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793960223346688[0;39m ==> Parameters: 
2022-07-20 10:58:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793960223346688[0;39m <==    Updates: 0
2022-07-20 10:58:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793960223346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:58:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204793981211643904[0;39m 生成今日电子书快照开始
2022-07-20 10:58:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793981211643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793981211643904[0;39m ==> Parameters: 
2022-07-20 10:58:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204793981211643904[0;39m <==    Updates: 0
2022-07-20 10:58:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204793981211643904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:58:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794002199941120[0;39m 生成今日电子书快照开始
2022-07-20 10:58:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794002199941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794002199941120[0;39m ==> Parameters: 
2022-07-20 10:58:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794002199941120[0;39m <==    Updates: 0
2022-07-20 10:58:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794002199941120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:58:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794023142100992[0;39m 生成今日电子书快照开始
2022-07-20 10:58:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794023142100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794023142100992[0;39m ==> Parameters: 
2022-07-20 10:58:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794023142100992[0;39m <==    Updates: 0
2022-07-20 10:58:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794023142100992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:58:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794044126203904[0;39m 生成今日电子书快照开始
2022-07-20 10:58:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794044126203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794044126203904[0;39m ==> Parameters: 
2022-07-20 10:58:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794044126203904[0;39m <==    Updates: 0
2022-07-20 10:58:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794044126203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:58:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794065097723904[0;39m 生成今日电子书快照开始
2022-07-20 10:58:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794065097723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794065097723904[0;39m ==> Parameters: 
2022-07-20 10:58:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794065097723904[0;39m <==    Updates: 0
2022-07-20 10:58:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794065097723904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:58:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794086077632512[0;39m 生成今日电子书快照开始
2022-07-20 10:58:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794086077632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794086077632512[0;39m ==> Parameters: 
2022-07-20 10:58:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794086077632512[0;39m <==    Updates: 0
2022-07-20 10:58:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794086077632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:58:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204794086086021120[0;39m 更新电子书下的文档数据开始
2022-07-20 10:58:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794086086021120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:58:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794086086021120[0;39m ==> Parameters: 
2022-07-20 10:58:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794086086021120[0;39m <==    Updates: 7
2022-07-20 10:58:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204794086086021120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 10:58:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794107019792384[0;39m 生成今日电子书快照开始
2022-07-20 10:58:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794107019792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794107019792384[0;39m ==> Parameters: 
2022-07-20 10:58:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794107019792384[0;39m <==    Updates: 0
2022-07-20 10:58:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794107019792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:58:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794128037449728[0;39m 生成今日电子书快照开始
2022-07-20 10:58:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794128037449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794128037449728[0;39m ==> Parameters: 
2022-07-20 10:58:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794128037449728[0;39m <==    Updates: 0
2022-07-20 10:58:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794128037449728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:58:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794148962832384[0;39m 生成今日电子书快照开始
2022-07-20 10:58:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794148962832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794148962832384[0;39m ==> Parameters: 
2022-07-20 10:58:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794148962832384[0;39m <==    Updates: 0
2022-07-20 10:58:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794148962832384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:58:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794169976295424[0;39m 生成今日电子书快照开始
2022-07-20 10:58:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794169976295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:58:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794169976295424[0;39m ==> Parameters: 
2022-07-20 10:58:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794169976295424[0;39m <==    Updates: 0
2022-07-20 10:58:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794169976295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:59:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794190901678080[0;39m 生成今日电子书快照开始
2022-07-20 10:59:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794190901678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794190901678080[0;39m ==> Parameters: 
2022-07-20 10:59:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794190901678080[0;39m <==    Updates: 0
2022-07-20 10:59:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794190901678080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:59:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204794211902558208[0;39m 更新电子书下的文档数据开始
2022-07-20 10:59:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794211902558208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:59:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794211902558208[0;39m ==> Parameters: 
2022-07-20 10:59:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794211902558208[0;39m <==    Updates: 7
2022-07-20 10:59:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204794211902558208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:59:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794211910946816[0;39m 生成今日电子书快照开始
2022-07-20 10:59:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794211910946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794211910946816[0;39m ==> Parameters: 
2022-07-20 10:59:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794211910946816[0;39m <==    Updates: 0
2022-07-20 10:59:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794211910946816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:59:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794232861495296[0;39m 生成今日电子书快照开始
2022-07-20 10:59:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794232861495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794232861495296[0;39m ==> Parameters: 
2022-07-20 10:59:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794232861495296[0;39m <==    Updates: 0
2022-07-20 10:59:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794232861495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:59:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794253828820992[0;39m 生成今日电子书快照开始
2022-07-20 10:59:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794253828820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794253828820992[0;39m ==> Parameters: 
2022-07-20 10:59:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794253828820992[0;39m <==    Updates: 0
2022-07-20 10:59:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794253828820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:59:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794274787758080[0;39m 生成今日电子书快照开始
2022-07-20 10:59:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794274787758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794274787758080[0;39m ==> Parameters: 
2022-07-20 10:59:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794274787758080[0;39m <==    Updates: 0
2022-07-20 10:59:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794274787758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:59:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794295759278080[0;39m 生成今日电子书快照开始
2022-07-20 10:59:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794295759278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794295759278080[0;39m ==> Parameters: 
2022-07-20 10:59:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794295759278080[0;39m <==    Updates: 0
2022-07-20 10:59:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794295759278080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:59:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794316747575296[0;39m 生成今日电子书快照开始
2022-07-20 10:59:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794316747575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794316747575296[0;39m ==> Parameters: 
2022-07-20 10:59:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794316747575296[0;39m <==    Updates: 0
2022-07-20 10:59:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794316747575296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 10:59:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794337719095296[0;39m 生成今日电子书快照开始
2022-07-20 10:59:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794337719095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794337719095296[0;39m ==> Parameters: 
2022-07-20 10:59:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794337719095296[0;39m <==    Updates: 0
2022-07-20 10:59:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794337719095296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 10:59:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204794337740066816[0;39m 更新电子书下的文档数据开始
2022-07-20 10:59:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794337740066816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 10:59:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794337740066816[0;39m ==> Parameters: 
2022-07-20 10:59:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794337740066816[0;39m <==    Updates: 7
2022-07-20 10:59:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204794337740066816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 10:59:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794358703198208[0;39m 生成今日电子书快照开始
2022-07-20 10:59:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794358703198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794358703198208[0;39m ==> Parameters: 
2022-07-20 10:59:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794358703198208[0;39m <==    Updates: 0
2022-07-20 10:59:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794358703198208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:59:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794379657940992[0;39m 生成今日电子书快照开始
2022-07-20 10:59:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794379657940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794379657940992[0;39m ==> Parameters: 
2022-07-20 10:59:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794379657940992[0;39m <==    Updates: 0
2022-07-20 10:59:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794379657940992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 10:59:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794400629460992[0;39m 生成今日电子书快照开始
2022-07-20 10:59:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794400629460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794400629460992[0;39m ==> Parameters: 
2022-07-20 10:59:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794400629460992[0;39m <==    Updates: 0
2022-07-20 10:59:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794400629460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 10:59:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794421596786688[0;39m 生成今日电子书快照开始
2022-07-20 10:59:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794421596786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 10:59:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794421596786688[0;39m ==> Parameters: 
2022-07-20 10:59:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794421596786688[0;39m <==    Updates: 0
2022-07-20 10:59:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794421596786688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:00:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794442601861120[0;39m 生成今日电子书快照开始
2022-07-20 11:00:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794442601861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794442601861120[0;39m ==> Parameters: 
2022-07-20 11:00:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794442601861120[0;39m <==    Updates: 0
2022-07-20 11:00:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794442601861120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:00:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204794463527243776[0;39m 更新电子书下的文档数据开始
2022-07-20 11:00:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794463527243776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:00:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794463527243776[0;39m ==> Parameters: 
2022-07-20 11:00:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794463527243776[0;39m <==    Updates: 7
2022-07-20 11:00:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204794463527243776[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 11:00:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794463544020992[0;39m 生成今日电子书快照开始
2022-07-20 11:00:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794463544020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794463544020992[0;39m ==> Parameters: 
2022-07-20 11:00:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794463544020992[0;39m <==    Updates: 0
2022-07-20 11:00:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794463544020992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:00:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794484540706816[0;39m 生成今日电子书快照开始
2022-07-20 11:00:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794484540706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794484540706816[0;39m ==> Parameters: 
2022-07-20 11:00:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794484540706816[0;39m <==    Updates: 0
2022-07-20 11:00:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794484540706816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:00:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794505520615424[0;39m 生成今日电子书快照开始
2022-07-20 11:00:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794505520615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794505520615424[0;39m ==> Parameters: 
2022-07-20 11:00:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794505520615424[0;39m <==    Updates: 0
2022-07-20 11:00:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794505520615424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:00:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794526450192384[0;39m 生成今日电子书快照开始
2022-07-20 11:00:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794526450192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794526450192384[0;39m ==> Parameters: 
2022-07-20 11:00:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794526450192384[0;39m <==    Updates: 0
2022-07-20 11:00:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794526450192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:00:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794547455266816[0;39m 生成今日电子书快照开始
2022-07-20 11:00:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794547455266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794547455266816[0;39m ==> Parameters: 
2022-07-20 11:00:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794547455266816[0;39m <==    Updates: 0
2022-07-20 11:00:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794547455266816[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:00:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794568439369728[0;39m 生成今日电子书快照开始
2022-07-20 11:00:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794568439369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794568439369728[0;39m ==> Parameters: 
2022-07-20 11:00:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794568439369728[0;39m <==    Updates: 0
2022-07-20 11:00:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794568439369728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:00:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204794589394112512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:00:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794589394112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:00:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794589394112512[0;39m ==> Parameters: 
2022-07-20 11:00:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794589394112512[0;39m <==    Updates: 7
2022-07-20 11:00:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204794589394112512[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 11:00:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794589406695424[0;39m 生成今日电子书快照开始
2022-07-20 11:00:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794589406695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794589406695424[0;39m ==> Parameters: 
2022-07-20 11:00:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794589406695424[0;39m <==    Updates: 0
2022-07-20 11:00:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794589406695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:00:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794610319495168[0;39m 生成今日电子书快照开始
2022-07-20 11:00:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794610319495168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794610319495168[0;39m ==> Parameters: 
2022-07-20 11:00:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794610319495168[0;39m <==    Updates: 0
2022-07-20 11:00:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794610319495168[0;39m 生成今日电子书快照结束，耗时：15 毫秒
2022-07-20 11:00:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794631295209472[0;39m 生成今日电子书快照开始
2022-07-20 11:00:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794631295209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794631295209472[0;39m ==> Parameters: 
2022-07-20 11:00:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794631295209472[0;39m <==    Updates: 0
2022-07-20 11:00:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794631295209472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:00:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794652266729472[0;39m 生成今日电子书快照开始
2022-07-20 11:00:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794652266729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794652266729472[0;39m ==> Parameters: 
2022-07-20 11:00:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794652266729472[0;39m <==    Updates: 0
2022-07-20 11:00:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794652266729472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:00:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794673288581120[0;39m 生成今日电子书快照开始
2022-07-20 11:00:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794673288581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:00:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794673288581120[0;39m ==> Parameters: 
2022-07-20 11:00:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794673288581120[0;39m <==    Updates: 0
2022-07-20 11:00:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794673288581120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:01:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794694247518208[0;39m 生成今日电子书快照开始
2022-07-20 11:01:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794694247518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794694247518208[0;39m ==> Parameters: 
2022-07-20 11:01:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794694247518208[0;39m <==    Updates: 0
2022-07-20 11:01:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794694247518208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:01:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204794715219038208[0;39m 更新电子书下的文档数据开始
2022-07-20 11:01:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794715219038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:01:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794715219038208[0;39m ==> Parameters: 
2022-07-20 11:01:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794715219038208[0;39m <==    Updates: 7
2022-07-20 11:01:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204794715219038208[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 11:01:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794715240009728[0;39m 生成今日电子书快照开始
2022-07-20 11:01:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794715240009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794715240009728[0;39m ==> Parameters: 
2022-07-20 11:01:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794715240009728[0;39m <==    Updates: 0
2022-07-20 11:01:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794715240009728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:01:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794736182169600[0;39m 生成今日电子书快照开始
2022-07-20 11:01:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794736182169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794736182169600[0;39m ==> Parameters: 
2022-07-20 11:01:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794736182169600[0;39m <==    Updates: 0
2022-07-20 11:01:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794736182169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:01:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794757191438336[0;39m 生成今日电子书快照开始
2022-07-20 11:01:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794757191438336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794757191438336[0;39m ==> Parameters: 
2022-07-20 11:01:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794757191438336[0;39m <==    Updates: 0
2022-07-20 11:01:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794757191438336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:01:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794778112626688[0;39m 生成今日电子书快照开始
2022-07-20 11:01:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794778112626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794778112626688[0;39m ==> Parameters: 
2022-07-20 11:01:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794778112626688[0;39m <==    Updates: 0
2022-07-20 11:01:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794778112626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:01:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794799126089728[0;39m 生成今日电子书快照开始
2022-07-20 11:01:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794799126089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794799126089728[0;39m ==> Parameters: 
2022-07-20 11:01:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794799126089728[0;39m <==    Updates: 0
2022-07-20 11:01:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794799126089728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:01:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794820043083776[0;39m 生成今日电子书快照开始
2022-07-20 11:01:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794820043083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794820043083776[0;39m ==> Parameters: 
2022-07-20 11:01:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794820043083776[0;39m <==    Updates: 0
2022-07-20 11:01:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794820043083776[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:01:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204794841048158208[0;39m 更新电子书下的文档数据开始
2022-07-20 11:01:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794841048158208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:01:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794841048158208[0;39m ==> Parameters: 
2022-07-20 11:01:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794841048158208[0;39m <==    Updates: 7
2022-07-20 11:01:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204794841048158208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:01:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794841056546816[0;39m 生成今日电子书快照开始
2022-07-20 11:01:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794841056546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794841056546816[0;39m ==> Parameters: 
2022-07-20 11:01:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794841056546816[0;39m <==    Updates: 0
2022-07-20 11:01:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794841056546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:01:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794861994512384[0;39m 生成今日电子书快照开始
2022-07-20 11:01:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794861994512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794861994512384[0;39m ==> Parameters: 
2022-07-20 11:01:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794861994512384[0;39m <==    Updates: 0
2022-07-20 11:01:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794861994512384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:01:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794883012169728[0;39m 生成今日电子书快照开始
2022-07-20 11:01:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794883012169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794883012169728[0;39m ==> Parameters: 
2022-07-20 11:01:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794883012169728[0;39m <==    Updates: 0
2022-07-20 11:01:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794883012169728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:01:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794903962718208[0;39m 生成今日电子书快照开始
2022-07-20 11:01:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794903962718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794903962718208[0;39m ==> Parameters: 
2022-07-20 11:01:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794903962718208[0;39m <==    Updates: 0
2022-07-20 11:01:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794903962718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:01:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794924900683776[0;39m 生成今日电子书快照开始
2022-07-20 11:01:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794924900683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:01:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794924900683776[0;39m ==> Parameters: 
2022-07-20 11:01:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794924900683776[0;39m <==    Updates: 0
2022-07-20 11:01:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794924900683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:02:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794945868009472[0;39m 生成今日电子书快照开始
2022-07-20 11:02:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794945868009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794945868009472[0;39m ==> Parameters: 
2022-07-20 11:02:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794945868009472[0;39m <==    Updates: 0
2022-07-20 11:02:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794945868009472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:02:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204794966864695296[0;39m 更新电子书下的文档数据开始
2022-07-20 11:02:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794966864695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:02:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794966864695296[0;39m ==> Parameters: 
2022-07-20 11:02:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204794966864695296[0;39m <==    Updates: 7
2022-07-20 11:02:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204794966864695296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:02:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794966868889600[0;39m 生成今日电子书快照开始
2022-07-20 11:02:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794966868889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794966868889600[0;39m ==> Parameters: 
2022-07-20 11:02:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794966868889600[0;39m <==    Updates: 0
2022-07-20 11:02:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794966868889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:02:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204794987840409600[0;39m 生成今日电子书快照开始
2022-07-20 11:02:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794987840409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794987840409600[0;39m ==> Parameters: 
2022-07-20 11:02:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204794987840409600[0;39m <==    Updates: 0
2022-07-20 11:02:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204794987840409600[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:02:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795008782569472[0;39m 生成今日电子书快照开始
2022-07-20 11:02:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795008782569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795008782569472[0;39m ==> Parameters: 
2022-07-20 11:02:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795008782569472[0;39m <==    Updates: 0
2022-07-20 11:02:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795008782569472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:02:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795029758283776[0;39m 生成今日电子书快照开始
2022-07-20 11:02:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795029758283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795029758283776[0;39m ==> Parameters: 
2022-07-20 11:02:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795029758283776[0;39m <==    Updates: 0
2022-07-20 11:02:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795029758283776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:02:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795050759163904[0;39m 生成今日电子书快照开始
2022-07-20 11:02:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795050759163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795050759163904[0;39m ==> Parameters: 
2022-07-20 11:02:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795050759163904[0;39m <==    Updates: 0
2022-07-20 11:02:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795050759163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:02:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795071709712384[0;39m 生成今日电子书快照开始
2022-07-20 11:02:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795071709712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795071709712384[0;39m ==> Parameters: 
2022-07-20 11:02:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795071709712384[0;39m <==    Updates: 0
2022-07-20 11:02:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795071709712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:02:30.435 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-07-20 11:02:30.435 INFO  org.springframework.web.servlet.DispatcherServlet :525 
                [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2022-07-20 11:02:30.438 INFO  org.springframework.web.servlet.DispatcherServlet :547 
                [32m                  [0;39m Completed initialization in 3 ms
2022-07-20 11:02:30.469 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:02:30.496 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m                  [0;39m ------------- LoginInterceptor 结束 耗时：26 ms -------------
2022-07-20 11:02:30.507 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m                  [0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:02:30.508 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m                  [0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 11:02:30.508 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m                  [0;39m 登录校验开始，token：204772700709851136
2022-07-20 11:02:31.642 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m                  [0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 11:02:31.891 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795079620169728[0;39m ------------- 开始 -------------
2022-07-20 11:02:31.892 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795079620169728[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-20 11:02:31.892 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795079620169728[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-20 11:02:31.892 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795079620169728[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:31.902 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795079620169728[0;39m 请求参数: [{"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><h3><font face=\"楷体\"><b id=\"cicpo\">自定义启动端开始的文案网址：</b></font>patorjk.com</h3><pre type=\"Java\"><code><xmp><font size=\"5\">2. @RestController和@Controller区别：</font></xmp></code></pre><xmp><span style=\"font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(241, 241, 241); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em;\">@GetMapping(\"/hello\")</span></xmp><pre type=\"Java\"><code><xmp>    public String hello(){\n        return \"hello\";\n    }</xmp></code></pre><xmp><span style=\"font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><font face=\"Times New Roman\" size=\"4\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</font></xmp><p>&nbsp; &nbsp; <font size=\"4\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</font><br></p><blockquote><p><font size=\"4\">3.&nbsp;</font><span style=\"font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;\"><font size=\"4\">/*</font></span></p><pre type=\"Java\"><code><xmp><font size=\"4\">* Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n* 正常情况：user？id=1\n* Restful：/user/1\n* */</font></xmp></code></pre></blockquote><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"2\">&nbsp;添加依赖：</font></li></ul><pre type=\"Java\"><code><xmp><font size=\"3\" face=\"Times New Roman\"> &lt;!--热部署--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;/dependency&gt;</font></xmp></code></pre><ul><li>勾选Build project automatically</li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><ul><li>按两次shift键</li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"3\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li><li><br></li></ul>","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":7,"voteCount":1}]
2022-07-20 11:02:31.919 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204795079620169728[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-20 11:02:31.920 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204795079620169728[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 7(Integer), 1(Integer), 202715069841281024(Long)
2022-07-20 11:02:31.939 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204795079620169728[0;39m <==    Updates: 1
2022-07-20 11:02:31.940 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204795079620169728[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-20 11:02:31.940 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204795079620169728[0;39m ==> Parameters: <blockquote><h2 id="343h7">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><h3><font face="楷体"><b id="cicpo">自定义启动端开始的文案网址：</b></font>patorjk.com</h3><pre type="Java"><code><xmp><font size="5">2. @RestController和@Controller区别：</font></xmp></code></pre><xmp><span style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="background-color: rgb(241, 241, 241); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em;">@GetMapping("/hello")</span></xmp><pre type="Java"><code><xmp>    public String hello(){
        return "hello";
    }</xmp></code></pre><xmp><span style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;</span><font face="Times New Roman" size="4">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</font></xmp><p>&nbsp; &nbsp; <font size="4">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</font><br></p><blockquote><p><font size="4">3.&nbsp;</font><span style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><font size="4">/*</font></span></p><pre type="Java"><code><xmp><font size="4">* Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）
* 正常情况：user？id=1
* Restful：/user/1
* */</font></xmp></code></pre></blockquote><blockquote><p><font face="黑体" size="4">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="background-color: rgb(139, 170, 74);">&nbsp;properties-&gt;yml格式网站：<span style="font-size: 1em;">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face="黑体" size="4"><br></font></p><p><i><font size="3"><u><font color="#c24f4a">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face="黑体" size="4"><br></font></p><span style="background-color: rgb(139, 170, 74);"></span></blockquote><blockquote><p><font face="仿宋" size="4">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=""><font size="2">&nbsp;添加依赖：</font></li></ul><pre type="Java"><code><xmp><font size="3" face="Times New Roman"> &lt;!--热部署--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
        &lt;/dependency&gt;</font></xmp></code></pre><ul><li>勾选Build project automatically</li></ul><p><img src="https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg" style="max-width:100%;" width="100%"><br></p><ul><li>按两次shift键</li><li><img src="https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg" style="max-width:100%;"><br></li><li><img src="https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg" style="max-width:100%;"><br></li><li style="text-align:center;"><span style="background-color: rgb(194, 79, 74);"><font size="3">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li><li><img src="https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg"></li><li><br></li></ul>(String), 202715069841281024(Long)
2022-07-20 11:02:31.945 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204795079620169728[0;39m <==    Updates: 1
2022-07-20 11:02:32.031 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795079620169728[0;39m 返回结果: {"success":true}
2022-07-20 11:02:32.031 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795079620169728[0;39m ------------- 结束 耗时：141 ms -------------
2022-07-20 11:02:32.057 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204795079620169728[0;39m ------------- LoginInterceptor 结束 耗时：1549 ms -------------
2022-07-20 11:02:32.073 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795080387727360[0;39m ------------- 开始 -------------
2022-07-20 11:02:32.073 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795080387727360[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:02:32.073 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795080387727360[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:02:32.073 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795080387727360[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:32.073 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795080387727360[0;39m 请求参数: [202714600712572928]
2022-07-20 11:02:32.118 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795080387727360[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:02:32.118 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795080387727360[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:02:32.140 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:02:32.140 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 9, 1
2022-07-20 11:02:32.141 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 3, 0
2022-07-20 11:02:32.142 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 7, 1
2022-07-20 11:02:32.142 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:02:32.142 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:02:32.143 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:02:32.143 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:02:32.143 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:02:32.144 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:02:32.144 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:02:32.144 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:02:32.144 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:02:32.145 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795080387727360[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:02:32.145 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795080387727360[0;39m <==      Total: 13
2022-07-20 11:02:32.156 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795080387727360[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":9,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":7,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:02:32.156 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795080387727360[0;39m ------------- 结束 耗时：83 ms -------------
2022-07-20 11:02:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795092698009600[0;39m 生成今日电子书快照开始
2022-07-20 11:02:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795092698009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795092698009600[0;39m ==> Parameters: 
2022-07-20 11:02:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795092698009600[0;39m <==    Updates: 0
2022-07-20 11:02:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795092698009600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:02:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204795092706398208[0;39m 更新电子书下的文档数据开始
2022-07-20 11:02:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795092706398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:02:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795092706398208[0;39m ==> Parameters: 
2022-07-20 11:02:35.028 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795092706398208[0;39m <==    Updates: 7
2022-07-20 11:02:35.028 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204795092706398208[0;39m 更新电子书下的文档数据结束，耗时：18 毫秒
2022-07-20 11:02:36.643 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795099555696640[0;39m ------------- 开始 -------------
2022-07-20 11:02:36.643 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795099555696640[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:02:36.643 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795099555696640[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:02:36.644 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795099555696640[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:36.644 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795099555696640[0;39m 请求参数: [202714600712572928]
2022-07-20 11:02:36.645 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795099555696640[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:02:36.646 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795099555696640[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:02:36.646 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:02:36.647 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 9, 1
2022-07-20 11:02:36.647 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 3, 0
2022-07-20 11:02:36.648 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 7, 1
2022-07-20 11:02:36.650 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:02:36.651 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:02:36.652 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:02:36.652 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:02:36.653 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:02:36.653 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:02:36.653 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:02:36.654 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:02:36.654 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:02:36.655 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795099555696640[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:02:36.655 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795099555696640[0;39m <==      Total: 13
2022-07-20 11:02:36.658 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795099555696640[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":9,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":7,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:02:36.658 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795099555696640[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-20 11:02:36.745 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：UDOkp7lD7S，session id：0，当前连接数：1
2022-07-20 11:02:37.690 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795103947132928[0;39m ------------- 开始 -------------
2022-07-20 11:02:37.690 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795103947132929[0;39m ------------- 开始 -------------
2022-07-20 11:02:37.690 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795103947132928[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795103947132929[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795103947132928[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795103947132929[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795103951327232[0;39m ------------- 开始 -------------
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795103947132928[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795103947132929[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795103951327232[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795103947132928[0;39m 请求参数: []
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795103947132929[0;39m 请求参数: []
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795103951327232[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-20 11:02:37.691 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795103951327232[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:37.692 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795103951327232[0;39m 请求参数: []
2022-07-20 11:02:37.695 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204795103947132929[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 11:02:37.695 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204795103947132928[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 11:02:37.696 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204795103947132928[0;39m ==> Parameters: 
2022-07-20 11:02:37.696 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204795103947132929[0;39m ==> Parameters: 
2022-07-20 11:02:37.698 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795103947132929[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-20 11:02:37.804 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204795103947132928[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-20 11:02:37.804 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795103951327232[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-20 11:02:37.804 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795103947132929[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-20 11:02:37.804 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204795103947132928[0;39m <==        Row: 2022-07-20, 161, 37, 161, 37
2022-07-20 11:02:37.804 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795103951327232[0;39m ==> Parameters: 
2022-07-20 11:02:37.806 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795103947132929[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-20 11:02:37.806 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204795103947132928[0;39m <==      Total: 1
2022-07-20 11:02:37.806 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==    Columns: id, parent, name, sort
2022-07-20 11:02:37.807 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795103947132929[0;39m <==        Row: 2022-07-14, 47, 13
2022-07-20 11:02:37.807 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-20 11:02:37.807 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 101, 100, Vue, 101
2022-07-20 11:02:37.807 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795103947132929[0;39m <==        Row: 2022-07-16, 153, 37
2022-07-20 11:02:37.807 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-20 11:02:37.808 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795103947132929[0;39m <==        Row: 2022-07-17, 2, 0
2022-07-20 11:02:37.808 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 200, 0, Java, 200
2022-07-20 11:02:37.808 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204795103947132929[0;39m <==      Total: 5
2022-07-20 11:02:37.808 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-20 11:02:37.808 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-20 11:02:37.809 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-20 11:02:37.809 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 300, 0, Python, 300
2022-07-20 11:02:37.809 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-20 11:02:37.810 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-20 11:02:37.810 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-20 11:02:37.810 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-20 11:02:37.810 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795103947132928[0;39m 返回结果: {"content":[{"date":1658246400000,"viewCount":161,"viewIncrease":161,"voteCount":37,"voteIncrease":37}],"success":true}
2022-07-20 11:02:37.811 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795103947132928[0;39m ------------- 结束 耗时：121 ms -------------
2022-07-20 11:02:37.811 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795103947132929[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6},{"date":1657728000000,"viewCount":0,"viewIncrease":47,"voteCount":0,"voteIncrease":13},{"date":1657900800000,"viewCount":0,"viewIncrease":153,"voteCount":0,"voteIncrease":37},{"date":1657987200000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-20 11:02:37.811 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 500, 0, 其它, 500
2022-07-20 11:02:37.811 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795103947132929[0;39m ------------- 结束 耗时：121 ms -------------
2022-07-20 11:02:37.811 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-20 11:02:37.811 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-20 11:02:37.812 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795103951327232[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-20 11:02:37.813 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795103951327232[0;39m <==      Total: 16
2022-07-20 11:02:37.822 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795103951327232[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-20 11:02:37.823 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795103951327232[0;39m ------------- 结束 耗时：132 ms -------------
2022-07-20 11:02:38.619 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795107843641344[0;39m ------------- 开始 -------------
2022-07-20 11:02:38.713 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795107843641344[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-20 11:02:38.621 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795107852029952[0;39m ------------- 开始 -------------
2022-07-20 11:02:38.620 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795107847835648[0;39m ------------- 开始 -------------
2022-07-20 11:02:38.713 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795107843641344[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-20 11:02:38.713 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795107852029952[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-20 11:02:38.714 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795107847835648[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-20 11:02:38.714 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795107843641344[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:38.714 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795107852029952[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-20 11:02:38.714 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795107847835648[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-20 11:02:38.714 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795107852029952[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:38.714 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795107843641344[0;39m 请求参数: []
2022-07-20 11:02:38.714 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795107847835648[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:38.714 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795107852029952[0;39m 请求参数: []
2022-07-20 11:02:38.714 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795107847835648[0;39m 请求参数: []
2022-07-20 11:02:38.714 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795107852029952[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-20 11:02:38.714 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204795107847835648[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 11:02:38.714 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204795107843641344[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 11:02:38.715 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795107852029952[0;39m ==> Parameters: 
2022-07-20 11:02:38.715 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204795107847835648[0;39m ==> Parameters: 
2022-07-20 11:02:38.715 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204795107843641344[0;39m ==> Parameters: 
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==    Columns: id, parent, name, sort
2022-07-20 11:02:38.715 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795107847835648[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-20 11:02:38.715 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795107847835648[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 101, 100, Vue, 101
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 200, 0, Java, 200
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 300, 0, Python, 300
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-20 11:02:38.715 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-20 11:02:38.715 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795107847835648[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-20 11:02:38.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-20 11:02:38.719 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795107847835648[0;39m <==        Row: 2022-07-14, 47, 13
2022-07-20 11:02:38.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-20 11:02:38.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 500, 0, 其它, 500
2022-07-20 11:02:38.719 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795107847835648[0;39m <==        Row: 2022-07-16, 153, 37
2022-07-20 11:02:38.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-20 11:02:38.720 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204795107847835648[0;39m <==        Row: 2022-07-17, 2, 0
2022-07-20 11:02:38.720 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204795107843641344[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-20 11:02:38.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-20 11:02:38.720 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204795107847835648[0;39m <==      Total: 5
2022-07-20 11:02:38.720 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204795107843641344[0;39m <==        Row: 2022-07-20, 161, 37, 161, 37
2022-07-20 11:02:38.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795107852029952[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-20 11:02:38.720 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795107847835648[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6},{"date":1657728000000,"viewCount":0,"viewIncrease":47,"voteCount":0,"voteIncrease":13},{"date":1657900800000,"viewCount":0,"viewIncrease":153,"voteCount":0,"voteIncrease":37},{"date":1657987200000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-20 11:02:38.721 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795107847835648[0;39m ------------- 结束 耗时：101 ms -------------
2022-07-20 11:02:38.721 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795107852029952[0;39m <==      Total: 16
2022-07-20 11:02:38.721 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204795107843641344[0;39m <==      Total: 1
2022-07-20 11:02:38.721 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795107843641344[0;39m 返回结果: {"content":[{"date":1658246400000,"viewCount":161,"viewIncrease":161,"voteCount":37,"voteIncrease":37}],"success":true}
2022-07-20 11:02:38.721 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795107843641344[0;39m ------------- 结束 耗时：102 ms -------------
2022-07-20 11:02:38.722 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795107852029952[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-20 11:02:38.722 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795107852029952[0;39m ------------- 结束 耗时：101 ms -------------
2022-07-20 11:02:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795113656946688[0;39m 生成今日电子书快照开始
2022-07-20 11:02:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795113656946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795113656946688[0;39m ==> Parameters: 
2022-07-20 11:02:40.057 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795113656946688[0;39m <==    Updates: 0
2022-07-20 11:02:40.057 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795113656946688[0;39m 生成今日电子书快照结束，耗时：52 毫秒
2022-07-20 11:02:42.191 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795122825695232[0;39m ------------- 开始 -------------
2022-07-20 11:02:42.191 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795122825695232[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-20 11:02:42.191 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795122825695232[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-20 11:02:42.192 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795122825695232[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:42.193 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795122825695232[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-20 11:02:42.240 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204795122825695232[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-20 11:02:42.240 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204795122825695232[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-20 11:02:42.242 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204795122825695232[0;39m <==    Columns: count(0)
2022-07-20 11:02:42.242 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204795122825695232[0;39m <==        Row: 1
2022-07-20 11:02:42.243 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204795122825695232[0;39m <==      Total: 1
2022-07-20 11:02:42.244 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204795122825695232[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-20 11:02:42.245 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204795122825695232[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-20 11:02:42.246 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795122825695232[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-20 11:02:42.246 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795122825695232[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 13, 46, 12
2022-07-20 11:02:42.246 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204795122825695232[0;39m <==      Total: 1
2022-07-20 11:02:42.248 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m204795122825695232[0;39m 总行数：1
2022-07-20 11:02:42.248 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m204795122825695232[0;39m 总页数：1
2022-07-20 11:02:42.256 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795122825695232[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":13,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":46,"voteCount":12}],"total":1},"success":true}
2022-07-20 11:02:42.256 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795122825695232[0;39m ------------- 结束 耗时：65 ms -------------
2022-07-20 11:02:42.947 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795125996589056[0;39m ------------- 开始 -------------
2022-07-20 11:02:42.948 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795125996589056[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:02:42.948 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795125996589056[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:02:42.948 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795125996589056[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:42.948 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795125996589056[0;39m 请求参数: [202714600712572928]
2022-07-20 11:02:42.949 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795125996589056[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:02:42.950 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795125996589056[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:02:42.951 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:02:42.951 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 9, 1
2022-07-20 11:02:42.952 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 3, 0
2022-07-20 11:02:42.952 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 7, 1
2022-07-20 11:02:42.952 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:02:42.952 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:02:42.953 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:02:42.953 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:02:42.954 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:02:42.954 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:02:42.954 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:02:42.954 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:02:42.954 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:02:42.955 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795125996589056[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:02:42.955 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795125996589056[0;39m <==      Total: 13
2022-07-20 11:02:42.956 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795125996589056[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":9,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":7,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:02:42.956 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795125996589056[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-20 11:02:42.977 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795126122418176[0;39m ------------- 开始 -------------
2022-07-20 11:02:42.977 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795126122418176[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-20 11:02:42.977 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795126122418176[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:02:42.978 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795126122418176[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:42.978 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795126122418176[0;39m 请求参数: [202714909656616960]
2022-07-20 11:02:42.978 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795126122418176[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:02:42.979 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795126122418176[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-20 11:02:42.989 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795126122418176[0;39m <==    Columns: id, content
2022-07-20 11:02:42.990 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795126122418176[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-20 11:02:42.990 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795126122418176[0;39m <==      Total: 1
2022-07-20 11:02:42.991 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795126122418176[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:02:42.991 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795126122418176[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-20 11:02:43.014 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795126122418176[0;39m <==    Updates: 1
2022-07-20 11:02:43.015 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795126122418176[0;39m 返回结果: {"content":"","success":true}
2022-07-20 11:02:43.015 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795126122418176[0;39m ------------- 结束 耗时：38 ms -------------
2022-07-20 11:02:44.262 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795131512098816[0;39m ------------- 开始 -------------
2022-07-20 11:02:44.262 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795131512098816[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/203684795593658368 GET
2022-07-20 11:02:44.262 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795131512098816[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:02:44.263 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795131512098816[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:44.263 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795131512098816[0;39m 请求参数: [203684795593658368]
2022-07-20 11:02:44.263 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795131512098816[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:02:44.264 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795131512098816[0;39m ==> Parameters: 203684795593658368(Long)
2022-07-20 11:02:44.264 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795131512098816[0;39m <==    Columns: id, content
2022-07-20 11:02:44.264 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795131512098816[0;39m <==        Row: 203684795593658368, <<BLOB>>
2022-07-20 11:02:44.265 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795131512098816[0;39m <==      Total: 1
2022-07-20 11:02:44.265 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795131512098816[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:02:44.266 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795131512098816[0;39m ==> Parameters: 203684795593658368(Long)
2022-07-20 11:02:44.274 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795131512098816[0;39m <==    Updates: 1
2022-07-20 11:02:44.275 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795131512098816[0;39m 返回结果: {"content":"<blockquote><h2 id=\"3151e\"><font face=\"仿宋\" style=\"\"><b>前端：</b>Vue CLI(生成一个前端框架)、Vue3、Ant Design Vue(UI组件)、router、vuex、axios</font></h2><div></div><h2><font id=\"zkp4h\"><b style=\"font-family: 楷体;\">后端：</b><font face=\"仿宋\">SpringBoot核心知识体系AOP、拦截器、过滤器、异步化、定时任务、websocket、多环境、缓存、消息队列...</font></font></h2><br></blockquote>","success":true}
2022-07-20 11:02:44.275 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795131512098816[0;39m ------------- 结束 耗时：13 ms -------------
2022-07-20 11:02:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795134632660992[0;39m 生成今日电子书快照开始
2022-07-20 11:02:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795134632660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795134632660992[0;39m ==> Parameters: 
2022-07-20 11:02:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795134632660992[0;39m <==    Updates: 0
2022-07-20 11:02:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795134632660992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:02:45.133 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795135165337600[0;39m ------------- 开始 -------------
2022-07-20 11:02:45.134 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795135165337600[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:02:45.134 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795135165337600[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:02:45.134 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795135165337600[0;39m 远程地址: 127.0.0.1
2022-07-20 11:02:45.134 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795135165337600[0;39m 请求参数: [202715069841281024]
2022-07-20 11:02:45.134 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795135165337600[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:02:45.135 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795135165337600[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:02:45.135 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795135165337600[0;39m <==    Columns: id, content
2022-07-20 11:02:45.135 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795135165337600[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:02:45.135 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795135165337600[0;39m <==      Total: 1
2022-07-20 11:02:45.135 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795135165337600[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:02:45.135 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795135165337600[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:02:45.161 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795135165337600[0;39m <==    Updates: 1
2022-07-20 11:02:45.161 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795135165337600[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><h3><font face=\"楷体\"><b id=\"cicpo\">自定义启动端开始的文案网址：</b></font>patorjk.com</h3><pre type=\"Java\"><code><xmp><font size=\"5\">2. @RestController和@Controller区别：</font></xmp></code></pre><xmp><span style=\"font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(241, 241, 241); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em;\">@GetMapping(\"/hello\")</span></xmp><pre type=\"Java\"><code><xmp>    public String hello(){\n        return \"hello\";\n    }</xmp></code></pre><xmp><span style=\"font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><font face=\"Times New Roman\" size=\"4\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</font></xmp><p>&nbsp; &nbsp; <font size=\"4\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</font><br></p><blockquote><p><font size=\"4\">3.&nbsp;</font><span style=\"font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;\"><font size=\"4\">/*</font></span></p><pre type=\"Java\"><code><xmp><font size=\"4\">* Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n* 正常情况：user？id=1\n* Restful：/user/1\n* */</font></xmp></code></pre></blockquote><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"2\">&nbsp;添加依赖：</font></li></ul><pre type=\"Java\"><code><xmp><font size=\"3\" face=\"Times New Roman\"> &lt;!--热部署--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;/dependency&gt;</font></xmp></code></pre><ul><li>勾选Build project automatically</li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><ul><li>按两次shift键</li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"3\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li><li><br></li></ul>","success":true}
2022-07-20 11:02:45.161 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795135165337600[0;39m ------------- 结束 耗时：28 ms -------------
2022-07-20 11:02:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795155641929728[0;39m 生成今日电子书快照开始
2022-07-20 11:02:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795155641929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795155641929728[0;39m ==> Parameters: 
2022-07-20 11:02:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795155641929728[0;39m <==    Updates: 0
2022-07-20 11:02:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795155641929728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:02:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795176567312384[0;39m 生成今日电子书快照开始
2022-07-20 11:02:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795176567312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:02:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795176567312384[0;39m ==> Parameters: 
2022-07-20 11:02:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795176567312384[0;39m <==    Updates: 0
2022-07-20 11:02:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795176567312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:03:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795197568192512[0;39m 生成今日电子书快照开始
2022-07-20 11:03:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795197568192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795197568192512[0;39m ==> Parameters: 
2022-07-20 11:03:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795197568192512[0;39m <==    Updates: 0
2022-07-20 11:03:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795197568192512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:03:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795218510352384[0;39m 生成今日电子书快照开始
2022-07-20 11:03:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795218510352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795218510352384[0;39m ==> Parameters: 
2022-07-20 11:03:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795218510352384[0;39m <==    Updates: 0
2022-07-20 11:03:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795218510352384[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:03:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204795218535518208[0;39m 更新电子书下的文档数据开始
2022-07-20 11:03:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795218535518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:03:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795218535518208[0;39m ==> Parameters: 
2022-07-20 11:03:05.054 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795218535518208[0;39m <==    Updates: 7
2022-07-20 11:03:05.054 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204795218535518208[0;39m 更新电子书下的文档数据结束，耗时：44 毫秒
2022-07-20 11:03:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795239477678080[0;39m 生成今日电子书快照开始
2022-07-20 11:03:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795239477678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795239477678080[0;39m ==> Parameters: 
2022-07-20 11:03:10.038 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795239477678080[0;39m <==    Updates: 0
2022-07-20 11:03:10.039 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795239477678080[0;39m 生成今日电子书快照结束，耗时：36 毫秒
2022-07-20 11:03:10.649 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795242187198464[0;39m ------------- 开始 -------------
2022-07-20 11:03:10.649 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795242187198464[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-20 11:03:10.649 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795242187198464[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-20 11:03:10.649 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795242187198464[0;39m 远程地址: 127.0.0.1
2022-07-20 11:03:10.650 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795242187198464[0;39m 请求参数: []
2022-07-20 11:03:10.650 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795242187198464[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-20 11:03:10.650 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795242187198464[0;39m ==> Parameters: 
2022-07-20 11:03:10.651 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==    Columns: id, parent, name, sort
2022-07-20 11:03:10.651 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-20 11:03:10.652 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 101, 100, Vue, 101
2022-07-20 11:03:10.652 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-20 11:03:10.652 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 200, 0, Java, 200
2022-07-20 11:03:10.653 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-20 11:03:10.653 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-20 11:03:10.653 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-20 11:03:10.654 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 300, 0, Python, 300
2022-07-20 11:03:10.654 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-20 11:03:10.654 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-20 11:03:10.655 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-20 11:03:10.655 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-20 11:03:10.655 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 500, 0, 其它, 500
2022-07-20 11:03:10.655 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-20 11:03:10.655 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-20 11:03:10.656 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795242187198464[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-20 11:03:10.656 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795242187198464[0;39m <==      Total: 16
2022-07-20 11:03:10.657 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795242187198464[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-20 11:03:10.657 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795242187198464[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-20 11:03:11.722 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795246687686656[0;39m ------------- 开始 -------------
2022-07-20 11:03:11.722 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795246687686656[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-20 11:03:11.722 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795246687686656[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-20 11:03:11.723 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795246687686656[0;39m 远程地址: 127.0.0.1
2022-07-20 11:03:11.723 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795246687686656[0;39m 请求参数: []
2022-07-20 11:03:11.723 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795246687686656[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-20 11:03:11.724 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795246687686656[0;39m ==> Parameters: 
2022-07-20 11:03:11.725 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==    Columns: id, parent, name, sort
2022-07-20 11:03:11.725 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-20 11:03:11.725 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 101, 100, Vue, 101
2022-07-20 11:03:11.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-20 11:03:11.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 200, 0, Java, 200
2022-07-20 11:03:11.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-20 11:03:11.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-20 11:03:11.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-20 11:03:11.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 300, 0, Python, 300
2022-07-20 11:03:11.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-20 11:03:11.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-20 11:03:11.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-20 11:03:11.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-20 11:03:11.728 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 500, 0, 其它, 500
2022-07-20 11:03:11.728 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-20 11:03:11.728 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-20 11:03:11.728 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204795246687686656[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-20 11:03:11.728 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204795246687686656[0;39m <==      Total: 16
2022-07-20 11:03:11.730 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795246687686656[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-20 11:03:11.730 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795246687686656[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-20 11:03:11.751 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795246809321472[0;39m ------------- 开始 -------------
2022-07-20 11:03:11.751 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795246809321472[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-20 11:03:11.751 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795246809321472[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-20 11:03:11.751 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795246809321472[0;39m 远程地址: 127.0.0.1
2022-07-20 11:03:11.752 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795246809321472[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-20 11:03:11.754 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204795246809321472[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-20 11:03:11.755 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204795246809321472[0;39m ==> Parameters: 
2022-07-20 11:03:11.757 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204795246809321472[0;39m <==    Columns: count(0)
2022-07-20 11:03:11.757 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204795246809321472[0;39m <==        Row: 7
2022-07-20 11:03:11.758 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204795246809321472[0;39m <==      Total: 1
2022-07-20 11:03:11.758 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204795246809321472[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-20 11:03:11.759 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204795246809321472[0;39m ==> Parameters: 4(Integer)
2022-07-20 11:03:11.759 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795246809321472[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-20 11:03:11.759 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795246809321472[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 69, 13
2022-07-20 11:03:11.760 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795246809321472[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-20 11:03:11.760 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795246809321472[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-20 11:03:11.760 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795246809321472[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 1, 0
2022-07-20 11:03:11.760 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204795246809321472[0;39m <==      Total: 4
2022-07-20 11:03:11.761 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m204795246809321472[0;39m 总行数：7
2022-07-20 11:03:11.761 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m204795246809321472[0;39m 总页数：2
2022-07-20 11:03:11.761 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795246809321472[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":69,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":1,"voteCount":0}],"total":7},"success":true}
2022-07-20 11:03:11.762 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795246809321472[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-20 11:03:13.144 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795252651986944[0;39m ------------- 开始 -------------
2022-07-20 11:03:13.144 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795252651986944[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-20 11:03:13.144 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795252651986944[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-20 11:03:13.144 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795252651986944[0;39m 远程地址: 127.0.0.1
2022-07-20 11:03:13.145 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795252651986944[0;39m 请求参数: [{"page":2,"size":4}]
2022-07-20 11:03:13.146 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204795252651986944[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-20 11:03:13.146 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204795252651986944[0;39m ==> Parameters: 
2022-07-20 11:03:13.147 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204795252651986944[0;39m <==    Columns: count(0)
2022-07-20 11:03:13.148 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204795252651986944[0;39m <==        Row: 7
2022-07-20 11:03:13.148 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204795252651986944[0;39m <==      Total: 1
2022-07-20 11:03:13.148 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204795252651986944[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2022-07-20 11:03:13.149 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204795252651986944[0;39m ==> Parameters: 4(Long), 4(Integer)
2022-07-20 11:03:13.150 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795252651986944[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-20 11:03:13.150 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795252651986944[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2022-07-20 11:03:13.150 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795252651986944[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 5, 1
2022-07-20 11:03:13.151 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204795252651986944[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 13, 49, 12
2022-07-20 11:03:13.151 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204795252651986944[0;39m <==      Total: 3
2022-07-20 11:03:13.151 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m204795252651986944[0;39m 总行数：7
2022-07-20 11:03:13.152 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m204795252651986944[0;39m 总页数：2
2022-07-20 11:03:13.153 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795252651986944[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":5,"voteCount":1},{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":13,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":49,"voteCount":12}],"total":7},"success":true}
2022-07-20 11:03:13.153 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795252651986944[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-20 11:03:14.094 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795256636575744[0;39m ------------- 开始 -------------
2022-07-20 11:03:14.094 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795256636575744[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:03:14.094 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795256636575744[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:03:14.094 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795256636575744[0;39m 远程地址: 127.0.0.1
2022-07-20 11:03:14.095 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795256636575744[0;39m 请求参数: [202714600712572928]
2022-07-20 11:03:14.095 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795256636575744[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:03:14.096 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795256636575744[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:03:14.097 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:03:14.097 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:03:14.098 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 4, 0
2022-07-20 11:03:14.098 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:03:14.098 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:03:14.099 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:03:14.099 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:03:14.099 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:03:14.100 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:03:14.100 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:03:14.101 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:03:14.101 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:03:14.101 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:03:14.101 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204795256636575744[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:03:14.102 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204795256636575744[0;39m <==      Total: 13
2022-07-20 11:03:14.103 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795256636575744[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":4,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:03:14.103 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795256636575744[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-20 11:03:15.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795260436615168[0;39m 生成今日电子书快照开始
2022-07-20 11:03:15.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795260436615168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795260436615168[0;39m ==> Parameters: 
2022-07-20 11:03:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795260436615168[0;39m <==    Updates: 0
2022-07-20 11:03:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795260436615168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:03:16.864 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795268254797824[0;39m ------------- 开始 -------------
2022-07-20 11:03:16.864 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795268254797824[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/203684795593658368 GET
2022-07-20 11:03:16.864 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795268254797824[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:03:16.864 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795268254797824[0;39m 远程地址: 127.0.0.1
2022-07-20 11:03:16.864 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795268254797824[0;39m 请求参数: [203684795593658368]
2022-07-20 11:03:16.865 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795268254797824[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:03:16.865 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795268254797824[0;39m ==> Parameters: 203684795593658368(Long)
2022-07-20 11:03:16.866 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795268254797824[0;39m <==    Columns: id, content
2022-07-20 11:03:16.866 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795268254797824[0;39m <==        Row: 203684795593658368, <<BLOB>>
2022-07-20 11:03:16.867 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795268254797824[0;39m <==      Total: 1
2022-07-20 11:03:16.867 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795268254797824[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:03:16.868 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795268254797824[0;39m ==> Parameters: 203684795593658368(Long)
2022-07-20 11:03:16.893 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795268254797824[0;39m <==    Updates: 1
2022-07-20 11:03:16.893 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795268254797824[0;39m 返回结果: {"content":"<blockquote><h2 id=\"3151e\"><font face=\"仿宋\" style=\"\"><b>前端：</b>Vue CLI(生成一个前端框架)、Vue3、Ant Design Vue(UI组件)、router、vuex、axios</font></h2><div></div><h2><font id=\"zkp4h\"><b style=\"font-family: 楷体;\">后端：</b><font face=\"仿宋\">SpringBoot核心知识体系AOP、拦截器、过滤器、异步化、定时任务、websocket、多环境、缓存、消息队列...</font></font></h2><br></blockquote>","success":true}
2022-07-20 11:03:16.893 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795268254797824[0;39m ------------- 结束 耗时：29 ms -------------
2022-07-20 11:03:19.077 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204795277536792576[0;39m ------------- 开始 -------------
2022-07-20 11:03:19.077 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204795277536792576[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:03:19.078 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204795277536792576[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:03:19.078 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204795277536792576[0;39m 远程地址: 127.0.0.1
2022-07-20 11:03:19.078 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204795277536792576[0;39m 请求参数: [202715069841281024]
2022-07-20 11:03:19.079 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795277536792576[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:03:19.079 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795277536792576[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:03:19.080 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795277536792576[0;39m <==    Columns: id, content
2022-07-20 11:03:19.080 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204795277536792576[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:03:19.080 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204795277536792576[0;39m <==      Total: 1
2022-07-20 11:03:19.081 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795277536792576[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:03:19.081 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795277536792576[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:03:19.099 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204795277536792576[0;39m <==    Updates: 1
2022-07-20 11:03:19.100 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204795277536792576[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><h3><font face=\"楷体\"><b id=\"cicpo\">自定义启动端开始的文案网址：</b></font>patorjk.com</h3><pre type=\"Java\"><code><xmp><font size=\"5\">2. @RestController和@Controller区别：</font></xmp></code></pre><xmp><span style=\"font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(241, 241, 241); font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em;\">@GetMapping(\"/hello\")</span></xmp><pre type=\"Java\"><code><xmp>    public String hello(){\n        return \"hello\";\n    }</xmp></code></pre><xmp><span style=\"font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, &quot;Helvetica Neue&quot;, Arial, &quot;Noto Sans&quot;, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Noto Color Emoji&quot;;\">&nbsp;&nbsp;&nbsp;&nbsp;</span><font face=\"Times New Roman\" size=\"4\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</font></xmp><p>&nbsp; &nbsp; <font size=\"4\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</font><br></p><blockquote><p><font size=\"4\">3.&nbsp;</font><span style=\"font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;\"><font size=\"4\">/*</font></span></p><pre type=\"Java\"><code><xmp><font size=\"4\">* Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n* 正常情况：user？id=1\n* Restful：/user/1\n* */</font></xmp></code></pre></blockquote><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"2\">&nbsp;添加依赖：</font></li></ul><pre type=\"Java\"><code><xmp><font size=\"3\" face=\"Times New Roman\"> &lt;!--热部署--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;/dependency&gt;</font></xmp></code></pre><ul><li>勾选Build project automatically</li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><ul><li>按两次shift键</li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"3\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li><li><br></li></ul>","success":true}
2022-07-20 11:03:19.100 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204795277536792576[0;39m ------------- 结束 耗时：23 ms -------------
2022-07-20 11:03:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795281424912384[0;39m 生成今日电子书快照开始
2022-07-20 11:03:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795281424912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795281424912384[0;39m ==> Parameters: 
2022-07-20 11:03:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795281424912384[0;39m <==    Updates: 0
2022-07-20 11:03:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795281424912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:03:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795302446764032[0;39m 生成今日电子书快照开始
2022-07-20 11:03:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795302446764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795302446764032[0;39m ==> Parameters: 
2022-07-20 11:03:25.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795302446764032[0;39m <==    Updates: 0
2022-07-20 11:03:25.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795302446764032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:03:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795323409895424[0;39m 生成今日电子书快照开始
2022-07-20 11:03:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795323409895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795323409895424[0;39m ==> Parameters: 
2022-07-20 11:03:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795323409895424[0;39m <==    Updates: 0
2022-07-20 11:03:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795323409895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:03:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204795344347860992[0;39m 更新电子书下的文档数据开始
2022-07-20 11:03:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795344347860992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:03:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795344347860992[0;39m ==> Parameters: 
2022-07-20 11:03:35.061 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795344347860992[0;39m <==    Updates: 7
2022-07-20 11:03:35.062 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204795344347860992[0;39m 更新电子书下的文档数据结束，耗时：56 毫秒
2022-07-20 11:03:35.062 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795344582742016[0;39m 生成今日电子书快照开始
2022-07-20 11:03:35.062 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795344582742016[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:35.063 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795344582742016[0;39m ==> Parameters: 
2022-07-20 11:03:35.089 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795344582742016[0;39m <==    Updates: 0
2022-07-20 11:03:35.090 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795344582742016[0;39m 生成今日电子书快照结束，耗时：28 毫秒
2022-07-20 11:03:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795365302603776[0;39m 生成今日电子书快照开始
2022-07-20 11:03:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795365302603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795365302603776[0;39m ==> Parameters: 
2022-07-20 11:03:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795365302603776[0;39m <==    Updates: 0
2022-07-20 11:03:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795365302603776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:03:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795386290900992[0;39m 生成今日电子书快照开始
2022-07-20 11:03:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795386290900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795386290900992[0;39m ==> Parameters: 
2022-07-20 11:03:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795386290900992[0;39m <==    Updates: 0
2022-07-20 11:03:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795386290900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:03:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795407304364032[0;39m 生成今日电子书快照开始
2022-07-20 11:03:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795407304364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795407304364032[0;39m ==> Parameters: 
2022-07-20 11:03:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795407304364032[0;39m <==    Updates: 0
2022-07-20 11:03:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795407304364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:03:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795428212969472[0;39m 生成今日电子书快照开始
2022-07-20 11:03:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795428212969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:03:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795428212969472[0;39m ==> Parameters: 
2022-07-20 11:03:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795428212969472[0;39m <==    Updates: 0
2022-07-20 11:03:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795428212969472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:04:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795449222238208[0;39m 生成今日电子书快照开始
2022-07-20 11:04:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795449222238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795449222238208[0;39m ==> Parameters: 
2022-07-20 11:04:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795449222238208[0;39m <==    Updates: 0
2022-07-20 11:04:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795449222238208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:04:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795470160203776[0;39m 生成今日电子书快照开始
2022-07-20 11:04:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795470160203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795470160203776[0;39m ==> Parameters: 
2022-07-20 11:04:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795470160203776[0;39m <==    Updates: 0
2022-07-20 11:04:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795470160203776[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:04:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204795470193758208[0;39m 更新电子书下的文档数据开始
2022-07-20 11:04:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795470193758208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:04:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795470193758208[0;39m ==> Parameters: 
2022-07-20 11:04:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795470193758208[0;39m <==    Updates: 7
2022-07-20 11:04:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204795470193758208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:04:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795491131723776[0;39m 生成今日电子书快照开始
2022-07-20 11:04:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795491131723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795491131723776[0;39m ==> Parameters: 
2022-07-20 11:04:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795491131723776[0;39m <==    Updates: 0
2022-07-20 11:04:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795491131723776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:04:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795512140992512[0;39m 生成今日电子书快照开始
2022-07-20 11:04:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795512140992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795512140992512[0;39m ==> Parameters: 
2022-07-20 11:04:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795512140992512[0;39m <==    Updates: 0
2022-07-20 11:04:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795512140992512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:04:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795533125095424[0;39m 生成今日电子书快照开始
2022-07-20 11:04:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795533125095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795533125095424[0;39m ==> Parameters: 
2022-07-20 11:04:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795533125095424[0;39m <==    Updates: 0
2022-07-20 11:04:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795533125095424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:04:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795554063060992[0;39m 生成今日电子书快照开始
2022-07-20 11:04:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795554063060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795554063060992[0;39m ==> Parameters: 
2022-07-20 11:04:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795554063060992[0;39m <==    Updates: 0
2022-07-20 11:04:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795554063060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:04:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795575076524032[0;39m 生成今日电子书快照开始
2022-07-20 11:04:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795575076524032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795575076524032[0;39m ==> Parameters: 
2022-07-20 11:04:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795575076524032[0;39m <==    Updates: 0
2022-07-20 11:04:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795575076524032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:04:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795595997712384[0;39m 生成今日电子书快照开始
2022-07-20 11:04:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795595997712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795595997712384[0;39m ==> Parameters: 
2022-07-20 11:04:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795595997712384[0;39m <==    Updates: 0
2022-07-20 11:04:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795595997712384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:04:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204795596010295296[0;39m 更新电子书下的文档数据开始
2022-07-20 11:04:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795596010295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:04:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795596010295296[0;39m ==> Parameters: 
2022-07-20 11:04:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795596010295296[0;39m <==    Updates: 7
2022-07-20 11:04:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204795596010295296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:04:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795616952455168[0;39m 生成今日电子书快照开始
2022-07-20 11:04:40.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795616952455168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795616952455168[0;39m ==> Parameters: 
2022-07-20 11:04:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795616952455168[0;39m <==    Updates: 0
2022-07-20 11:04:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795616952455168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:04:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795637961723904[0;39m 生成今日电子书快照开始
2022-07-20 11:04:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795637961723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795637961723904[0;39m ==> Parameters: 
2022-07-20 11:04:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795637961723904[0;39m <==    Updates: 0
2022-07-20 11:04:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795637961723904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:04:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795658920660992[0;39m 生成今日电子书快照开始
2022-07-20 11:04:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795658920660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795658920660992[0;39m ==> Parameters: 
2022-07-20 11:04:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795658920660992[0;39m <==    Updates: 0
2022-07-20 11:04:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795658920660992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:04:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795679883792384[0;39m 生成今日电子书快照开始
2022-07-20 11:04:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795679883792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:04:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795679883792384[0;39m ==> Parameters: 
2022-07-20 11:04:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795679883792384[0;39m <==    Updates: 0
2022-07-20 11:04:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795679883792384[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:05:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795700863700992[0;39m 生成今日电子书快照开始
2022-07-20 11:05:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795700863700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795700863700992[0;39m ==> Parameters: 
2022-07-20 11:05:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795700863700992[0;39m <==    Updates: 0
2022-07-20 11:05:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795700863700992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:05:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795721839415296[0;39m 生成今日电子书快照开始
2022-07-20 11:05:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795721839415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795721839415296[0;39m ==> Parameters: 
2022-07-20 11:05:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795721839415296[0;39m <==    Updates: 0
2022-07-20 11:05:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795721839415296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:05:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204795721847803904[0;39m 更新电子书下的文档数据开始
2022-07-20 11:05:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795721847803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:05:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795721847803904[0;39m ==> Parameters: 
2022-07-20 11:05:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795721847803904[0;39m <==    Updates: 7
2022-07-20 11:05:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204795721847803904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:05:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795742798352384[0;39m 生成今日电子书快照开始
2022-07-20 11:05:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795742798352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795742798352384[0;39m ==> Parameters: 
2022-07-20 11:05:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795742798352384[0;39m <==    Updates: 0
2022-07-20 11:05:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795742798352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:05:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795763807621120[0;39m 生成今日电子书快照开始
2022-07-20 11:05:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795763807621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795763807621120[0;39m ==> Parameters: 
2022-07-20 11:05:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795763807621120[0;39m <==    Updates: 0
2022-07-20 11:05:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795763807621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:05:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795784733003776[0;39m 生成今日电子书快照开始
2022-07-20 11:05:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795784733003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795784733003776[0;39m ==> Parameters: 
2022-07-20 11:05:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795784733003776[0;39m <==    Updates: 0
2022-07-20 11:05:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795784733003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:05:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795805750661120[0;39m 生成今日电子书快照开始
2022-07-20 11:05:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795805750661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795805750661120[0;39m ==> Parameters: 
2022-07-20 11:05:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795805750661120[0;39m <==    Updates: 0
2022-07-20 11:05:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795805750661120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:05:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795826692820992[0;39m 生成今日电子书快照开始
2022-07-20 11:05:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795826692820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795826692820992[0;39m ==> Parameters: 
2022-07-20 11:05:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795826692820992[0;39m <==    Updates: 0
2022-07-20 11:05:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795826692820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:05:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795847685312512[0;39m 生成今日电子书快照开始
2022-07-20 11:05:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795847685312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795847685312512[0;39m ==> Parameters: 
2022-07-20 11:05:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795847685312512[0;39m <==    Updates: 0
2022-07-20 11:05:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795847685312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:05:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204795847693701120[0;39m 更新电子书下的文档数据开始
2022-07-20 11:05:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795847693701120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:05:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795847693701120[0;39m ==> Parameters: 
2022-07-20 11:05:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795847693701120[0;39m <==    Updates: 7
2022-07-20 11:05:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204795847693701120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:05:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795868652638208[0;39m 生成今日电子书快照开始
2022-07-20 11:05:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795868652638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795868652638208[0;39m ==> Parameters: 
2022-07-20 11:05:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795868652638208[0;39m <==    Updates: 0
2022-07-20 11:05:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795868652638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:05:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795889594798080[0;39m 生成今日电子书快照开始
2022-07-20 11:05:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795889594798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795889594798080[0;39m ==> Parameters: 
2022-07-20 11:05:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795889594798080[0;39m <==    Updates: 0
2022-07-20 11:05:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795889594798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:05:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795910599872512[0;39m 生成今日电子书快照开始
2022-07-20 11:05:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795910599872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795910599872512[0;39m ==> Parameters: 
2022-07-20 11:05:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795910599872512[0;39m <==    Updates: 0
2022-07-20 11:05:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795910599872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:05:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795931575586816[0;39m 生成今日电子书快照开始
2022-07-20 11:05:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795931575586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:05:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795931575586816[0;39m ==> Parameters: 
2022-07-20 11:05:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795931575586816[0;39m <==    Updates: 0
2022-07-20 11:05:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795931575586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:06:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795952509358080[0;39m 生成今日电子书快照开始
2022-07-20 11:06:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795952509358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795952509358080[0;39m ==> Parameters: 
2022-07-20 11:06:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795952509358080[0;39m <==    Updates: 0
2022-07-20 11:06:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795952509358080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:06:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795973518626816[0;39m 生成今日电子书快照开始
2022-07-20 11:06:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795973518626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795973518626816[0;39m ==> Parameters: 
2022-07-20 11:06:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795973518626816[0;39m <==    Updates: 0
2022-07-20 11:06:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795973518626816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:06:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204795973531209728[0;39m 更新电子书下的文档数据开始
2022-07-20 11:06:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795973531209728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:06:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795973531209728[0;39m ==> Parameters: 
2022-07-20 11:06:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204795973531209728[0;39m <==    Updates: 7
2022-07-20 11:06:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204795973531209728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:06:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204795994456592384[0;39m 生成今日电子书快照开始
2022-07-20 11:06:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795994456592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795994456592384[0;39m ==> Parameters: 
2022-07-20 11:06:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204795994456592384[0;39m <==    Updates: 0
2022-07-20 11:06:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204795994456592384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:06:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796015419723776[0;39m 生成今日电子书快照开始
2022-07-20 11:06:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796015419723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796015419723776[0;39m ==> Parameters: 
2022-07-20 11:06:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796015419723776[0;39m <==    Updates: 0
2022-07-20 11:06:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796015419723776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:06:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796036412215296[0;39m 生成今日电子书快照开始
2022-07-20 11:06:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796036412215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796036412215296[0;39m ==> Parameters: 
2022-07-20 11:06:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796036412215296[0;39m <==    Updates: 0
2022-07-20 11:06:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796036412215296[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:06:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796057383735296[0;39m 生成今日电子书快照开始
2022-07-20 11:06:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796057383735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796057383735296[0;39m ==> Parameters: 
2022-07-20 11:06:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796057383735296[0;39m <==    Updates: 0
2022-07-20 11:06:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796057383735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:06:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796078372032512[0;39m 生成今日电子书快照开始
2022-07-20 11:06:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796078372032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796078372032512[0;39m ==> Parameters: 
2022-07-20 11:06:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796078372032512[0;39m <==    Updates: 0
2022-07-20 11:06:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796078372032512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:06:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796099339358208[0;39m 生成今日电子书快照开始
2022-07-20 11:06:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796099339358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796099339358208[0;39m ==> Parameters: 
2022-07-20 11:06:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796099339358208[0;39m <==    Updates: 0
2022-07-20 11:06:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796099339358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:06:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204796099347746816[0;39m 更新电子书下的文档数据开始
2022-07-20 11:06:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796099347746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:06:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796099347746816[0;39m ==> Parameters: 
2022-07-20 11:06:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796099347746816[0;39m <==    Updates: 7
2022-07-20 11:06:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204796099347746816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:06:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796120306683904[0;39m 生成今日电子书快照开始
2022-07-20 11:06:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796120306683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796120306683904[0;39m ==> Parameters: 
2022-07-20 11:06:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796120306683904[0;39m <==    Updates: 0
2022-07-20 11:06:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796120306683904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:06:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796141290786816[0;39m 生成今日电子书快照开始
2022-07-20 11:06:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796141290786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796141290786816[0;39m ==> Parameters: 
2022-07-20 11:06:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796141290786816[0;39m <==    Updates: 0
2022-07-20 11:06:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796141290786816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:06:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796162279084032[0;39m 生成今日电子书快照开始
2022-07-20 11:06:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796162279084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796162279084032[0;39m ==> Parameters: 
2022-07-20 11:06:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796162279084032[0;39m <==    Updates: 0
2022-07-20 11:06:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796162279084032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:06:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796183217049600[0;39m 生成今日电子书快照开始
2022-07-20 11:06:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796183217049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:06:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796183217049600[0;39m ==> Parameters: 
2022-07-20 11:06:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796183217049600[0;39m <==    Updates: 0
2022-07-20 11:06:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796183217049600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:07:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796204209541120[0;39m 生成今日电子书快照开始
2022-07-20 11:07:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796204209541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796204209541120[0;39m ==> Parameters: 
2022-07-20 11:07:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796204209541120[0;39m <==    Updates: 0
2022-07-20 11:07:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796204209541120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:07:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204796225139118080[0;39m 更新电子书下的文档数据开始
2022-07-20 11:07:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796225139118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:07:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796225139118080[0;39m ==> Parameters: 
2022-07-20 11:07:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796225139118080[0;39m <==    Updates: 7
2022-07-20 11:07:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204796225139118080[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 11:07:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796225151700992[0;39m 生成今日电子书快照开始
2022-07-20 11:07:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796225151700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796225151700992[0;39m ==> Parameters: 
2022-07-20 11:07:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796225151700992[0;39m <==    Updates: 0
2022-07-20 11:07:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796225151700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:07:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796246135803904[0;39m 生成今日电子书快照开始
2022-07-20 11:07:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796246135803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796246135803904[0;39m ==> Parameters: 
2022-07-20 11:07:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796246135803904[0;39m <==    Updates: 0
2022-07-20 11:07:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796246135803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:07:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796267098935296[0;39m 生成今日电子书快照开始
2022-07-20 11:07:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796267098935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796267098935296[0;39m ==> Parameters: 
2022-07-20 11:07:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796267098935296[0;39m <==    Updates: 0
2022-07-20 11:07:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796267098935296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:07:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796288062066688[0;39m 生成今日电子书快照开始
2022-07-20 11:07:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796288062066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796288062066688[0;39m ==> Parameters: 
2022-07-20 11:07:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796288062066688[0;39m <==    Updates: 0
2022-07-20 11:07:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796288062066688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:07:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796309041975296[0;39m 生成今日电子书快照开始
2022-07-20 11:07:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796309041975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796309041975296[0;39m ==> Parameters: 
2022-07-20 11:07:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796309041975296[0;39m <==    Updates: 0
2022-07-20 11:07:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796309041975296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:07:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796330026078208[0;39m 生成今日电子书快照开始
2022-07-20 11:07:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796330026078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796330026078208[0;39m ==> Parameters: 
2022-07-20 11:07:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796330026078208[0;39m <==    Updates: 0
2022-07-20 11:07:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796330026078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:07:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796350964043776[0;39m 生成今日电子书快照开始
2022-07-20 11:07:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796350964043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796350964043776[0;39m ==> Parameters: 
2022-07-20 11:07:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796350964043776[0;39m <==    Updates: 0
2022-07-20 11:07:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796350964043776[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:07:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204796351005986816[0;39m 更新电子书下的文档数据开始
2022-07-20 11:07:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796351005986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:07:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796351005986816[0;39m ==> Parameters: 
2022-07-20 11:07:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796351005986816[0;39m <==    Updates: 7
2022-07-20 11:07:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204796351005986816[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 11:07:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796371952340992[0;39m 生成今日电子书快照开始
2022-07-20 11:07:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796371952340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796371952340992[0;39m ==> Parameters: 
2022-07-20 11:07:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796371952340992[0;39m <==    Updates: 0
2022-07-20 11:07:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796371952340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:07:42.385 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204795122825695232[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:07:42.385 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m204795122825695232[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 11:07:42.385 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m204795122825695232[0;39m 登录校验开始，token：204772700709851136
2022-07-20 11:07:42.418 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m204795122825695232[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 11:07:42.419 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204796382073196544[0;39m ------------- 开始 -------------
2022-07-20 11:07:42.419 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204796382073196544[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-20 11:07:42.419 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204796382073196544[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-20 11:07:42.419 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204796382073196544[0;39m 远程地址: 127.0.0.1
2022-07-20 11:07:42.420 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204796382073196544[0;39m 请求参数: [{"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><code>自定义启动端开始的文案网址：patorjk.com</code><h3></h3><pre type=\"Java\"><code><xmp><font face=\"Times New Roman\" size=\"4\">2. @RestController和@Controller区别：</font></xmp></code></pre><xmp><pre type=\"Java\"><code><xmp>@GetMapping(\"/hello\")\n    public String hello(){\n        return \"hello\";\n    }</xmp></code></pre></xmp><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face=\"Times New Roman\" size=\"4\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</font><br></p><p>&nbsp; &nbsp; <font size=\"4\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</font><br></p><blockquote><p><font size=\"4\">3.&nbsp;</font><span style=\"font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;\"><font size=\"4\">/*</font></span></p><pre type=\"Java\"><code><xmp><font size=\"4\">* Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n* 正常情况：user？id=1\n* Restful：/user/1\n* */&lt;/font&gt;</font></xmp></code></pre></blockquote><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"2\">&nbsp;添加依赖：</font></li></ul><pre type=\"Java\"><code><xmp><font size=\"3\" face=\"Times New Roman\"> &lt;!--热部署--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;/dependency&gt;</font></xmp></code></pre><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul>","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1}]
2022-07-20 11:07:42.421 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204796382073196544[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-20 11:07:42.421 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204796382073196544[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 8(Integer), 1(Integer), 202715069841281024(Long)
2022-07-20 11:07:42.427 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204796382073196544[0;39m <==    Updates: 1
2022-07-20 11:07:42.427 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204796382073196544[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-20 11:07:42.428 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204796382073196544[0;39m ==> Parameters: <blockquote><h2 id="343h7">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><code>自定义启动端开始的文案网址：patorjk.com</code><h3></h3><pre type="Java"><code><xmp><font face="Times New Roman" size="4">2. @RestController和@Controller区别：</font></xmp></code></pre><xmp><pre type="Java"><code><xmp>@GetMapping("/hello")
    public String hello(){
        return "hello";
    }</xmp></code></pre></xmp><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face="Times New Roman" size="4">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</font><br></p><p>&nbsp; &nbsp; <font size="4">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</font><br></p><blockquote><p><font size="4">3.&nbsp;</font><span style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;"><font size="4">/*</font></span></p><pre type="Java"><code><xmp><font size="4">* Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）
* 正常情况：user？id=1
* Restful：/user/1
* */&lt;/font&gt;</font></xmp></code></pre></blockquote><blockquote><p><font face="黑体" size="4">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="background-color: rgb(139, 170, 74);">&nbsp;properties-&gt;yml格式网站：<span style="font-size: 1em;">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face="黑体" size="4"><br></font></p><p><i><font size="3"><u><font color="#c24f4a">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face="黑体" size="4"><br></font></p><span style="background-color: rgb(139, 170, 74);"></span></blockquote><blockquote><p><font face="仿宋" size="4">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=""><font size="2">&nbsp;添加依赖：</font></li></ul><pre type="Java"><code><xmp><font size="3" face="Times New Roman"> &lt;!--热部署--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
        &lt;/dependency&gt;</font></xmp></code></pre><ul><li><hr></li><li><font size="4">勾选Build project automatically</font></li></ul><p><img src="https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg" style="max-width:100%;" width="100%"><br></p><hr><ul><li><font size="4" face="仿宋">按两次shift键</font></li><li><img src="https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg" style="max-width:100%;"><br></li></ul><p><br></p><ul><li><img src="https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg" style="max-width:100%;"><br></li></ul><hr><ul><li style="text-align:center;"><span style="background-color: rgb(194, 79, 74);"><font size="5">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style="text-align: center;"><font size="3"><br></font></div><ul><li><br></li><li><img src="https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg"></li></ul>(String), 202715069841281024(Long)
2022-07-20 11:07:42.428 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204796382073196544[0;39m <==    Updates: 1
2022-07-20 11:07:42.510 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204796382073196544[0;39m 返回结果: {"success":true}
2022-07-20 11:07:42.510 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204796382073196544[0;39m ------------- 结束 耗时：91 ms -------------
2022-07-20 11:07:42.511 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204796382073196544[0;39m ------------- LoginInterceptor 结束 耗时：126 ms -------------
2022-07-20 11:07:42.524 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204796382513598464[0;39m ------------- 开始 -------------
2022-07-20 11:07:42.524 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204796382513598464[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:07:42.524 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204796382513598464[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:07:42.524 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204796382513598464[0;39m 远程地址: 127.0.0.1
2022-07-20 11:07:42.524 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204796382513598464[0;39m 请求参数: [202714600712572928]
2022-07-20 11:07:42.525 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204796382513598464[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:07:42.525 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204796382513598464[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:07:42.526 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:07:42.526 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:07:42.527 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:07:42.527 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:07:42.527 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:07:42.527 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:07:42.527 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:07:42.528 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:07:42.528 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:07:42.528 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:07:42.528 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:07:42.528 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:07:42.529 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:07:42.529 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204796382513598464[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:07:42.529 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204796382513598464[0;39m <==      Total: 13
2022-07-20 11:07:42.530 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204796382513598464[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:07:42.530 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204796382513598464[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-20 11:07:44.776 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204796391959171072[0;39m ------------- 开始 -------------
2022-07-20 11:07:44.776 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204796391959171072[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:07:44.776 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204796391959171072[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:07:44.776 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204796391959171072[0;39m 远程地址: 127.0.0.1
2022-07-20 11:07:44.777 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204796391959171072[0;39m 请求参数: [202715069841281024]
2022-07-20 11:07:44.777 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204796391959171072[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:07:44.777 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204796391959171072[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:07:44.778 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204796391959171072[0;39m <==    Columns: id, content
2022-07-20 11:07:44.778 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204796391959171072[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:07:44.778 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204796391959171072[0;39m <==      Total: 1
2022-07-20 11:07:44.779 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204796391959171072[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:07:44.779 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204796391959171072[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:07:44.795 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204796391959171072[0;39m <==    Updates: 1
2022-07-20 11:07:44.795 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204796391959171072[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><code>自定义启动端开始的文案网址：patorjk.com</code><h3></h3><pre type=\"Java\"><code><xmp><font face=\"Times New Roman\" size=\"4\">2. @RestController和@Controller区别：</font></xmp></code></pre><xmp><pre type=\"Java\"><code><xmp>@GetMapping(\"/hello\")\n    public String hello(){\n        return \"hello\";\n    }</xmp></code></pre></xmp><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font face=\"Times New Roman\" size=\"4\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</font><br></p><p>&nbsp; &nbsp; <font size=\"4\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</font><br></p><blockquote><p><font size=\"4\">3.&nbsp;</font><span style=\"font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace;\"><font size=\"4\">/*</font></span></p><pre type=\"Java\"><code><xmp><font size=\"4\">* Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n* 正常情况：user？id=1\n* Restful：/user/1\n* */&lt;/font&gt;</font></xmp></code></pre></blockquote><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"2\">&nbsp;添加依赖：</font></li></ul><pre type=\"Java\"><code><xmp><font size=\"3\" face=\"Times New Roman\"> &lt;!--热部署--&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;/dependency&gt;</font></xmp></code></pre><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul>","success":true}
2022-07-20 11:07:44.796 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204796391959171072[0;39m ------------- 结束 耗时：20 ms -------------
2022-07-20 11:07:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796392940638208[0;39m 生成今日电子书快照开始
2022-07-20 11:07:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796392940638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796392940638208[0;39m ==> Parameters: 
2022-07-20 11:07:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796392940638208[0;39m <==    Updates: 0
2022-07-20 11:07:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796392940638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:07:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796413933129728[0;39m 生成今日电子书快照开始
2022-07-20 11:07:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796413933129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796413933129728[0;39m ==> Parameters: 
2022-07-20 11:07:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796413933129728[0;39m <==    Updates: 0
2022-07-20 11:07:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796413933129728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:07:55.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796434841735168[0;39m 生成今日电子书快照开始
2022-07-20 11:07:55.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796434841735168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:07:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796434841735168[0;39m ==> Parameters: 
2022-07-20 11:07:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796434841735168[0;39m <==    Updates: 0
2022-07-20 11:07:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796434841735168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:08:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796455834226688[0;39m 生成今日电子书快照开始
2022-07-20 11:08:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796455834226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796455834226688[0;39m ==> Parameters: 
2022-07-20 11:08:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796455834226688[0;39m <==    Updates: 0
2022-07-20 11:08:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796455834226688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:08:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796476788969472[0;39m 生成今日电子书快照开始
2022-07-20 11:08:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796476788969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796476788969472[0;39m ==> Parameters: 
2022-07-20 11:08:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796476788969472[0;39m <==    Updates: 0
2022-07-20 11:08:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796476788969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:08:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204796476797358080[0;39m 更新电子书下的文档数据开始
2022-07-20 11:08:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796476797358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:08:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796476797358080[0;39m ==> Parameters: 
2022-07-20 11:08:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796476797358080[0;39m <==    Updates: 7
2022-07-20 11:08:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204796476797358080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:08:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796497810821120[0;39m 生成今日电子书快照开始
2022-07-20 11:08:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796497810821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796497810821120[0;39m ==> Parameters: 
2022-07-20 11:08:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796497810821120[0;39m <==    Updates: 0
2022-07-20 11:08:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796497810821120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:08:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796518761369600[0;39m 生成今日电子书快照开始
2022-07-20 11:08:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796518761369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796518761369600[0;39m ==> Parameters: 
2022-07-20 11:08:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796518761369600[0;39m <==    Updates: 0
2022-07-20 11:08:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796518761369600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:08:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796539703529472[0;39m 生成今日电子书快照开始
2022-07-20 11:08:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796539703529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796539703529472[0;39m ==> Parameters: 
2022-07-20 11:08:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796539703529472[0;39m <==    Updates: 0
2022-07-20 11:08:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796539703529472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:08:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796560683438080[0;39m 生成今日电子书快照开始
2022-07-20 11:08:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796560683438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796560683438080[0;39m ==> Parameters: 
2022-07-20 11:08:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796560683438080[0;39m <==    Updates: 0
2022-07-20 11:08:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796560683438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:08:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796581663346688[0;39m 生成今日电子书快照开始
2022-07-20 11:08:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796581663346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796581663346688[0;39m ==> Parameters: 
2022-07-20 11:08:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796581663346688[0;39m <==    Updates: 0
2022-07-20 11:08:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796581663346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:08:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796602634866688[0;39m 生成今日电子书快照开始
2022-07-20 11:08:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796602634866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796602634866688[0;39m ==> Parameters: 
2022-07-20 11:08:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796602634866688[0;39m <==    Updates: 0
2022-07-20 11:08:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796602634866688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:08:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204796602647449600[0;39m 更新电子书下的文档数据开始
2022-07-20 11:08:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796602647449600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:08:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796602647449600[0;39m ==> Parameters: 
2022-07-20 11:08:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796602647449600[0;39m <==    Updates: 7
2022-07-20 11:08:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204796602647449600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:08:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796623597998080[0;39m 生成今日电子书快照开始
2022-07-20 11:08:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796623597998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796623597998080[0;39m ==> Parameters: 
2022-07-20 11:08:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796623597998080[0;39m <==    Updates: 0
2022-07-20 11:08:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796623597998080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:08:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796644561129472[0;39m 生成今日电子书快照开始
2022-07-20 11:08:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796644561129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796644561129472[0;39m ==> Parameters: 
2022-07-20 11:08:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796644561129472[0;39m <==    Updates: 0
2022-07-20 11:08:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796644561129472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:08:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796665591369728[0;39m 生成今日电子书快照开始
2022-07-20 11:08:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796665591369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796665591369728[0;39m ==> Parameters: 
2022-07-20 11:08:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796665591369728[0;39m <==    Updates: 0
2022-07-20 11:08:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796665591369728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:08:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796686520946688[0;39m 生成今日电子书快照开始
2022-07-20 11:08:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796686520946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:08:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796686520946688[0;39m ==> Parameters: 
2022-07-20 11:08:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796686520946688[0;39m <==    Updates: 0
2022-07-20 11:08:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796686520946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:09:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796707517632512[0;39m 生成今日电子书快照开始
2022-07-20 11:09:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796707517632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796707517632512[0;39m ==> Parameters: 
2022-07-20 11:09:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796707517632512[0;39m <==    Updates: 0
2022-07-20 11:09:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796707517632512[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:09:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796728459792384[0;39m 生成今日电子书快照开始
2022-07-20 11:09:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796728459792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796728459792384[0;39m ==> Parameters: 
2022-07-20 11:09:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796728459792384[0;39m <==    Updates: 0
2022-07-20 11:09:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796728459792384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:09:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204796728472375296[0;39m 更新电子书下的文档数据开始
2022-07-20 11:09:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796728472375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:09:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796728472375296[0;39m ==> Parameters: 
2022-07-20 11:09:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796728472375296[0;39m <==    Updates: 7
2022-07-20 11:09:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204796728472375296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:09:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796749473255424[0;39m 生成今日电子书快照开始
2022-07-20 11:09:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796749473255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796749473255424[0;39m ==> Parameters: 
2022-07-20 11:09:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796749473255424[0;39m <==    Updates: 0
2022-07-20 11:09:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796749473255424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:09:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796770423803904[0;39m 生成今日电子书快照开始
2022-07-20 11:09:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796770423803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796770423803904[0;39m ==> Parameters: 
2022-07-20 11:09:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796770423803904[0;39m <==    Updates: 0
2022-07-20 11:09:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796770423803904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:09:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796791391129600[0;39m 生成今日电子书快照开始
2022-07-20 11:09:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796791391129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796791391129600[0;39m ==> Parameters: 
2022-07-20 11:09:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796791391129600[0;39m <==    Updates: 0
2022-07-20 11:09:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796791391129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:09:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796812345872384[0;39m 生成今日电子书快照开始
2022-07-20 11:09:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796812345872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796812345872384[0;39m ==> Parameters: 
2022-07-20 11:09:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796812345872384[0;39m <==    Updates: 0
2022-07-20 11:09:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796812345872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:09:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796833329975296[0;39m 生成今日电子书快照开始
2022-07-20 11:09:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796833329975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796833329975296[0;39m ==> Parameters: 
2022-07-20 11:09:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796833329975296[0;39m <==    Updates: 0
2022-07-20 11:09:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796833329975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:09:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796854288912384[0;39m 生成今日电子书快照开始
2022-07-20 11:09:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796854288912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796854288912384[0;39m ==> Parameters: 
2022-07-20 11:09:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796854288912384[0;39m <==    Updates: 0
2022-07-20 11:09:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796854288912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:09:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204796854297300992[0;39m 更新电子书下的文档数据开始
2022-07-20 11:09:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796854297300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:09:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796854297300992[0;39m ==> Parameters: 
2022-07-20 11:09:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796854297300992[0;39m <==    Updates: 7
2022-07-20 11:09:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204796854297300992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:09:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796875310764032[0;39m 生成今日电子书快照开始
2022-07-20 11:09:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796875310764032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796875310764032[0;39m ==> Parameters: 
2022-07-20 11:09:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796875310764032[0;39m <==    Updates: 0
2022-07-20 11:09:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796875310764032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:09:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796896227758080[0;39m 生成今日电子书快照开始
2022-07-20 11:09:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796896227758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796896227758080[0;39m ==> Parameters: 
2022-07-20 11:09:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796896227758080[0;39m <==    Updates: 0
2022-07-20 11:09:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796896227758080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:09:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796917203472384[0;39m 生成今日电子书快照开始
2022-07-20 11:09:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796917203472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796917203472384[0;39m ==> Parameters: 
2022-07-20 11:09:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796917203472384[0;39m <==    Updates: 0
2022-07-20 11:09:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796917203472384[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 11:09:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796938170798080[0;39m 生成今日电子书快照开始
2022-07-20 11:09:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796938170798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:09:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796938170798080[0;39m ==> Parameters: 
2022-07-20 11:09:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796938170798080[0;39m <==    Updates: 0
2022-07-20 11:09:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796938170798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796959188455424[0;39m 生成今日电子书快照开始
2022-07-20 11:10:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796959188455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796959188455424[0;39m ==> Parameters: 
2022-07-20 11:10:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796959188455424[0;39m <==    Updates: 0
2022-07-20 11:10:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796959188455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204796980151586816[0;39m 生成今日电子书快照开始
2022-07-20 11:10:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796980151586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796980151586816[0;39m ==> Parameters: 
2022-07-20 11:10:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204796980151586816[0;39m <==    Updates: 0
2022-07-20 11:10:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204796980151586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204796980159975424[0;39m 更新电子书下的文档数据开始
2022-07-20 11:10:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796980159975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:10:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796980159975424[0;39m ==> Parameters: 
2022-07-20 11:10:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204796980159975424[0;39m <==    Updates: 7
2022-07-20 11:10:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204796980159975424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:10:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797001123106816[0;39m 生成今日电子书快照开始
2022-07-20 11:10:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797001123106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797001123106816[0;39m ==> Parameters: 
2022-07-20 11:10:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797001123106816[0;39m <==    Updates: 0
2022-07-20 11:10:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797001123106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797022111404032[0;39m 生成今日电子书快照开始
2022-07-20 11:10:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797022111404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797022111404032[0;39m ==> Parameters: 
2022-07-20 11:10:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797022111404032[0;39m <==    Updates: 0
2022-07-20 11:10:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797022111404032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797043036786688[0;39m 生成今日电子书快照开始
2022-07-20 11:10:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797043036786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797043036786688[0;39m ==> Parameters: 
2022-07-20 11:10:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797043036786688[0;39m <==    Updates: 0
2022-07-20 11:10:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797043036786688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797064008306688[0;39m 生成今日电子书快照开始
2022-07-20 11:10:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797064008306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797064008306688[0;39m ==> Parameters: 
2022-07-20 11:10:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797064008306688[0;39m <==    Updates: 0
2022-07-20 11:10:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797064008306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797084963049472[0;39m 生成今日电子书快照开始
2022-07-20 11:10:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797084963049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797084963049472[0;39m ==> Parameters: 
2022-07-20 11:10:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797084963049472[0;39m <==    Updates: 0
2022-07-20 11:10:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797084963049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204797105989095424[0;39m 更新电子书下的文档数据开始
2022-07-20 11:10:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797105989095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:10:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797105989095424[0;39m ==> Parameters: 
2022-07-20 11:10:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797105989095424[0;39m <==    Updates: 7
2022-07-20 11:10:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204797105989095424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:10:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797105993289728[0;39m 生成今日电子书快照开始
2022-07-20 11:10:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797105993289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797105993289728[0;39m ==> Parameters: 
2022-07-20 11:10:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797105993289728[0;39m <==    Updates: 0
2022-07-20 11:10:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797105993289728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797126906089472[0;39m 生成今日电子书快照开始
2022-07-20 11:10:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797126906089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797126906089472[0;39m ==> Parameters: 
2022-07-20 11:10:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797126906089472[0;39m <==    Updates: 0
2022-07-20 11:10:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797126906089472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:10:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797147898580992[0;39m 生成今日电子书快照开始
2022-07-20 11:10:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797147898580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797147898580992[0;39m ==> Parameters: 
2022-07-20 11:10:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797147898580992[0;39m <==    Updates: 0
2022-07-20 11:10:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797147898580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797168891072512[0;39m 生成今日电子书快照开始
2022-07-20 11:10:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797168891072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797168891072512[0;39m ==> Parameters: 
2022-07-20 11:10:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797168891072512[0;39m <==    Updates: 0
2022-07-20 11:10:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797168891072512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:10:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797189837426688[0;39m 生成今日电子书快照开始
2022-07-20 11:10:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797189837426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:10:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797189837426688[0;39m ==> Parameters: 
2022-07-20 11:10:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797189837426688[0;39m <==    Updates: 0
2022-07-20 11:10:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797189837426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:11:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797210821529600[0;39m 生成今日电子书快照开始
2022-07-20 11:11:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797210821529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797210821529600[0;39m ==> Parameters: 
2022-07-20 11:11:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797210821529600[0;39m <==    Updates: 0
2022-07-20 11:11:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797210821529600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:11:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204797231780466688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:11:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797231780466688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:11:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797231780466688[0;39m ==> Parameters: 
2022-07-20 11:11:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797231780466688[0;39m <==    Updates: 7
2022-07-20 11:11:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204797231780466688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:11:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797231788855296[0;39m 生成今日电子书快照开始
2022-07-20 11:11:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797231788855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797231788855296[0;39m ==> Parameters: 
2022-07-20 11:11:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797231788855296[0;39m <==    Updates: 0
2022-07-20 11:11:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797231788855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:11:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797252739403776[0;39m 生成今日电子书快照开始
2022-07-20 11:11:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797252739403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797252739403776[0;39m ==> Parameters: 
2022-07-20 11:11:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797252739403776[0;39m <==    Updates: 0
2022-07-20 11:11:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797252739403776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:11:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797273719312384[0;39m 生成今日电子书快照开始
2022-07-20 11:11:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797273719312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797273719312384[0;39m ==> Parameters: 
2022-07-20 11:11:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797273719312384[0;39m <==    Updates: 0
2022-07-20 11:11:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797273719312384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:11:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797294699220992[0;39m 生成今日电子书快照开始
2022-07-20 11:11:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797294699220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797294699220992[0;39m ==> Parameters: 
2022-07-20 11:11:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797294699220992[0;39m <==    Updates: 0
2022-07-20 11:11:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797294699220992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:11:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797315695906816[0;39m 生成今日电子书快照开始
2022-07-20 11:11:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797315695906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797315695906816[0;39m ==> Parameters: 
2022-07-20 11:11:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797315695906816[0;39m <==    Updates: 0
2022-07-20 11:11:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797315695906816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:11:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797336638066688[0;39m 生成今日电子书快照开始
2022-07-20 11:11:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797336638066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797336638066688[0;39m ==> Parameters: 
2022-07-20 11:11:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797336638066688[0;39m <==    Updates: 0
2022-07-20 11:11:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797336638066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:11:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204797357592809472[0;39m 更新电子书下的文档数据开始
2022-07-20 11:11:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797357592809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:11:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797357592809472[0;39m ==> Parameters: 
2022-07-20 11:11:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797357592809472[0;39m <==    Updates: 7
2022-07-20 11:11:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204797357592809472[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-20 11:11:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797357617975296[0;39m 生成今日电子书快照开始
2022-07-20 11:11:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797357617975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797357617975296[0;39m ==> Parameters: 
2022-07-20 11:11:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797357617975296[0;39m <==    Updates: 0
2022-07-20 11:11:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797357617975296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:11:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797378568523776[0;39m 生成今日电子书快照开始
2022-07-20 11:11:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797378568523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797378568523776[0;39m ==> Parameters: 
2022-07-20 11:11:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797378568523776[0;39m <==    Updates: 0
2022-07-20 11:11:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797378568523776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:11:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797399548432384[0;39m 生成今日电子书快照开始
2022-07-20 11:11:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797399548432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797399548432384[0;39m ==> Parameters: 
2022-07-20 11:11:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797399548432384[0;39m <==    Updates: 0
2022-07-20 11:11:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797399548432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:11:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797420561895424[0;39m 生成今日电子书快照开始
2022-07-20 11:11:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797420561895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797420561895424[0;39m ==> Parameters: 
2022-07-20 11:11:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797420561895424[0;39m <==    Updates: 0
2022-07-20 11:11:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797420561895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:11:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797441541804032[0;39m 生成今日电子书快照开始
2022-07-20 11:11:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797441541804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:11:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797441541804032[0;39m ==> Parameters: 
2022-07-20 11:11:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797441541804032[0;39m <==    Updates: 0
2022-07-20 11:11:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797441541804032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:12:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797462458798080[0;39m 生成今日电子书快照开始
2022-07-20 11:12:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797462458798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797462458798080[0;39m ==> Parameters: 
2022-07-20 11:12:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797462458798080[0;39m <==    Updates: 0
2022-07-20 11:12:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797462458798080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:12:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797483459678208[0;39m 生成今日电子书快照开始
2022-07-20 11:12:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797483459678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797483459678208[0;39m ==> Parameters: 
2022-07-20 11:12:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797483459678208[0;39m <==    Updates: 0
2022-07-20 11:12:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797483459678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:12:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204797483472261120[0;39m 更新电子书下的文档数据开始
2022-07-20 11:12:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797483472261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:12:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797483472261120[0;39m ==> Parameters: 
2022-07-20 11:12:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797483472261120[0;39m <==    Updates: 7
2022-07-20 11:12:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204797483472261120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:12:05.564 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204795256636575744[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:12:05.565 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m204795256636575744[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 11:12:05.565 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m204795256636575744[0;39m 登录校验开始，token：204772700709851136
2022-07-20 11:12:05.598 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m204795256636575744[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 11:12:05.599 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204797485930123264[0;39m ------------- 开始 -------------
2022-07-20 11:12:05.599 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204797485930123264[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-20 11:12:05.600 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204797485930123264[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-20 11:12:05.600 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204797485930123264[0;39m 远程地址: 127.0.0.1
2022-07-20 11:12:05.600 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204797485930123264[0;39m 请求参数: [{"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p><code>　　　　自定义启动端开始的文案网址：patorjk.com</code><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">2. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">&nbsp;</span><span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><blockquote><p><font face=\"黑体\" size=\"3\">3.&nbsp;/*</font></p><pre><code><xmp><font face=\"黑体\" size=\"3\">&lt;font&gt; Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n* 正常情况：user？id=1\n* Restful：/user/1\n* *&lt;/font&gt;</font><span style=\"font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em;\"></span></xmp></code></pre></blockquote><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1}]
2022-07-20 11:12:05.601 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204797485930123264[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-20 11:12:05.601 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204797485930123264[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 8(Integer), 1(Integer), 202715069841281024(Long)
2022-07-20 11:12:05.606 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204797485930123264[0;39m <==    Updates: 1
2022-07-20 11:12:05.607 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204797485930123264[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-20 11:12:05.607 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204797485930123264[0;39m ==> Parameters: <blockquote><h2 id="343h7">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p><code>　　　　自定义启动端开始的文案网址：patorjk.com</code><br></p><blockquote><p><font size="4" face="Times New Roman">2. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size="4" face="Times New Roman">@GetMapping("/hello")<br>    public String hello(){<br>        return "hello";<br>    }</font></p></blockquote><div><div><p><font size="3" face="黑体">&nbsp;</font><font size="3" face="楷体"> &nbsp;<span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">&nbsp;&nbsp;&nbsp;</span><span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face="楷体"><font size="3">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style="font-size: medium;">&nbsp;</span><span style="font-size: medium;">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><blockquote><p><font face="黑体" size="3">3.&nbsp;/*</font></p><pre><code><xmp><font face="黑体" size="3">&lt;font&gt; Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）
* 正常情况：user？id=1
* Restful：/user/1
* *&lt;/font&gt;</font><span style="font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em;"></span></xmp></code></pre></blockquote><p><br></p><blockquote><p><font face="黑体" size="4">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="background-color: rgb(139, 170, 74);">&nbsp;properties-&gt;yml格式网站：<span style="font-size: 1em;">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face="黑体" size="4"><br></font></p><p><i><font size="3"><u><font color="#c24f4a">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face="黑体" size="4"><br></font></p><span style="background-color: rgb(139, 170, 74);"></span></blockquote><blockquote><p><font face="仿宋" size="4">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=""><font size="3" face="仿宋">&nbsp;</font><font size="3" face="黑体">添加依赖：</font></li></ul><blockquote><div><pre><font size="3" face="Times New Roman">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size="4">勾选Build project automatically</font></li></ul><p><img src="https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg" style="max-width:100%;" width="100%"><br></p><hr><ul><li><font size="4" face="仿宋">按两次shift键</font></li><li><img src="https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg" style="max-width:100%;"><br></li></ul><p><br></p><ul><li><img src="https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg" style="max-width:100%;"><br></li></ul><hr><ul><li style="text-align:center;"><span style="background-color: rgb(194, 79, 74);"><font size="5">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style="text-align: center;"><font size="3"><br></font></div><ul><li><br></li><li><img src="https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg"></li></ul></div><p><br></p></div>(String), 202715069841281024(Long)
2022-07-20 11:12:05.608 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204797485930123264[0;39m <==    Updates: 1
2022-07-20 11:12:05.675 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204797485930123264[0;39m 返回结果: {"success":true}
2022-07-20 11:12:05.676 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204797485930123264[0;39m ------------- 结束 耗时：77 ms -------------
2022-07-20 11:12:05.676 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204797485930123264[0;39m ------------- LoginInterceptor 结束 耗时：111 ms -------------
2022-07-20 11:12:05.687 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204797486299222016[0;39m ------------- 开始 -------------
2022-07-20 11:12:05.687 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204797486299222016[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:12:05.687 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204797486299222016[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:12:05.688 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204797486299222016[0;39m 远程地址: 127.0.0.1
2022-07-20 11:12:05.688 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204797486299222016[0;39m 请求参数: [202714600712572928]
2022-07-20 11:12:05.689 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204797486299222016[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:12:05.689 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204797486299222016[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:12:05.690 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:12:05.690 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:12:05.691 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:12:05.691 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:12:05.691 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:12:05.691 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:12:05.691 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:12:05.692 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:12:05.692 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:12:05.692 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:12:05.692 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:12:05.692 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:12:05.693 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:12:05.693 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797486299222016[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:12:05.693 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204797486299222016[0;39m <==      Total: 13
2022-07-20 11:12:05.694 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204797486299222016[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:12:05.694 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204797486299222016[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-20 11:12:07.574 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204797494213873664[0;39m ------------- 开始 -------------
2022-07-20 11:12:07.574 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204797494213873664[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:12:07.575 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204797494213873664[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:12:07.575 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204797494213873664[0;39m 远程地址: 127.0.0.1
2022-07-20 11:12:07.575 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204797494213873664[0;39m 请求参数: [202715069841281024]
2022-07-20 11:12:07.576 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204797494213873664[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:12:07.576 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204797494213873664[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:12:07.577 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204797494213873664[0;39m <==    Columns: id, content
2022-07-20 11:12:07.577 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204797494213873664[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:12:07.578 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204797494213873664[0;39m <==      Total: 1
2022-07-20 11:12:07.578 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204797494213873664[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:12:07.578 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204797494213873664[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:12:07.586 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204797494213873664[0;39m <==    Updates: 1
2022-07-20 11:12:07.586 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204797494213873664[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p><code>　　　　自定义启动端开始的文案网址：patorjk.com</code><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">2. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">&nbsp;</span><span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><blockquote><p><font face=\"黑体\" size=\"3\">3.&nbsp;/*</font></p><pre><code><xmp><font face=\"黑体\" size=\"3\">&lt;font&gt; Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n* 正常情况：user？id=1\n* Restful：/user/1\n* *&lt;/font&gt;</font><span style=\"font-family: SFMono-Regular, Consolas, &quot;Liberation Mono&quot;, Menlo, Courier, monospace; font-size: 1em;\"></span></xmp></code></pre></blockquote><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","success":true}
2022-07-20 11:12:07.586 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204797494213873664[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-20 11:12:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797504406032384[0;39m 生成今日电子书快照开始
2022-07-20 11:12:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797504406032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797504406032384[0;39m ==> Parameters: 
2022-07-20 11:12:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797504406032384[0;39m <==    Updates: 0
2022-07-20 11:12:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797504406032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:12:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797525406912512[0;39m 生成今日电子书快照开始
2022-07-20 11:12:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797525406912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797525406912512[0;39m ==> Parameters: 
2022-07-20 11:12:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797525406912512[0;39m <==    Updates: 0
2022-07-20 11:12:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797525406912512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:12:20.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797546332295168[0;39m 生成今日电子书快照开始
2022-07-20 11:12:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797546332295168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797546332295168[0;39m ==> Parameters: 
2022-07-20 11:12:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797546332295168[0;39m <==    Updates: 0
2022-07-20 11:12:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797546332295168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:12:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797567366729728[0;39m 生成今日电子书快照开始
2022-07-20 11:12:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797567366729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797567366729728[0;39m ==> Parameters: 
2022-07-20 11:12:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797567366729728[0;39m <==    Updates: 0
2022-07-20 11:12:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797567366729728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:12:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797588334055424[0;39m 生成今日电子书快照开始
2022-07-20 11:12:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797588334055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797588334055424[0;39m ==> Parameters: 
2022-07-20 11:12:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797588334055424[0;39m <==    Updates: 0
2022-07-20 11:12:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797588334055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:12:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797609251049472[0;39m 生成今日电子书快照开始
2022-07-20 11:12:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797609251049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797609251049472[0;39m ==> Parameters: 
2022-07-20 11:12:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797609251049472[0;39m <==    Updates: 0
2022-07-20 11:12:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797609251049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:12:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204797609259438080[0;39m 更新电子书下的文档数据开始
2022-07-20 11:12:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797609259438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:12:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797609259438080[0;39m ==> Parameters: 
2022-07-20 11:12:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797609259438080[0;39m <==    Updates: 7
2022-07-20 11:12:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204797609259438080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:12:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797630218375168[0;39m 生成今日电子书快照开始
2022-07-20 11:12:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797630218375168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797630218375168[0;39m ==> Parameters: 
2022-07-20 11:12:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797630218375168[0;39m <==    Updates: 0
2022-07-20 11:12:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797630218375168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:12:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797651202478080[0;39m 生成今日电子书快照开始
2022-07-20 11:12:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797651202478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797651202478080[0;39m ==> Parameters: 
2022-07-20 11:12:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797651202478080[0;39m <==    Updates: 0
2022-07-20 11:12:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797651202478080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:12:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797672182386688[0;39m 生成今日电子书快照开始
2022-07-20 11:12:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797672182386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797672182386688[0;39m ==> Parameters: 
2022-07-20 11:12:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797672182386688[0;39m <==    Updates: 0
2022-07-20 11:12:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797672182386688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:12:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797693166489600[0;39m 生成今日电子书快照开始
2022-07-20 11:12:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797693166489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:12:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797693166489600[0;39m ==> Parameters: 
2022-07-20 11:12:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797693166489600[0;39m <==    Updates: 0
2022-07-20 11:12:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797693166489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:12:59.405 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204795135165337600[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:12:59.405 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m204795135165337600[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 11:12:59.405 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m204795135165337600[0;39m 登录校验开始，token：204772700709851136
2022-07-20 11:12:59.443 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m204795135165337600[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 11:12:59.444 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204797711772422144[0;39m ------------- 开始 -------------
2022-07-20 11:12:59.444 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204797711772422144[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-20 11:12:59.445 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204797711772422144[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-20 11:12:59.445 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204797711772422144[0;39m 远程地址: 127.0.0.1
2022-07-20 11:12:59.445 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204797711772422144[0;39m 请求参数: [{"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p><code>　　　　自定义启动端开始的文案网址：patorjk.com</code><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">2. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">&nbsp;</span><span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><blockquote><p><font face=\"黑体\" size=\"4\">3.&nbsp;</font></p><pre><code><xmp><font size=\"4\" face=\"黑体\"> Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n 正常情况：user？id=1\n Restful：/user/1</font><br></xmp></code></pre></blockquote><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1}]
2022-07-20 11:12:59.446 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204797711772422144[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-20 11:12:59.446 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204797711772422144[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 8(Integer), 1(Integer), 202715069841281024(Long)
2022-07-20 11:12:59.446 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204797711772422144[0;39m <==    Updates: 1
2022-07-20 11:12:59.447 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204797711772422144[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-20 11:12:59.447 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204797711772422144[0;39m ==> Parameters: <blockquote><h2 id="343h7">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p><code>　　　　自定义启动端开始的文案网址：patorjk.com</code><br></p><blockquote><p><font size="4" face="Times New Roman">2. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size="4" face="Times New Roman">@GetMapping("/hello")<br>    public String hello(){<br>        return "hello";<br>    }</font></p></blockquote><div><div><p><font size="3" face="黑体">&nbsp;</font><font size="3" face="楷体"> &nbsp;<span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">&nbsp;&nbsp;&nbsp;</span><span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face="楷体"><font size="3">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style="font-size: medium;">&nbsp;</span><span style="font-size: medium;">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><blockquote><p><font face="黑体" size="4">3.&nbsp;</font></p><pre><code><xmp><font size="4" face="黑体"> Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）
 正常情况：user？id=1
 Restful：/user/1</font><br></xmp></code></pre></blockquote><p><br></p><blockquote><p><font face="黑体" size="4">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="background-color: rgb(139, 170, 74);">&nbsp;properties-&gt;yml格式网站：<span style="font-size: 1em;">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face="黑体" size="4"><br></font></p><p><i><font size="3"><u><font color="#c24f4a">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face="黑体" size="4"><br></font></p><span style="background-color: rgb(139, 170, 74);"></span></blockquote><blockquote><p><font face="仿宋" size="4">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=""><font size="3" face="仿宋">&nbsp;</font><font size="3" face="黑体">添加依赖：</font></li></ul><blockquote><div><pre><font size="3" face="Times New Roman">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size="4">勾选Build project automatically</font></li></ul><p><img src="https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg" style="max-width:100%;" width="100%"><br></p><hr><ul><li><font size="4" face="仿宋">按两次shift键</font></li><li><img src="https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg" style="max-width:100%;"><br></li></ul><p><br></p><ul><li><img src="https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg" style="max-width:100%;"><br></li></ul><hr><ul><li style="text-align:center;"><span style="background-color: rgb(194, 79, 74);"><font size="5">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style="text-align: center;"><font size="3"><br></font></div><ul><li><br></li><li><img src="https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg"></li></ul></div><p><br></p></div>(String), 202715069841281024(Long)
2022-07-20 11:12:59.448 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204797711772422144[0;39m <==    Updates: 1
2022-07-20 11:12:59.475 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204797711772422144[0;39m 返回结果: {"success":true}
2022-07-20 11:12:59.475 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204797711772422144[0;39m ------------- 结束 耗时：31 ms -------------
2022-07-20 11:12:59.477 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204797711772422144[0;39m ------------- LoginInterceptor 结束 耗时：72 ms -------------
2022-07-20 11:12:59.489 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204797711961165824[0;39m ------------- 开始 -------------
2022-07-20 11:12:59.489 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204797711961165824[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:12:59.489 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204797711961165824[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:12:59.490 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204797711961165824[0;39m 远程地址: 127.0.0.1
2022-07-20 11:12:59.490 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204797711961165824[0;39m 请求参数: [202714600712572928]
2022-07-20 11:12:59.490 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204797711961165824[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:12:59.491 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204797711961165824[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:12:59.492 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:12:59.492 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:12:59.493 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:12:59.493 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:12:59.493 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:12:59.493 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:12:59.493 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:12:59.494 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:12:59.494 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:12:59.494 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:12:59.494 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:12:59.494 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:12:59.494 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:12:59.495 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797711961165824[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:12:59.495 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204797711961165824[0;39m <==      Total: 13
2022-07-20 11:12:59.496 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204797711961165824[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:12:59.496 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204797711961165824[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-20 11:13:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797714125426688[0;39m 生成今日电子书快照开始
2022-07-20 11:13:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797714125426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797714125426688[0;39m ==> Parameters: 
2022-07-20 11:13:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797714125426688[0;39m <==    Updates: 0
2022-07-20 11:13:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797714125426688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:13:01.052 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204797718516862976[0;39m ------------- 开始 -------------
2022-07-20 11:13:01.053 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204797718516862976[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:13:01.053 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204797718516862976[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:13:01.053 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204797718516862976[0;39m 远程地址: 127.0.0.1
2022-07-20 11:13:01.054 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204797718516862976[0;39m 请求参数: [202715069841281024]
2022-07-20 11:13:01.054 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204797718516862976[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:13:01.055 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204797718516862976[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:13:01.056 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204797718516862976[0;39m <==    Columns: id, content
2022-07-20 11:13:01.056 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204797718516862976[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:13:01.057 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204797718516862976[0;39m <==      Total: 1
2022-07-20 11:13:01.058 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204797718516862976[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:13:01.058 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204797718516862976[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:13:01.070 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204797718516862976[0;39m <==    Updates: 1
2022-07-20 11:13:01.071 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204797718516862976[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p><code>　　　　自定义启动端开始的文案网址：patorjk.com</code><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">2. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">&nbsp;</span><span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><blockquote><p><font face=\"黑体\" size=\"4\">3.&nbsp;</font></p><pre><code><xmp><font size=\"4\" face=\"黑体\"> Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n 正常情况：user？id=1\n Restful：/user/1</font><br></xmp></code></pre></blockquote><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","success":true}
2022-07-20 11:13:01.071 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204797718516862976[0;39m ------------- 结束 耗时：19 ms -------------
2022-07-20 11:13:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204797735138889728[0;39m 更新电子书下的文档数据开始
2022-07-20 11:13:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797735138889728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:13:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797735138889728[0;39m ==> Parameters: 
2022-07-20 11:13:05.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797735138889728[0;39m <==    Updates: 7
2022-07-20 11:13:05.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204797735138889728[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 11:13:05.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797735164055552[0;39m 生成今日电子书快照开始
2022-07-20 11:13:05.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797735164055552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:05.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797735164055552[0;39m ==> Parameters: 
2022-07-20 11:13:05.025 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797735164055552[0;39m <==    Updates: 0
2022-07-20 11:13:05.026 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797735164055552[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:13:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797756102021120[0;39m 生成今日电子书快照开始
2022-07-20 11:13:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797756102021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797756102021120[0;39m ==> Parameters: 
2022-07-20 11:13:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797756102021120[0;39m <==    Updates: 0
2022-07-20 11:13:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797756102021120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:13:14.714 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204796382073196544[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:13:14.714 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m204796382073196544[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 11:13:14.714 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m204796382073196544[0;39m 登录校验开始，token：204772700709851136
2022-07-20 11:13:14.748 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m204796382073196544[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 11:13:14.749 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204797775966244864[0;39m ------------- 开始 -------------
2022-07-20 11:13:14.749 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204797775966244864[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-20 11:13:14.749 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204797775966244864[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-20 11:13:14.750 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204797775966244864[0;39m 远程地址: 127.0.0.1
2022-07-20 11:13:14.750 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204797775966244864[0;39m 请求参数: [{"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p><code>　　　　自定义启动端开始的文案网址：patorjk.com</code><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">2. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">&nbsp;</span><span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><blockquote><p><font face=\"黑体\" size=\"4\">3.&nbsp;</font></p><pre><code><xmp><font size=\"4\" face=\"楷体\">Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n 正常情况：user？id=1\n Restful：/user/1</font></xmp></code></pre></blockquote><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1}]
2022-07-20 11:13:14.751 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204797775966244864[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-20 11:13:14.752 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204797775966244864[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 8(Integer), 1(Integer), 202715069841281024(Long)
2022-07-20 11:13:14.753 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204797775966244864[0;39m <==    Updates: 1
2022-07-20 11:13:14.753 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204797775966244864[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-20 11:13:14.754 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204797775966244864[0;39m ==> Parameters: <blockquote><h2 id="343h7">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p><code>　　　　自定义启动端开始的文案网址：patorjk.com</code><br></p><blockquote><p><font size="4" face="Times New Roman">2. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size="4" face="Times New Roman">@GetMapping("/hello")<br>    public String hello(){<br>        return "hello";<br>    }</font></p></blockquote><div><div><p><font size="3" face="黑体">&nbsp;</font><font size="3" face="楷体"> &nbsp;<span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">&nbsp;&nbsp;&nbsp;</span><span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face="楷体"><font size="3">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style="font-size: medium;">&nbsp;</span><span style="font-size: medium;">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><blockquote><p><font face="黑体" size="4">3.&nbsp;</font></p><pre><code><xmp><font size="4" face="楷体">Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）
 正常情况：user？id=1
 Restful：/user/1</font></xmp></code></pre></blockquote><p><br></p><blockquote><p><font face="黑体" size="4">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="background-color: rgb(139, 170, 74);">&nbsp;properties-&gt;yml格式网站：<span style="font-size: 1em;">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face="黑体" size="4"><br></font></p><p><i><font size="3"><u><font color="#c24f4a">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face="黑体" size="4"><br></font></p><span style="background-color: rgb(139, 170, 74);"></span></blockquote><blockquote><p><font face="仿宋" size="4">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=""><font size="3" face="仿宋">&nbsp;</font><font size="3" face="黑体">添加依赖：</font></li></ul><blockquote><div><pre><font size="3" face="Times New Roman">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size="4">勾选Build project automatically</font></li></ul><p><img src="https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg" style="max-width:100%;" width="100%"><br></p><hr><ul><li><font size="4" face="仿宋">按两次shift键</font></li><li><img src="https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg" style="max-width:100%;"><br></li></ul><p><br></p><ul><li><img src="https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg" style="max-width:100%;"><br></li></ul><hr><ul><li style="text-align:center;"><span style="background-color: rgb(194, 79, 74);"><font size="5">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style="text-align: center;"><font size="3"><br></font></div><ul><li><br></li><li><img src="https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg"></li></ul></div><p><br></p></div>(String), 202715069841281024(Long)
2022-07-20 11:13:14.754 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204797775966244864[0;39m <==    Updates: 1
2022-07-20 11:13:14.836 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204797775966244864[0;39m 返回结果: {"success":true}
2022-07-20 11:13:14.836 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204797775966244864[0;39m ------------- 结束 耗时：87 ms -------------
2022-07-20 11:13:14.837 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204797775966244864[0;39m ------------- LoginInterceptor 结束 耗时：123 ms -------------
2022-07-20 11:13:14.845 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204797776368898048[0;39m ------------- 开始 -------------
2022-07-20 11:13:14.845 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204797776368898048[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:13:14.845 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204797776368898048[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:13:14.845 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204797776368898048[0;39m 远程地址: 127.0.0.1
2022-07-20 11:13:14.846 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204797776368898048[0;39m 请求参数: [202714600712572928]
2022-07-20 11:13:14.846 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204797776368898048[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:13:14.847 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204797776368898048[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:13:14.847 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:13:14.848 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:13:14.848 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:13:14.848 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:13:14.848 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:13:14.848 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:13:14.849 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:13:14.849 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:13:14.849 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:13:14.849 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:13:14.849 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:13:14.850 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:13:14.850 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:13:14.850 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204797776368898048[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:13:14.850 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204797776368898048[0;39m <==      Total: 13
2022-07-20 11:13:14.851 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204797776368898048[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:13:14.851 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204797776368898048[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-20 11:13:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797777044180992[0;39m 生成今日电子书快照开始
2022-07-20 11:13:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797777044180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797777044180992[0;39m ==> Parameters: 
2022-07-20 11:13:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797777044180992[0;39m <==    Updates: 0
2022-07-20 11:13:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797777044180992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:13:16.293 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204797782442250240[0;39m ------------- 开始 -------------
2022-07-20 11:13:16.294 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204797782442250240[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:13:16.294 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204797782442250240[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:13:16.294 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204797782442250240[0;39m 远程地址: 127.0.0.1
2022-07-20 11:13:16.295 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204797782442250240[0;39m 请求参数: [202715069841281024]
2022-07-20 11:13:16.295 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204797782442250240[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:13:16.296 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204797782442250240[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:13:16.296 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204797782442250240[0;39m <==    Columns: id, content
2022-07-20 11:13:16.297 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204797782442250240[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:13:16.297 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204797782442250240[0;39m <==      Total: 1
2022-07-20 11:13:16.298 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204797782442250240[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:13:16.298 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204797782442250240[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:13:16.319 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204797782442250240[0;39m <==    Updates: 1
2022-07-20 11:13:16.319 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204797782442250240[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p><code>　　　　自定义启动端开始的文案网址：patorjk.com</code><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">2. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">&nbsp;</span><span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><blockquote><p><font face=\"黑体\" size=\"4\">3.&nbsp;</font></p><pre><code><xmp><font size=\"4\" face=\"楷体\">Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n 正常情况：user？id=1\n Restful：/user/1</font></xmp></code></pre></blockquote><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","success":true}
2022-07-20 11:13:16.320 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204797782442250240[0;39m ------------- 结束 耗时：27 ms -------------
2022-07-20 11:13:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797798019895296[0;39m 生成今日电子书快照开始
2022-07-20 11:13:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797798019895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797798019895296[0;39m ==> Parameters: 
2022-07-20 11:13:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797798019895296[0;39m <==    Updates: 0
2022-07-20 11:13:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797798019895296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:13:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797818999803904[0;39m 生成今日电子书快照开始
2022-07-20 11:13:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797818999803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797818999803904[0;39m ==> Parameters: 
2022-07-20 11:13:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797818999803904[0;39m <==    Updates: 0
2022-07-20 11:13:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797818999803904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:13:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797839954546688[0;39m 生成今日电子书快照开始
2022-07-20 11:13:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797839954546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797839954546688[0;39m ==> Parameters: 
2022-07-20 11:13:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797839954546688[0;39m <==    Updates: 0
2022-07-20 11:13:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797839954546688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:13:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204797860951232512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:13:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797860951232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:13:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797860951232512[0;39m ==> Parameters: 
2022-07-20 11:13:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797860951232512[0;39m <==    Updates: 7
2022-07-20 11:13:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204797860951232512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:13:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797860955426816[0;39m 生成今日电子书快照开始
2022-07-20 11:13:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797860955426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797860955426816[0;39m ==> Parameters: 
2022-07-20 11:13:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797860955426816[0;39m <==    Updates: 0
2022-07-20 11:13:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797860955426816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:13:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797881893392384[0;39m 生成今日电子书快照开始
2022-07-20 11:13:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797881893392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797881893392384[0;39m ==> Parameters: 
2022-07-20 11:13:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797881893392384[0;39m <==    Updates: 0
2022-07-20 11:13:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797881893392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:13:45.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797902848135168[0;39m 生成今日电子书快照开始
2022-07-20 11:13:45.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797902848135168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:45.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797902848135168[0;39m ==> Parameters: 
2022-07-20 11:13:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797902848135168[0;39m <==    Updates: 0
2022-07-20 11:13:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797902848135168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:13:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797923832238080[0;39m 生成今日电子书快照开始
2022-07-20 11:13:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797923832238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797923832238080[0;39m ==> Parameters: 
2022-07-20 11:13:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797923832238080[0;39m <==    Updates: 0
2022-07-20 11:13:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797923832238080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:13:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797944816340992[0;39m 生成今日电子书快照开始
2022-07-20 11:13:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797944816340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:13:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797944816340992[0;39m ==> Parameters: 
2022-07-20 11:13:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797944816340992[0;39m <==    Updates: 0
2022-07-20 11:13:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797944816340992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797965829804032[0;39m 生成今日电子书快照开始
2022-07-20 11:14:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797965829804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797965829804032[0;39m ==> Parameters: 
2022-07-20 11:14:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797965829804032[0;39m <==    Updates: 0
2022-07-20 11:14:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797965829804032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204797986788741120[0;39m 生成今日电子书快照开始
2022-07-20 11:14:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797986788741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797986788741120[0;39m ==> Parameters: 
2022-07-20 11:14:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204797986788741120[0;39m <==    Updates: 0
2022-07-20 11:14:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204797986788741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204797986801324032[0;39m 更新电子书下的文档数据开始
2022-07-20 11:14:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797986801324032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:14:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797986801324032[0;39m ==> Parameters: 
2022-07-20 11:14:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204797986801324032[0;39m <==    Updates: 7
2022-07-20 11:14:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204797986801324032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:14:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798007772844032[0;39m 生成今日电子书快照开始
2022-07-20 11:14:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798007772844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798007772844032[0;39m ==> Parameters: 
2022-07-20 11:14:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798007772844032[0;39m <==    Updates: 0
2022-07-20 11:14:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798007772844032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798028698226688[0;39m 生成今日电子书快照开始
2022-07-20 11:14:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798028698226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798028698226688[0;39m ==> Parameters: 
2022-07-20 11:14:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798028698226688[0;39m <==    Updates: 0
2022-07-20 11:14:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798028698226688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:14:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798049678135296[0;39m 生成今日电子书快照开始
2022-07-20 11:14:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798049678135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798049678135296[0;39m ==> Parameters: 
2022-07-20 11:14:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798049678135296[0;39m <==    Updates: 0
2022-07-20 11:14:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798049678135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798070662238208[0;39m 生成今日电子书快照开始
2022-07-20 11:14:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798070662238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798070662238208[0;39m ==> Parameters: 
2022-07-20 11:14:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798070662238208[0;39m <==    Updates: 0
2022-07-20 11:14:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798070662238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798091642146816[0;39m 生成今日电子书快照开始
2022-07-20 11:14:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798091642146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798091642146816[0;39m ==> Parameters: 
2022-07-20 11:14:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798091642146816[0;39m <==    Updates: 0
2022-07-20 11:14:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798091642146816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:14:35.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204798112563335168[0;39m 更新电子书下的文档数据开始
2022-07-20 11:14:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798112563335168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:14:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798112563335168[0;39m ==> Parameters: 
2022-07-20 11:14:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798112563335168[0;39m <==    Updates: 7
2022-07-20 11:14:35.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204798112563335168[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:14:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798112571723776[0;39m 生成今日电子书快照开始
2022-07-20 11:14:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798112571723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798112571723776[0;39m ==> Parameters: 
2022-07-20 11:14:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798112571723776[0;39m <==    Updates: 0
2022-07-20 11:14:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798112571723776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798133560020992[0;39m 生成今日电子书快照开始
2022-07-20 11:14:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798133560020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798133560020992[0;39m ==> Parameters: 
2022-07-20 11:14:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798133560020992[0;39m <==    Updates: 0
2022-07-20 11:14:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798133560020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798154560901120[0;39m 生成今日电子书快照开始
2022-07-20 11:14:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798154560901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798154560901120[0;39m ==> Parameters: 
2022-07-20 11:14:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798154560901120[0;39m <==    Updates: 0
2022-07-20 11:14:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798154560901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798175511449600[0;39m 生成今日电子书快照开始
2022-07-20 11:14:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798175511449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798175511449600[0;39m ==> Parameters: 
2022-07-20 11:14:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798175511449600[0;39m <==    Updates: 0
2022-07-20 11:14:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798175511449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:14:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798196487163904[0;39m 生成今日电子书快照开始
2022-07-20 11:14:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798196487163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:14:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798196487163904[0;39m ==> Parameters: 
2022-07-20 11:14:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798196487163904[0;39m <==    Updates: 0
2022-07-20 11:14:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798196487163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:15:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798217475461120[0;39m 生成今日电子书快照开始
2022-07-20 11:15:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798217475461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798217475461120[0;39m ==> Parameters: 
2022-07-20 11:15:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798217475461120[0;39m <==    Updates: 0
2022-07-20 11:15:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798217475461120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:15:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798238400843776[0;39m 生成今日电子书快照开始
2022-07-20 11:15:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798238400843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798238400843776[0;39m ==> Parameters: 
2022-07-20 11:15:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798238400843776[0;39m <==    Updates: 0
2022-07-20 11:15:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798238400843776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:15:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204798238413426688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:15:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798238413426688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:15:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798238413426688[0;39m ==> Parameters: 
2022-07-20 11:15:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798238413426688[0;39m <==    Updates: 7
2022-07-20 11:15:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204798238413426688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:15:09.852 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204797485930123264[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:15:09.852 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m204797485930123264[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 11:15:09.853 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m204797485930123264[0;39m 登录校验开始，token：204772700709851136
2022-07-20 11:15:09.887 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m204797485930123264[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 11:15:09.890 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798258902601728[0;39m ------------- 开始 -------------
2022-07-20 11:15:09.891 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798258902601728[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-20 11:15:09.891 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798258902601728[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-20 11:15:09.892 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798258902601728[0;39m 远程地址: 127.0.0.1
2022-07-20 11:15:09.893 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798258902601728[0;39m 请求参数: [{"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><xmp><font size=\"4\" face=\"楷体\">2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n 正常情况：user？id=1\n Restful：/user/1</font></xmp></blockquote><p><br></p><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">&nbsp;</span><span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1}]
2022-07-20 11:15:09.896 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798258902601728[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-20 11:15:09.897 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798258902601728[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 8(Integer), 1(Integer), 202715069841281024(Long)
2022-07-20 11:15:09.902 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798258902601728[0;39m <==    Updates: 1
2022-07-20 11:15:09.903 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798258902601728[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-20 11:15:09.903 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798258902601728[0;39m ==> Parameters: <blockquote><h2 id="343h7">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style="text-align:center;"><span style="background-color: rgb(77, 128, 191);"><font face="华文楷体" size="3">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><xmp><font size="4" face="楷体">2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）
 正常情况：user？id=1
 Restful：/user/1</font></xmp></blockquote><p><br></p><p><br></p><blockquote><p><font size="4" face="Times New Roman">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size="4" face="Times New Roman">@GetMapping("/hello")<br>    public String hello(){<br>        return "hello";<br>    }</font></p></blockquote><div><div><p><font size="3" face="黑体">&nbsp;</font><font size="3" face="楷体"> &nbsp;<span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">&nbsp;&nbsp;&nbsp;</span><span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face="楷体"><font size="3">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style="font-size: medium;">&nbsp;</span><span style="font-size: medium;">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face="黑体" size="4">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="background-color: rgb(139, 170, 74);">&nbsp;properties-&gt;yml格式网站：<span style="font-size: 1em;">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face="黑体" size="4"><br></font></p><p><i><font size="3"><u><font color="#c24f4a">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face="黑体" size="4"><br></font></p><span style="background-color: rgb(139, 170, 74);"></span></blockquote><blockquote><p><font face="仿宋" size="4">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=""><font size="3" face="仿宋">&nbsp;</font><font size="3" face="黑体">添加依赖：</font></li></ul><blockquote><div><pre><font size="3" face="Times New Roman">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size="4">勾选Build project automatically</font></li></ul><p><img src="https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg" style="max-width:100%;" width="100%"><br></p><hr><ul><li><font size="4" face="仿宋">按两次shift键</font></li><li><img src="https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg" style="max-width:100%;"><br></li></ul><p><br></p><ul><li><img src="https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg" style="max-width:100%;"><br></li></ul><hr><ul><li style="text-align:center;"><span style="background-color: rgb(194, 79, 74);"><font size="5">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style="text-align: center;"><font size="3"><br></font></div><ul><li><br></li><li><img src="https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg"></li></ul></div><p><br></p></div>(String), 202715069841281024(Long)
2022-07-20 11:15:09.904 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798258902601728[0;39m <==    Updates: 1
2022-07-20 11:15:09.983 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798258902601728[0;39m 返回结果: {"success":true}
2022-07-20 11:15:09.984 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798258902601728[0;39m ------------- 结束 耗时：94 ms -------------
2022-07-20 11:15:09.984 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204798258902601728[0;39m ------------- LoginInterceptor 结束 耗时：132 ms -------------
2022-07-20 11:15:09.994 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798259338809344[0;39m ------------- 开始 -------------
2022-07-20 11:15:09.995 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798259338809344[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:15:09.995 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798259338809344[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:15:09.995 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798259338809344[0;39m 远程地址: 127.0.0.1
2022-07-20 11:15:09.995 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798259338809344[0;39m 请求参数: [202714600712572928]
2022-07-20 11:15:09.996 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798259338809344[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:15:09.996 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798259338809344[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:15:09.997 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:15:09.997 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:15:09.997 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:15:09.997 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:15:09.997 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:15:09.998 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:15:09.998 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:15:09.998 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:15:09.998 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:15:09.998 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:15:09.999 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:15:09.999 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:15:09.999 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:15:09.999 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798259338809344[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:15:10.000 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798259338809344[0;39m <==      Total: 13
2022-07-20 11:15:10.000 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798259338809344[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:15:10.001 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798259338809344[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-20 11:15:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798259401723904[0;39m 生成今日电子书快照开始
2022-07-20 11:15:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798259401723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798259401723904[0;39m ==> Parameters: 
2022-07-20 11:15:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798259401723904[0;39m <==    Updates: 0
2022-07-20 11:15:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798259401723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:15:11.033 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798263696691200[0;39m ------------- 开始 -------------
2022-07-20 11:15:11.033 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798263696691200[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:15:11.034 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798263696691200[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:15:11.034 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798263696691200[0;39m 远程地址: 127.0.0.1
2022-07-20 11:15:11.034 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798263696691200[0;39m 请求参数: [202715069841281024]
2022-07-20 11:15:11.035 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798263696691200[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:15:11.035 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798263696691200[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:15:11.036 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798263696691200[0;39m <==    Columns: id, content
2022-07-20 11:15:11.037 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798263696691200[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:15:11.037 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798263696691200[0;39m <==      Total: 1
2022-07-20 11:15:11.038 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798263696691200[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:15:11.038 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798263696691200[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:15:11.061 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798263696691200[0;39m <==    Updates: 1
2022-07-20 11:15:11.061 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798263696691200[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><xmp><font size=\"4\" face=\"楷体\">2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）\n 正常情况：user？id=1\n Restful：/user/1</font></xmp></blockquote><p><br></p><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">&nbsp;</span><span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","success":true}
2022-07-20 11:15:11.061 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798263696691200[0;39m ------------- 结束 耗时：28 ms -------------
2022-07-20 11:15:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798280339689472[0;39m 生成今日电子书快照开始
2022-07-20 11:15:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798280339689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798280339689472[0;39m ==> Parameters: 
2022-07-20 11:15:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798280339689472[0;39m <==    Updates: 0
2022-07-20 11:15:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798280339689472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:15:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798301344763904[0;39m 生成今日电子书快照开始
2022-07-20 11:15:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798301344763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798301344763904[0;39m ==> Parameters: 
2022-07-20 11:15:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798301344763904[0;39m <==    Updates: 0
2022-07-20 11:15:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798301344763904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:15:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798322312089600[0;39m 生成今日电子书快照开始
2022-07-20 11:15:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798322312089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798322312089600[0;39m ==> Parameters: 
2022-07-20 11:15:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798322312089600[0;39m <==    Updates: 0
2022-07-20 11:15:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798322312089600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:15:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798343308775424[0;39m 生成今日电子书快照开始
2022-07-20 11:15:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798343308775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798343308775424[0;39m ==> Parameters: 
2022-07-20 11:15:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798343308775424[0;39m <==    Updates: 0
2022-07-20 11:15:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798343308775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:15:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798364255129600[0;39m 生成今日电子书快照开始
2022-07-20 11:15:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798364255129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798364255129600[0;39m ==> Parameters: 
2022-07-20 11:15:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798364255129600[0;39m <==    Updates: 0
2022-07-20 11:15:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798364255129600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:15:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204798364267712512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:15:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798364267712512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:15:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798364267712512[0;39m ==> Parameters: 
2022-07-20 11:15:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798364267712512[0;39m <==    Updates: 7
2022-07-20 11:15:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204798364267712512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:15:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798385230843904[0;39m 生成今日电子书快照开始
2022-07-20 11:15:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798385230843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798385230843904[0;39m ==> Parameters: 
2022-07-20 11:15:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798385230843904[0;39m <==    Updates: 0
2022-07-20 11:15:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798385230843904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:15:45.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798406164615168[0;39m 生成今日电子书快照开始
2022-07-20 11:15:45.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798406164615168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798406164615168[0;39m ==> Parameters: 
2022-07-20 11:15:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798406164615168[0;39m <==    Updates: 0
2022-07-20 11:15:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798406164615168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:15:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798427169689600[0;39m 生成今日电子书快照开始
2022-07-20 11:15:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798427169689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798427169689600[0;39m ==> Parameters: 
2022-07-20 11:15:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798427169689600[0;39m <==    Updates: 0
2022-07-20 11:15:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798427169689600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:15:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798448116043776[0;39m 生成今日电子书快照开始
2022-07-20 11:15:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798448116043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:15:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798448116043776[0;39m ==> Parameters: 
2022-07-20 11:15:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798448116043776[0;39m <==    Updates: 0
2022-07-20 11:15:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798448116043776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:16:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798469116923904[0;39m 生成今日电子书快照开始
2022-07-20 11:16:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798469116923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798469116923904[0;39m ==> Parameters: 
2022-07-20 11:16:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798469116923904[0;39m <==    Updates: 0
2022-07-20 11:16:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798469116923904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:16:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204798490084249600[0;39m 更新电子书下的文档数据开始
2022-07-20 11:16:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798490084249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:16:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798490084249600[0;39m ==> Parameters: 
2022-07-20 11:16:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798490084249600[0;39m <==    Updates: 7
2022-07-20 11:16:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204798490084249600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:16:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798490088443904[0;39m 生成今日电子书快照开始
2022-07-20 11:16:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798490088443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798490088443904[0;39m ==> Parameters: 
2022-07-20 11:16:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798490088443904[0;39m <==    Updates: 0
2022-07-20 11:16:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798490088443904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:16:07.457 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204797711772422144[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:16:07.458 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m204797711772422144[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 11:16:07.458 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m204797711772422144[0;39m 登录校验开始，token：204772700709851136
2022-07-20 11:16:07.491 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m204797711772422144[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 11:16:07.492 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798500502900736[0;39m ------------- 开始 -------------
2022-07-20 11:16:07.493 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798500502900736[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-20 11:16:07.493 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798500502900736[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-20 11:16:07.493 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798500502900736[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:07.493 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798500502900736[0;39m 请求参数: [{"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id=\"lbj1m\"><xmp><font size=\"4\" face=\"华文楷体\">2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp><font size=\"4\" face=\"华文楷体\"> 正常情况：user？id=1</font></xmp><xmp><font size=\"4\" face=\"华文楷体\" id=\"7cx1m\"> Restful：/user/1</font></xmp></h2></blockquote><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1}]
2022-07-20 11:16:07.494 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798500502900736[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-20 11:16:07.494 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798500502900736[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 8(Integer), 1(Integer), 202715069841281024(Long)
2022-07-20 11:16:07.505 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798500502900736[0;39m <==    Updates: 1
2022-07-20 11:16:07.505 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798500502900736[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-20 11:16:07.506 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798500502900736[0;39m ==> Parameters: <blockquote><h2 id="343h7">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style="text-align:center;"><span style="background-color: rgb(77, 128, 191);"><font face="华文楷体" size="3">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id="lbj1m"><xmp><font size="4" face="华文楷体">2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp><font size="4" face="华文楷体"> 正常情况：user？id=1</font></xmp><xmp><font size="4" face="华文楷体" id="7cx1m"> Restful：/user/1</font></xmp></h2></blockquote><p><br></p><blockquote><p><font size="4" face="Times New Roman">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size="4" face="Times New Roman">@GetMapping("/hello")<br>    public String hello(){<br>        return "hello";<br>    }</font></p></blockquote><div><div><p><font size="3" face="黑体">&nbsp;</font><font size="3" face="楷体"> &nbsp;<span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">&nbsp;&nbsp;&nbsp;</span><span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face="楷体"><font size="3">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style="font-size: medium;">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face="黑体" size="4">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="background-color: rgb(139, 170, 74);">&nbsp;properties-&gt;yml格式网站：<span style="font-size: 1em;">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face="黑体" size="4"><br></font></p><p><i><font size="3"><u><font color="#c24f4a">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face="黑体" size="4"><br></font></p><span style="background-color: rgb(139, 170, 74);"></span></blockquote><blockquote><p><font face="仿宋" size="4">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=""><font size="3" face="仿宋">&nbsp;</font><font size="3" face="黑体">添加依赖：</font></li></ul><blockquote><div><pre><font size="3" face="Times New Roman">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size="4">勾选Build project automatically</font></li></ul><p><img src="https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg" style="max-width:100%;" width="100%"><br></p><hr><ul><li><font size="4" face="仿宋">按两次shift键</font></li><li><img src="https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg" style="max-width:100%;"><br></li></ul><p><br></p><ul><li><img src="https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg" style="max-width:100%;"><br></li></ul><hr><ul><li style="text-align:center;"><span style="background-color: rgb(194, 79, 74);"><font size="5">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style="text-align: center;"><font size="3"><br></font></div><ul><li><br></li><li><img src="https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg"></li></ul></div><p><br></p></div>(String), 202715069841281024(Long)
2022-07-20 11:16:07.507 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798500502900736[0;39m <==    Updates: 1
2022-07-20 11:16:07.541 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798500502900736[0;39m 返回结果: {"success":true}
2022-07-20 11:16:07.542 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798500502900736[0;39m ------------- 结束 耗时：50 ms -------------
2022-07-20 11:16:07.542 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204798500502900736[0;39m ------------- LoginInterceptor 结束 耗时：84 ms -------------
2022-07-20 11:16:07.549 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798500741976064[0;39m ------------- 开始 -------------
2022-07-20 11:16:07.550 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798500741976064[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:16:07.550 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798500741976064[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:16:07.550 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798500741976064[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:07.550 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798500741976064[0;39m 请求参数: [202714600712572928]
2022-07-20 11:16:07.551 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798500741976064[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:16:07.551 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798500741976064[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:16:07.552 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:16:07.552 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:16:07.552 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:16:07.553 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:16:07.553 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:16:07.553 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:16:07.553 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:16:07.553 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:16:07.554 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:16:07.554 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:16:07.554 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:16:07.554 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:16:07.554 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:16:07.555 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798500741976064[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:16:07.555 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798500741976064[0;39m <==      Total: 13
2022-07-20 11:16:07.556 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798500741976064[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:16:07.556 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798500741976064[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-20 11:16:08.898 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798506400092160[0;39m ------------- 开始 -------------
2022-07-20 11:16:08.899 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798506400092160[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:16:08.899 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798506400092160[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:16:08.899 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798506400092160[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:08.899 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798506400092160[0;39m 请求参数: [202715069841281024]
2022-07-20 11:16:08.900 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798506400092160[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:16:08.900 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798506400092160[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:16:08.901 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798506400092160[0;39m <==    Columns: id, content
2022-07-20 11:16:08.902 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798506400092160[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:16:08.902 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798506400092160[0;39m <==      Total: 1
2022-07-20 11:16:08.903 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798506400092160[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:16:08.903 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798506400092160[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:16:08.912 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798506400092160[0;39m <==    Updates: 1
2022-07-20 11:16:08.913 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798506400092160[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id=\"lbj1m\"><xmp><font size=\"4\" face=\"华文楷体\">2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp><font size=\"4\" face=\"华文楷体\"> 正常情况：user？id=1</font></xmp><xmp><font size=\"4\" face=\"华文楷体\" id=\"7cx1m\"> Restful：/user/1</font></xmp></h2></blockquote><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","success":true}
2022-07-20 11:16:08.913 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798506400092160[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-20 11:16:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798511089324032[0;39m 生成今日电子书快照开始
2022-07-20 11:16:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798511089324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798511089324032[0;39m ==> Parameters: 
2022-07-20 11:16:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798511089324032[0;39m <==    Updates: 0
2022-07-20 11:16:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798511089324032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:16:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798532035678208[0;39m 生成今日电子书快照开始
2022-07-20 11:16:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798532035678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798532035678208[0;39m ==> Parameters: 
2022-07-20 11:16:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798532035678208[0;39m <==    Updates: 0
2022-07-20 11:16:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798532035678208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:16:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798553023975424[0;39m 生成今日电子书快照开始
2022-07-20 11:16:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798553023975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798553023975424[0;39m ==> Parameters: 
2022-07-20 11:16:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798553023975424[0;39m <==    Updates: 0
2022-07-20 11:16:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798553023975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:16:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798573949358080[0;39m 生成今日电子书快照开始
2022-07-20 11:16:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798573949358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798573949358080[0;39m ==> Parameters: 
2022-07-20 11:16:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798573949358080[0;39m <==    Updates: 0
2022-07-20 11:16:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798573949358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:16:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798594933460992[0;39m 生成今日电子书快照开始
2022-07-20 11:16:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798594933460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798594933460992[0;39m ==> Parameters: 
2022-07-20 11:16:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798594933460992[0;39m <==    Updates: 0
2022-07-20 11:16:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798594933460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:16:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798615925952512[0;39m 生成今日电子书快照开始
2022-07-20 11:16:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798615925952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798615925952512[0;39m ==> Parameters: 
2022-07-20 11:16:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798615925952512[0;39m <==    Updates: 0
2022-07-20 11:16:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798615925952512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:16:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204798615938535424[0;39m 更新电子书下的文档数据开始
2022-07-20 11:16:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798615938535424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:16:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798615938535424[0;39m ==> Parameters: 
2022-07-20 11:16:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798615938535424[0;39m <==    Updates: 7
2022-07-20 11:16:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204798615938535424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:16:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798636910055424[0;39m 生成今日电子书快照开始
2022-07-20 11:16:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798636910055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798636910055424[0;39m ==> Parameters: 
2022-07-20 11:16:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798636910055424[0;39m <==    Updates: 0
2022-07-20 11:16:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798636910055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:16:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798657835438080[0;39m 生成今日电子书快照开始
2022-07-20 11:16:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798657835438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798657835438080[0;39m ==> Parameters: 
2022-07-20 11:16:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798657835438080[0;39m <==    Updates: 0
2022-07-20 11:16:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798657835438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:16:46.252 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204797775966244864[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:16:46.252 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m204797775966244864[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 11:16:46.252 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m204797775966244864[0;39m 登录校验开始，token：204772700709851136
2022-07-20 11:16:46.285 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m204797775966244864[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 11:16:46.286 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798663216730112[0;39m ------------- 开始 -------------
2022-07-20 11:16:46.286 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798663216730112[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-20 11:16:46.286 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798663216730112[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-20 11:16:46.286 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798663216730112[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:46.286 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798663216730112[0;39m 请求参数: [{"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id=\"lbj1m\"><h2 id=\"y1h2i\"><h3 id=\"g91hj\"><h1 id=\"vfo4x\"><h4 id=\"t6wlk\"><xmp>2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp> 正常情况：user？id=1</xmp><xmp> Restful：/user/1</xmp></h4></h1></h3></h2></h2></blockquote><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1}]
2022-07-20 11:16:46.287 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798663216730112[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-20 11:16:46.288 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798663216730112[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 8(Integer), 1(Integer), 202715069841281024(Long)
2022-07-20 11:16:46.295 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798663216730112[0;39m <==    Updates: 1
2022-07-20 11:16:46.295 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798663216730112[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-20 11:16:46.296 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798663216730112[0;39m ==> Parameters: <blockquote><h2 id="343h7">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style="text-align:center;"><span style="background-color: rgb(77, 128, 191);"><font face="华文楷体" size="3">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id="lbj1m"><h2 id="y1h2i"><h3 id="g91hj"><h1 id="vfo4x"><h4 id="t6wlk"><xmp>2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp> 正常情况：user？id=1</xmp><xmp> Restful：/user/1</xmp></h4></h1></h3></h2></h2></blockquote><p><br></p><blockquote><p><font size="4" face="Times New Roman">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size="4" face="Times New Roman">@GetMapping("/hello")<br>    public String hello(){<br>        return "hello";<br>    }</font></p></blockquote><div><div><p><font size="3" face="黑体">&nbsp;</font><font size="3" face="楷体"> &nbsp;<span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">&nbsp;&nbsp;&nbsp;</span><span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face="楷体"><font size="3">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style="font-size: medium;">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face="黑体" size="4">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="background-color: rgb(139, 170, 74);">&nbsp;properties-&gt;yml格式网站：<span style="font-size: 1em;">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face="黑体" size="4"><br></font></p><p><i><font size="3"><u><font color="#c24f4a">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face="黑体" size="4"><br></font></p><span style="background-color: rgb(139, 170, 74);"></span></blockquote><blockquote><p><font face="仿宋" size="4">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=""><font size="3" face="仿宋">&nbsp;</font><font size="3" face="黑体">添加依赖：</font></li></ul><blockquote><div><pre><font size="3" face="Times New Roman">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size="4">勾选Build project automatically</font></li></ul><p><img src="https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg" style="max-width:100%;" width="100%"><br></p><hr><ul><li><font size="4" face="仿宋">按两次shift键</font></li><li><img src="https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg" style="max-width:100%;"><br></li></ul><p><br></p><ul><li><img src="https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg" style="max-width:100%;"><br></li></ul><hr><ul><li style="text-align:center;"><span style="background-color: rgb(194, 79, 74);"><font size="5">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style="text-align: center;"><font size="3"><br></font></div><ul><li><br></li><li><img src="https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg"></li></ul></div><p><br></p></div>(String), 202715069841281024(Long)
2022-07-20 11:16:46.297 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798663216730112[0;39m <==    Updates: 1
2022-07-20 11:16:46.374 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798663216730112[0;39m 返回结果: {"success":true}
2022-07-20 11:16:46.375 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798663216730112[0;39m ------------- 结束 耗时：89 ms -------------
2022-07-20 11:16:46.375 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204798663216730112[0;39m ------------- LoginInterceptor 结束 耗时：123 ms -------------
2022-07-20 11:16:46.383 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798663623577600[0;39m ------------- 开始 -------------
2022-07-20 11:16:46.383 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798663623577600[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:16:46.383 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798663623577600[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:16:46.383 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798663623577600[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:46.384 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798663623577600[0;39m 请求参数: [202714600712572928]
2022-07-20 11:16:46.384 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798663623577600[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:16:46.384 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798663623577600[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:16:46.385 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:16:46.386 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:16:46.386 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:16:46.386 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:16:46.387 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:16:46.387 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:16:46.387 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:16:46.387 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:16:46.388 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:16:46.388 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:16:46.388 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:16:46.388 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:16:46.389 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:16:46.389 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798663623577600[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:16:46.389 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798663623577600[0;39m <==      Total: 13
2022-07-20 11:16:46.390 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798663623577600[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:16:46.390 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798663623577600[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-20 11:16:47.544 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798668493164544[0;39m ------------- 开始 -------------
2022-07-20 11:16:47.544 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798668493164544[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:16:47.544 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798668493164544[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:16:47.544 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798668493164544[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:47.544 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798668493164544[0;39m 请求参数: [202715069841281024]
2022-07-20 11:16:47.545 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798668493164544[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:16:47.545 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798668493164544[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:16:47.547 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798668493164544[0;39m <==    Columns: id, content
2022-07-20 11:16:47.547 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798668493164544[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:16:47.548 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798668493164544[0;39m <==      Total: 1
2022-07-20 11:16:47.548 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798668493164544[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:16:47.548 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798668493164544[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:16:47.561 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798668493164544[0;39m <==    Updates: 1
2022-07-20 11:16:47.561 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798668493164544[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id=\"lbj1m\"><h2 id=\"y1h2i\"><h3 id=\"g91hj\"><h1 id=\"vfo4x\"><h4 id=\"t6wlk\"><xmp>2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp> 正常情况：user？id=1</xmp><xmp> Restful：/user/1</xmp></h4></h1></h3></h2></h2></blockquote><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","success":true}
2022-07-20 11:16:47.562 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798668493164544[0;39m ------------- 结束 耗时：18 ms -------------
2022-07-20 11:16:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798678815346688[0;39m 生成今日电子书快照开始
2022-07-20 11:16:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798678815346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798678815346688[0;39m ==> Parameters: 
2022-07-20 11:16:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798678815346688[0;39m <==    Updates: 0
2022-07-20 11:16:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798678815346688[0;39m 生成今日电子书快照结束，耗时：13 毫秒
2022-07-20 11:16:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798699816226816[0;39m 生成今日电子书快照开始
2022-07-20 11:16:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798699816226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:16:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798699816226816[0;39m ==> Parameters: 
2022-07-20 11:16:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798699816226816[0;39m <==    Updates: 0
2022-07-20 11:16:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798699816226816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:16:55.570 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m204795252651986944[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-20 11:16:55.571 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m204795252651986944[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-20 11:16:55.571 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m204795252651986944[0;39m 登录校验开始，token：204772700709851136
2022-07-20 11:16:55.604 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m204795252651986944[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"204772700709851136"}
2022-07-20 11:16:55.605 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798702303449088[0;39m ------------- 开始 -------------
2022-07-20 11:16:55.605 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798702303449088[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-20 11:16:55.605 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798702303449088[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-20 11:16:55.605 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798702303449088[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:55.605 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798702303449088[0;39m 请求参数: [{"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id=\"lbj1m\"></h2><h2 id=\"y1h2i\"></h2><h3 id=\"g91hj\"></h3><h1 id=\"vfo4x\"></h1><h4 id=\"t6wlk\"><h2 id=\"y3p29\"><xmp>2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp> 正常情况：user？id=1</xmp><xmp> Restful：/user/1</xmp></h2></h4></blockquote><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1}]
2022-07-20 11:16:55.606 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798702303449088[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-20 11:16:55.606 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798702303449088[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 8(Integer), 1(Integer), 202715069841281024(Long)
2022-07-20 11:16:55.611 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m204798702303449088[0;39m <==    Updates: 1
2022-07-20 11:16:55.612 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798702303449088[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-20 11:16:55.612 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798702303449088[0;39m ==> Parameters: <blockquote><h2 id="343h7">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style="text-align:center;"><span style="background-color: rgb(77, 128, 191);"><font face="华文楷体" size="3">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id="lbj1m"></h2><h2 id="y1h2i"></h2><h3 id="g91hj"></h3><h1 id="vfo4x"></h1><h4 id="t6wlk"><h2 id="y3p29"><xmp>2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp> 正常情况：user？id=1</xmp><xmp> Restful：/user/1</xmp></h2></h4></blockquote><p><br></p><blockquote><p><font size="4" face="Times New Roman">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size="4" face="Times New Roman">@GetMapping("/hello")<br>    public String hello(){<br>        return "hello";<br>    }</font></p></blockquote><div><div><p><font size="3" face="黑体">&nbsp;</font><font size="3" face="楷体"> &nbsp;<span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">&nbsp;&nbsp;&nbsp;</span><span style="background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face="楷体"><font size="3">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style="font-size: medium;">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face="黑体" size="4">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="background-color: rgb(139, 170, 74);">&nbsp;properties-&gt;yml格式网站：<span style="font-size: 1em;">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face="黑体" size="4"><br></font></p><p><i><font size="3"><u><font color="#c24f4a">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face="黑体" size="4"><br></font></p><span style="background-color: rgb(139, 170, 74);"></span></blockquote><blockquote><p><font face="仿宋" size="4">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=""><font size="3" face="仿宋">&nbsp;</font><font size="3" face="黑体">添加依赖：</font></li></ul><blockquote><div><pre><font size="3" face="Times New Roman">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size="4">勾选Build project automatically</font></li></ul><p><img src="https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg" style="max-width:100%;" width="100%"><br></p><hr><ul><li><font size="4" face="仿宋">按两次shift键</font></li><li><img src="https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg" style="max-width:100%;"><br></li></ul><p><br></p><ul><li><img src="https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg" style="max-width:100%;"><br></li></ul><hr><ul><li style="text-align:center;"><span style="background-color: rgb(194, 79, 74);"><font size="5">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style="text-align: center;"><font size="3"><br></font></div><ul><li><br></li><li><img src="https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg"></li></ul></div><p><br></p></div>(String), 202715069841281024(Long)
2022-07-20 11:16:55.613 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m204798702303449088[0;39m <==    Updates: 1
2022-07-20 11:16:55.639 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798702303449088[0;39m 返回结果: {"success":true}
2022-07-20 11:16:55.640 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798702303449088[0;39m ------------- 结束 耗时：35 ms -------------
2022-07-20 11:16:55.640 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m204798702303449088[0;39m ------------- LoginInterceptor 结束 耗时：69 ms -------------
2022-07-20 11:16:55.647 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798702479609856[0;39m ------------- 开始 -------------
2022-07-20 11:16:55.647 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798702479609856[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:16:55.647 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798702479609856[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:16:55.648 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798702479609856[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:55.648 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798702479609856[0;39m 请求参数: [202714600712572928]
2022-07-20 11:16:55.648 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798702479609856[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:16:55.648 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798702479609856[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:16:55.649 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:16:55.649 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:16:55.650 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:16:55.650 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:16:55.650 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:16:55.651 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:16:55.651 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:16:55.651 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:16:55.651 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:16:55.652 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:16:55.652 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:16:55.652 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:16:55.652 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:16:55.653 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798702479609856[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:16:55.653 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798702479609856[0;39m <==      Total: 13
2022-07-20 11:16:55.653 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798702479609856[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:16:55.653 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798702479609856[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-20 11:16:57.373 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798709718978560[0;39m ------------- 开始 -------------
2022-07-20 11:16:57.373 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798709718978561[0;39m ------------- 开始 -------------
2022-07-20 11:16:57.373 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798709718978560[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-20 11:16:57.373 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798709718978561[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-20 11:16:57.373 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798709718978560[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-20 11:16:57.374 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798709718978560[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:57.374 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798709718978561[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-20 11:16:57.374 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798709723172864[0;39m ------------- 开始 -------------
2022-07-20 11:16:57.374 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798709718978560[0;39m 请求参数: []
2022-07-20 11:16:57.374 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798709718978561[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:57.374 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798709723172864[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-20 11:16:57.374 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798709718978561[0;39m 请求参数: []
2022-07-20 11:16:57.374 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798709723172864[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-20 11:16:57.374 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798709723172864[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:57.374 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204798709718978560[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 11:16:57.375 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798709723172864[0;39m 请求参数: []
2022-07-20 11:16:57.375 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204798709718978561[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-20 11:16:57.376 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204798709718978560[0;39m ==> Parameters: 
2022-07-20 11:16:57.376 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204798709718978561[0;39m ==> Parameters: 
2022-07-20 11:16:57.377 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204798709723172864[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-20 11:16:57.377 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204798709723172864[0;39m ==> Parameters: 
2022-07-20 11:16:57.378 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204798709718978560[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-20 11:16:57.378 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204798709718978561[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-20 11:16:57.378 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204798709718978561[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-20 11:16:57.378 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m204798709718978560[0;39m <==        Row: 2022-07-20, 164, 37, 164, 37
2022-07-20 11:16:57.378 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==    Columns: id, parent, name, sort
2022-07-20 11:16:57.378 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m204798709718978560[0;39m <==      Total: 1
2022-07-20 11:16:57.378 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204798709718978561[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-20 11:16:57.379 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-20 11:16:57.379 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798709718978560[0;39m 返回结果: {"content":[{"date":1658246400000,"viewCount":164,"viewIncrease":164,"voteCount":37,"voteIncrease":37}],"success":true}
2022-07-20 11:16:57.379 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204798709718978561[0;39m <==        Row: 2022-07-14, 47, 13
2022-07-20 11:16:57.379 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798709718978560[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-20 11:16:57.379 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 101, 100, Vue, 101
2022-07-20 11:16:57.379 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-20 11:16:57.379 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 200, 0, Java, 200
2022-07-20 11:16:57.380 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-20 11:16:57.380 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-20 11:16:57.380 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204798709718978561[0;39m <==        Row: 2022-07-16, 153, 37
2022-07-20 11:16:57.381 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-20 11:16:57.381 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 300, 0, Python, 300
2022-07-20 11:16:57.381 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m204798709718978561[0;39m <==        Row: 2022-07-17, 2, 0
2022-07-20 11:16:57.381 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-20 11:16:57.381 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m204798709718978561[0;39m <==      Total: 5
2022-07-20 11:16:57.382 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-20 11:16:57.382 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-20 11:16:57.382 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798709718978561[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6},{"date":1657728000000,"viewCount":0,"viewIncrease":47,"voteCount":0,"voteIncrease":13},{"date":1657900800000,"viewCount":0,"viewIncrease":153,"voteCount":0,"voteIncrease":37},{"date":1657987200000,"viewCount":0,"viewIncrease":2,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-20 11:16:57.382 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-20 11:16:57.382 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798709718978561[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-20 11:16:57.382 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 500, 0, 其它, 500
2022-07-20 11:16:57.383 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-20 11:16:57.383 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-20 11:16:57.383 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m204798709723172864[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-20 11:16:57.383 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m204798709723172864[0;39m <==      Total: 16
2022-07-20 11:16:57.385 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798709723172864[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-20 11:16:57.385 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798709723172864[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-20 11:16:58.928 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798716241121280[0;39m ------------- 开始 -------------
2022-07-20 11:16:58.929 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798716241121280[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-20 11:16:58.929 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798716241121280[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-20 11:16:58.929 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798716241121280[0;39m 远程地址: 127.0.0.1
2022-07-20 11:16:58.929 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798716241121280[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-20 11:16:58.932 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204798716241121280[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-20 11:16:58.932 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204798716241121280[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-20 11:16:58.933 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204798716241121280[0;39m <==    Columns: count(0)
2022-07-20 11:16:58.933 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m204798716241121280[0;39m <==        Row: 1
2022-07-20 11:16:58.934 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m204798716241121280[0;39m <==      Total: 1
2022-07-20 11:16:58.934 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204798716241121280[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-20 11:16:58.934 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204798716241121280[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-20 11:16:58.935 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204798716241121280[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-20 11:16:58.935 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m204798716241121280[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 13, 51, 12
2022-07-20 11:16:58.936 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m204798716241121280[0;39m <==      Total: 1
2022-07-20 11:16:58.936 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m204798716241121280[0;39m 总行数：1
2022-07-20 11:16:58.936 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m204798716241121280[0;39m 总页数：1
2022-07-20 11:16:58.937 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798716241121280[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":13,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":51,"voteCount":12}],"total":1},"success":true}
2022-07-20 11:16:58.937 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798716241121280[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-20 11:17:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798720766775296[0;39m 生成今日电子书快照开始
2022-07-20 11:17:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798720766775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798720766775296[0;39m ==> Parameters: 
2022-07-20 11:17:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798720766775296[0;39m <==    Updates: 0
2022-07-20 11:17:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798720766775296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:17:00.114 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798721215565824[0;39m ------------- 开始 -------------
2022-07-20 11:17:00.114 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798721215565824[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:17:00.114 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798721215565824[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:17:00.114 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798721215565824[0;39m 远程地址: 127.0.0.1
2022-07-20 11:17:00.114 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798721215565824[0;39m 请求参数: [202714600712572928]
2022-07-20 11:17:00.115 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798721215565824[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:17:00.115 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798721215565824[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:17:00.116 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:17:00.117 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 10, 1
2022-07-20 11:17:00.117 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:17:00.117 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 8, 1
2022-07-20 11:17:00.118 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:17:00.118 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:17:00.118 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:17:00.118 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:17:00.119 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:17:00.119 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:17:00.119 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:17:00.119 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:17:00.119 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:17:00.119 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798721215565824[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:17:00.120 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798721215565824[0;39m <==      Total: 13
2022-07-20 11:17:00.120 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798721215565824[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":10,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":8,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:17:00.121 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798721215565824[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-20 11:17:00.135 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798721303646208[0;39m ------------- 开始 -------------
2022-07-20 11:17:00.135 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798721303646208[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-20 11:17:00.135 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798721303646208[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:17:00.135 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798721303646208[0;39m 远程地址: 127.0.0.1
2022-07-20 11:17:00.135 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798721303646208[0;39m 请求参数: [202714909656616960]
2022-07-20 11:17:00.136 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798721303646208[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:17:00.136 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798721303646208[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-20 11:17:00.137 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798721303646208[0;39m <==    Columns: id, content
2022-07-20 11:17:00.137 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798721303646208[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-20 11:17:00.137 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798721303646208[0;39m <==      Total: 1
2022-07-20 11:17:00.138 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798721303646208[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:17:00.138 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798721303646208[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-20 11:17:00.156 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798721303646208[0;39m <==    Updates: 1
2022-07-20 11:17:00.157 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798721303646208[0;39m 返回结果: {"content":"","success":true}
2022-07-20 11:17:00.157 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798721303646208[0;39m ------------- 结束 耗时：22 ms -------------
2022-07-20 11:17:01.208 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798725804134400[0;39m ------------- 开始 -------------
2022-07-20 11:17:01.209 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798725804134400[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-20 11:17:01.209 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798725804134400[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:17:01.209 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798725804134400[0;39m 远程地址: 127.0.0.1
2022-07-20 11:17:01.209 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798725804134400[0;39m 请求参数: [202715069841281024]
2022-07-20 11:17:01.209 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798725804134400[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:17:01.210 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798725804134400[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:17:01.210 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798725804134400[0;39m <==    Columns: id, content
2022-07-20 11:17:01.210 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798725804134400[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-20 11:17:01.211 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798725804134400[0;39m <==      Total: 1
2022-07-20 11:17:01.211 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798725804134400[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:17:01.211 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798725804134400[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:17:01.231 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798725804134400[0;39m <==    Updates: 1
2022-07-20 11:17:01.232 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798725804134400[0;39m 返回结果: {"content":"<blockquote><h2 id=\"343h7\">1. 在远程仓库上创建一个新项目，将本地项目关联到远程仓库</h2></blockquote><p style=\"text-align:center;\"><span style=\"background-color: rgb(77, 128, 191);\"><font face=\"华文楷体\" size=\"3\">自定义启动端开始的文案网址：patorjk.com</font></span><br></p><blockquote><h2 id=\"lbj1m\"></h2><h2 id=\"y1h2i\"></h2><h3 id=\"g91hj\"></h3><h1 id=\"vfo4x\"></h1><h4 id=\"t6wlk\"><h2 id=\"y3p29\"><xmp>2.  Restful风格：GET（查找） ,POST(新增),PUT（修改）,DELETE（删除）</font></xmp><xmp> 正常情况：user？id=1</xmp><xmp> Restful：/user/1</xmp></h2></h4></blockquote><p><br></p><blockquote><p><font size=\"4\" face=\"Times New Roman\">3. @RestController和@Controller区别：<br></font>&nbsp; &nbsp;&nbsp;<font size=\"4\" face=\"Times New Roman\">@GetMapping(\"/hello\")<br>    public String hello(){<br>        return \"hello\";<br>    }</font></p></blockquote><div><div><p><font size=\"3\" face=\"黑体\">&nbsp;</font><font size=\"3\" face=\"楷体\"> &nbsp;<span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">&nbsp;&nbsp;&nbsp;</span><span style=\"background-color: rgb(255, 255, 255); color: rgba(0, 0, 0, 0.85); font-variant-ligatures: normal; font-variant-caps: normal; float: none; display: inline !important;\">@RestController一般用来返回字符串即返回“hello”，@Controller用来返回一个页面hello.html</span></font></p><p><font face=\"楷体\"><font size=\"3\">&nbsp; &nbsp;</font>&nbsp; &nbsp;&nbsp;<span style=\"font-size: medium;\">@RestController=@Controller+@ResponseBody(返回字符串或JSON对象)</span></font></p><p><br></p><blockquote><p><font face=\"黑体\" size=\"4\">4. resources文件夹下的application.properties/yml能够被识别，将其放入子文件夹中也一样可以，同样也可以识别bootstrap.properties/yml</font></p><p><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style=\"background-color: rgb(139, 170, 74);\">&nbsp;properties-&gt;yml格式网站：<span style=\"font-size: 1em;\">toyaml.com/index.html&nbsp; &nbsp;</span></span></b><font face=\"黑体\" size=\"4\"><br></font></p><p><i><font size=\"3\"><u><font color=\"#c24f4a\">bootstrap:</font></u>一般用于动态配置，线上实时修改，实时生效的配置，一般可配合nacos使用</font></i><font face=\"黑体\" size=\"4\"><br></font></p><span style=\"background-color: rgb(139, 170, 74);\"></span></blockquote><blockquote><p><font face=\"仿宋\" size=\"4\">5.配置集成热部署：代码及时生效</font></p></blockquote><ul><li style=\"\"><font size=\"3\" face=\"仿宋\">&nbsp;</font><font size=\"3\" face=\"黑体\">添加依赖：</font></li></ul><blockquote><div><pre><font size=\"3\" face=\"Times New Roman\">&lt;!--热部署--&gt;<br>&lt;dependency&gt;<br>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;<br>    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;<br>&lt;/dependency&gt;</font></pre></div></blockquote><p><br></p><ul><li><hr></li><li><font size=\"4\">勾选Build project automatically</font></li></ul><p><img src=\"https://i.postimg.cc/G3qNkhrF/83cd2913ee9d7d81366087dab707da3.jpg\" style=\"max-width:100%;\" width=\"100%\"><br></p><hr><ul><li><font size=\"4\" face=\"仿宋\">按两次shift键</font></li><li><img src=\"https://i.postimg.cc/DzxY3n6Q/0bd555589af48fa57b01b9230dbb31f.jpg\" style=\"max-width:100%;\"><br></li></ul><p><br></p><ul><li><img src=\"https://i.postimg.cc/W4xgky1L/78bd304480a2a1eb6a1f90cd955e9ce.jpg\" style=\"max-width:100%;\"><br></li></ul><hr><ul><li style=\"text-align:center;\"><span style=\"background-color: rgb(194, 79, 74);\"><font size=\"5\">2021版本的IDEA将上面这个勾选项移动到了别的地方，下面是2021版本的修改</font></span></li></ul><div style=\"text-align: center;\"><font size=\"3\"><br></font></div><ul><li><br></li><li><img src=\"https://i.postimg.cc/sxjXQP7C/71d856aaae65177b7e791458f6c8d27.jpg\"></li></ul></div><p><br></p></div>","success":true}
2022-07-20 11:17:01.232 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798725804134400[0;39m ------------- 结束 耗时：24 ms -------------
2022-07-20 11:17:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204798741734100992[0;39m 更新电子书下的文档数据开始
2022-07-20 11:17:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798741734100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:17:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798741734100992[0;39m ==> Parameters: 
2022-07-20 11:17:05.028 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798741734100992[0;39m <==    Updates: 7
2022-07-20 11:17:05.028 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204798741734100992[0;39m 更新电子书下的文档数据结束，耗时：22 毫秒
2022-07-20 11:17:05.028 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798741826375680[0;39m 生成今日电子书快照开始
2022-07-20 11:17:05.028 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798741826375680[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:05.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798741826375680[0;39m ==> Parameters: 
2022-07-20 11:17:05.058 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798741826375680[0;39m <==    Updates: 0
2022-07-20 11:17:05.060 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798741826375680[0;39m 生成今日电子书快照结束，耗时：32 毫秒
2022-07-20 11:17:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798762730786816[0;39m 生成今日电子书快照开始
2022-07-20 11:17:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798762730786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:10.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798762730786816[0;39m ==> Parameters: 
2022-07-20 11:17:10.025 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798762730786816[0;39m <==    Updates: 0
2022-07-20 11:17:10.026 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798762730786816[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 11:17:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798783660363776[0;39m 生成今日电子书快照开始
2022-07-20 11:17:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798783660363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798783660363776[0;39m ==> Parameters: 
2022-07-20 11:17:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798783660363776[0;39m <==    Updates: 0
2022-07-20 11:17:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798783660363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:17:15.277 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798784813797376[0;39m ------------- 开始 -------------
2022-07-20 11:17:15.277 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798784813797376[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715069841281024 GET
2022-07-20 11:17:15.278 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798784813797376[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-20 11:17:15.278 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798784813797376[0;39m 远程地址: 127.0.0.1
2022-07-20 11:17:15.278 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798784813797376[0;39m 请求参数: [202715069841281024]
2022-07-20 11:17:15.314 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m204798784813797376[0;39m key不存在，放入：DOC_VOTE_202715069841281024_127.0.0.1，过期 86400 秒
2022-07-20 11:17:15.351 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m204798784813797376[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-20 11:17:15.352 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m204798784813797376[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:17:15.449 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m204798784813797376[0;39m <==    Updates: 1
2022-07-20 11:17:15.450 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m204798784813797376[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-20 11:17:15.450 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m204798784813797376[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-20 11:17:15.451 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m204798784813797376[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:17:15.451 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m204798784813797376[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 9, 2
2022-07-20 11:17:15.452 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m204798784813797376[0;39m <==      Total: 1
2022-07-20 11:17:15.454 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798784813797376[0;39m 返回结果: {"success":true}
2022-07-20 11:17:15.455 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798784813797376[0;39m ------------- 结束 耗时：178 ms -------------
2022-07-20 11:17:15.561 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m204798784813797376[0;39m 推送消息：UDOkp7lD7S，内容：【Spring Boot项目搭建】被点赞
2022-07-20 11:17:19.453 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m204798702479609856[0;39m 连接关闭，token：UDOkp7lD7S，session id：0！当前连接数：0
2022-07-20 11:17:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798804686409728[0;39m 生成今日电子书快照开始
2022-07-20 11:17:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798804686409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798804686409728[0;39m ==> Parameters: 
2022-07-20 11:17:20.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798804686409728[0;39m <==    Updates: 0
2022-07-20 11:17:20.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798804686409728[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:17:20.081 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m204798709718978560[0;39m 有新连接：token：iRnosjMbnD，session id：1，当前连接数：1
2022-07-20 11:17:20.111 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798805089062912[0;39m ------------- 开始 -------------
2022-07-20 11:17:20.111 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798805089062912[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-20 11:17:20.111 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798805089062912[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-20 11:17:20.111 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798805089062912[0;39m 远程地址: 127.0.0.1
2022-07-20 11:17:20.112 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798805089062912[0;39m 请求参数: [202714600712572928]
2022-07-20 11:17:20.112 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798805089062912[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-20 11:17:20.113 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798805089062912[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-20 11:17:20.113 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-20 11:17:20.114 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 11, 1
2022-07-20 11:17:20.114 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 203684795593658368, 202714600712572928, 202714909656616960, SpringBoot2.4+Vue3, 1, 5, 0
2022-07-20 11:17:20.114 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 9, 2
2022-07-20 11:17:20.115 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 5, 1
2022-07-20 11:17:20.115 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 5, 1
2022-07-20 11:17:20.115 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-20 11:17:20.115 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 3, 1
2022-07-20 11:17:20.115 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-20 11:17:20.116 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-20 11:17:20.116 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-20 11:17:20.116 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-20 11:17:20.116 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-20 11:17:20.116 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m204798805089062912[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-20 11:17:20.117 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m204798805089062912[0;39m <==      Total: 13
2022-07-20 11:17:20.119 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798805089062912[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":11,"voteCount":1},{"ebookId":202714600712572928,"id":203684795593658368,"name":"SpringBoot2.4+Vue3","parent":202714909656616960,"sort":1,"viewCount":5,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":9,"voteCount":2},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":3,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-20 11:17:20.119 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798805089062912[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-20 11:17:20.160 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m204798805294583808[0;39m ------------- 开始 -------------
2022-07-20 11:17:20.160 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m204798805294583808[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-20 11:17:20.160 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m204798805294583808[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-20 11:17:20.161 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m204798805294583808[0;39m 远程地址: 127.0.0.1
2022-07-20 11:17:20.161 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m204798805294583808[0;39m 请求参数: [202714909656616960]
2022-07-20 11:17:20.162 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798805294583808[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-20 11:17:20.163 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798805294583808[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-20 11:17:20.164 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798805294583808[0;39m <==    Columns: id, content
2022-07-20 11:17:20.164 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m204798805294583808[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-20 11:17:20.165 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m204798805294583808[0;39m <==      Total: 1
2022-07-20 11:17:20.165 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798805294583808[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-20 11:17:20.166 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798805294583808[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-20 11:17:20.189 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m204798805294583808[0;39m <==    Updates: 1
2022-07-20 11:17:20.190 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m204798805294583808[0;39m 返回结果: {"content":"","success":true}
2022-07-20 11:17:20.190 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m204798805294583808[0;39m ------------- 结束 耗时：30 ms -------------
2022-07-20 11:17:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798825603403776[0;39m 生成今日电子书快照开始
2022-07-20 11:17:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798825603403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798825603403776[0;39m ==> Parameters: 
2022-07-20 11:17:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798825603403776[0;39m <==    Updates: 0
2022-07-20 11:17:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798825603403776[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:17:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798846629449728[0;39m 生成今日电子书快照开始
2022-07-20 11:17:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798846629449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:30.028 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798846629449728[0;39m ==> Parameters: 
2022-07-20 11:17:30.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798846629449728[0;39m <==    Updates: 0
2022-07-20 11:17:30.029 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798846629449728[0;39m 生成今日电子书快照结束，耗时：14 毫秒
2022-07-20 11:17:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798867575803904[0;39m 生成今日电子书快照开始
2022-07-20 11:17:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798867575803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798867575803904[0;39m ==> Parameters: 
2022-07-20 11:17:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798867575803904[0;39m <==    Updates: 0
2022-07-20 11:17:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798867575803904[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:17:35.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204798867617746944[0;39m 更新电子书下的文档数据开始
2022-07-20 11:17:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798867617746944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:17:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798867617746944[0;39m ==> Parameters: 
2022-07-20 11:17:35.092 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798867617746944[0;39m <==    Updates: 7
2022-07-20 11:17:35.093 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204798867617746944[0;39m 更新电子书下的文档数据结束，耗时：74 毫秒
2022-07-20 11:17:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798888509575168[0;39m 生成今日电子书快照开始
2022-07-20 11:17:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798888509575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798888509575168[0;39m ==> Parameters: 
2022-07-20 11:17:40.053 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798888509575168[0;39m <==    Updates: 0
2022-07-20 11:17:40.053 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798888509575168[0;39m 生成今日电子书快照结束，耗时：53 毫秒
2022-07-20 11:17:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798909544009728[0;39m 生成今日电子书快照开始
2022-07-20 11:17:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798909544009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798909544009728[0;39m ==> Parameters: 
2022-07-20 11:17:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798909544009728[0;39m <==    Updates: 0
2022-07-20 11:17:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798909544009728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:17:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798930486169600[0;39m 生成今日电子书快照开始
2022-07-20 11:17:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798930486169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798930486169600[0;39m ==> Parameters: 
2022-07-20 11:17:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798930486169600[0;39m <==    Updates: 0
2022-07-20 11:17:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798930486169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:17:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798951440912384[0;39m 生成今日电子书快照开始
2022-07-20 11:17:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798951440912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:17:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798951440912384[0;39m ==> Parameters: 
2022-07-20 11:17:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798951440912384[0;39m <==    Updates: 0
2022-07-20 11:17:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798951440912384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:18:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798972399849472[0;39m 生成今日电子书快照开始
2022-07-20 11:18:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798972399849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798972399849472[0;39m ==> Parameters: 
2022-07-20 11:18:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798972399849472[0;39m <==    Updates: 0
2022-07-20 11:18:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798972399849472[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 11:18:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204798993434284032[0;39m 更新电子书下的文档数据开始
2022-07-20 11:18:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798993434284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:18:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798993434284032[0;39m ==> Parameters: 
2022-07-20 11:18:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204798993434284032[0;39m <==    Updates: 7
2022-07-20 11:18:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204798993434284032[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:18:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204798993442672640[0;39m 生成今日电子书快照开始
2022-07-20 11:18:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798993442672640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798993442672640[0;39m ==> Parameters: 
2022-07-20 11:18:05.027 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204798993442672640[0;39m <==    Updates: 0
2022-07-20 11:18:05.028 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204798993442672640[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 11:18:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799014393221120[0;39m 生成今日电子书快照开始
2022-07-20 11:18:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799014393221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799014393221120[0;39m ==> Parameters: 
2022-07-20 11:18:10.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799014393221120[0;39m <==    Updates: 0
2022-07-20 11:18:10.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799014393221120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:18:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799035339575296[0;39m 生成今日电子书快照开始
2022-07-20 11:18:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799035339575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799035339575296[0;39m ==> Parameters: 
2022-07-20 11:18:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799035339575296[0;39m <==    Updates: 0
2022-07-20 11:18:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799035339575296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:18:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799056302706688[0;39m 生成今日电子书快照开始
2022-07-20 11:18:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799056302706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799056302706688[0;39m ==> Parameters: 
2022-07-20 11:18:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799056302706688[0;39m <==    Updates: 0
2022-07-20 11:18:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799056302706688[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:18:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799077282615296[0;39m 生成今日电子书快照开始
2022-07-20 11:18:25.041 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799077282615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:25.041 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799077282615296[0;39m ==> Parameters: 
2022-07-20 11:18:25.042 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799077282615296[0;39m <==    Updates: 0
2022-07-20 11:18:25.043 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799077282615296[0;39m 生成今日电子书快照结束，耗时：35 毫秒
2022-07-20 11:18:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799098270912512[0;39m 生成今日电子书快照开始
2022-07-20 11:18:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799098270912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799098270912512[0;39m ==> Parameters: 
2022-07-20 11:18:30.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799098270912512[0;39m <==    Updates: 0
2022-07-20 11:18:30.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799098270912512[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 11:18:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204799119242432512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:18:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799119242432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:18:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799119242432512[0;39m ==> Parameters: 
2022-07-20 11:18:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799119242432512[0;39m <==    Updates: 7
2022-07-20 11:18:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204799119242432512[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-20 11:18:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799119267598336[0;39m 生成今日电子书快照开始
2022-07-20 11:18:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799119267598336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799119267598336[0;39m ==> Parameters: 
2022-07-20 11:18:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799119267598336[0;39m <==    Updates: 0
2022-07-20 11:18:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799119267598336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:18:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799140180398080[0;39m 生成今日电子书快照开始
2022-07-20 11:18:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799140180398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799140180398080[0;39m ==> Parameters: 
2022-07-20 11:18:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799140180398080[0;39m <==    Updates: 0
2022-07-20 11:18:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799140180398080[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 11:18:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799161172889600[0;39m 生成今日电子书快照开始
2022-07-20 11:18:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799161172889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799161172889600[0;39m ==> Parameters: 
2022-07-20 11:18:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799161172889600[0;39m <==    Updates: 0
2022-07-20 11:18:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799161172889600[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:18:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799182123438080[0;39m 生成今日电子书快照开始
2022-07-20 11:18:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799182123438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799182123438080[0;39m ==> Parameters: 
2022-07-20 11:18:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799182123438080[0;39m <==    Updates: 0
2022-07-20 11:18:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799182123438080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:18:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799203103346688[0;39m 生成今日电子书快照开始
2022-07-20 11:18:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799203103346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:18:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799203103346688[0;39m ==> Parameters: 
2022-07-20 11:18:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799203103346688[0;39m <==    Updates: 0
2022-07-20 11:18:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799203103346688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:19:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799224070672384[0;39m 生成今日电子书快照开始
2022-07-20 11:19:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799224070672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799224070672384[0;39m ==> Parameters: 
2022-07-20 11:19:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799224070672384[0;39m <==    Updates: 0
2022-07-20 11:19:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799224070672384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:19:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204799245067358208[0;39m 更新电子书下的文档数据开始
2022-07-20 11:19:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799245067358208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:19:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799245067358208[0;39m ==> Parameters: 
2022-07-20 11:19:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799245067358208[0;39m <==    Updates: 7
2022-07-20 11:19:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204799245067358208[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 11:19:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799245079941120[0;39m 生成今日电子书快照开始
2022-07-20 11:19:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799245079941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799245079941120[0;39m ==> Parameters: 
2022-07-20 11:19:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799245079941120[0;39m <==    Updates: 0
2022-07-20 11:19:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799245079941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:19:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799266009518080[0;39m 生成今日电子书快照开始
2022-07-20 11:19:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799266009518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799266009518080[0;39m ==> Parameters: 
2022-07-20 11:19:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799266009518080[0;39m <==    Updates: 0
2022-07-20 11:19:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799266009518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:19:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799287014592512[0;39m 生成今日电子书快照开始
2022-07-20 11:19:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799287014592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799287014592512[0;39m ==> Parameters: 
2022-07-20 11:19:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799287014592512[0;39m <==    Updates: 0
2022-07-20 11:19:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799287014592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:19:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799307952558080[0;39m 生成今日电子书快照开始
2022-07-20 11:19:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799307952558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799307952558080[0;39m ==> Parameters: 
2022-07-20 11:19:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799307952558080[0;39m <==    Updates: 0
2022-07-20 11:19:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799307952558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:19:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799328949243904[0;39m 生成今日电子书快照开始
2022-07-20 11:19:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799328949243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799328949243904[0;39m ==> Parameters: 
2022-07-20 11:19:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799328949243904[0;39m <==    Updates: 0
2022-07-20 11:19:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799328949243904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:19:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799349895598080[0;39m 生成今日电子书快照开始
2022-07-20 11:19:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799349895598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799349895598080[0;39m ==> Parameters: 
2022-07-20 11:19:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799349895598080[0;39m <==    Updates: 0
2022-07-20 11:19:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799349895598080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:19:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204799370883895296[0;39m 更新电子书下的文档数据开始
2022-07-20 11:19:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799370883895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:19:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799370883895296[0;39m ==> Parameters: 
2022-07-20 11:19:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799370883895296[0;39m <==    Updates: 7
2022-07-20 11:19:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204799370883895296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:19:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799370892283904[0;39m 生成今日电子书快照开始
2022-07-20 11:19:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799370892283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799370892283904[0;39m ==> Parameters: 
2022-07-20 11:19:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799370892283904[0;39m <==    Updates: 0
2022-07-20 11:19:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799370892283904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:19:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799391830249472[0;39m 生成今日电子书快照开始
2022-07-20 11:19:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799391830249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799391830249472[0;39m ==> Parameters: 
2022-07-20 11:19:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799391830249472[0;39m <==    Updates: 0
2022-07-20 11:19:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799391830249472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:19:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799412826935296[0;39m 生成今日电子书快照开始
2022-07-20 11:19:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799412826935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799412826935296[0;39m ==> Parameters: 
2022-07-20 11:19:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799412826935296[0;39m <==    Updates: 0
2022-07-20 11:19:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799412826935296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:19:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799433823621120[0;39m 生成今日电子书快照开始
2022-07-20 11:19:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799433823621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799433823621120[0;39m ==> Parameters: 
2022-07-20 11:19:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799433823621120[0;39m <==    Updates: 0
2022-07-20 11:19:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799433823621120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:19:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799454803529728[0;39m 生成今日电子书快照开始
2022-07-20 11:19:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799454803529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:19:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799454803529728[0;39m ==> Parameters: 
2022-07-20 11:19:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799454803529728[0;39m <==    Updates: 0
2022-07-20 11:19:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799454803529728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:20:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799475728912384[0;39m 生成今日电子书快照开始
2022-07-20 11:20:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799475728912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799475728912384[0;39m ==> Parameters: 
2022-07-20 11:20:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799475728912384[0;39m <==    Updates: 0
2022-07-20 11:20:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799475728912384[0;39m 生成今日电子书快照结束，耗时：13 毫秒
2022-07-20 11:20:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799496729792512[0;39m 生成今日电子书快照开始
2022-07-20 11:20:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799496729792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799496729792512[0;39m ==> Parameters: 
2022-07-20 11:20:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799496729792512[0;39m <==    Updates: 0
2022-07-20 11:20:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799496729792512[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:20:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204799496754958336[0;39m 更新电子书下的文档数据开始
2022-07-20 11:20:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799496754958336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:20:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799496754958336[0;39m ==> Parameters: 
2022-07-20 11:20:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799496754958336[0;39m <==    Updates: 7
2022-07-20 11:20:05.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204799496754958336[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:20:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799517659369472[0;39m 生成今日电子书快照开始
2022-07-20 11:20:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799517659369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799517659369472[0;39m ==> Parameters: 
2022-07-20 11:20:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799517659369472[0;39m <==    Updates: 0
2022-07-20 11:20:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799517659369472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:20:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799538651860992[0;39m 生成今日电子书快照开始
2022-07-20 11:20:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799538651860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799538651860992[0;39m ==> Parameters: 
2022-07-20 11:20:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799538651860992[0;39m <==    Updates: 0
2022-07-20 11:20:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799538651860992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:20:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799559644352512[0;39m 生成今日电子书快照开始
2022-07-20 11:20:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799559644352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799559644352512[0;39m ==> Parameters: 
2022-07-20 11:20:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799559644352512[0;39m <==    Updates: 0
2022-07-20 11:20:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799559644352512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:20:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799580628455424[0;39m 生成今日电子书快照开始
2022-07-20 11:20:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799580628455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799580628455424[0;39m ==> Parameters: 
2022-07-20 11:20:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799580628455424[0;39m <==    Updates: 0
2022-07-20 11:20:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799580628455424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:20:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799601579003904[0;39m 生成今日电子书快照开始
2022-07-20 11:20:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799601579003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799601579003904[0;39m ==> Parameters: 
2022-07-20 11:20:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799601579003904[0;39m <==    Updates: 0
2022-07-20 11:20:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799601579003904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:20:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204799622533746688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:20:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799622533746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:20:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799622533746688[0;39m ==> Parameters: 
2022-07-20 11:20:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799622533746688[0;39m <==    Updates: 7
2022-07-20 11:20:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204799622533746688[0;39m 更新电子书下的文档数据结束，耗时：9 毫秒
2022-07-20 11:20:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799622575689728[0;39m 生成今日电子书快照开始
2022-07-20 11:20:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799622575689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799622575689728[0;39m ==> Parameters: 
2022-07-20 11:20:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799622575689728[0;39m <==    Updates: 0
2022-07-20 11:20:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799622575689728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:20:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799643492683776[0;39m 生成今日电子书快照开始
2022-07-20 11:20:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799643492683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799643492683776[0;39m ==> Parameters: 
2022-07-20 11:20:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799643492683776[0;39m <==    Updates: 0
2022-07-20 11:20:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799643492683776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:20:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799664464203776[0;39m 生成今日电子书快照开始
2022-07-20 11:20:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799664464203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799664464203776[0;39m ==> Parameters: 
2022-07-20 11:20:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799664464203776[0;39m <==    Updates: 0
2022-07-20 11:20:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799664464203776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:20:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799685456695296[0;39m 生成今日电子书快照开始
2022-07-20 11:20:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799685456695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799685456695296[0;39m ==> Parameters: 
2022-07-20 11:20:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799685456695296[0;39m <==    Updates: 0
2022-07-20 11:20:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799685456695296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:20:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799706411438080[0;39m 生成今日电子书快照开始
2022-07-20 11:20:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799706411438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:20:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799706411438080[0;39m ==> Parameters: 
2022-07-20 11:20:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799706411438080[0;39m <==    Updates: 0
2022-07-20 11:20:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799706411438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:21:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799727382958080[0;39m 生成今日电子书快照开始
2022-07-20 11:21:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799727382958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799727382958080[0;39m ==> Parameters: 
2022-07-20 11:21:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799727382958080[0;39m <==    Updates: 0
2022-07-20 11:21:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799727382958080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:21:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204799748404809728[0;39m 更新电子书下的文档数据开始
2022-07-20 11:21:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799748404809728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:21:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799748404809728[0;39m ==> Parameters: 
2022-07-20 11:21:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799748404809728[0;39m <==    Updates: 7
2022-07-20 11:21:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204799748404809728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:21:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799748413198336[0;39m 生成今日电子书快照开始
2022-07-20 11:21:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799748413198336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799748413198336[0;39m ==> Parameters: 
2022-07-20 11:21:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799748413198336[0;39m <==    Updates: 0
2022-07-20 11:21:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799748413198336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:21:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799769325998080[0;39m 生成今日电子书快照开始
2022-07-20 11:21:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799769325998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799769325998080[0;39m ==> Parameters: 
2022-07-20 11:21:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799769325998080[0;39m <==    Updates: 0
2022-07-20 11:21:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799769325998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:21:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799790314295296[0;39m 生成今日电子书快照开始
2022-07-20 11:21:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799790314295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799790314295296[0;39m ==> Parameters: 
2022-07-20 11:21:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799790314295296[0;39m <==    Updates: 0
2022-07-20 11:21:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799790314295296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:21:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799811315175424[0;39m 生成今日电子书快照开始
2022-07-20 11:21:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799811315175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799811315175424[0;39m ==> Parameters: 
2022-07-20 11:21:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799811315175424[0;39m <==    Updates: 0
2022-07-20 11:21:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799811315175424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:21:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799832253140992[0;39m 生成今日电子书快照开始
2022-07-20 11:21:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799832253140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799832253140992[0;39m ==> Parameters: 
2022-07-20 11:21:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799832253140992[0;39m <==    Updates: 0
2022-07-20 11:21:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799832253140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:21:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799853224660992[0;39m 生成今日电子书快照开始
2022-07-20 11:21:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799853224660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799853224660992[0;39m ==> Parameters: 
2022-07-20 11:21:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799853224660992[0;39m <==    Updates: 0
2022-07-20 11:21:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799853224660992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:21:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204799874179403776[0;39m 更新电子书下的文档数据开始
2022-07-20 11:21:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799874179403776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:21:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799874179403776[0;39m ==> Parameters: 
2022-07-20 11:21:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204799874179403776[0;39m <==    Updates: 7
2022-07-20 11:21:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204799874179403776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:21:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799874187792384[0;39m 生成今日电子书快照开始
2022-07-20 11:21:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799874187792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799874187792384[0;39m ==> Parameters: 
2022-07-20 11:21:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799874187792384[0;39m <==    Updates: 0
2022-07-20 11:21:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799874187792384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:21:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799895171895296[0;39m 生成今日电子书快照开始
2022-07-20 11:21:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799895171895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799895171895296[0;39m ==> Parameters: 
2022-07-20 11:21:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799895171895296[0;39m <==    Updates: 0
2022-07-20 11:21:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799895171895296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:21:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799916143415296[0;39m 生成今日电子书快照开始
2022-07-20 11:21:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799916143415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799916143415296[0;39m ==> Parameters: 
2022-07-20 11:21:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799916143415296[0;39m <==    Updates: 0
2022-07-20 11:21:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799916143415296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:21:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799937127518208[0;39m 生成今日电子书快照开始
2022-07-20 11:21:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799937127518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799937127518208[0;39m ==> Parameters: 
2022-07-20 11:21:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799937127518208[0;39m <==    Updates: 0
2022-07-20 11:21:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799937127518208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:21:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799958115815424[0;39m 生成今日电子书快照开始
2022-07-20 11:21:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799958115815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:21:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799958115815424[0;39m ==> Parameters: 
2022-07-20 11:21:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799958115815424[0;39m <==    Updates: 0
2022-07-20 11:21:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799958115815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:22:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204799979078946816[0;39m 生成今日电子书快照开始
2022-07-20 11:22:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799979078946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799979078946816[0;39m ==> Parameters: 
2022-07-20 11:22:00.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204799979078946816[0;39m <==    Updates: 0
2022-07-20 11:22:00.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204799979078946816[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 11:22:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800000008523776[0;39m 生成今日电子书快照开始
2022-07-20 11:22:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800000008523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800000008523776[0;39m ==> Parameters: 
2022-07-20 11:22:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800000008523776[0;39m <==    Updates: 0
2022-07-20 11:22:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800000008523776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:22:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204800000021106688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:22:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800000021106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:22:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800000021106688[0;39m ==> Parameters: 
2022-07-20 11:22:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800000021106688[0;39m <==    Updates: 7
2022-07-20 11:22:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204800000021106688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:22:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800021034569728[0;39m 生成今日电子书快照开始
2022-07-20 11:22:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800021034569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800021034569728[0;39m ==> Parameters: 
2022-07-20 11:22:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800021034569728[0;39m <==    Updates: 0
2022-07-20 11:22:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800021034569728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:22:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800042001895424[0;39m 生成今日电子书快照开始
2022-07-20 11:22:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800042001895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800042001895424[0;39m ==> Parameters: 
2022-07-20 11:22:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800042001895424[0;39m <==    Updates: 0
2022-07-20 11:22:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800042001895424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:22:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800062948249600[0;39m 生成今日电子书快照开始
2022-07-20 11:22:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800062948249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800062948249600[0;39m ==> Parameters: 
2022-07-20 11:22:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800062948249600[0;39m <==    Updates: 0
2022-07-20 11:22:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800062948249600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:22:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800083923963904[0;39m 生成今日电子书快照开始
2022-07-20 11:22:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800083923963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800083923963904[0;39m ==> Parameters: 
2022-07-20 11:22:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800083923963904[0;39m <==    Updates: 0
2022-07-20 11:22:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800083923963904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:22:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800104882900992[0;39m 生成今日电子书快照开始
2022-07-20 11:22:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800104882900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800104882900992[0;39m ==> Parameters: 
2022-07-20 11:22:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800104882900992[0;39m <==    Updates: 0
2022-07-20 11:22:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800104882900992[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:22:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800125883781120[0;39m 生成今日电子书快照开始
2022-07-20 11:22:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800125883781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800125883781120[0;39m ==> Parameters: 
2022-07-20 11:22:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800125883781120[0;39m <==    Updates: 0
2022-07-20 11:22:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800125883781120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:22:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204800125892169728[0;39m 更新电子书下的文档数据开始
2022-07-20 11:22:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800125892169728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:22:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800125892169728[0;39m ==> Parameters: 
2022-07-20 11:22:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800125892169728[0;39m <==    Updates: 7
2022-07-20 11:22:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204800125892169728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:22:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800146851106816[0;39m 生成今日电子书快照开始
2022-07-20 11:22:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800146851106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800146851106816[0;39m ==> Parameters: 
2022-07-20 11:22:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800146851106816[0;39m <==    Updates: 0
2022-07-20 11:22:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800146851106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:22:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800167780683776[0;39m 生成今日电子书快照开始
2022-07-20 11:22:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800167780683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800167780683776[0;39m ==> Parameters: 
2022-07-20 11:22:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800167780683776[0;39m <==    Updates: 0
2022-07-20 11:22:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800167780683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:22:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800188773175296[0;39m 生成今日电子书快照开始
2022-07-20 11:22:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800188773175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800188773175296[0;39m ==> Parameters: 
2022-07-20 11:22:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800188773175296[0;39m <==    Updates: 0
2022-07-20 11:22:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800188773175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:22:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800209753083904[0;39m 生成今日电子书快照开始
2022-07-20 11:22:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800209753083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:22:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800209753083904[0;39m ==> Parameters: 
2022-07-20 11:22:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800209753083904[0;39m <==    Updates: 0
2022-07-20 11:22:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800209753083904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:23:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800230695243776[0;39m 生成今日电子书快照开始
2022-07-20 11:23:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800230695243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800230695243776[0;39m ==> Parameters: 
2022-07-20 11:23:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800230695243776[0;39m <==    Updates: 0
2022-07-20 11:23:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800230695243776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:23:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800251691929600[0;39m 生成今日电子书快照开始
2022-07-20 11:23:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800251691929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800251691929600[0;39m ==> Parameters: 
2022-07-20 11:23:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800251691929600[0;39m <==    Updates: 0
2022-07-20 11:23:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800251691929600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:23:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204800251704512512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:23:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800251704512512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:23:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800251704512512[0;39m ==> Parameters: 
2022-07-20 11:23:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800251704512512[0;39m <==    Updates: 7
2022-07-20 11:23:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204800251704512512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:23:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800272650866688[0;39m 生成今日电子书快照开始
2022-07-20 11:23:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800272650866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800272650866688[0;39m ==> Parameters: 
2022-07-20 11:23:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800272650866688[0;39m <==    Updates: 0
2022-07-20 11:23:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800272650866688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:23:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800293660135424[0;39m 生成今日电子书快照开始
2022-07-20 11:23:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800293660135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800293660135424[0;39m ==> Parameters: 
2022-07-20 11:23:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800293660135424[0;39m <==    Updates: 0
2022-07-20 11:23:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800293660135424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:23:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800314593906688[0;39m 生成今日电子书快照开始
2022-07-20 11:23:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800314593906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800314593906688[0;39m ==> Parameters: 
2022-07-20 11:23:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800314593906688[0;39m <==    Updates: 0
2022-07-20 11:23:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800314593906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:23:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800335557038080[0;39m 生成今日电子书快照开始
2022-07-20 11:23:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800335557038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800335557038080[0;39m ==> Parameters: 
2022-07-20 11:23:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800335557038080[0;39m <==    Updates: 0
2022-07-20 11:23:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800335557038080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:23:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800356566306816[0;39m 生成今日电子书快照开始
2022-07-20 11:23:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800356566306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800356566306816[0;39m ==> Parameters: 
2022-07-20 11:23:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800356566306816[0;39m <==    Updates: 0
2022-07-20 11:23:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800356566306816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:23:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800377516855296[0;39m 生成今日电子书快照开始
2022-07-20 11:23:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800377516855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800377516855296[0;39m ==> Parameters: 
2022-07-20 11:23:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800377516855296[0;39m <==    Updates: 0
2022-07-20 11:23:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800377516855296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:23:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204800377533632512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:23:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800377533632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:23:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800377533632512[0;39m ==> Parameters: 
2022-07-20 11:23:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800377533632512[0;39m <==    Updates: 7
2022-07-20 11:23:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204800377533632512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:23:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800398505152512[0;39m 生成今日电子书快照开始
2022-07-20 11:23:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800398505152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800398505152512[0;39m ==> Parameters: 
2022-07-20 11:23:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800398505152512[0;39m <==    Updates: 0
2022-07-20 11:23:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800398505152512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:23:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800419455700992[0;39m 生成今日电子书快照开始
2022-07-20 11:23:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800419455700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800419455700992[0;39m ==> Parameters: 
2022-07-20 11:23:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800419455700992[0;39m <==    Updates: 0
2022-07-20 11:23:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800419455700992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:23:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800440443998208[0;39m 生成今日电子书快照开始
2022-07-20 11:23:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800440443998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800440443998208[0;39m ==> Parameters: 
2022-07-20 11:23:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800440443998208[0;39m <==    Updates: 0
2022-07-20 11:23:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800440443998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:23:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800461432295424[0;39m 生成今日电子书快照开始
2022-07-20 11:23:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800461432295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:23:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800461432295424[0;39m ==> Parameters: 
2022-07-20 11:23:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800461432295424[0;39m <==    Updates: 0
2022-07-20 11:23:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800461432295424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:24:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800482361872384[0;39m 生成今日电子书快照开始
2022-07-20 11:24:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800482361872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800482361872384[0;39m ==> Parameters: 
2022-07-20 11:24:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800482361872384[0;39m <==    Updates: 0
2022-07-20 11:24:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800482361872384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:24:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800503345975296[0;39m 生成今日电子书快照开始
2022-07-20 11:24:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800503345975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800503345975296[0;39m ==> Parameters: 
2022-07-20 11:24:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800503345975296[0;39m <==    Updates: 0
2022-07-20 11:24:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800503345975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:24:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204800503354363904[0;39m 更新电子书下的文档数据开始
2022-07-20 11:24:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800503354363904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:24:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800503354363904[0;39m ==> Parameters: 
2022-07-20 11:24:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800503354363904[0;39m <==    Updates: 7
2022-07-20 11:24:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204800503354363904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:24:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800524330078208[0;39m 生成今日电子书快照开始
2022-07-20 11:24:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800524330078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800524330078208[0;39m ==> Parameters: 
2022-07-20 11:24:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800524330078208[0;39m <==    Updates: 0
2022-07-20 11:24:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800524330078208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:24:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800545268043776[0;39m 生成今日电子书快照开始
2022-07-20 11:24:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800545268043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800545268043776[0;39m ==> Parameters: 
2022-07-20 11:24:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800545268043776[0;39m <==    Updates: 0
2022-07-20 11:24:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800545268043776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:24:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800566277312512[0;39m 生成今日电子书快照开始
2022-07-20 11:24:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800566277312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800566277312512[0;39m ==> Parameters: 
2022-07-20 11:24:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800566277312512[0;39m <==    Updates: 0
2022-07-20 11:24:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800566277312512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:24:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800587219472384[0;39m 生成今日电子书快照开始
2022-07-20 11:24:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800587219472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800587219472384[0;39m ==> Parameters: 
2022-07-20 11:24:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800587219472384[0;39m <==    Updates: 0
2022-07-20 11:24:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800587219472384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:24:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800608203575296[0;39m 生成今日电子书快照开始
2022-07-20 11:24:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800608203575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800608203575296[0;39m ==> Parameters: 
2022-07-20 11:24:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800608203575296[0;39m <==    Updates: 0
2022-07-20 11:24:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800608203575296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:24:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204800629187678208[0;39m 更新电子书下的文档数据开始
2022-07-20 11:24:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800629187678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:24:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800629187678208[0;39m ==> Parameters: 
2022-07-20 11:24:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800629187678208[0;39m <==    Updates: 7
2022-07-20 11:24:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204800629187678208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:24:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800629191872512[0;39m 生成今日电子书快照开始
2022-07-20 11:24:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800629191872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800629191872512[0;39m ==> Parameters: 
2022-07-20 11:24:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800629191872512[0;39m <==    Updates: 0
2022-07-20 11:24:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800629191872512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:24:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800650146615296[0;39m 生成今日电子书快照开始
2022-07-20 11:24:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800650146615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800650146615296[0;39m ==> Parameters: 
2022-07-20 11:24:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800650146615296[0;39m <==    Updates: 0
2022-07-20 11:24:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800650146615296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:24:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800671113940992[0;39m 生成今日电子书快照开始
2022-07-20 11:24:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800671113940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800671113940992[0;39m ==> Parameters: 
2022-07-20 11:24:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800671113940992[0;39m <==    Updates: 0
2022-07-20 11:24:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800671113940992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:24:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800692077072384[0;39m 生成今日电子书快照开始
2022-07-20 11:24:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800692077072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800692077072384[0;39m ==> Parameters: 
2022-07-20 11:24:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800692077072384[0;39m <==    Updates: 0
2022-07-20 11:24:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800692077072384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:24:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800713048592384[0;39m 生成今日电子书快照开始
2022-07-20 11:24:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800713048592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:24:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800713048592384[0;39m ==> Parameters: 
2022-07-20 11:24:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800713048592384[0;39m <==    Updates: 0
2022-07-20 11:24:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800713048592384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:25:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800734053666816[0;39m 生成今日电子书快照开始
2022-07-20 11:25:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800734053666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800734053666816[0;39m ==> Parameters: 
2022-07-20 11:25:00.024 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800734053666816[0;39m <==    Updates: 0
2022-07-20 11:25:00.026 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800734053666816[0;39m 生成今日电子书快照结束，耗时：13 毫秒
2022-07-20 11:25:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204800754991632384[0;39m 更新电子书下的文档数据开始
2022-07-20 11:25:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800754991632384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:25:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800754991632384[0;39m ==> Parameters: 
2022-07-20 11:25:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800754991632384[0;39m <==    Updates: 7
2022-07-20 11:25:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204800754991632384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:25:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800755000020992[0;39m 生成今日电子书快照开始
2022-07-20 11:25:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800755000020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800755000020992[0;39m ==> Parameters: 
2022-07-20 11:25:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800755000020992[0;39m <==    Updates: 0
2022-07-20 11:25:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800755000020992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:25:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800775950569472[0;39m 生成今日电子书快照开始
2022-07-20 11:25:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800775950569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800775950569472[0;39m ==> Parameters: 
2022-07-20 11:25:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800775950569472[0;39m <==    Updates: 0
2022-07-20 11:25:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800775950569472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:25:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800796943060992[0;39m 生成今日电子书快照开始
2022-07-20 11:25:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800796943060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800796943060992[0;39m ==> Parameters: 
2022-07-20 11:25:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800796943060992[0;39m <==    Updates: 0
2022-07-20 11:25:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800796943060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:25:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800817906192384[0;39m 生成今日电子书快照开始
2022-07-20 11:25:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800817906192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800817906192384[0;39m ==> Parameters: 
2022-07-20 11:25:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800817906192384[0;39m <==    Updates: 0
2022-07-20 11:25:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800817906192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:25:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800838886100992[0;39m 生成今日电子书快照开始
2022-07-20 11:25:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800838886100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800838886100992[0;39m ==> Parameters: 
2022-07-20 11:25:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800838886100992[0;39m <==    Updates: 0
2022-07-20 11:25:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800838886100992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:25:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800859836649472[0;39m 生成今日电子书快照开始
2022-07-20 11:25:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800859836649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800859836649472[0;39m ==> Parameters: 
2022-07-20 11:25:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800859836649472[0;39m <==    Updates: 0
2022-07-20 11:25:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800859836649472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:25:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204800880812363776[0;39m 更新电子书下的文档数据开始
2022-07-20 11:25:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800880812363776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:25:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800880812363776[0;39m ==> Parameters: 
2022-07-20 11:25:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204800880812363776[0;39m <==    Updates: 7
2022-07-20 11:25:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204800880812363776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:25:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800880820752384[0;39m 生成今日电子书快照开始
2022-07-20 11:25:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800880820752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800880820752384[0;39m ==> Parameters: 
2022-07-20 11:25:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800880820752384[0;39m <==    Updates: 0
2022-07-20 11:25:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800880820752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:25:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800901838409728[0;39m 生成今日电子书快照开始
2022-07-20 11:25:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800901838409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800901838409728[0;39m ==> Parameters: 
2022-07-20 11:25:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800901838409728[0;39m <==    Updates: 0
2022-07-20 11:25:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800901838409728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:25:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800922755403776[0;39m 生成今日电子书快照开始
2022-07-20 11:25:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800922755403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800922755403776[0;39m ==> Parameters: 
2022-07-20 11:25:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800922755403776[0;39m <==    Updates: 0
2022-07-20 11:25:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800922755403776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:25:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800943722729472[0;39m 生成今日电子书快照开始
2022-07-20 11:25:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800943722729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:50.099 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800943722729472[0;39m ==> Parameters: 
2022-07-20 11:25:50.101 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800943722729472[0;39m <==    Updates: 0
2022-07-20 11:25:50.101 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800943722729472[0;39m 生成今日电子书快照结束，耗时：100 毫秒
2022-07-20 11:25:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800964698443776[0;39m 生成今日电子书快照开始
2022-07-20 11:25:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800964698443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:25:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800964698443776[0;39m ==> Parameters: 
2022-07-20 11:25:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800964698443776[0;39m <==    Updates: 0
2022-07-20 11:25:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800964698443776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:26:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204800985711906816[0;39m 生成今日电子书快照开始
2022-07-20 11:26:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800985711906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800985711906816[0;39m ==> Parameters: 
2022-07-20 11:26:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204800985711906816[0;39m <==    Updates: 0
2022-07-20 11:26:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204800985711906816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:26:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204801006641483776[0;39m 更新电子书下的文档数据开始
2022-07-20 11:26:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801006641483776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:26:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801006641483776[0;39m ==> Parameters: 
2022-07-20 11:26:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801006641483776[0;39m <==    Updates: 7
2022-07-20 11:26:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204801006641483776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:26:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801006649872384[0;39m 生成今日电子书快照开始
2022-07-20 11:26:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801006649872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801006649872384[0;39m ==> Parameters: 
2022-07-20 11:26:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801006649872384[0;39m <==    Updates: 0
2022-07-20 11:26:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801006649872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:26:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801027659141120[0;39m 生成今日电子书快照开始
2022-07-20 11:26:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801027659141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801027659141120[0;39m ==> Parameters: 
2022-07-20 11:26:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801027659141120[0;39m <==    Updates: 0
2022-07-20 11:26:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801027659141120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:26:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801048597106688[0;39m 生成今日电子书快照开始
2022-07-20 11:26:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801048597106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801048597106688[0;39m ==> Parameters: 
2022-07-20 11:26:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801048597106688[0;39m <==    Updates: 0
2022-07-20 11:26:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801048597106688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:26:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801069606375424[0;39m 生成今日电子书快照开始
2022-07-20 11:26:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801069606375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801069606375424[0;39m ==> Parameters: 
2022-07-20 11:26:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801069606375424[0;39m <==    Updates: 0
2022-07-20 11:26:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801069606375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:26:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801090582089728[0;39m 生成今日电子书快照开始
2022-07-20 11:26:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801090582089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801090582089728[0;39m ==> Parameters: 
2022-07-20 11:26:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801090582089728[0;39m <==    Updates: 0
2022-07-20 11:26:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801090582089728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:26:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801111528443904[0;39m 生成今日电子书快照开始
2022-07-20 11:26:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801111528443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801111528443904[0;39m ==> Parameters: 
2022-07-20 11:26:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801111528443904[0;39m <==    Updates: 0
2022-07-20 11:26:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801111528443904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:26:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801132529324032[0;39m 生成今日电子书快照开始
2022-07-20 11:26:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801132529324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801132529324032[0;39m ==> Parameters: 
2022-07-20 11:26:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801132529324032[0;39m <==    Updates: 0
2022-07-20 11:26:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801132529324032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:26:35.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204801132541906944[0;39m 更新电子书下的文档数据开始
2022-07-20 11:26:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801132541906944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:26:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801132541906944[0;39m ==> Parameters: 
2022-07-20 11:26:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801132541906944[0;39m <==    Updates: 7
2022-07-20 11:26:35.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204801132541906944[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:26:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801153442123776[0;39m 生成今日电子书快照开始
2022-07-20 11:26:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801153442123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801153442123776[0;39m ==> Parameters: 
2022-07-20 11:26:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801153442123776[0;39m <==    Updates: 0
2022-07-20 11:26:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801153442123776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:26:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801174417838080[0;39m 生成今日电子书快照开始
2022-07-20 11:26:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801174417838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801174417838080[0;39m ==> Parameters: 
2022-07-20 11:26:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801174417838080[0;39m <==    Updates: 0
2022-07-20 11:26:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801174417838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:26:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801195431301120[0;39m 生成今日电子书快照开始
2022-07-20 11:26:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801195431301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801195431301120[0;39m ==> Parameters: 
2022-07-20 11:26:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801195431301120[0;39m <==    Updates: 0
2022-07-20 11:26:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801195431301120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:26:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801216386043904[0;39m 生成今日电子书快照开始
2022-07-20 11:26:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801216386043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:26:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801216386043904[0;39m ==> Parameters: 
2022-07-20 11:26:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801216386043904[0;39m <==    Updates: 0
2022-07-20 11:26:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801216386043904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:27:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801237386924032[0;39m 生成今日电子书快照开始
2022-07-20 11:27:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801237386924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801237386924032[0;39m ==> Parameters: 
2022-07-20 11:27:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801237386924032[0;39m <==    Updates: 0
2022-07-20 11:27:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801237386924032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:27:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204801258308112384[0;39m 更新电子书下的文档数据开始
2022-07-20 11:27:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801258308112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:27:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801258308112384[0;39m ==> Parameters: 
2022-07-20 11:27:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801258308112384[0;39m <==    Updates: 7
2022-07-20 11:27:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204801258308112384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:27:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801258312306688[0;39m 生成今日电子书快照开始
2022-07-20 11:27:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801258312306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801258312306688[0;39m ==> Parameters: 
2022-07-20 11:27:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801258312306688[0;39m <==    Updates: 0
2022-07-20 11:27:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801258312306688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:27:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801279304798208[0;39m 生成今日电子书快照开始
2022-07-20 11:27:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801279304798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801279304798208[0;39m ==> Parameters: 
2022-07-20 11:27:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801279304798208[0;39m <==    Updates: 0
2022-07-20 11:27:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801279304798208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:27:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801300276318208[0;39m 生成今日电子书快照开始
2022-07-20 11:27:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801300276318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801300276318208[0;39m ==> Parameters: 
2022-07-20 11:27:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801300276318208[0;39m <==    Updates: 0
2022-07-20 11:27:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801300276318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:27:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801321226866688[0;39m 生成今日电子书快照开始
2022-07-20 11:27:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801321226866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801321226866688[0;39m ==> Parameters: 
2022-07-20 11:27:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801321226866688[0;39m <==    Updates: 0
2022-07-20 11:27:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801321226866688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:27:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801342236135424[0;39m 生成今日电子书快照开始
2022-07-20 11:27:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801342236135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801342236135424[0;39m ==> Parameters: 
2022-07-20 11:27:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801342236135424[0;39m <==    Updates: 0
2022-07-20 11:27:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801342236135424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:27:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801363169906688[0;39m 生成今日电子书快照开始
2022-07-20 11:27:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801363169906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801363169906688[0;39m ==> Parameters: 
2022-07-20 11:27:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801363169906688[0;39m <==    Updates: 0
2022-07-20 11:27:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801363169906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:27:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801384137232384[0;39m 生成今日电子书快照开始
2022-07-20 11:27:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801384137232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801384137232384[0;39m ==> Parameters: 
2022-07-20 11:27:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801384137232384[0;39m <==    Updates: 0
2022-07-20 11:27:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801384137232384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:27:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204801384149815296[0;39m 更新电子书下的文档数据开始
2022-07-20 11:27:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801384149815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:27:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801384149815296[0;39m ==> Parameters: 
2022-07-20 11:27:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801384149815296[0;39m <==    Updates: 7
2022-07-20 11:27:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204801384149815296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:27:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801405108752384[0;39m 生成今日电子书快照开始
2022-07-20 11:27:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801405108752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801405108752384[0;39m ==> Parameters: 
2022-07-20 11:27:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801405108752384[0;39m <==    Updates: 0
2022-07-20 11:27:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801405108752384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:27:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801426122215424[0;39m 生成今日电子书快照开始
2022-07-20 11:27:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801426122215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801426122215424[0;39m ==> Parameters: 
2022-07-20 11:27:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801426122215424[0;39m <==    Updates: 0
2022-07-20 11:27:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801426122215424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:27:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801447064375296[0;39m 生成今日电子书快照开始
2022-07-20 11:27:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801447064375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801447064375296[0;39m ==> Parameters: 
2022-07-20 11:27:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801447064375296[0;39m <==    Updates: 0
2022-07-20 11:27:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801447064375296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:27:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801468044283904[0;39m 生成今日电子书快照开始
2022-07-20 11:27:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801468044283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:27:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801468044283904[0;39m ==> Parameters: 
2022-07-20 11:27:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801468044283904[0;39m <==    Updates: 0
2022-07-20 11:27:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801468044283904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:28:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801488990638080[0;39m 生成今日电子书快照开始
2022-07-20 11:28:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801488990638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801488990638080[0;39m ==> Parameters: 
2022-07-20 11:28:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801488990638080[0;39m <==    Updates: 0
2022-07-20 11:28:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801488990638080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:28:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204801509966352384[0;39m 更新电子书下的文档数据开始
2022-07-20 11:28:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801509966352384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:28:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801509966352384[0;39m ==> Parameters: 
2022-07-20 11:28:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801509966352384[0;39m <==    Updates: 7
2022-07-20 11:28:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204801509966352384[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-20 11:28:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801509999906816[0;39m 生成今日电子书快照开始
2022-07-20 11:28:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801509999906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801509999906816[0;39m ==> Parameters: 
2022-07-20 11:28:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801509999906816[0;39m <==    Updates: 0
2022-07-20 11:28:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801509999906816[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:28:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801530933678080[0;39m 生成今日电子书快照开始
2022-07-20 11:28:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801530933678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801530933678080[0;39m ==> Parameters: 
2022-07-20 11:28:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801530933678080[0;39m <==    Updates: 0
2022-07-20 11:28:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801530933678080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:28:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801551901003776[0;39m 生成今日电子书快照开始
2022-07-20 11:28:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801551901003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801551901003776[0;39m ==> Parameters: 
2022-07-20 11:28:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801551901003776[0;39m <==    Updates: 0
2022-07-20 11:28:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801551901003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:28:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801572885106688[0;39m 生成今日电子书快照开始
2022-07-20 11:28:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801572885106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801572885106688[0;39m ==> Parameters: 
2022-07-20 11:28:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801572885106688[0;39m <==    Updates: 0
2022-07-20 11:28:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801572885106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:28:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801593873403904[0;39m 生成今日电子书快照开始
2022-07-20 11:28:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801593873403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801593873403904[0;39m ==> Parameters: 
2022-07-20 11:28:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801593873403904[0;39m <==    Updates: 0
2022-07-20 11:28:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801593873403904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:28:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801614828146688[0;39m 生成今日电子书快照开始
2022-07-20 11:28:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801614828146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801614828146688[0;39m ==> Parameters: 
2022-07-20 11:28:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801614828146688[0;39m <==    Updates: 0
2022-07-20 11:28:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801614828146688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:28:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204801635824832512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:28:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801635824832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:28:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801635824832512[0;39m ==> Parameters: 
2022-07-20 11:28:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801635824832512[0;39m <==    Updates: 7
2022-07-20 11:28:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204801635824832512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:28:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801635837415424[0;39m 生成今日电子书快照开始
2022-07-20 11:28:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801635837415424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801635837415424[0;39m ==> Parameters: 
2022-07-20 11:28:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801635837415424[0;39m <==    Updates: 0
2022-07-20 11:28:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801635837415424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:28:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801656758603776[0;39m 生成今日电子书快照开始
2022-07-20 11:28:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801656758603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801656758603776[0;39m ==> Parameters: 
2022-07-20 11:28:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801656758603776[0;39m <==    Updates: 0
2022-07-20 11:28:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801656758603776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:28:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801677751095296[0;39m 生成今日电子书快照开始
2022-07-20 11:28:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801677751095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801677751095296[0;39m ==> Parameters: 
2022-07-20 11:28:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801677751095296[0;39m <==    Updates: 0
2022-07-20 11:28:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801677751095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:28:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801698751975424[0;39m 生成今日电子书快照开始
2022-07-20 11:28:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801698751975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801698751975424[0;39m ==> Parameters: 
2022-07-20 11:28:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801698751975424[0;39m <==    Updates: 0
2022-07-20 11:28:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801698751975424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:28:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801719731884032[0;39m 生成今日电子书快照开始
2022-07-20 11:28:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801719731884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:28:55.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801719731884032[0;39m ==> Parameters: 
2022-07-20 11:28:55.024 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801719731884032[0;39m <==    Updates: 0
2022-07-20 11:28:55.025 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801719731884032[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:29:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801740648878080[0;39m 生成今日电子书快照开始
2022-07-20 11:29:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801740648878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801740648878080[0;39m ==> Parameters: 
2022-07-20 11:29:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801740648878080[0;39m <==    Updates: 0
2022-07-20 11:29:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801740648878080[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:29:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204801761653952512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:29:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801761653952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:29:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801761653952512[0;39m ==> Parameters: 
2022-07-20 11:29:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801761653952512[0;39m <==    Updates: 7
2022-07-20 11:29:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204801761653952512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:29:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801761662341120[0;39m 生成今日电子书快照开始
2022-07-20 11:29:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801761662341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801761662341120[0;39m ==> Parameters: 
2022-07-20 11:29:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801761662341120[0;39m <==    Updates: 0
2022-07-20 11:29:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801761662341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:29:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801782583529472[0;39m 生成今日电子书快照开始
2022-07-20 11:29:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801782583529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801782583529472[0;39m ==> Parameters: 
2022-07-20 11:29:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801782583529472[0;39m <==    Updates: 0
2022-07-20 11:29:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801782583529472[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 11:29:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801803609575424[0;39m 生成今日电子书快照开始
2022-07-20 11:29:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801803609575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801803609575424[0;39m ==> Parameters: 
2022-07-20 11:29:15.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801803609575424[0;39m <==    Updates: 0
2022-07-20 11:29:15.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801803609575424[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:29:20.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801824522375168[0;39m 生成今日电子书快照开始
2022-07-20 11:29:20.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801824522375168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801824522375168[0;39m ==> Parameters: 
2022-07-20 11:29:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801824522375168[0;39m <==    Updates: 0
2022-07-20 11:29:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801824522375168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:29:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801845510672384[0;39m 生成今日电子书快照开始
2022-07-20 11:29:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801845510672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801845510672384[0;39m ==> Parameters: 
2022-07-20 11:29:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801845510672384[0;39m <==    Updates: 0
2022-07-20 11:29:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801845510672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:29:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801866473803776[0;39m 生成今日电子书快照开始
2022-07-20 11:29:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801866473803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801866473803776[0;39m ==> Parameters: 
2022-07-20 11:29:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801866473803776[0;39m <==    Updates: 0
2022-07-20 11:29:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801866473803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:29:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204801887457906688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:29:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801887457906688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:29:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801887457906688[0;39m ==> Parameters: 
2022-07-20 11:29:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204801887457906688[0;39m <==    Updates: 7
2022-07-20 11:29:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204801887457906688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:29:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801887466295296[0;39m 生成今日电子书快照开始
2022-07-20 11:29:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801887466295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801887466295296[0;39m ==> Parameters: 
2022-07-20 11:29:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801887466295296[0;39m <==    Updates: 0
2022-07-20 11:29:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801887466295296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:29:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801908421038080[0;39m 生成今日电子书快照开始
2022-07-20 11:29:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801908421038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801908421038080[0;39m ==> Parameters: 
2022-07-20 11:29:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801908421038080[0;39m <==    Updates: 0
2022-07-20 11:29:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801908421038080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:29:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801929409335296[0;39m 生成今日电子书快照开始
2022-07-20 11:29:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801929409335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801929409335296[0;39m ==> Parameters: 
2022-07-20 11:29:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801929409335296[0;39m <==    Updates: 0
2022-07-20 11:29:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801929409335296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:29:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801950389243904[0;39m 生成今日电子书快照开始
2022-07-20 11:29:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801950389243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801950389243904[0;39m ==> Parameters: 
2022-07-20 11:29:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801950389243904[0;39m <==    Updates: 0
2022-07-20 11:29:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801950389243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:29:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801971335598080[0;39m 生成今日电子书快照开始
2022-07-20 11:29:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801971335598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:29:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801971335598080[0;39m ==> Parameters: 
2022-07-20 11:29:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801971335598080[0;39m <==    Updates: 0
2022-07-20 11:29:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801971335598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:30:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204801992311312384[0;39m 生成今日电子书快照开始
2022-07-20 11:30:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801992311312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801992311312384[0;39m ==> Parameters: 
2022-07-20 11:30:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204801992311312384[0;39m <==    Updates: 0
2022-07-20 11:30:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204801992311312384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:30:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204802013291220992[0;39m 更新电子书下的文档数据开始
2022-07-20 11:30:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802013291220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:30:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802013291220992[0;39m ==> Parameters: 
2022-07-20 11:30:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802013291220992[0;39m <==    Updates: 7
2022-07-20 11:30:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204802013291220992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:30:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802013295415296[0;39m 生成今日电子书快照开始
2022-07-20 11:30:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802013295415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802013295415296[0;39m ==> Parameters: 
2022-07-20 11:30:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802013295415296[0;39m <==    Updates: 0
2022-07-20 11:30:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802013295415296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:30:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802034283712512[0;39m 生成今日电子书快照开始
2022-07-20 11:30:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802034283712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802034283712512[0;39m ==> Parameters: 
2022-07-20 11:30:10.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802034283712512[0;39m <==    Updates: 0
2022-07-20 11:30:10.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802034283712512[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:30:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802055255232512[0;39m 生成今日电子书快照开始
2022-07-20 11:30:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802055255232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802055255232512[0;39m ==> Parameters: 
2022-07-20 11:30:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802055255232512[0;39m <==    Updates: 0
2022-07-20 11:30:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802055255232512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:30:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802076193198080[0;39m 生成今日电子书快照开始
2022-07-20 11:30:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802076193198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802076193198080[0;39m ==> Parameters: 
2022-07-20 11:30:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802076193198080[0;39m <==    Updates: 0
2022-07-20 11:30:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802076193198080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:30:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802097194078208[0;39m 生成今日电子书快照开始
2022-07-20 11:30:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802097194078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802097194078208[0;39m ==> Parameters: 
2022-07-20 11:30:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802097194078208[0;39m <==    Updates: 0
2022-07-20 11:30:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802097194078208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:30:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802118153015296[0;39m 生成今日电子书快照开始
2022-07-20 11:30:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802118153015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802118153015296[0;39m ==> Parameters: 
2022-07-20 11:30:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802118153015296[0;39m <==    Updates: 0
2022-07-20 11:30:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802118153015296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:30:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802139111952384[0;39m 生成今日电子书快照开始
2022-07-20 11:30:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802139111952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802139111952384[0;39m ==> Parameters: 
2022-07-20 11:30:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802139111952384[0;39m <==    Updates: 0
2022-07-20 11:30:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802139111952384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:30:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204802139124535296[0;39m 更新电子书下的文档数据开始
2022-07-20 11:30:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802139124535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:30:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802139124535296[0;39m ==> Parameters: 
2022-07-20 11:30:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802139124535296[0;39m <==    Updates: 7
2022-07-20 11:30:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204802139124535296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:30:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802160117026816[0;39m 生成今日电子书快照开始
2022-07-20 11:30:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802160117026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802160117026816[0;39m ==> Parameters: 
2022-07-20 11:30:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802160117026816[0;39m <==    Updates: 0
2022-07-20 11:30:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802160117026816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:30:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802181088546816[0;39m 生成今日电子书快照开始
2022-07-20 11:30:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802181088546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802181088546816[0;39m ==> Parameters: 
2022-07-20 11:30:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802181088546816[0;39m <==    Updates: 0
2022-07-20 11:30:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802181088546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:30:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802202072649728[0;39m 生成今日电子书快照开始
2022-07-20 11:30:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802202072649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802202072649728[0;39m ==> Parameters: 
2022-07-20 11:30:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802202072649728[0;39m <==    Updates: 0
2022-07-20 11:30:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802202072649728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:30:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802223019003904[0;39m 生成今日电子书快照开始
2022-07-20 11:30:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802223019003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:30:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802223019003904[0;39m ==> Parameters: 
2022-07-20 11:30:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802223019003904[0;39m <==    Updates: 0
2022-07-20 11:30:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802223019003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:31:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802244011495424[0;39m 生成今日电子书快照开始
2022-07-20 11:31:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802244011495424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802244011495424[0;39m ==> Parameters: 
2022-07-20 11:31:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802244011495424[0;39m <==    Updates: 0
2022-07-20 11:31:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802244011495424[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:31:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802264932683776[0;39m 生成今日电子书快照开始
2022-07-20 11:31:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802264932683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802264932683776[0;39m ==> Parameters: 
2022-07-20 11:31:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802264932683776[0;39m <==    Updates: 0
2022-07-20 11:31:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802264932683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:31:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204802264945266688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:31:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802264945266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:31:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802264945266688[0;39m ==> Parameters: 
2022-07-20 11:31:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802264945266688[0;39m <==    Updates: 7
2022-07-20 11:31:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204802264945266688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:31:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802285954535424[0;39m 生成今日电子书快照开始
2022-07-20 11:31:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802285954535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802285954535424[0;39m ==> Parameters: 
2022-07-20 11:31:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802285954535424[0;39m <==    Updates: 0
2022-07-20 11:31:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802285954535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:31:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802306926055424[0;39m 生成今日电子书快照开始
2022-07-20 11:31:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802306926055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802306926055424[0;39m ==> Parameters: 
2022-07-20 11:31:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802306926055424[0;39m <==    Updates: 0
2022-07-20 11:31:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802306926055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:31:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802327905964032[0;39m 生成今日电子书快照开始
2022-07-20 11:31:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802327905964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802327905964032[0;39m ==> Parameters: 
2022-07-20 11:31:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802327905964032[0;39m <==    Updates: 0
2022-07-20 11:31:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802327905964032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:31:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802348852318208[0;39m 生成今日电子书快照开始
2022-07-20 11:31:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802348852318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802348852318208[0;39m ==> Parameters: 
2022-07-20 11:31:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802348852318208[0;39m <==    Updates: 0
2022-07-20 11:31:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802348852318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:31:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802369823838208[0;39m 生成今日电子书快照开始
2022-07-20 11:31:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802369823838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802369823838208[0;39m ==> Parameters: 
2022-07-20 11:31:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802369823838208[0;39m <==    Updates: 0
2022-07-20 11:31:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802369823838208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:31:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802390757609472[0;39m 生成今日电子书快照开始
2022-07-20 11:31:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802390757609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802390757609472[0;39m ==> Parameters: 
2022-07-20 11:31:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802390757609472[0;39m <==    Updates: 0
2022-07-20 11:31:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802390757609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:31:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204802390770192384[0;39m 更新电子书下的文档数据开始
2022-07-20 11:31:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802390770192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:31:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802390770192384[0;39m ==> Parameters: 
2022-07-20 11:31:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802390770192384[0;39m <==    Updates: 7
2022-07-20 11:31:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204802390770192384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:31:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802411766878208[0;39m 生成今日电子书快照开始
2022-07-20 11:31:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802411766878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802411766878208[0;39m ==> Parameters: 
2022-07-20 11:31:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802411766878208[0;39m <==    Updates: 0
2022-07-20 11:31:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802411766878208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:31:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802432725815296[0;39m 生成今日电子书快照开始
2022-07-20 11:31:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802432725815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802432725815296[0;39m ==> Parameters: 
2022-07-20 11:31:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802432725815296[0;39m <==    Updates: 0
2022-07-20 11:31:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802432725815296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:31:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802453726695424[0;39m 生成今日电子书快照开始
2022-07-20 11:31:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802453726695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802453726695424[0;39m ==> Parameters: 
2022-07-20 11:31:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802453726695424[0;39m <==    Updates: 0
2022-07-20 11:31:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802453726695424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:31:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802474698215424[0;39m 生成今日电子书快照开始
2022-07-20 11:31:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802474698215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:31:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802474698215424[0;39m ==> Parameters: 
2022-07-20 11:31:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802474698215424[0;39m <==    Updates: 0
2022-07-20 11:31:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802474698215424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:32:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802495665541120[0;39m 生成今日电子书快照开始
2022-07-20 11:32:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802495665541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802495665541120[0;39m ==> Parameters: 
2022-07-20 11:32:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802495665541120[0;39m <==    Updates: 0
2022-07-20 11:32:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802495665541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:32:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204802516590923776[0;39m 更新电子书下的文档数据开始
2022-07-20 11:32:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802516590923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:32:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802516590923776[0;39m ==> Parameters: 
2022-07-20 11:32:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802516590923776[0;39m <==    Updates: 7
2022-07-20 11:32:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204802516590923776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:32:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802516595118080[0;39m 生成今日电子书快照开始
2022-07-20 11:32:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802516595118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802516595118080[0;39m ==> Parameters: 
2022-07-20 11:32:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802516595118080[0;39m <==    Updates: 0
2022-07-20 11:32:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802516595118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:32:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802537625358336[0;39m 生成今日电子书快照开始
2022-07-20 11:32:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802537625358336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802537625358336[0;39m ==> Parameters: 
2022-07-20 11:32:10.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802537625358336[0;39m <==    Updates: 0
2022-07-20 11:32:10.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802537625358336[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:32:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802558550740992[0;39m 生成今日电子书快照开始
2022-07-20 11:32:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802558550740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802558550740992[0;39m ==> Parameters: 
2022-07-20 11:32:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802558550740992[0;39m <==    Updates: 0
2022-07-20 11:32:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802558550740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:32:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802579526455296[0;39m 生成今日电子书快照开始
2022-07-20 11:32:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802579526455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802579526455296[0;39m ==> Parameters: 
2022-07-20 11:32:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802579526455296[0;39m <==    Updates: 0
2022-07-20 11:32:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802579526455296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:32:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802600477003776[0;39m 生成今日电子书快照开始
2022-07-20 11:32:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802600477003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802600477003776[0;39m ==> Parameters: 
2022-07-20 11:32:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802600477003776[0;39m <==    Updates: 0
2022-07-20 11:32:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802600477003776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:32:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802621507244032[0;39m 生成今日电子书快照开始
2022-07-20 11:32:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802621507244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:30.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802621507244032[0;39m ==> Parameters: 
2022-07-20 11:32:30.024 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802621507244032[0;39m <==    Updates: 0
2022-07-20 11:32:30.024 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802621507244032[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:32:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802642466181120[0;39m 生成今日电子书快照开始
2022-07-20 11:32:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802642466181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802642466181120[0;39m ==> Parameters: 
2022-07-20 11:32:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802642466181120[0;39m <==    Updates: 0
2022-07-20 11:32:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802642466181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:32:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204802642474569728[0;39m 更新电子书下的文档数据开始
2022-07-20 11:32:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802642474569728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:32:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802642474569728[0;39m ==> Parameters: 
2022-07-20 11:32:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802642474569728[0;39m <==    Updates: 7
2022-07-20 11:32:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204802642474569728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:32:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802663404146688[0;39m 生成今日电子书快照开始
2022-07-20 11:32:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802663404146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802663404146688[0;39m ==> Parameters: 
2022-07-20 11:32:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802663404146688[0;39m <==    Updates: 0
2022-07-20 11:32:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802663404146688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:32:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802684388249600[0;39m 生成今日电子书快照开始
2022-07-20 11:32:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802684388249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802684388249600[0;39m ==> Parameters: 
2022-07-20 11:32:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802684388249600[0;39m <==    Updates: 0
2022-07-20 11:32:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802684388249600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:32:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802705363963904[0;39m 生成今日电子书快照开始
2022-07-20 11:32:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802705363963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802705363963904[0;39m ==> Parameters: 
2022-07-20 11:32:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802705363963904[0;39m <==    Updates: 0
2022-07-20 11:32:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802705363963904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:32:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802726360649728[0;39m 生成今日电子书快照开始
2022-07-20 11:32:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802726360649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:32:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802726360649728[0;39m ==> Parameters: 
2022-07-20 11:32:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802726360649728[0;39m <==    Updates: 0
2022-07-20 11:32:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802726360649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:33:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802747307003904[0;39m 生成今日电子书快照开始
2022-07-20 11:33:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802747307003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802747307003904[0;39m ==> Parameters: 
2022-07-20 11:33:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802747307003904[0;39m <==    Updates: 0
2022-07-20 11:33:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802747307003904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:33:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204802768244969472[0;39m 更新电子书下的文档数据开始
2022-07-20 11:33:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802768244969472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:33:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802768244969472[0;39m ==> Parameters: 
2022-07-20 11:33:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802768244969472[0;39m <==    Updates: 7
2022-07-20 11:33:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204802768244969472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:33:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802768253358080[0;39m 生成今日电子书快照开始
2022-07-20 11:33:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802768253358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802768253358080[0;39m ==> Parameters: 
2022-07-20 11:33:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802768253358080[0;39m <==    Updates: 0
2022-07-20 11:33:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802768253358080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:33:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802789220683776[0;39m 生成今日电子书快照开始
2022-07-20 11:33:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802789220683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802789220683776[0;39m ==> Parameters: 
2022-07-20 11:33:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802789220683776[0;39m <==    Updates: 0
2022-07-20 11:33:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802789220683776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:33:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802810250924032[0;39m 生成今日电子书快照开始
2022-07-20 11:33:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802810250924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802810250924032[0;39m ==> Parameters: 
2022-07-20 11:33:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802810250924032[0;39m <==    Updates: 0
2022-07-20 11:33:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802810250924032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:33:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802831205666816[0;39m 生成今日电子书快照开始
2022-07-20 11:33:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802831205666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802831205666816[0;39m ==> Parameters: 
2022-07-20 11:33:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802831205666816[0;39m <==    Updates: 0
2022-07-20 11:33:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802831205666816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:33:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802852160409600[0;39m 生成今日电子书快照开始
2022-07-20 11:33:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802852160409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802852160409600[0;39m ==> Parameters: 
2022-07-20 11:33:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802852160409600[0;39m <==    Updates: 0
2022-07-20 11:33:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802852160409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:33:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802873165484032[0;39m 生成今日电子书快照开始
2022-07-20 11:33:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802873165484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802873165484032[0;39m ==> Parameters: 
2022-07-20 11:33:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802873165484032[0;39m <==    Updates: 0
2022-07-20 11:33:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802873165484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:33:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802894137004032[0;39m 生成今日电子书快照开始
2022-07-20 11:33:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802894137004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802894137004032[0;39m ==> Parameters: 
2022-07-20 11:33:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802894137004032[0;39m <==    Updates: 0
2022-07-20 11:33:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802894137004032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:33:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204802894141198336[0;39m 更新电子书下的文档数据开始
2022-07-20 11:33:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802894141198336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:33:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802894141198336[0;39m ==> Parameters: 
2022-07-20 11:33:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204802894141198336[0;39m <==    Updates: 7
2022-07-20 11:33:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204802894141198336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:33:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802915045609472[0;39m 生成今日电子书快照开始
2022-07-20 11:33:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802915045609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802915045609472[0;39m ==> Parameters: 
2022-07-20 11:33:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802915045609472[0;39m <==    Updates: 0
2022-07-20 11:33:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802915045609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:33:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802936059072512[0;39m 生成今日电子书快照开始
2022-07-20 11:33:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802936059072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802936059072512[0;39m ==> Parameters: 
2022-07-20 11:33:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802936059072512[0;39m <==    Updates: 0
2022-07-20 11:33:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802936059072512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:33:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802957034786816[0;39m 生成今日电子书快照开始
2022-07-20 11:33:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802957034786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802957034786816[0;39m ==> Parameters: 
2022-07-20 11:33:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802957034786816[0;39m <==    Updates: 0
2022-07-20 11:33:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802957034786816[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:33:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802977960169472[0;39m 生成今日电子书快照开始
2022-07-20 11:33:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802977960169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:33:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802977960169472[0;39m ==> Parameters: 
2022-07-20 11:33:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802977960169472[0;39m <==    Updates: 0
2022-07-20 11:33:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802977960169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:34:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204802998948466688[0;39m 生成今日电子书快照开始
2022-07-20 11:34:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802998948466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802998948466688[0;39m ==> Parameters: 
2022-07-20 11:34:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204802998948466688[0;39m <==    Updates: 0
2022-07-20 11:34:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204802998948466688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:34:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204803019911598080[0;39m 更新电子书下的文档数据开始
2022-07-20 11:34:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803019911598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:34:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803019911598080[0;39m ==> Parameters: 
2022-07-20 11:34:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803019911598080[0;39m <==    Updates: 7
2022-07-20 11:34:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204803019911598080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:34:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803019924180992[0;39m 生成今日电子书快照开始
2022-07-20 11:34:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803019924180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803019924180992[0;39m ==> Parameters: 
2022-07-20 11:34:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803019924180992[0;39m <==    Updates: 0
2022-07-20 11:34:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803019924180992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:34:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803040929255424[0;39m 生成今日电子书快照开始
2022-07-20 11:34:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803040929255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803040929255424[0;39m ==> Parameters: 
2022-07-20 11:34:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803040929255424[0;39m <==    Updates: 0
2022-07-20 11:34:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803040929255424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:34:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803061888192512[0;39m 生成今日电子书快照开始
2022-07-20 11:34:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803061888192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803061888192512[0;39m ==> Parameters: 
2022-07-20 11:34:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803061888192512[0;39m <==    Updates: 0
2022-07-20 11:34:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803061888192512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:34:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803082826158080[0;39m 生成今日电子书快照开始
2022-07-20 11:34:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803082826158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803082826158080[0;39m ==> Parameters: 
2022-07-20 11:34:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803082826158080[0;39m <==    Updates: 0
2022-07-20 11:34:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803082826158080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:34:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803103822843904[0;39m 生成今日电子书快照开始
2022-07-20 11:34:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803103822843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803103822843904[0;39m ==> Parameters: 
2022-07-20 11:34:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803103822843904[0;39m <==    Updates: 0
2022-07-20 11:34:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803103822843904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:34:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803124802752512[0;39m 生成今日电子书快照开始
2022-07-20 11:34:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803124802752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803124802752512[0;39m ==> Parameters: 
2022-07-20 11:34:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803124802752512[0;39m <==    Updates: 0
2022-07-20 11:34:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803124802752512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:34:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204803145732329472[0;39m 更新电子书下的文档数据开始
2022-07-20 11:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803145732329472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803145732329472[0;39m ==> Parameters: 
2022-07-20 11:34:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803145732329472[0;39m <==    Updates: 7
2022-07-20 11:34:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204803145732329472[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 11:34:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803145757495296[0;39m 生成今日电子书快照开始
2022-07-20 11:34:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803145757495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803145757495296[0;39m ==> Parameters: 
2022-07-20 11:34:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803145757495296[0;39m <==    Updates: 0
2022-07-20 11:34:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803145757495296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:34:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803166729015296[0;39m 生成今日电子书快照开始
2022-07-20 11:34:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803166729015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803166729015296[0;39m ==> Parameters: 
2022-07-20 11:34:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803166729015296[0;39m <==    Updates: 0
2022-07-20 11:34:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803166729015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:34:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803187717312512[0;39m 生成今日电子书快照开始
2022-07-20 11:34:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803187717312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803187717312512[0;39m ==> Parameters: 
2022-07-20 11:34:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803187717312512[0;39m <==    Updates: 0
2022-07-20 11:34:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803187717312512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:34:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803208659472384[0;39m 生成今日电子书快照开始
2022-07-20 11:34:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803208659472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803208659472384[0;39m ==> Parameters: 
2022-07-20 11:34:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803208659472384[0;39m <==    Updates: 0
2022-07-20 11:34:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803208659472384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:34:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803229660352512[0;39m 生成今日电子书快照开始
2022-07-20 11:34:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803229660352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:34:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803229660352512[0;39m ==> Parameters: 
2022-07-20 11:34:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803229660352512[0;39m <==    Updates: 0
2022-07-20 11:34:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803229660352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:35:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803250627678208[0;39m 生成今日电子书快照开始
2022-07-20 11:35:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803250627678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803250627678208[0;39m ==> Parameters: 
2022-07-20 11:35:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803250627678208[0;39m <==    Updates: 0
2022-07-20 11:35:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803250627678208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:35:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803271590809600[0;39m 生成今日电子书快照开始
2022-07-20 11:35:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803271590809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803271590809600[0;39m ==> Parameters: 
2022-07-20 11:35:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803271590809600[0;39m <==    Updates: 0
2022-07-20 11:35:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803271590809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:35:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204803271599198208[0;39m 更新电子书下的文档数据开始
2022-07-20 11:35:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803271599198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:35:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803271599198208[0;39m ==> Parameters: 
2022-07-20 11:35:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803271599198208[0;39m <==    Updates: 7
2022-07-20 11:35:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204803271599198208[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2022-07-20 11:35:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803292549746688[0;39m 生成今日电子书快照开始
2022-07-20 11:35:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803292549746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803292549746688[0;39m ==> Parameters: 
2022-07-20 11:35:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803292549746688[0;39m <==    Updates: 0
2022-07-20 11:35:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803292549746688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:35:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803313563209728[0;39m 生成今日电子书快照开始
2022-07-20 11:35:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803313563209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803313563209728[0;39m ==> Parameters: 
2022-07-20 11:35:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803313563209728[0;39m <==    Updates: 0
2022-07-20 11:35:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803313563209728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:35:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803334488592384[0;39m 生成今日电子书快照开始
2022-07-20 11:35:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803334488592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803334488592384[0;39m ==> Parameters: 
2022-07-20 11:35:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803334488592384[0;39m <==    Updates: 0
2022-07-20 11:35:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803334488592384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:35:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803355455918080[0;39m 生成今日电子书快照开始
2022-07-20 11:35:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803355455918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803355455918080[0;39m ==> Parameters: 
2022-07-20 11:35:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803355455918080[0;39m <==    Updates: 0
2022-07-20 11:35:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803355455918080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:35:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803376431632384[0;39m 生成今日电子书快照开始
2022-07-20 11:35:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803376431632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803376431632384[0;39m ==> Parameters: 
2022-07-20 11:35:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803376431632384[0;39m <==    Updates: 0
2022-07-20 11:35:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803376431632384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:35:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204803397449289728[0;39m 更新电子书下的文档数据开始
2022-07-20 11:35:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803397449289728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:35:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803397449289728[0;39m ==> Parameters: 
2022-07-20 11:35:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803397449289728[0;39m <==    Updates: 7
2022-07-20 11:35:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204803397449289728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:35:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803397453484032[0;39m 生成今日电子书快照开始
2022-07-20 11:35:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803397453484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803397453484032[0;39m ==> Parameters: 
2022-07-20 11:35:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803397453484032[0;39m <==    Updates: 0
2022-07-20 11:35:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803397453484032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:35:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803418374672384[0;39m 生成今日电子书快照开始
2022-07-20 11:35:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803418374672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803418374672384[0;39m ==> Parameters: 
2022-07-20 11:35:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803418374672384[0;39m <==    Updates: 0
2022-07-20 11:35:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803418374672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:35:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803439350386688[0;39m 生成今日电子书快照开始
2022-07-20 11:35:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803439350386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803439350386688[0;39m ==> Parameters: 
2022-07-20 11:35:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803439350386688[0;39m <==    Updates: 0
2022-07-20 11:35:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803439350386688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:35:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803460309323776[0;39m 生成今日电子书快照开始
2022-07-20 11:35:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803460309323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803460309323776[0;39m ==> Parameters: 
2022-07-20 11:35:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803460309323776[0;39m <==    Updates: 0
2022-07-20 11:35:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803460309323776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:35:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803481276649472[0;39m 生成今日电子书快照开始
2022-07-20 11:35:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803481276649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:35:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803481276649472[0;39m ==> Parameters: 
2022-07-20 11:35:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803481276649472[0;39m <==    Updates: 0
2022-07-20 11:35:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803481276649472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:36:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803502285918208[0;39m 生成今日电子书快照开始
2022-07-20 11:36:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803502285918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803502285918208[0;39m ==> Parameters: 
2022-07-20 11:36:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803502285918208[0;39m <==    Updates: 0
2022-07-20 11:36:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803502285918208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:36:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803523219689472[0;39m 生成今日电子书快照开始
2022-07-20 11:36:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803523219689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803523219689472[0;39m ==> Parameters: 
2022-07-20 11:36:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803523219689472[0;39m <==    Updates: 0
2022-07-20 11:36:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803523219689472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:36:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204803523223883776[0;39m 更新电子书下的文档数据开始
2022-07-20 11:36:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803523223883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:36:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803523223883776[0;39m ==> Parameters: 
2022-07-20 11:36:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803523223883776[0;39m <==    Updates: 7
2022-07-20 11:36:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204803523223883776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:36:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803544207986688[0;39m 生成今日电子书快照开始
2022-07-20 11:36:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803544207986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803544207986688[0;39m ==> Parameters: 
2022-07-20 11:36:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803544207986688[0;39m <==    Updates: 0
2022-07-20 11:36:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803544207986688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:36:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803565175312384[0;39m 生成今日电子书快照开始
2022-07-20 11:36:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803565175312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803565175312384[0;39m ==> Parameters: 
2022-07-20 11:36:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803565175312384[0;39m <==    Updates: 0
2022-07-20 11:36:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803565175312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:36:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803586176192512[0;39m 生成今日电子书快照开始
2022-07-20 11:36:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803586176192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803586176192512[0;39m ==> Parameters: 
2022-07-20 11:36:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803586176192512[0;39m <==    Updates: 0
2022-07-20 11:36:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803586176192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:36:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803607118352384[0;39m 生成今日电子书快照开始
2022-07-20 11:36:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803607118352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803607118352384[0;39m ==> Parameters: 
2022-07-20 11:36:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803607118352384[0;39m <==    Updates: 0
2022-07-20 11:36:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803607118352384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:36:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803628094066688[0;39m 生成今日电子书快照开始
2022-07-20 11:36:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803628094066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803628094066688[0;39m ==> Parameters: 
2022-07-20 11:36:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803628094066688[0;39m <==    Updates: 0
2022-07-20 11:36:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803628094066688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:36:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204803649069780992[0;39m 更新电子书下的文档数据开始
2022-07-20 11:36:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803649069780992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:36:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803649069780992[0;39m ==> Parameters: 
2022-07-20 11:36:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803649069780992[0;39m <==    Updates: 7
2022-07-20 11:36:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204803649069780992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:36:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803649078169600[0;39m 生成今日电子书快照开始
2022-07-20 11:36:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803649078169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803649078169600[0;39m ==> Parameters: 
2022-07-20 11:36:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803649078169600[0;39m <==    Updates: 0
2022-07-20 11:36:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803649078169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:36:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803670032912384[0;39m 生成今日电子书快照开始
2022-07-20 11:36:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803670032912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803670032912384[0;39m ==> Parameters: 
2022-07-20 11:36:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803670032912384[0;39m <==    Updates: 0
2022-07-20 11:36:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803670032912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:36:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803691000238080[0;39m 生成今日电子书快照开始
2022-07-20 11:36:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803691000238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803691000238080[0;39m ==> Parameters: 
2022-07-20 11:36:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803691000238080[0;39m <==    Updates: 0
2022-07-20 11:36:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803691000238080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:36:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803712005312512[0;39m 生成今日电子书快照开始
2022-07-20 11:36:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803712005312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803712005312512[0;39m ==> Parameters: 
2022-07-20 11:36:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803712005312512[0;39m <==    Updates: 0
2022-07-20 11:36:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803712005312512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:36:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803732972638208[0;39m 生成今日电子书快照开始
2022-07-20 11:36:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803732972638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:36:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803732972638208[0;39m ==> Parameters: 
2022-07-20 11:36:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803732972638208[0;39m <==    Updates: 0
2022-07-20 11:36:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803732972638208[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:37:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803753935769600[0;39m 生成今日电子书快照开始
2022-07-20 11:37:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803753935769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803753935769600[0;39m ==> Parameters: 
2022-07-20 11:37:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803753935769600[0;39m <==    Updates: 0
2022-07-20 11:37:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803753935769600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:37:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803774894706688[0;39m 生成今日电子书快照开始
2022-07-20 11:37:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803774894706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803774894706688[0;39m ==> Parameters: 
2022-07-20 11:37:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803774894706688[0;39m <==    Updates: 0
2022-07-20 11:37:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803774894706688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:37:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204803774907289600[0;39m 更新电子书下的文档数据开始
2022-07-20 11:37:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803774907289600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:37:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803774907289600[0;39m ==> Parameters: 
2022-07-20 11:37:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803774907289600[0;39m <==    Updates: 7
2022-07-20 11:37:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204803774907289600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:37:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803795857838080[0;39m 生成今日电子书快照开始
2022-07-20 11:37:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803795857838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803795857838080[0;39m ==> Parameters: 
2022-07-20 11:37:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803795857838080[0;39m <==    Updates: 0
2022-07-20 11:37:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803795857838080[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:37:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803816850329600[0;39m 生成今日电子书快照开始
2022-07-20 11:37:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803816850329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803816850329600[0;39m ==> Parameters: 
2022-07-20 11:37:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803816850329600[0;39m <==    Updates: 0
2022-07-20 11:37:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803816850329600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:37:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803837838626816[0;39m 生成今日电子书快照开始
2022-07-20 11:37:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803837838626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803837838626816[0;39m ==> Parameters: 
2022-07-20 11:37:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803837838626816[0;39m <==    Updates: 0
2022-07-20 11:37:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803837838626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:37:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803858793369600[0;39m 生成今日电子书快照开始
2022-07-20 11:37:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803858793369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803858793369600[0;39m ==> Parameters: 
2022-07-20 11:37:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803858793369600[0;39m <==    Updates: 0
2022-07-20 11:37:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803858793369600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:37:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803879739723776[0;39m 生成今日电子书快照开始
2022-07-20 11:37:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803879739723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803879739723776[0;39m ==> Parameters: 
2022-07-20 11:37:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803879739723776[0;39m <==    Updates: 0
2022-07-20 11:37:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803879739723776[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:37:35.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803900702855168[0;39m 生成今日电子书快照开始
2022-07-20 11:37:35.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803900702855168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803900702855168[0;39m ==> Parameters: 
2022-07-20 11:37:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803900702855168[0;39m <==    Updates: 0
2022-07-20 11:37:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803900702855168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:37:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204803900715438080[0;39m 更新电子书下的文档数据开始
2022-07-20 11:37:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803900715438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:37:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803900715438080[0;39m ==> Parameters: 
2022-07-20 11:37:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204803900715438080[0;39m <==    Updates: 7
2022-07-20 11:37:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204803900715438080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:37:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803921678569472[0;39m 生成今日电子书快照开始
2022-07-20 11:37:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803921678569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803921678569472[0;39m ==> Parameters: 
2022-07-20 11:37:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803921678569472[0;39m <==    Updates: 0
2022-07-20 11:37:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803921678569472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:37:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803942671060992[0;39m 生成今日电子书快照开始
2022-07-20 11:37:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803942671060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803942671060992[0;39m ==> Parameters: 
2022-07-20 11:37:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803942671060992[0;39m <==    Updates: 0
2022-07-20 11:37:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803942671060992[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 11:37:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803963655163904[0;39m 生成今日电子书快照开始
2022-07-20 11:37:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803963655163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803963655163904[0;39m ==> Parameters: 
2022-07-20 11:37:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803963655163904[0;39m <==    Updates: 0
2022-07-20 11:37:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803963655163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:37:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204803984635072512[0;39m 生成今日电子书快照开始
2022-07-20 11:37:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803984635072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:37:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803984635072512[0;39m ==> Parameters: 
2022-07-20 11:37:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204803984635072512[0;39m <==    Updates: 0
2022-07-20 11:37:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204803984635072512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:38:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804005585620992[0;39m 生成今日电子书快照开始
2022-07-20 11:38:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804005585620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804005585620992[0;39m ==> Parameters: 
2022-07-20 11:38:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804005585620992[0;39m <==    Updates: 0
2022-07-20 11:38:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804005585620992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:38:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804026561335296[0;39m 生成今日电子书快照开始
2022-07-20 11:38:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804026561335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804026561335296[0;39m ==> Parameters: 
2022-07-20 11:38:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804026561335296[0;39m <==    Updates: 0
2022-07-20 11:38:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804026561335296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:38:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204804026573918208[0;39m 更新电子书下的文档数据开始
2022-07-20 11:38:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804026573918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:38:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804026573918208[0;39m ==> Parameters: 
2022-07-20 11:38:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804026573918208[0;39m <==    Updates: 7
2022-07-20 11:38:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204804026573918208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:38:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804047528660992[0;39m 生成今日电子书快照开始
2022-07-20 11:38:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804047528660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804047528660992[0;39m ==> Parameters: 
2022-07-20 11:38:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804047528660992[0;39m <==    Updates: 0
2022-07-20 11:38:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804047528660992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:38:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804068521152512[0;39m 生成今日电子书快照开始
2022-07-20 11:38:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804068521152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804068521152512[0;39m ==> Parameters: 
2022-07-20 11:38:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804068521152512[0;39m <==    Updates: 0
2022-07-20 11:38:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804068521152512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:38:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804089467506688[0;39m 生成今日电子书快照开始
2022-07-20 11:38:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804089467506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804089467506688[0;39m ==> Parameters: 
2022-07-20 11:38:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804089467506688[0;39m <==    Updates: 0
2022-07-20 11:38:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804089467506688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:38:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804110434832384[0;39m 生成今日电子书快照开始
2022-07-20 11:38:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804110434832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804110434832384[0;39m ==> Parameters: 
2022-07-20 11:38:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804110434832384[0;39m <==    Updates: 0
2022-07-20 11:38:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804110434832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:38:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804131418935296[0;39m 生成今日电子书快照开始
2022-07-20 11:38:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804131418935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804131418935296[0;39m ==> Parameters: 
2022-07-20 11:38:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804131418935296[0;39m <==    Updates: 0
2022-07-20 11:38:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804131418935296[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 11:38:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204804152382066688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:38:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804152382066688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:38:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804152382066688[0;39m ==> Parameters: 
2022-07-20 11:38:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804152382066688[0;39m <==    Updates: 7
2022-07-20 11:38:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204804152382066688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:38:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804152390455296[0;39m 生成今日电子书快照开始
2022-07-20 11:38:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804152390455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804152390455296[0;39m ==> Parameters: 
2022-07-20 11:38:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804152390455296[0;39m <==    Updates: 0
2022-07-20 11:38:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804152390455296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:38:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804173374558208[0;39m 生成今日电子书快照开始
2022-07-20 11:38:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804173374558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804173374558208[0;39m ==> Parameters: 
2022-07-20 11:38:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804173374558208[0;39m <==    Updates: 0
2022-07-20 11:38:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804173374558208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:38:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804194367049728[0;39m 生成今日电子书快照开始
2022-07-20 11:38:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804194367049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804194367049728[0;39m ==> Parameters: 
2022-07-20 11:38:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804194367049728[0;39m <==    Updates: 0
2022-07-20 11:38:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804194367049728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:38:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804215279849472[0;39m 生成今日电子书快照开始
2022-07-20 11:38:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804215279849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804215279849472[0;39m ==> Parameters: 
2022-07-20 11:38:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804215279849472[0;39m <==    Updates: 0
2022-07-20 11:38:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804215279849472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:38:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804236305895424[0;39m 生成今日电子书快照开始
2022-07-20 11:38:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804236305895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:38:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804236305895424[0;39m ==> Parameters: 
2022-07-20 11:38:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804236305895424[0;39m <==    Updates: 0
2022-07-20 11:38:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804236305895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:39:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804257273221120[0;39m 生成今日电子书快照开始
2022-07-20 11:39:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804257273221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804257273221120[0;39m ==> Parameters: 
2022-07-20 11:39:00.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804257273221120[0;39m <==    Updates: 0
2022-07-20 11:39:00.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804257273221120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:39:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204804278198603776[0;39m 更新电子书下的文档数据开始
2022-07-20 11:39:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804278198603776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:39:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804278198603776[0;39m ==> Parameters: 
2022-07-20 11:39:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804278198603776[0;39m <==    Updates: 7
2022-07-20 11:39:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204804278198603776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:39:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804278206992384[0;39m 生成今日电子书快照开始
2022-07-20 11:39:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804278206992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804278206992384[0;39m ==> Parameters: 
2022-07-20 11:39:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804278206992384[0;39m <==    Updates: 0
2022-07-20 11:39:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804278206992384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:39:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804299182706688[0;39m 生成今日电子书快照开始
2022-07-20 11:39:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804299182706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804299182706688[0;39m ==> Parameters: 
2022-07-20 11:39:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804299182706688[0;39m <==    Updates: 0
2022-07-20 11:39:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804299182706688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:39:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804320162615296[0;39m 生成今日电子书快照开始
2022-07-20 11:39:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804320162615296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804320162615296[0;39m ==> Parameters: 
2022-07-20 11:39:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804320162615296[0;39m <==    Updates: 0
2022-07-20 11:39:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804320162615296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:39:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804341117358080[0;39m 生成今日电子书快照开始
2022-07-20 11:39:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804341117358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804341117358080[0;39m ==> Parameters: 
2022-07-20 11:39:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804341117358080[0;39m <==    Updates: 0
2022-07-20 11:39:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804341117358080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:39:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804362105655296[0;39m 生成今日电子书快照开始
2022-07-20 11:39:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804362105655296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804362105655296[0;39m ==> Parameters: 
2022-07-20 11:39:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804362105655296[0;39m <==    Updates: 0
2022-07-20 11:39:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804362105655296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:39:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804383098146816[0;39m 生成今日电子书快照开始
2022-07-20 11:39:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804383098146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804383098146816[0;39m ==> Parameters: 
2022-07-20 11:39:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804383098146816[0;39m <==    Updates: 0
2022-07-20 11:39:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804383098146816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:39:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204804404036112384[0;39m 更新电子书下的文档数据开始
2022-07-20 11:39:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804404036112384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:39:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804404036112384[0;39m ==> Parameters: 
2022-07-20 11:39:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804404036112384[0;39m <==    Updates: 7
2022-07-20 11:39:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204804404036112384[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-20 11:39:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804404061278208[0;39m 生成今日电子书快照开始
2022-07-20 11:39:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804404061278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804404061278208[0;39m ==> Parameters: 
2022-07-20 11:39:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804404061278208[0;39m <==    Updates: 0
2022-07-20 11:39:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804404061278208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:39:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804425011826688[0;39m 生成今日电子书快照开始
2022-07-20 11:39:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804425011826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804425011826688[0;39m ==> Parameters: 
2022-07-20 11:39:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804425011826688[0;39m <==    Updates: 0
2022-07-20 11:39:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804425011826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:39:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804445995929600[0;39m 生成今日电子书快照开始
2022-07-20 11:39:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804445995929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804445995929600[0;39m ==> Parameters: 
2022-07-20 11:39:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804445995929600[0;39m <==    Updates: 0
2022-07-20 11:39:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804445995929600[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 11:39:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804466967449600[0;39m 生成今日电子书快照开始
2022-07-20 11:39:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804466967449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804466967449600[0;39m ==> Parameters: 
2022-07-20 11:39:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804466967449600[0;39m <==    Updates: 0
2022-07-20 11:39:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804466967449600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:39:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804487913803776[0;39m 生成今日电子书快照开始
2022-07-20 11:39:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804487913803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:39:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804487913803776[0;39m ==> Parameters: 
2022-07-20 11:39:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804487913803776[0;39m <==    Updates: 0
2022-07-20 11:39:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804487913803776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:40:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804508893712384[0;39m 生成今日电子书快照开始
2022-07-20 11:40:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804508893712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804508893712384[0;39m ==> Parameters: 
2022-07-20 11:40:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804508893712384[0;39m <==    Updates: 0
2022-07-20 11:40:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804508893712384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:40:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204804529886203904[0;39m 更新电子书下的文档数据开始
2022-07-20 11:40:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804529886203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:40:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804529886203904[0;39m ==> Parameters: 
2022-07-20 11:40:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804529886203904[0;39m <==    Updates: 7
2022-07-20 11:40:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204804529886203904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:40:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804529894592512[0;39m 生成今日电子书快照开始
2022-07-20 11:40:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804529894592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804529894592512[0;39m ==> Parameters: 
2022-07-20 11:40:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804529894592512[0;39m <==    Updates: 0
2022-07-20 11:40:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804529894592512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:40:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804550840946688[0;39m 生成今日电子书快照开始
2022-07-20 11:40:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804550840946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804550840946688[0;39m ==> Parameters: 
2022-07-20 11:40:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804550840946688[0;39m <==    Updates: 0
2022-07-20 11:40:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804550840946688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:40:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804571804078080[0;39m 生成今日电子书快照开始
2022-07-20 11:40:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804571804078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804571804078080[0;39m ==> Parameters: 
2022-07-20 11:40:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804571804078080[0;39m <==    Updates: 0
2022-07-20 11:40:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804571804078080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:40:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804592796569600[0;39m 生成今日电子书快照开始
2022-07-20 11:40:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804592796569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804592796569600[0;39m ==> Parameters: 
2022-07-20 11:40:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804592796569600[0;39m <==    Updates: 0
2022-07-20 11:40:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804592796569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:40:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804613751312384[0;39m 生成今日电子书快照开始
2022-07-20 11:40:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804613751312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804613751312384[0;39m ==> Parameters: 
2022-07-20 11:40:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804613751312384[0;39m <==    Updates: 0
2022-07-20 11:40:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804613751312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:40:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804634727026688[0;39m 生成今日电子书快照开始
2022-07-20 11:40:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804634727026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804634727026688[0;39m ==> Parameters: 
2022-07-20 11:40:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804634727026688[0;39m <==    Updates: 0
2022-07-20 11:40:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804634727026688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:40:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204804655711129600[0;39m 更新电子书下的文档数据开始
2022-07-20 11:40:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804655711129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:40:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804655711129600[0;39m ==> Parameters: 
2022-07-20 11:40:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804655711129600[0;39m <==    Updates: 7
2022-07-20 11:40:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204804655711129600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:40:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804655719518208[0;39m 生成今日电子书快照开始
2022-07-20 11:40:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804655719518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804655719518208[0;39m ==> Parameters: 
2022-07-20 11:40:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804655719518208[0;39m <==    Updates: 0
2022-07-20 11:40:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804655719518208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:40:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804676665872384[0;39m 生成今日电子书快照开始
2022-07-20 11:40:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804676665872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804676665872384[0;39m ==> Parameters: 
2022-07-20 11:40:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804676665872384[0;39m <==    Updates: 0
2022-07-20 11:40:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804676665872384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:40:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804697641586688[0;39m 生成今日电子书快照开始
2022-07-20 11:40:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804697641586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804697641586688[0;39m ==> Parameters: 
2022-07-20 11:40:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804697641586688[0;39m <==    Updates: 0
2022-07-20 11:40:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804697641586688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:40:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804718621495296[0;39m 生成今日电子书快照开始
2022-07-20 11:40:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804718621495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804718621495296[0;39m ==> Parameters: 
2022-07-20 11:40:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804718621495296[0;39m <==    Updates: 0
2022-07-20 11:40:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804718621495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:40:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804739580432384[0;39m 生成今日电子书快照开始
2022-07-20 11:40:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804739580432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:40:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804739580432384[0;39m ==> Parameters: 
2022-07-20 11:40:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804739580432384[0;39m <==    Updates: 0
2022-07-20 11:40:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804739580432384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:41:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804760568729600[0;39m 生成今日电子书快照开始
2022-07-20 11:41:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804760568729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804760568729600[0;39m ==> Parameters: 
2022-07-20 11:41:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804760568729600[0;39m <==    Updates: 0
2022-07-20 11:41:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804760568729600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:41:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204804781510889472[0;39m 更新电子书下的文档数据开始
2022-07-20 11:41:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804781510889472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:41:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804781510889472[0;39m ==> Parameters: 
2022-07-20 11:41:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804781510889472[0;39m <==    Updates: 7
2022-07-20 11:41:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204804781510889472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:41:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804781515083776[0;39m 生成今日电子书快照开始
2022-07-20 11:41:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804781515083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804781515083776[0;39m ==> Parameters: 
2022-07-20 11:41:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804781515083776[0;39m <==    Updates: 0
2022-07-20 11:41:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804781515083776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:41:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804802494992384[0;39m 生成今日电子书快照开始
2022-07-20 11:41:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804802494992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804802494992384[0;39m ==> Parameters: 
2022-07-20 11:41:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804802494992384[0;39m <==    Updates: 0
2022-07-20 11:41:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804802494992384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:41:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804823479095296[0;39m 生成今日电子书快照开始
2022-07-20 11:41:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804823479095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804823479095296[0;39m ==> Parameters: 
2022-07-20 11:41:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804823479095296[0;39m <==    Updates: 0
2022-07-20 11:41:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804823479095296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:41:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804844463198208[0;39m 生成今日电子书快照开始
2022-07-20 11:41:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804844463198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804844463198208[0;39m ==> Parameters: 
2022-07-20 11:41:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804844463198208[0;39m <==    Updates: 0
2022-07-20 11:41:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804844463198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:41:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804865422135296[0;39m 生成今日电子书快照开始
2022-07-20 11:41:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804865422135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804865422135296[0;39m ==> Parameters: 
2022-07-20 11:41:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804865422135296[0;39m <==    Updates: 0
2022-07-20 11:41:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804865422135296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:41:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804886376878080[0;39m 生成今日电子书快照开始
2022-07-20 11:41:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804886376878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804886376878080[0;39m ==> Parameters: 
2022-07-20 11:41:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804886376878080[0;39m <==    Updates: 0
2022-07-20 11:41:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804886376878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:41:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804907348398080[0;39m 生成今日电子书快照开始
2022-07-20 11:41:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804907348398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804907348398080[0;39m ==> Parameters: 
2022-07-20 11:41:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804907348398080[0;39m <==    Updates: 0
2022-07-20 11:41:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804907348398080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:41:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204804907360980992[0;39m 更新电子书下的文档数据开始
2022-07-20 11:41:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804907360980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:41:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804907360980992[0;39m ==> Parameters: 
2022-07-20 11:41:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204804907360980992[0;39m <==    Updates: 7
2022-07-20 11:41:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204804907360980992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:41:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804928357666816[0;39m 生成今日电子书快照开始
2022-07-20 11:41:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804928357666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804928357666816[0;39m ==> Parameters: 
2022-07-20 11:41:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804928357666816[0;39m <==    Updates: 0
2022-07-20 11:41:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804928357666816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:41:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804949341769728[0;39m 生成今日电子书快照开始
2022-07-20 11:41:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804949341769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804949341769728[0;39m ==> Parameters: 
2022-07-20 11:41:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804949341769728[0;39m <==    Updates: 0
2022-07-20 11:41:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804949341769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:41:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804970296512512[0;39m 生成今日电子书快照开始
2022-07-20 11:41:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804970296512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804970296512512[0;39m ==> Parameters: 
2022-07-20 11:41:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804970296512512[0;39m <==    Updates: 0
2022-07-20 11:41:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804970296512512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:41:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204804991268032512[0;39m 生成今日电子书快照开始
2022-07-20 11:41:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804991268032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:41:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804991268032512[0;39m ==> Parameters: 
2022-07-20 11:41:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204804991268032512[0;39m <==    Updates: 0
2022-07-20 11:41:55.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204804991268032512[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:42:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805012252135424[0;39m 生成今日电子书快照开始
2022-07-20 11:42:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805012252135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805012252135424[0;39m ==> Parameters: 
2022-07-20 11:42:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805012252135424[0;39m <==    Updates: 0
2022-07-20 11:42:00.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805012252135424[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:42:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805033169129472[0;39m 生成今日电子书快照开始
2022-07-20 11:42:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805033169129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805033169129472[0;39m ==> Parameters: 
2022-07-20 11:42:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805033169129472[0;39m <==    Updates: 0
2022-07-20 11:42:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805033169129472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:42:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204805033181712384[0;39m 更新电子书下的文档数据开始
2022-07-20 11:42:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805033181712384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:42:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805033181712384[0;39m ==> Parameters: 
2022-07-20 11:42:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805033181712384[0;39m <==    Updates: 7
2022-07-20 11:42:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204805033181712384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:42:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805054199369728[0;39m 生成今日电子书快照开始
2022-07-20 11:42:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805054199369728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805054199369728[0;39m ==> Parameters: 
2022-07-20 11:42:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805054199369728[0;39m <==    Updates: 0
2022-07-20 11:42:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805054199369728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:42:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805075133140992[0;39m 生成今日电子书快照开始
2022-07-20 11:42:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805075133140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805075133140992[0;39m ==> Parameters: 
2022-07-20 11:42:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805075133140992[0;39m <==    Updates: 0
2022-07-20 11:42:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805075133140992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:42:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805096108855296[0;39m 生成今日电子书快照开始
2022-07-20 11:42:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805096108855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805096108855296[0;39m ==> Parameters: 
2022-07-20 11:42:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805096108855296[0;39m <==    Updates: 0
2022-07-20 11:42:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805096108855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:42:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805117105541120[0;39m 生成今日电子书快照开始
2022-07-20 11:42:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805117105541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805117105541120[0;39m ==> Parameters: 
2022-07-20 11:42:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805117105541120[0;39m <==    Updates: 0
2022-07-20 11:42:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805117105541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:42:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805138035118080[0;39m 生成今日电子书快照开始
2022-07-20 11:42:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805138035118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805138035118080[0;39m ==> Parameters: 
2022-07-20 11:42:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805138035118080[0;39m <==    Updates: 0
2022-07-20 11:42:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805138035118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:42:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204805159019220992[0;39m 更新电子书下的文档数据开始
2022-07-20 11:42:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805159019220992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:42:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805159019220992[0;39m ==> Parameters: 
2022-07-20 11:42:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805159019220992[0;39m <==    Updates: 7
2022-07-20 11:42:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204805159019220992[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 11:42:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805159035998208[0;39m 生成今日电子书快照开始
2022-07-20 11:42:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805159035998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805159035998208[0;39m ==> Parameters: 
2022-07-20 11:42:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805159035998208[0;39m <==    Updates: 0
2022-07-20 11:42:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805159035998208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:42:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805180024295424[0;39m 生成今日电子书快照开始
2022-07-20 11:42:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805180024295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805180024295424[0;39m ==> Parameters: 
2022-07-20 11:42:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805180024295424[0;39m <==    Updates: 0
2022-07-20 11:42:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805180024295424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:42:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805200979038208[0;39m 生成今日电子书快照开始
2022-07-20 11:42:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805200979038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805200979038208[0;39m ==> Parameters: 
2022-07-20 11:42:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805200979038208[0;39m <==    Updates: 0
2022-07-20 11:42:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805200979038208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:42:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805221950558208[0;39m 生成今日电子书快照开始
2022-07-20 11:42:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805221950558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805221950558208[0;39m ==> Parameters: 
2022-07-20 11:42:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805221950558208[0;39m <==    Updates: 0
2022-07-20 11:42:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805221950558208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:42:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805242938855424[0;39m 生成今日电子书快照开始
2022-07-20 11:42:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805242938855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:42:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805242938855424[0;39m ==> Parameters: 
2022-07-20 11:42:55.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805242938855424[0;39m <==    Updates: 0
2022-07-20 11:42:55.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805242938855424[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:43:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805263893598208[0;39m 生成今日电子书快照开始
2022-07-20 11:43:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805263893598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805263893598208[0;39m ==> Parameters: 
2022-07-20 11:43:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805263893598208[0;39m <==    Updates: 0
2022-07-20 11:43:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805263893598208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:43:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204805284839952384[0;39m 更新电子书下的文档数据开始
2022-07-20 11:43:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805284839952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:43:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805284839952384[0;39m ==> Parameters: 
2022-07-20 11:43:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805284839952384[0;39m <==    Updates: 7
2022-07-20 11:43:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204805284839952384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:43:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805284848340992[0;39m 生成今日电子书快照开始
2022-07-20 11:43:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805284848340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805284848340992[0;39m ==> Parameters: 
2022-07-20 11:43:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805284848340992[0;39m <==    Updates: 0
2022-07-20 11:43:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805284848340992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:43:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805305832443904[0;39m 生成今日电子书快照开始
2022-07-20 11:43:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805305832443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805305832443904[0;39m ==> Parameters: 
2022-07-20 11:43:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805305832443904[0;39m <==    Updates: 0
2022-07-20 11:43:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805305832443904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:43:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805326816546816[0;39m 生成今日电子书快照开始
2022-07-20 11:43:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805326816546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805326816546816[0;39m ==> Parameters: 
2022-07-20 11:43:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805326816546816[0;39m <==    Updates: 0
2022-07-20 11:43:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805326816546816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:43:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805347741929472[0;39m 生成今日电子书快照开始
2022-07-20 11:43:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805347741929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805347741929472[0;39m ==> Parameters: 
2022-07-20 11:43:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805347741929472[0;39m <==    Updates: 0
2022-07-20 11:43:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805347741929472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:43:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805368713449472[0;39m 生成今日电子书快照开始
2022-07-20 11:43:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805368713449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805368713449472[0;39m ==> Parameters: 
2022-07-20 11:43:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805368713449472[0;39m <==    Updates: 0
2022-07-20 11:43:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805368713449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:43:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805389705940992[0;39m 生成今日电子书快照开始
2022-07-20 11:43:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805389705940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805389705940992[0;39m ==> Parameters: 
2022-07-20 11:43:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805389705940992[0;39m <==    Updates: 0
2022-07-20 11:43:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805389705940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:43:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805410669072384[0;39m 生成今日电子书快照开始
2022-07-20 11:43:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805410669072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805410669072384[0;39m ==> Parameters: 
2022-07-20 11:43:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805410669072384[0;39m <==    Updates: 0
2022-07-20 11:43:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805410669072384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:43:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204805410673266688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:43:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805410673266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:43:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805410673266688[0;39m ==> Parameters: 
2022-07-20 11:43:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805410673266688[0;39m <==    Updates: 7
2022-07-20 11:43:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204805410673266688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:43:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805431686729728[0;39m 生成今日电子书快照开始
2022-07-20 11:43:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805431686729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805431686729728[0;39m ==> Parameters: 
2022-07-20 11:43:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805431686729728[0;39m <==    Updates: 0
2022-07-20 11:43:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805431686729728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:43:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805452658249728[0;39m 生成今日电子书快照开始
2022-07-20 11:43:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805452658249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805452658249728[0;39m ==> Parameters: 
2022-07-20 11:43:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805452658249728[0;39m <==    Updates: 0
2022-07-20 11:43:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805452658249728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:43:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805473600409600[0;39m 生成今日电子书快照开始
2022-07-20 11:43:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805473600409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805473600409600[0;39m ==> Parameters: 
2022-07-20 11:43:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805473600409600[0;39m <==    Updates: 0
2022-07-20 11:43:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805473600409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:43:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805494563540992[0;39m 生成今日电子书快照开始
2022-07-20 11:43:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805494563540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:43:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805494563540992[0;39m ==> Parameters: 
2022-07-20 11:43:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805494563540992[0;39m <==    Updates: 0
2022-07-20 11:43:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805494563540992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:44:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805515543449600[0;39m 生成今日电子书快照开始
2022-07-20 11:44:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805515543449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805515543449600[0;39m ==> Parameters: 
2022-07-20 11:44:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805515543449600[0;39m <==    Updates: 0
2022-07-20 11:44:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805515543449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:44:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204805536489803776[0;39m 更新电子书下的文档数据开始
2022-07-20 11:44:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805536489803776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:44:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805536489803776[0;39m ==> Parameters: 
2022-07-20 11:44:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805536489803776[0;39m <==    Updates: 7
2022-07-20 11:44:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204805536489803776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:44:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805536493998080[0;39m 生成今日电子书快照开始
2022-07-20 11:44:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805536493998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805536493998080[0;39m ==> Parameters: 
2022-07-20 11:44:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805536493998080[0;39m <==    Updates: 0
2022-07-20 11:44:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805536493998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:44:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805557473906688[0;39m 生成今日电子书快照开始
2022-07-20 11:44:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805557473906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805557473906688[0;39m ==> Parameters: 
2022-07-20 11:44:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805557473906688[0;39m <==    Updates: 0
2022-07-20 11:44:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805557473906688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:44:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805578437038080[0;39m 生成今日电子书快照开始
2022-07-20 11:44:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805578437038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805578437038080[0;39m ==> Parameters: 
2022-07-20 11:44:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805578437038080[0;39m <==    Updates: 0
2022-07-20 11:44:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805578437038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:44:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805599421140992[0;39m 生成今日电子书快照开始
2022-07-20 11:44:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805599421140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805599421140992[0;39m ==> Parameters: 
2022-07-20 11:44:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805599421140992[0;39m <==    Updates: 0
2022-07-20 11:44:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805599421140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:44:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805620426215424[0;39m 生成今日电子书快照开始
2022-07-20 11:44:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805620426215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805620426215424[0;39m ==> Parameters: 
2022-07-20 11:44:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805620426215424[0;39m <==    Updates: 0
2022-07-20 11:44:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805620426215424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:44:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805641406124032[0;39m 生成今日电子书快照开始
2022-07-20 11:44:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805641406124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805641406124032[0;39m ==> Parameters: 
2022-07-20 11:44:30.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805641406124032[0;39m <==    Updates: 0
2022-07-20 11:44:30.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805641406124032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:44:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805662318923776[0;39m 生成今日电子书快照开始
2022-07-20 11:44:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805662318923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805662318923776[0;39m ==> Parameters: 
2022-07-20 11:44:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805662318923776[0;39m <==    Updates: 0
2022-07-20 11:44:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805662318923776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:44:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204805662331506688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:44:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805662331506688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:44:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805662331506688[0;39m ==> Parameters: 
2022-07-20 11:44:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805662331506688[0;39m <==    Updates: 7
2022-07-20 11:44:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204805662331506688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:44:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805683303026688[0;39m 生成今日电子书快照开始
2022-07-20 11:44:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805683303026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805683303026688[0;39m ==> Parameters: 
2022-07-20 11:44:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805683303026688[0;39m <==    Updates: 0
2022-07-20 11:44:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805683303026688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:44:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805704270352384[0;39m 生成今日电子书快照开始
2022-07-20 11:44:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805704270352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805704270352384[0;39m ==> Parameters: 
2022-07-20 11:44:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805704270352384[0;39m <==    Updates: 0
2022-07-20 11:44:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805704270352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:44:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805725254455296[0;39m 生成今日电子书快照开始
2022-07-20 11:44:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805725254455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805725254455296[0;39m ==> Parameters: 
2022-07-20 11:44:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805725254455296[0;39m <==    Updates: 0
2022-07-20 11:44:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805725254455296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:44:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805746209198080[0;39m 生成今日电子书快照开始
2022-07-20 11:44:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805746209198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:44:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805746209198080[0;39m ==> Parameters: 
2022-07-20 11:44:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805746209198080[0;39m <==    Updates: 0
2022-07-20 11:44:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805746209198080[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:45:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805767189106688[0;39m 生成今日电子书快照开始
2022-07-20 11:45:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805767189106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805767189106688[0;39m ==> Parameters: 
2022-07-20 11:45:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805767189106688[0;39m <==    Updates: 0
2022-07-20 11:45:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805767189106688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:45:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204805788189986816[0;39m 更新电子书下的文档数据开始
2022-07-20 11:45:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805788189986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:45:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805788189986816[0;39m ==> Parameters: 
2022-07-20 11:45:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805788189986816[0;39m <==    Updates: 7
2022-07-20 11:45:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204805788189986816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:45:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805788194181120[0;39m 生成今日电子书快照开始
2022-07-20 11:45:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805788194181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805788194181120[0;39m ==> Parameters: 
2022-07-20 11:45:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805788194181120[0;39m <==    Updates: 0
2022-07-20 11:45:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805788194181120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:45:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805809174089728[0;39m 生成今日电子书快照开始
2022-07-20 11:45:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805809174089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:10.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805809174089728[0;39m ==> Parameters: 
2022-07-20 11:45:10.024 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805809174089728[0;39m <==    Updates: 0
2022-07-20 11:45:10.025 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805809174089728[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:45:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805830133026816[0;39m 生成今日电子书快照开始
2022-07-20 11:45:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805830133026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805830133026816[0;39m ==> Parameters: 
2022-07-20 11:45:15.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805830133026816[0;39m <==    Updates: 0
2022-07-20 11:45:15.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805830133026816[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:45:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805851075186688[0;39m 生成今日电子书快照开始
2022-07-20 11:45:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805851075186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805851075186688[0;39m ==> Parameters: 
2022-07-20 11:45:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805851075186688[0;39m <==    Updates: 0
2022-07-20 11:45:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805851075186688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:45:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805872038318080[0;39m 生成今日电子书快照开始
2022-07-20 11:45:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805872038318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805872038318080[0;39m ==> Parameters: 
2022-07-20 11:45:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805872038318080[0;39m <==    Updates: 0
2022-07-20 11:45:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805872038318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:45:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805893047586816[0;39m 生成今日电子书快照开始
2022-07-20 11:45:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805893047586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805893047586816[0;39m ==> Parameters: 
2022-07-20 11:45:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805893047586816[0;39m <==    Updates: 0
2022-07-20 11:45:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805893047586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:45:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204805914031689728[0;39m 更新电子书下的文档数据开始
2022-07-20 11:45:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805914031689728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:45:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805914031689728[0;39m ==> Parameters: 
2022-07-20 11:45:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204805914031689728[0;39m <==    Updates: 7
2022-07-20 11:45:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204805914031689728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:45:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805914040078336[0;39m 生成今日电子书快照开始
2022-07-20 11:45:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805914040078336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805914040078336[0;39m ==> Parameters: 
2022-07-20 11:45:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805914040078336[0;39m <==    Updates: 0
2022-07-20 11:45:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805914040078336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:45:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805934965460992[0;39m 生成今日电子书快照开始
2022-07-20 11:45:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805934965460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805934965460992[0;39m ==> Parameters: 
2022-07-20 11:45:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805934965460992[0;39m <==    Updates: 0
2022-07-20 11:45:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805934965460992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:45:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805955928592384[0;39m 生成今日电子书快照开始
2022-07-20 11:45:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805955928592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805955928592384[0;39m ==> Parameters: 
2022-07-20 11:45:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805955928592384[0;39m <==    Updates: 0
2022-07-20 11:45:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805955928592384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:45:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805976904306688[0;39m 生成今日电子书快照开始
2022-07-20 11:45:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805976904306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805976904306688[0;39m ==> Parameters: 
2022-07-20 11:45:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805976904306688[0;39m <==    Updates: 0
2022-07-20 11:45:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805976904306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:45:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204805997900992512[0;39m 生成今日电子书快照开始
2022-07-20 11:45:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805997900992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:45:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805997900992512[0;39m ==> Parameters: 
2022-07-20 11:45:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204805997900992512[0;39m <==    Updates: 0
2022-07-20 11:45:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204805997900992512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:46:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806018847346688[0;39m 生成今日电子书快照开始
2022-07-20 11:46:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806018847346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806018847346688[0;39m ==> Parameters: 
2022-07-20 11:46:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806018847346688[0;39m <==    Updates: 0
2022-07-20 11:46:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806018847346688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:46:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204806039835643904[0;39m 更新电子书下的文档数据开始
2022-07-20 11:46:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806039835643904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:46:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806039835643904[0;39m ==> Parameters: 
2022-07-20 11:46:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806039835643904[0;39m <==    Updates: 7
2022-07-20 11:46:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204806039835643904[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 11:46:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806039852421120[0;39m 生成今日电子书快照开始
2022-07-20 11:46:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806039852421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806039852421120[0;39m ==> Parameters: 
2022-07-20 11:46:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806039852421120[0;39m <==    Updates: 0
2022-07-20 11:46:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806039852421120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:46:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806060794580992[0;39m 生成今日电子书快照开始
2022-07-20 11:46:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806060794580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806060794580992[0;39m ==> Parameters: 
2022-07-20 11:46:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806060794580992[0;39m <==    Updates: 0
2022-07-20 11:46:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806060794580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:46:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806081761906688[0;39m 生成今日电子书快照开始
2022-07-20 11:46:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806081761906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806081761906688[0;39m ==> Parameters: 
2022-07-20 11:46:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806081761906688[0;39m <==    Updates: 0
2022-07-20 11:46:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806081761906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:46:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806102758592512[0;39m 生成今日电子书快照开始
2022-07-20 11:46:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806102758592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806102758592512[0;39m ==> Parameters: 
2022-07-20 11:46:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806102758592512[0;39m <==    Updates: 0
2022-07-20 11:46:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806102758592512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:46:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806123730112512[0;39m 生成今日电子书快照开始
2022-07-20 11:46:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806123730112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806123730112512[0;39m ==> Parameters: 
2022-07-20 11:46:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806123730112512[0;39m <==    Updates: 0
2022-07-20 11:46:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806123730112512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:46:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806144689049600[0;39m 生成今日电子书快照开始
2022-07-20 11:46:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806144689049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806144689049600[0;39m ==> Parameters: 
2022-07-20 11:46:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806144689049600[0;39m <==    Updates: 0
2022-07-20 11:46:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806144689049600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:46:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806165652180992[0;39m 生成今日电子书快照开始
2022-07-20 11:46:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806165652180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806165652180992[0;39m ==> Parameters: 
2022-07-20 11:46:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806165652180992[0;39m <==    Updates: 0
2022-07-20 11:46:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806165652180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:46:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204806165660569600[0;39m 更新电子书下的文档数据开始
2022-07-20 11:46:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806165660569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:46:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806165660569600[0;39m ==> Parameters: 
2022-07-20 11:46:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806165660569600[0;39m <==    Updates: 7
2022-07-20 11:46:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204806165660569600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:46:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806186611118080[0;39m 生成今日电子书快照开始
2022-07-20 11:46:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806186611118080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806186611118080[0;39m ==> Parameters: 
2022-07-20 11:46:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806186611118080[0;39m <==    Updates: 0
2022-07-20 11:46:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806186611118080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:46:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806207628775424[0;39m 生成今日电子书快照开始
2022-07-20 11:46:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806207628775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806207628775424[0;39m ==> Parameters: 
2022-07-20 11:46:45.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806207628775424[0;39m <==    Updates: 0
2022-07-20 11:46:45.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806207628775424[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:46:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806228558352384[0;39m 生成今日电子书快照开始
2022-07-20 11:46:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806228558352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806228558352384[0;39m ==> Parameters: 
2022-07-20 11:46:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806228558352384[0;39m <==    Updates: 0
2022-07-20 11:46:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806228558352384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:46:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806249559232512[0;39m 生成今日电子书快照开始
2022-07-20 11:46:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806249559232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:46:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806249559232512[0;39m ==> Parameters: 
2022-07-20 11:46:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806249559232512[0;39m <==    Updates: 0
2022-07-20 11:46:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806249559232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:47:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806270509780992[0;39m 生成今日电子书快照开始
2022-07-20 11:47:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806270509780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806270509780992[0;39m ==> Parameters: 
2022-07-20 11:47:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806270509780992[0;39m <==    Updates: 0
2022-07-20 11:47:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806270509780992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:47:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806291523244032[0;39m 生成今日电子书快照开始
2022-07-20 11:47:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806291523244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806291523244032[0;39m ==> Parameters: 
2022-07-20 11:47:05.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806291523244032[0;39m <==    Updates: 0
2022-07-20 11:47:05.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806291523244032[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:47:05.022 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204806291548409856[0;39m 更新电子书下的文档数据开始
2022-07-20 11:47:05.023 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806291548409856[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:47:05.023 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806291548409856[0;39m ==> Parameters: 
2022-07-20 11:47:05.023 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806291548409856[0;39m <==    Updates: 7
2022-07-20 11:47:05.024 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204806291548409856[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:47:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806312452820992[0;39m 生成今日电子书快照开始
2022-07-20 11:47:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806312452820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806312452820992[0;39m ==> Parameters: 
2022-07-20 11:47:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806312452820992[0;39m <==    Updates: 0
2022-07-20 11:47:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806312452820992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:47:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806333415952384[0;39m 生成今日电子书快照开始
2022-07-20 11:47:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806333415952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806333415952384[0;39m ==> Parameters: 
2022-07-20 11:47:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806333415952384[0;39m <==    Updates: 0
2022-07-20 11:47:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806333415952384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:47:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806354400055296[0;39m 生成今日电子书快照开始
2022-07-20 11:47:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806354400055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806354400055296[0;39m ==> Parameters: 
2022-07-20 11:47:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806354400055296[0;39m <==    Updates: 0
2022-07-20 11:47:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806354400055296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:47:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806375354798080[0;39m 生成今日电子书快照开始
2022-07-20 11:47:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806375354798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806375354798080[0;39m ==> Parameters: 
2022-07-20 11:47:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806375354798080[0;39m <==    Updates: 0
2022-07-20 11:47:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806375354798080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:47:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806396330512384[0;39m 生成今日电子书快照开始
2022-07-20 11:47:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806396330512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806396330512384[0;39m ==> Parameters: 
2022-07-20 11:47:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806396330512384[0;39m <==    Updates: 0
2022-07-20 11:47:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806396330512384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:47:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806417297838080[0;39m 生成今日电子书快照开始
2022-07-20 11:47:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806417297838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806417297838080[0;39m ==> Parameters: 
2022-07-20 11:47:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806417297838080[0;39m <==    Updates: 0
2022-07-20 11:47:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806417297838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:47:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204806417306226688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:47:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806417306226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:47:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806417306226688[0;39m ==> Parameters: 
2022-07-20 11:47:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806417306226688[0;39m <==    Updates: 7
2022-07-20 11:47:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204806417306226688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:47:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806438281940992[0;39m 生成今日电子书快照开始
2022-07-20 11:47:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806438281940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806438281940992[0;39m ==> Parameters: 
2022-07-20 11:47:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806438281940992[0;39m <==    Updates: 0
2022-07-20 11:47:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806438281940992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:47:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806459236683776[0;39m 生成今日电子书快照开始
2022-07-20 11:47:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806459236683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806459236683776[0;39m ==> Parameters: 
2022-07-20 11:47:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806459236683776[0;39m <==    Updates: 0
2022-07-20 11:47:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806459236683776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:47:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806480254341120[0;39m 生成今日电子书快照开始
2022-07-20 11:47:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806480254341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806480254341120[0;39m ==> Parameters: 
2022-07-20 11:47:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806480254341120[0;39m <==    Updates: 0
2022-07-20 11:47:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806480254341120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:47:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806501179723776[0;39m 生成今日电子书快照开始
2022-07-20 11:47:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806501179723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:47:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806501179723776[0;39m ==> Parameters: 
2022-07-20 11:47:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806501179723776[0;39m <==    Updates: 0
2022-07-20 11:47:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806501179723776[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 11:48:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806522159632384[0;39m 生成今日电子书快照开始
2022-07-20 11:48:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806522159632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806522159632384[0;39m ==> Parameters: 
2022-07-20 11:48:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806522159632384[0;39m <==    Updates: 0
2022-07-20 11:48:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806522159632384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:48:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204806543173095424[0;39m 更新电子书下的文档数据开始
2022-07-20 11:48:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806543173095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:48:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806543173095424[0;39m ==> Parameters: 
2022-07-20 11:48:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806543173095424[0;39m <==    Updates: 7
2022-07-20 11:48:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204806543173095424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:48:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806543181484032[0;39m 生成今日电子书快照开始
2022-07-20 11:48:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806543181484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806543181484032[0;39m ==> Parameters: 
2022-07-20 11:48:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806543181484032[0;39m <==    Updates: 0
2022-07-20 11:48:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806543181484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:48:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806564127838208[0;39m 生成今日电子书快照开始
2022-07-20 11:48:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806564127838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806564127838208[0;39m ==> Parameters: 
2022-07-20 11:48:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806564127838208[0;39m <==    Updates: 0
2022-07-20 11:48:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806564127838208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:48:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806585086775296[0;39m 生成今日电子书快照开始
2022-07-20 11:48:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806585086775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806585086775296[0;39m ==> Parameters: 
2022-07-20 11:48:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806585086775296[0;39m <==    Updates: 0
2022-07-20 11:48:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806585086775296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:48:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806606045712384[0;39m 生成今日电子书快照开始
2022-07-20 11:48:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806606045712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806606045712384[0;39m ==> Parameters: 
2022-07-20 11:48:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806606045712384[0;39m <==    Updates: 0
2022-07-20 11:48:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806606045712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:48:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806627013038080[0;39m 生成今日电子书快照开始
2022-07-20 11:48:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806627013038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:25.098 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806627013038080[0;39m ==> Parameters: 
2022-07-20 11:48:25.100 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806627013038080[0;39m <==    Updates: 0
2022-07-20 11:48:25.100 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806627013038080[0;39m 生成今日电子书快照结束，耗时：97 毫秒
2022-07-20 11:48:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806648034889728[0;39m 生成今日电子书快照开始
2022-07-20 11:48:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806648034889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806648034889728[0;39m ==> Parameters: 
2022-07-20 11:48:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806648034889728[0;39m <==    Updates: 0
2022-07-20 11:48:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806648034889728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:48:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806668977049600[0;39m 生成今日电子书快照开始
2022-07-20 11:48:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806668977049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806668977049600[0;39m ==> Parameters: 
2022-07-20 11:48:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806668977049600[0;39m <==    Updates: 0
2022-07-20 11:48:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806668977049600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:48:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204806668989632512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:48:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806668989632512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:48:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806668989632512[0;39m ==> Parameters: 
2022-07-20 11:48:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806668989632512[0;39m <==    Updates: 7
2022-07-20 11:48:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204806668989632512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:48:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806689961152512[0;39m 生成今日电子书快照开始
2022-07-20 11:48:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806689961152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806689961152512[0;39m ==> Parameters: 
2022-07-20 11:48:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806689961152512[0;39m <==    Updates: 0
2022-07-20 11:48:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806689961152512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:48:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806710924283904[0;39m 生成今日电子书快照开始
2022-07-20 11:48:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806710924283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806710924283904[0;39m ==> Parameters: 
2022-07-20 11:48:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806710924283904[0;39m <==    Updates: 0
2022-07-20 11:48:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806710924283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:48:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806731916775424[0;39m 生成今日电子书快照开始
2022-07-20 11:48:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806731916775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806731916775424[0;39m ==> Parameters: 
2022-07-20 11:48:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806731916775424[0;39m <==    Updates: 0
2022-07-20 11:48:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806731916775424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:48:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806752863129600[0;39m 生成今日电子书快照开始
2022-07-20 11:48:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806752863129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:48:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806752863129600[0;39m ==> Parameters: 
2022-07-20 11:48:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806752863129600[0;39m <==    Updates: 0
2022-07-20 11:48:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806752863129600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:49:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806773859815424[0;39m 生成今日电子书快照开始
2022-07-20 11:49:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806773859815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806773859815424[0;39m ==> Parameters: 
2022-07-20 11:49:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806773859815424[0;39m <==    Updates: 0
2022-07-20 11:49:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806773859815424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:49:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204806794822946816[0;39m 更新电子书下的文档数据开始
2022-07-20 11:49:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806794822946816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:49:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806794822946816[0;39m ==> Parameters: 
2022-07-20 11:49:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806794822946816[0;39m <==    Updates: 7
2022-07-20 11:49:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204806794822946816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:49:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806794831335424[0;39m 生成今日电子书快照开始
2022-07-20 11:49:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806794831335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806794831335424[0;39m ==> Parameters: 
2022-07-20 11:49:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806794831335424[0;39m <==    Updates: 0
2022-07-20 11:49:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806794831335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:49:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806815811244032[0;39m 生成今日电子书快照开始
2022-07-20 11:49:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806815811244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806815811244032[0;39m ==> Parameters: 
2022-07-20 11:49:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806815811244032[0;39m <==    Updates: 0
2022-07-20 11:49:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806815811244032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:49:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806836786958336[0;39m 生成今日电子书快照开始
2022-07-20 11:49:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806836786958336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806836786958336[0;39m ==> Parameters: 
2022-07-20 11:49:15.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806836786958336[0;39m <==    Updates: 0
2022-07-20 11:49:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806836786958336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:49:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806857703952384[0;39m 生成今日电子书快照开始
2022-07-20 11:49:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806857703952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806857703952384[0;39m ==> Parameters: 
2022-07-20 11:49:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806857703952384[0;39m <==    Updates: 0
2022-07-20 11:49:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806857703952384[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-20 11:49:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806878667083776[0;39m 生成今日电子书快照开始
2022-07-20 11:49:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806878667083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806878667083776[0;39m ==> Parameters: 
2022-07-20 11:49:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806878667083776[0;39m <==    Updates: 0
2022-07-20 11:49:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806878667083776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:49:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806899659575296[0;39m 生成今日电子书快照开始
2022-07-20 11:49:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806899659575296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806899659575296[0;39m ==> Parameters: 
2022-07-20 11:49:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806899659575296[0;39m <==    Updates: 0
2022-07-20 11:49:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806899659575296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:49:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204806920656261120[0;39m 更新电子书下的文档数据开始
2022-07-20 11:49:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806920656261120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:49:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806920656261120[0;39m ==> Parameters: 
2022-07-20 11:49:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204806920656261120[0;39m <==    Updates: 7
2022-07-20 11:49:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204806920656261120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:49:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806920664649728[0;39m 生成今日电子书快照开始
2022-07-20 11:49:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806920664649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806920664649728[0;39m ==> Parameters: 
2022-07-20 11:49:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806920664649728[0;39m <==    Updates: 0
2022-07-20 11:49:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806920664649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:49:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806941611003904[0;39m 生成今日电子书快照开始
2022-07-20 11:49:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806941611003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806941611003904[0;39m ==> Parameters: 
2022-07-20 11:49:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806941611003904[0;39m <==    Updates: 0
2022-07-20 11:49:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806941611003904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:49:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806962595106816[0;39m 生成今日电子书快照开始
2022-07-20 11:49:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806962595106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806962595106816[0;39m ==> Parameters: 
2022-07-20 11:49:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806962595106816[0;39m <==    Updates: 0
2022-07-20 11:49:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806962595106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:49:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204806983537266688[0;39m 生成今日电子书快照开始
2022-07-20 11:49:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806983537266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806983537266688[0;39m ==> Parameters: 
2022-07-20 11:49:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204806983537266688[0;39m <==    Updates: 0
2022-07-20 11:49:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204806983537266688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:49:55.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807004487815168[0;39m 生成今日电子书快照开始
2022-07-20 11:49:55.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807004487815168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:49:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807004487815168[0;39m ==> Parameters: 
2022-07-20 11:49:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807004487815168[0;39m <==    Updates: 0
2022-07-20 11:49:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807004487815168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:50:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807025509666816[0;39m 生成今日电子书快照开始
2022-07-20 11:50:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807025509666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807025509666816[0;39m ==> Parameters: 
2022-07-20 11:50:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807025509666816[0;39m <==    Updates: 0
2022-07-20 11:50:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807025509666816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:50:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807046472798208[0;39m 生成今日电子书快照开始
2022-07-20 11:50:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807046472798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807046472798208[0;39m ==> Parameters: 
2022-07-20 11:50:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807046472798208[0;39m <==    Updates: 0
2022-07-20 11:50:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807046472798208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:50:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204807046481186816[0;39m 更新电子书下的文档数据开始
2022-07-20 11:50:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807046481186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:50:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807046481186816[0;39m ==> Parameters: 
2022-07-20 11:50:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807046481186816[0;39m <==    Updates: 7
2022-07-20 11:50:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204807046481186816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:50:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807067419152384[0;39m 生成今日电子书快照开始
2022-07-20 11:50:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807067419152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807067419152384[0;39m ==> Parameters: 
2022-07-20 11:50:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807067419152384[0;39m <==    Updates: 0
2022-07-20 11:50:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807067419152384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:50:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807088407449600[0;39m 生成今日电子书快照开始
2022-07-20 11:50:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807088407449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807088407449600[0;39m ==> Parameters: 
2022-07-20 11:50:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807088407449600[0;39m <==    Updates: 0
2022-07-20 11:50:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807088407449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:50:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807109353803776[0;39m 生成今日电子书快照开始
2022-07-20 11:50:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807109353803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807109353803776[0;39m ==> Parameters: 
2022-07-20 11:50:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807109353803776[0;39m <==    Updates: 0
2022-07-20 11:50:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807109353803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:50:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807130354683904[0;39m 生成今日电子书快照开始
2022-07-20 11:50:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807130354683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807130354683904[0;39m ==> Parameters: 
2022-07-20 11:50:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807130354683904[0;39m <==    Updates: 0
2022-07-20 11:50:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807130354683904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:50:30.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807151288455168[0;39m 生成今日电子书快照开始
2022-07-20 11:50:30.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807151288455168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807151288455168[0;39m ==> Parameters: 
2022-07-20 11:50:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807151288455168[0;39m <==    Updates: 0
2022-07-20 11:50:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807151288455168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:50:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807172272558080[0;39m 生成今日电子书快照开始
2022-07-20 11:50:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807172272558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807172272558080[0;39m ==> Parameters: 
2022-07-20 11:50:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807172272558080[0;39m <==    Updates: 0
2022-07-20 11:50:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807172272558080[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 11:50:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204807172306112512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:50:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807172306112512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:50:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807172306112512[0;39m ==> Parameters: 
2022-07-20 11:50:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807172306112512[0;39m <==    Updates: 7
2022-07-20 11:50:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204807172306112512[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 11:50:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807193277632512[0;39m 生成今日电子书快照开始
2022-07-20 11:50:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807193277632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807193277632512[0;39m ==> Parameters: 
2022-07-20 11:50:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807193277632512[0;39m <==    Updates: 0
2022-07-20 11:50:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807193277632512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:50:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807214274318336[0;39m 生成今日电子书快照开始
2022-07-20 11:50:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807214274318336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807214274318336[0;39m ==> Parameters: 
2022-07-20 11:50:45.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807214274318336[0;39m <==    Updates: 0
2022-07-20 11:50:45.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807214274318336[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:50:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807235203895296[0;39m 生成今日电子书快照开始
2022-07-20 11:50:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807235203895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807235203895296[0;39m ==> Parameters: 
2022-07-20 11:50:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807235203895296[0;39m <==    Updates: 0
2022-07-20 11:50:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807235203895296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:50:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807256154443776[0;39m 生成今日电子书快照开始
2022-07-20 11:50:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807256154443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:50:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807256154443776[0;39m ==> Parameters: 
2022-07-20 11:50:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807256154443776[0;39m <==    Updates: 0
2022-07-20 11:50:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807256154443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:51:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807277121769472[0;39m 生成今日电子书快照开始
2022-07-20 11:51:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807277121769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807277121769472[0;39m ==> Parameters: 
2022-07-20 11:51:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807277121769472[0;39m <==    Updates: 0
2022-07-20 11:51:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807277121769472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:51:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807298143621120[0;39m 生成今日电子书快照开始
2022-07-20 11:51:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807298143621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807298143621120[0;39m ==> Parameters: 
2022-07-20 11:51:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807298143621120[0;39m <==    Updates: 0
2022-07-20 11:51:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807298143621120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:51:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204807298156204032[0;39m 更新电子书下的文档数据开始
2022-07-20 11:51:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807298156204032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:51:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807298156204032[0;39m ==> Parameters: 
2022-07-20 11:51:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807298156204032[0;39m <==    Updates: 7
2022-07-20 11:51:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204807298156204032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:51:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807319098363904[0;39m 生成今日电子书快照开始
2022-07-20 11:51:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807319098363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807319098363904[0;39m ==> Parameters: 
2022-07-20 11:51:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807319098363904[0;39m <==    Updates: 0
2022-07-20 11:51:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807319098363904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:51:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807340069883904[0;39m 生成今日电子书快照开始
2022-07-20 11:51:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807340069883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807340069883904[0;39m ==> Parameters: 
2022-07-20 11:51:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807340069883904[0;39m <==    Updates: 0
2022-07-20 11:51:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807340069883904[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:51:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807361007849472[0;39m 生成今日电子书快照开始
2022-07-20 11:51:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807361007849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807361007849472[0;39m ==> Parameters: 
2022-07-20 11:51:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807361007849472[0;39m <==    Updates: 0
2022-07-20 11:51:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807361007849472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:51:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807381975175168[0;39m 生成今日电子书快照开始
2022-07-20 11:51:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807381975175168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807381975175168[0;39m ==> Parameters: 
2022-07-20 11:51:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807381975175168[0;39m <==    Updates: 0
2022-07-20 11:51:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807381975175168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:51:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807402988638208[0;39m 生成今日电子书快照开始
2022-07-20 11:51:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807402988638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807402988638208[0;39m ==> Parameters: 
2022-07-20 11:51:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807402988638208[0;39m <==    Updates: 0
2022-07-20 11:51:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807402988638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:51:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204807423981129728[0;39m 更新电子书下的文档数据开始
2022-07-20 11:51:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807423981129728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:51:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807423981129728[0;39m ==> Parameters: 
2022-07-20 11:51:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807423981129728[0;39m <==    Updates: 7
2022-07-20 11:51:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204807423981129728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:51:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807423989518336[0;39m 生成今日电子书快照开始
2022-07-20 11:51:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807423989518336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807423989518336[0;39m ==> Parameters: 
2022-07-20 11:51:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807423989518336[0;39m <==    Updates: 0
2022-07-20 11:51:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807423989518336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:51:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807444906512384[0;39m 生成今日电子书快照开始
2022-07-20 11:51:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807444906512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807444906512384[0;39m ==> Parameters: 
2022-07-20 11:51:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807444906512384[0;39m <==    Updates: 0
2022-07-20 11:51:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807444906512384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:51:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807465928364032[0;39m 生成今日电子书快照开始
2022-07-20 11:51:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807465928364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807465928364032[0;39m ==> Parameters: 
2022-07-20 11:51:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807465928364032[0;39m <==    Updates: 0
2022-07-20 11:51:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807465928364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:51:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807486845358080[0;39m 生成今日电子书快照开始
2022-07-20 11:51:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807486845358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807486845358080[0;39m ==> Parameters: 
2022-07-20 11:51:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807486845358080[0;39m <==    Updates: 0
2022-07-20 11:51:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807486845358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:51:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807507816878080[0;39m 生成今日电子书快照开始
2022-07-20 11:51:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807507816878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:51:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807507816878080[0;39m ==> Parameters: 
2022-07-20 11:51:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807507816878080[0;39m <==    Updates: 0
2022-07-20 11:51:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807507816878080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:52:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807528780009472[0;39m 生成今日电子书快照开始
2022-07-20 11:52:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807528780009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807528780009472[0;39m ==> Parameters: 
2022-07-20 11:52:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807528780009472[0;39m <==    Updates: 0
2022-07-20 11:52:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807528780009472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:52:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807549776695296[0;39m 生成今日电子书快照开始
2022-07-20 11:52:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807549776695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807549776695296[0;39m ==> Parameters: 
2022-07-20 11:52:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807549776695296[0;39m <==    Updates: 0
2022-07-20 11:52:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807549776695296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:52:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204807549785083904[0;39m 更新电子书下的文档数据开始
2022-07-20 11:52:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807549785083904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:52:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807549785083904[0;39m ==> Parameters: 
2022-07-20 11:52:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807549785083904[0;39m <==    Updates: 7
2022-07-20 11:52:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204807549785083904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:52:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807570781769728[0;39m 生成今日电子书快照开始
2022-07-20 11:52:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807570781769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807570781769728[0;39m ==> Parameters: 
2022-07-20 11:52:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807570781769728[0;39m <==    Updates: 0
2022-07-20 11:52:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807570781769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:52:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807591702958080[0;39m 生成今日电子书快照开始
2022-07-20 11:52:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807591702958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807591702958080[0;39m ==> Parameters: 
2022-07-20 11:52:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807591702958080[0;39m <==    Updates: 0
2022-07-20 11:52:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807591702958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:52:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807612720615424[0;39m 生成今日电子书快照开始
2022-07-20 11:52:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807612720615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807612720615424[0;39m ==> Parameters: 
2022-07-20 11:52:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807612720615424[0;39m <==    Updates: 0
2022-07-20 11:52:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807612720615424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:52:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807633650192384[0;39m 生成今日电子书快照开始
2022-07-20 11:52:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807633650192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807633650192384[0;39m ==> Parameters: 
2022-07-20 11:52:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807633650192384[0;39m <==    Updates: 0
2022-07-20 11:52:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807633650192384[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 11:52:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807654609129472[0;39m 生成今日电子书快照开始
2022-07-20 11:52:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807654609129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807654609129472[0;39m ==> Parameters: 
2022-07-20 11:52:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807654609129472[0;39m <==    Updates: 0
2022-07-20 11:52:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807654609129472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:52:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807675622592512[0;39m 生成今日电子书快照开始
2022-07-20 11:52:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807675622592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807675622592512[0;39m ==> Parameters: 
2022-07-20 11:52:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807675622592512[0;39m <==    Updates: 0
2022-07-20 11:52:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807675622592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:52:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204807675630981120[0;39m 更新电子书下的文档数据开始
2022-07-20 11:52:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807675630981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:52:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807675630981120[0;39m ==> Parameters: 
2022-07-20 11:52:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807675630981120[0;39m <==    Updates: 7
2022-07-20 11:52:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204807675630981120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:52:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807696585723904[0;39m 生成今日电子书快照开始
2022-07-20 11:52:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807696585723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807696585723904[0;39m ==> Parameters: 
2022-07-20 11:52:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807696585723904[0;39m <==    Updates: 0
2022-07-20 11:52:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807696585723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:52:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807717540466688[0;39m 生成今日电子书快照开始
2022-07-20 11:52:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807717540466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807717540466688[0;39m ==> Parameters: 
2022-07-20 11:52:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807717540466688[0;39m <==    Updates: 0
2022-07-20 11:52:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807717540466688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:52:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807738562318336[0;39m 生成今日电子书快照开始
2022-07-20 11:52:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807738562318336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807738562318336[0;39m ==> Parameters: 
2022-07-20 11:52:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807738562318336[0;39m <==    Updates: 0
2022-07-20 11:52:50.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807738562318336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:52:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807759491895296[0;39m 生成今日电子书快照开始
2022-07-20 11:52:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807759491895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:52:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807759491895296[0;39m ==> Parameters: 
2022-07-20 11:52:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807759491895296[0;39m <==    Updates: 0
2022-07-20 11:52:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807759491895296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:53:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807780484386816[0;39m 生成今日电子书快照开始
2022-07-20 11:53:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807780484386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807780484386816[0;39m ==> Parameters: 
2022-07-20 11:53:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807780484386816[0;39m <==    Updates: 0
2022-07-20 11:53:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807780484386816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:53:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204807801434935296[0;39m 更新电子书下的文档数据开始
2022-07-20 11:53:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807801434935296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:53:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807801434935296[0;39m ==> Parameters: 
2022-07-20 11:53:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807801434935296[0;39m <==    Updates: 7
2022-07-20 11:53:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204807801434935296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:53:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807801439129600[0;39m 生成今日电子书快照开始
2022-07-20 11:53:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807801439129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807801439129600[0;39m ==> Parameters: 
2022-07-20 11:53:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807801439129600[0;39m <==    Updates: 0
2022-07-20 11:53:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807801439129600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:53:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807822393872384[0;39m 生成今日电子书快照开始
2022-07-20 11:53:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807822393872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807822393872384[0;39m ==> Parameters: 
2022-07-20 11:53:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807822393872384[0;39m <==    Updates: 0
2022-07-20 11:53:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807822393872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:53:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807843365392384[0;39m 生成今日电子书快照开始
2022-07-20 11:53:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807843365392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807843365392384[0;39m ==> Parameters: 
2022-07-20 11:53:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807843365392384[0;39m <==    Updates: 0
2022-07-20 11:53:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807843365392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:53:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807864328523776[0;39m 生成今日电子书快照开始
2022-07-20 11:53:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807864328523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807864328523776[0;39m ==> Parameters: 
2022-07-20 11:53:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807864328523776[0;39m <==    Updates: 0
2022-07-20 11:53:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807864328523776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:53:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807885308432384[0;39m 生成今日电子书快照开始
2022-07-20 11:53:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807885308432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807885308432384[0;39m ==> Parameters: 
2022-07-20 11:53:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807885308432384[0;39m <==    Updates: 0
2022-07-20 11:53:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807885308432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:53:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807906305118208[0;39m 生成今日电子书快照开始
2022-07-20 11:53:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807906305118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807906305118208[0;39m ==> Parameters: 
2022-07-20 11:53:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807906305118208[0;39m <==    Updates: 0
2022-07-20 11:53:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807906305118208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:53:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807927268249600[0;39m 生成今日电子书快照开始
2022-07-20 11:53:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807927268249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807927268249600[0;39m ==> Parameters: 
2022-07-20 11:53:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807927268249600[0;39m <==    Updates: 0
2022-07-20 11:53:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807927268249600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:53:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204807927280832512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:53:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807927280832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:53:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807927280832512[0;39m ==> Parameters: 
2022-07-20 11:53:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204807927280832512[0;39m <==    Updates: 7
2022-07-20 11:53:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204807927280832512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:53:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807948239769600[0;39m 生成今日电子书快照开始
2022-07-20 11:53:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807948239769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807948239769600[0;39m ==> Parameters: 
2022-07-20 11:53:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807948239769600[0;39m <==    Updates: 0
2022-07-20 11:53:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807948239769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:53:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807969244844032[0;39m 生成今日电子书快照开始
2022-07-20 11:53:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807969244844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807969244844032[0;39m ==> Parameters: 
2022-07-20 11:53:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807969244844032[0;39m <==    Updates: 0
2022-07-20 11:53:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807969244844032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:53:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204807990170226688[0;39m 生成今日电子书快照开始
2022-07-20 11:53:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807990170226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807990170226688[0;39m ==> Parameters: 
2022-07-20 11:53:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204807990170226688[0;39m <==    Updates: 0
2022-07-20 11:53:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204807990170226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:53:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808011129163776[0;39m 生成今日电子书快照开始
2022-07-20 11:53:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808011129163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:53:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808011129163776[0;39m ==> Parameters: 
2022-07-20 11:53:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808011129163776[0;39m <==    Updates: 0
2022-07-20 11:53:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808011129163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:54:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808032151015424[0;39m 生成今日电子书快照开始
2022-07-20 11:54:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808032151015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808032151015424[0;39m ==> Parameters: 
2022-07-20 11:54:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808032151015424[0;39m <==    Updates: 0
2022-07-20 11:54:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808032151015424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:54:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204808053114146816[0;39m 更新电子书下的文档数据开始
2022-07-20 11:54:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808053114146816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:54:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808053114146816[0;39m ==> Parameters: 
2022-07-20 11:54:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808053114146816[0;39m <==    Updates: 7
2022-07-20 11:54:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204808053114146816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:54:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808053122535424[0;39m 生成今日电子书快照开始
2022-07-20 11:54:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808053122535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808053122535424[0;39m ==> Parameters: 
2022-07-20 11:54:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808053122535424[0;39m <==    Updates: 0
2022-07-20 11:54:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808053122535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:54:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808074052112384[0;39m 生成今日电子书快照开始
2022-07-20 11:54:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808074052112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808074052112384[0;39m ==> Parameters: 
2022-07-20 11:54:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808074052112384[0;39m <==    Updates: 0
2022-07-20 11:54:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808074052112384[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 11:54:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808095015243776[0;39m 生成今日电子书快照开始
2022-07-20 11:54:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808095015243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808095015243776[0;39m ==> Parameters: 
2022-07-20 11:54:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808095015243776[0;39m <==    Updates: 0
2022-07-20 11:54:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808095015243776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:54:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808115995152384[0;39m 生成今日电子书快照开始
2022-07-20 11:54:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808115995152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808115995152384[0;39m ==> Parameters: 
2022-07-20 11:54:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808115995152384[0;39m <==    Updates: 0
2022-07-20 11:54:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808115995152384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:54:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808136966672384[0;39m 生成今日电子书快照开始
2022-07-20 11:54:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808136966672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808136966672384[0;39m ==> Parameters: 
2022-07-20 11:54:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808136966672384[0;39m <==    Updates: 0
2022-07-20 11:54:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808136966672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:54:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808157954969600[0;39m 生成今日电子书快照开始
2022-07-20 11:54:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808157954969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808157954969600[0;39m ==> Parameters: 
2022-07-20 11:54:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808157954969600[0;39m <==    Updates: 0
2022-07-20 11:54:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808157954969600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:54:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204808178943266816[0;39m 更新电子书下的文档数据开始
2022-07-20 11:54:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808178943266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:54:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808178943266816[0;39m ==> Parameters: 
2022-07-20 11:54:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808178943266816[0;39m <==    Updates: 7
2022-07-20 11:54:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204808178943266816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:54:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808178951655424[0;39m 生成今日电子书快照开始
2022-07-20 11:54:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808178951655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808178951655424[0;39m ==> Parameters: 
2022-07-20 11:54:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808178951655424[0;39m <==    Updates: 0
2022-07-20 11:54:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808178951655424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:54:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808199923175424[0;39m 生成今日电子书快照开始
2022-07-20 11:54:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808199923175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808199923175424[0;39m ==> Parameters: 
2022-07-20 11:54:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808199923175424[0;39m <==    Updates: 0
2022-07-20 11:54:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808199923175424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:54:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808220852752384[0;39m 生成今日电子书快照开始
2022-07-20 11:54:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808220852752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808220852752384[0;39m ==> Parameters: 
2022-07-20 11:54:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808220852752384[0;39m <==    Updates: 0
2022-07-20 11:54:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808220852752384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:54:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808241862021120[0;39m 生成今日电子书快照开始
2022-07-20 11:54:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808241862021120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808241862021120[0;39m ==> Parameters: 
2022-07-20 11:54:50.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808241862021120[0;39m <==    Updates: 0
2022-07-20 11:54:50.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808241862021120[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:54:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808262837735424[0;39m 生成今日电子书快照开始
2022-07-20 11:54:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808262837735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:54:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808262837735424[0;39m ==> Parameters: 
2022-07-20 11:54:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808262837735424[0;39m <==    Updates: 0
2022-07-20 11:54:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808262837735424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:55:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808283800866816[0;39m 生成今日电子书快照开始
2022-07-20 11:55:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808283800866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808283800866816[0;39m ==> Parameters: 
2022-07-20 11:55:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808283800866816[0;39m <==    Updates: 0
2022-07-20 11:55:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808283800866816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:55:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808304726249472[0;39m 生成今日电子书快照开始
2022-07-20 11:55:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808304726249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808304726249472[0;39m ==> Parameters: 
2022-07-20 11:55:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808304726249472[0;39m <==    Updates: 0
2022-07-20 11:55:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808304726249472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:55:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204808304734638080[0;39m 更新电子书下的文档数据开始
2022-07-20 11:55:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808304734638080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:55:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808304734638080[0;39m ==> Parameters: 
2022-07-20 11:55:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808304734638080[0;39m <==    Updates: 7
2022-07-20 11:55:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204808304734638080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:55:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808325706158080[0;39m 生成今日电子书快照开始
2022-07-20 11:55:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808325706158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808325706158080[0;39m ==> Parameters: 
2022-07-20 11:55:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808325706158080[0;39m <==    Updates: 0
2022-07-20 11:55:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808325706158080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:55:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808346698649600[0;39m 生成今日电子书快照开始
2022-07-20 11:55:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808346698649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808346698649600[0;39m ==> Parameters: 
2022-07-20 11:55:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808346698649600[0;39m <==    Updates: 0
2022-07-20 11:55:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808346698649600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:55:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808367645003776[0;39m 生成今日电子书快照开始
2022-07-20 11:55:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808367645003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808367645003776[0;39m ==> Parameters: 
2022-07-20 11:55:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808367645003776[0;39m <==    Updates: 0
2022-07-20 11:55:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808367645003776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:55:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808388654272512[0;39m 生成今日电子书快照开始
2022-07-20 11:55:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808388654272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808388654272512[0;39m ==> Parameters: 
2022-07-20 11:55:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808388654272512[0;39m <==    Updates: 0
2022-07-20 11:55:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808388654272512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:55:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808409634181120[0;39m 生成今日电子书快照开始
2022-07-20 11:55:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808409634181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808409634181120[0;39m ==> Parameters: 
2022-07-20 11:55:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808409634181120[0;39m <==    Updates: 0
2022-07-20 11:55:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808409634181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:55:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204808430580535296[0;39m 更新电子书下的文档数据开始
2022-07-20 11:55:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808430580535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:55:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808430580535296[0;39m ==> Parameters: 
2022-07-20 11:55:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808430580535296[0;39m <==    Updates: 7
2022-07-20 11:55:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204808430580535296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:55:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808430588923904[0;39m 生成今日电子书快照开始
2022-07-20 11:55:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808430588923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808430588923904[0;39m ==> Parameters: 
2022-07-20 11:55:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808430588923904[0;39m <==    Updates: 0
2022-07-20 11:55:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808430588923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:55:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808451535278080[0;39m 生成今日电子书快照开始
2022-07-20 11:55:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808451535278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808451535278080[0;39m ==> Parameters: 
2022-07-20 11:55:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808451535278080[0;39m <==    Updates: 0
2022-07-20 11:55:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808451535278080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:55:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808472540352512[0;39m 生成今日电子书快照开始
2022-07-20 11:55:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808472540352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808472540352512[0;39m ==> Parameters: 
2022-07-20 11:55:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808472540352512[0;39m <==    Updates: 0
2022-07-20 11:55:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808472540352512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:55:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808493520261120[0;39m 生成今日电子书快照开始
2022-07-20 11:55:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808493520261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808493520261120[0;39m ==> Parameters: 
2022-07-20 11:55:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808493520261120[0;39m <==    Updates: 0
2022-07-20 11:55:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808493520261120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:55:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808514475003904[0;39m 生成今日电子书快照开始
2022-07-20 11:55:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808514475003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:55:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808514475003904[0;39m ==> Parameters: 
2022-07-20 11:55:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808514475003904[0;39m <==    Updates: 0
2022-07-20 11:55:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808514475003904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:56:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808535475884032[0;39m 生成今日电子书快照开始
2022-07-20 11:56:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808535475884032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808535475884032[0;39m ==> Parameters: 
2022-07-20 11:56:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808535475884032[0;39m <==    Updates: 0
2022-07-20 11:56:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808535475884032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:56:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808556405460992[0;39m 生成今日电子书快照开始
2022-07-20 11:56:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808556405460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808556405460992[0;39m ==> Parameters: 
2022-07-20 11:56:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808556405460992[0;39m <==    Updates: 0
2022-07-20 11:56:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808556405460992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:56:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204808556418043904[0;39m 更新电子书下的文档数据开始
2022-07-20 11:56:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808556418043904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:56:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808556418043904[0;39m ==> Parameters: 
2022-07-20 11:56:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808556418043904[0;39m <==    Updates: 7
2022-07-20 11:56:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204808556418043904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:56:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808577389563904[0;39m 生成今日电子书快照开始
2022-07-20 11:56:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808577389563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808577389563904[0;39m ==> Parameters: 
2022-07-20 11:56:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808577389563904[0;39m <==    Updates: 0
2022-07-20 11:56:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808577389563904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:56:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808598331723776[0;39m 生成今日电子书快照开始
2022-07-20 11:56:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808598331723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808598331723776[0;39m ==> Parameters: 
2022-07-20 11:56:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808598331723776[0;39m <==    Updates: 0
2022-07-20 11:56:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808598331723776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:56:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808619299049472[0;39m 生成今日电子书快照开始
2022-07-20 11:56:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808619299049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808619299049472[0;39m ==> Parameters: 
2022-07-20 11:56:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808619299049472[0;39m <==    Updates: 0
2022-07-20 11:56:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808619299049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:56:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808640316706816[0;39m 生成今日电子书快照开始
2022-07-20 11:56:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808640316706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808640316706816[0;39m ==> Parameters: 
2022-07-20 11:56:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808640316706816[0;39m <==    Updates: 0
2022-07-20 11:56:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808640316706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:56:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808661288226816[0;39m 生成今日电子书快照开始
2022-07-20 11:56:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808661288226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808661288226816[0;39m ==> Parameters: 
2022-07-20 11:56:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808661288226816[0;39m <==    Updates: 0
2022-07-20 11:56:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808661288226816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:56:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204808682230386688[0;39m 更新电子书下的文档数据开始
2022-07-20 11:56:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808682230386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:56:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808682230386688[0;39m ==> Parameters: 
2022-07-20 11:56:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808682230386688[0;39m <==    Updates: 7
2022-07-20 11:56:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204808682230386688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:56:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808682238775296[0;39m 生成今日电子书快照开始
2022-07-20 11:56:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808682238775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808682238775296[0;39m ==> Parameters: 
2022-07-20 11:56:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808682238775296[0;39m <==    Updates: 0
2022-07-20 11:56:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808682238775296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:56:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808703214489600[0;39m 生成今日电子书快照开始
2022-07-20 11:56:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808703214489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808703214489600[0;39m ==> Parameters: 
2022-07-20 11:56:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808703214489600[0;39m <==    Updates: 0
2022-07-20 11:56:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808703214489600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:56:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808724160843776[0;39m 生成今日电子书快照开始
2022-07-20 11:56:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808724160843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808724160843776[0;39m ==> Parameters: 
2022-07-20 11:56:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808724160843776[0;39m <==    Updates: 0
2022-07-20 11:56:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808724160843776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:56:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808745149140992[0;39m 生成今日电子书快照开始
2022-07-20 11:56:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808745149140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808745149140992[0;39m ==> Parameters: 
2022-07-20 11:56:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808745149140992[0;39m <==    Updates: 0
2022-07-20 11:56:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808745149140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:56:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808766120660992[0;39m 生成今日电子书快照开始
2022-07-20 11:56:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808766120660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:56:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808766120660992[0;39m ==> Parameters: 
2022-07-20 11:56:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808766120660992[0;39m <==    Updates: 0
2022-07-20 11:56:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808766120660992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:57:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808787079598080[0;39m 生成今日电子书快照开始
2022-07-20 11:57:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808787079598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808787079598080[0;39m ==> Parameters: 
2022-07-20 11:57:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808787079598080[0;39m <==    Updates: 0
2022-07-20 11:57:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808787079598080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:57:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204808808072089600[0;39m 更新电子书下的文档数据开始
2022-07-20 11:57:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808808072089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:57:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808808072089600[0;39m ==> Parameters: 
2022-07-20 11:57:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808808072089600[0;39m <==    Updates: 7
2022-07-20 11:57:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204808808072089600[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 11:57:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808808084672512[0;39m 生成今日电子书快照开始
2022-07-20 11:57:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808808084672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808808084672512[0;39m ==> Parameters: 
2022-07-20 11:57:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808808084672512[0;39m <==    Updates: 0
2022-07-20 11:57:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808808084672512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:57:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808829031026688[0;39m 生成今日电子书快照开始
2022-07-20 11:57:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808829031026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808829031026688[0;39m ==> Parameters: 
2022-07-20 11:57:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808829031026688[0;39m <==    Updates: 0
2022-07-20 11:57:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808829031026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:57:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808849994158080[0;39m 生成今日电子书快照开始
2022-07-20 11:57:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808849994158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808849994158080[0;39m ==> Parameters: 
2022-07-20 11:57:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808849994158080[0;39m <==    Updates: 0
2022-07-20 11:57:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808849994158080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:57:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808870990843904[0;39m 生成今日电子书快照开始
2022-07-20 11:57:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808870990843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808870990843904[0;39m ==> Parameters: 
2022-07-20 11:57:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808870990843904[0;39m <==    Updates: 0
2022-07-20 11:57:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808870990843904[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:57:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808891962363904[0;39m 生成今日电子书快照开始
2022-07-20 11:57:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808891962363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808891962363904[0;39m ==> Parameters: 
2022-07-20 11:57:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808891962363904[0;39m <==    Updates: 0
2022-07-20 11:57:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808891962363904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:57:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808912912912384[0;39m 生成今日电子书快照开始
2022-07-20 11:57:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808912912912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808912912912384[0;39m ==> Parameters: 
2022-07-20 11:57:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808912912912384[0;39m <==    Updates: 0
2022-07-20 11:57:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808912912912384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:57:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808933905403904[0;39m 生成今日电子书快照开始
2022-07-20 11:57:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808933905403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808933905403904[0;39m ==> Parameters: 
2022-07-20 11:57:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808933905403904[0;39m <==    Updates: 0
2022-07-20 11:57:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808933905403904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:57:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204808933913792512[0;39m 更新电子书下的文档数据开始
2022-07-20 11:57:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808933913792512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:57:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808933913792512[0;39m ==> Parameters: 
2022-07-20 11:57:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204808933913792512[0;39m <==    Updates: 7
2022-07-20 11:57:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204808933913792512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:57:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808954876923904[0;39m 生成今日电子书快照开始
2022-07-20 11:57:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808954876923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808954876923904[0;39m ==> Parameters: 
2022-07-20 11:57:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808954876923904[0;39m <==    Updates: 0
2022-07-20 11:57:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808954876923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:57:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808975865221120[0;39m 生成今日电子书快照开始
2022-07-20 11:57:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808975865221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808975865221120[0;39m ==> Parameters: 
2022-07-20 11:57:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808975865221120[0;39m <==    Updates: 0
2022-07-20 11:57:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808975865221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:57:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204808996845129728[0;39m 生成今日电子书快照开始
2022-07-20 11:57:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808996845129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808996845129728[0;39m ==> Parameters: 
2022-07-20 11:57:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204808996845129728[0;39m <==    Updates: 0
2022-07-20 11:57:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204808996845129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:57:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809017787289600[0;39m 生成今日电子书快照开始
2022-07-20 11:57:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809017787289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:57:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809017787289600[0;39m ==> Parameters: 
2022-07-20 11:57:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809017787289600[0;39m <==    Updates: 0
2022-07-20 11:57:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809017787289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:58:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809038783975424[0;39m 生成今日电子书快照开始
2022-07-20 11:58:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809038783975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809038783975424[0;39m ==> Parameters: 
2022-07-20 11:58:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809038783975424[0;39m <==    Updates: 0
2022-07-20 11:58:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809038783975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:58:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204809059709358080[0;39m 更新电子书下的文档数据开始
2022-07-20 11:58:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809059709358080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:58:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809059709358080[0;39m ==> Parameters: 
2022-07-20 11:58:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809059709358080[0;39m <==    Updates: 7
2022-07-20 11:58:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204809059709358080[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-20 11:58:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809059726135296[0;39m 生成今日电子书快照开始
2022-07-20 11:58:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809059726135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809059726135296[0;39m ==> Parameters: 
2022-07-20 11:58:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809059726135296[0;39m <==    Updates: 0
2022-07-20 11:58:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809059726135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:58:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809080680878080[0;39m 生成今日电子书快照开始
2022-07-20 11:58:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809080680878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809080680878080[0;39m ==> Parameters: 
2022-07-20 11:58:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809080680878080[0;39m <==    Updates: 0
2022-07-20 11:58:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809080680878080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:58:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809101677563904[0;39m 生成今日电子书快照开始
2022-07-20 11:58:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809101677563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809101677563904[0;39m ==> Parameters: 
2022-07-20 11:58:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809101677563904[0;39m <==    Updates: 0
2022-07-20 11:58:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809101677563904[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:58:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809122644889600[0;39m 生成今日电子书快照开始
2022-07-20 11:58:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809122644889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809122644889600[0;39m ==> Parameters: 
2022-07-20 11:58:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809122644889600[0;39m <==    Updates: 0
2022-07-20 11:58:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809122644889600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 11:58:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809143616409600[0;39m 生成今日电子书快照开始
2022-07-20 11:58:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809143616409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809143616409600[0;39m ==> Parameters: 
2022-07-20 11:58:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809143616409600[0;39m <==    Updates: 0
2022-07-20 11:58:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809143616409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:58:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809164579540992[0;39m 生成今日电子书快照开始
2022-07-20 11:58:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809164579540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809164579540992[0;39m ==> Parameters: 
2022-07-20 11:58:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809164579540992[0;39m <==    Updates: 0
2022-07-20 11:58:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809164579540992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:58:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809185576226816[0;39m 生成今日电子书快照开始
2022-07-20 11:58:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809185576226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809185576226816[0;39m ==> Parameters: 
2022-07-20 11:58:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809185576226816[0;39m <==    Updates: 0
2022-07-20 11:58:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809185576226816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:58:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204809185593004032[0;39m 更新电子书下的文档数据开始
2022-07-20 11:58:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809185593004032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:58:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809185593004032[0;39m ==> Parameters: 
2022-07-20 11:58:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809185593004032[0;39m <==    Updates: 7
2022-07-20 11:58:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204809185593004032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:58:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809206505803776[0;39m 生成今日电子书快照开始
2022-07-20 11:58:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809206505803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809206505803776[0;39m ==> Parameters: 
2022-07-20 11:58:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809206505803776[0;39m <==    Updates: 0
2022-07-20 11:58:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809206505803776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:58:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809227494100992[0;39m 生成今日电子书快照开始
2022-07-20 11:58:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809227494100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809227494100992[0;39m ==> Parameters: 
2022-07-20 11:58:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809227494100992[0;39m <==    Updates: 0
2022-07-20 11:58:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809227494100992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:58:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809248474009600[0;39m 生成今日电子书快照开始
2022-07-20 11:58:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809248474009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809248474009600[0;39m ==> Parameters: 
2022-07-20 11:58:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809248474009600[0;39m <==    Updates: 0
2022-07-20 11:58:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809248474009600[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-20 11:58:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809269474889728[0;39m 生成今日电子书快照开始
2022-07-20 11:58:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809269474889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:58:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809269474889728[0;39m ==> Parameters: 
2022-07-20 11:58:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809269474889728[0;39m <==    Updates: 0
2022-07-20 11:58:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809269474889728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:59:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809290442215424[0;39m 生成今日电子书快照开始
2022-07-20 11:59:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809290442215424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809290442215424[0;39m ==> Parameters: 
2022-07-20 11:59:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809290442215424[0;39m <==    Updates: 0
2022-07-20 11:59:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809290442215424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 11:59:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809311396958208[0;39m 生成今日电子书快照开始
2022-07-20 11:59:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809311396958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809311396958208[0;39m ==> Parameters: 
2022-07-20 11:59:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809311396958208[0;39m <==    Updates: 0
2022-07-20 11:59:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809311396958208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:59:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204809311409541120[0;39m 更新电子书下的文档数据开始
2022-07-20 11:59:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809311409541120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:59:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809311409541120[0;39m ==> Parameters: 
2022-07-20 11:59:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809311409541120[0;39m <==    Updates: 7
2022-07-20 11:59:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204809311409541120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 11:59:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809332343312384[0;39m 生成今日电子书快照开始
2022-07-20 11:59:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809332343312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809332343312384[0;39m ==> Parameters: 
2022-07-20 11:59:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809332343312384[0;39m <==    Updates: 0
2022-07-20 11:59:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809332343312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:59:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809353344192512[0;39m 生成今日电子书快照开始
2022-07-20 11:59:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809353344192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809353344192512[0;39m ==> Parameters: 
2022-07-20 11:59:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809353344192512[0;39m <==    Updates: 0
2022-07-20 11:59:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809353344192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:59:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809374290546688[0;39m 生成今日电子书快照开始
2022-07-20 11:59:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809374290546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809374290546688[0;39m ==> Parameters: 
2022-07-20 11:59:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809374290546688[0;39m <==    Updates: 0
2022-07-20 11:59:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809374290546688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:59:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809395245289472[0;39m 生成今日电子书快照开始
2022-07-20 11:59:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809395245289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809395245289472[0;39m ==> Parameters: 
2022-07-20 11:59:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809395245289472[0;39m <==    Updates: 0
2022-07-20 11:59:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809395245289472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:59:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809416229392384[0;39m 生成今日电子书快照开始
2022-07-20 11:59:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809416229392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809416229392384[0;39m ==> Parameters: 
2022-07-20 11:59:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809416229392384[0;39m <==    Updates: 0
2022-07-20 11:59:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809416229392384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 11:59:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809437242855424[0;39m 生成今日电子书快照开始
2022-07-20 11:59:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809437242855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809437242855424[0;39m ==> Parameters: 
2022-07-20 11:59:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809437242855424[0;39m <==    Updates: 0
2022-07-20 11:59:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809437242855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:59:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204809437255438336[0;39m 更新电子书下的文档数据开始
2022-07-20 11:59:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809437255438336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 11:59:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809437255438336[0;39m ==> Parameters: 
2022-07-20 11:59:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809437255438336[0;39m <==    Updates: 7
2022-07-20 11:59:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204809437255438336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 11:59:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809458214375424[0;39m 生成今日电子书快照开始
2022-07-20 11:59:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809458214375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809458214375424[0;39m ==> Parameters: 
2022-07-20 11:59:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809458214375424[0;39m <==    Updates: 0
2022-07-20 11:59:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809458214375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 11:59:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809479131369472[0;39m 生成今日电子书快照开始
2022-07-20 11:59:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809479131369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809479131369472[0;39m ==> Parameters: 
2022-07-20 11:59:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809479131369472[0;39m <==    Updates: 0
2022-07-20 11:59:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809479131369472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 11:59:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809500132249600[0;39m 生成今日电子书快照开始
2022-07-20 11:59:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809500132249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809500132249600[0;39m ==> Parameters: 
2022-07-20 11:59:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809500132249600[0;39m <==    Updates: 0
2022-07-20 11:59:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809500132249600[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 11:59:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809521078603776[0;39m 生成今日电子书快照开始
2022-07-20 11:59:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809521078603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 11:59:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809521078603776[0;39m ==> Parameters: 
2022-07-20 11:59:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809521078603776[0;39m <==    Updates: 0
2022-07-20 11:59:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809521078603776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:00:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809542096261120[0;39m 生成今日电子书快照开始
2022-07-20 12:00:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809542096261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809542096261120[0;39m ==> Parameters: 
2022-07-20 12:00:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809542096261120[0;39m <==    Updates: 0
2022-07-20 12:00:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809542096261120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:00:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204809563071975424[0;39m 更新电子书下的文档数据开始
2022-07-20 12:00:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809563071975424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:00:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809563071975424[0;39m ==> Parameters: 
2022-07-20 12:00:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809563071975424[0;39m <==    Updates: 7
2022-07-20 12:00:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204809563071975424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 12:00:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809563080364032[0;39m 生成今日电子书快照开始
2022-07-20 12:00:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809563080364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809563080364032[0;39m ==> Parameters: 
2022-07-20 12:00:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809563080364032[0;39m <==    Updates: 0
2022-07-20 12:00:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809563080364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:00:10.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809583984775168[0;39m 生成今日电子书快照开始
2022-07-20 12:00:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809583984775168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809583984775168[0;39m ==> Parameters: 
2022-07-20 12:00:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809583984775168[0;39m <==    Updates: 0
2022-07-20 12:00:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809583984775168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:00:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809604994043904[0;39m 生成今日电子书快照开始
2022-07-20 12:00:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809604994043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809604994043904[0;39m ==> Parameters: 
2022-07-20 12:00:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809604994043904[0;39m <==    Updates: 0
2022-07-20 12:00:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809604994043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:00:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809625982341120[0;39m 生成今日电子书快照开始
2022-07-20 12:00:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809625982341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809625982341120[0;39m ==> Parameters: 
2022-07-20 12:00:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809625982341120[0;39m <==    Updates: 0
2022-07-20 12:00:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809625982341120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:00:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809646920306688[0;39m 生成今日电子书快照开始
2022-07-20 12:00:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809646920306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809646920306688[0;39m ==> Parameters: 
2022-07-20 12:00:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809646920306688[0;39m <==    Updates: 0
2022-07-20 12:00:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809646920306688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:00:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809667900215296[0;39m 生成今日电子书快照开始
2022-07-20 12:00:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809667900215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809667900215296[0;39m ==> Parameters: 
2022-07-20 12:00:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809667900215296[0;39m <==    Updates: 0
2022-07-20 12:00:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809667900215296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:00:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809688867540992[0;39m 生成今日电子书快照开始
2022-07-20 12:00:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809688867540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809688867540992[0;39m ==> Parameters: 
2022-07-20 12:00:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809688867540992[0;39m <==    Updates: 0
2022-07-20 12:00:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809688867540992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:00:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204809688880123904[0;39m 更新电子书下的文档数据开始
2022-07-20 12:00:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809688880123904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:00:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809688880123904[0;39m ==> Parameters: 
2022-07-20 12:00:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809688880123904[0;39m <==    Updates: 7
2022-07-20 12:00:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204809688880123904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 12:00:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809709834866688[0;39m 生成今日电子书快照开始
2022-07-20 12:00:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809709834866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809709834866688[0;39m ==> Parameters: 
2022-07-20 12:00:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809709834866688[0;39m <==    Updates: 0
2022-07-20 12:00:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809709834866688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 12:00:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809730789609472[0;39m 生成今日电子书快照开始
2022-07-20 12:00:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809730789609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809730789609472[0;39m ==> Parameters: 
2022-07-20 12:00:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809730789609472[0;39m <==    Updates: 0
2022-07-20 12:00:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809730789609472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:00:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809751782100992[0;39m 生成今日电子书快照开始
2022-07-20 12:00:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809751782100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809751782100992[0;39m ==> Parameters: 
2022-07-20 12:00:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809751782100992[0;39m <==    Updates: 0
2022-07-20 12:00:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809751782100992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:00:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809772757815296[0;39m 生成今日电子书快照开始
2022-07-20 12:00:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809772757815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:00:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809772757815296[0;39m ==> Parameters: 
2022-07-20 12:00:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809772757815296[0;39m <==    Updates: 0
2022-07-20 12:00:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809772757815296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:01:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809793762889728[0;39m 生成今日电子书快照开始
2022-07-20 12:01:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809793762889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809793762889728[0;39m ==> Parameters: 
2022-07-20 12:01:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809793762889728[0;39m <==    Updates: 0
2022-07-20 12:01:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809793762889728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:01:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204809814730215424[0;39m 更新电子书下的文档数据开始
2022-07-20 12:01:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809814730215424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:01:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809814730215424[0;39m ==> Parameters: 
2022-07-20 12:01:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809814730215424[0;39m <==    Updates: 7
2022-07-20 12:01:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204809814730215424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 12:01:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809814734409728[0;39m 生成今日电子书快照开始
2022-07-20 12:01:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809814734409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809814734409728[0;39m ==> Parameters: 
2022-07-20 12:01:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809814734409728[0;39m <==    Updates: 0
2022-07-20 12:01:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809814734409728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:01:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809835672375296[0;39m 生成今日电子书快照开始
2022-07-20 12:01:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809835672375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809835672375296[0;39m ==> Parameters: 
2022-07-20 12:01:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809835672375296[0;39m <==    Updates: 0
2022-07-20 12:01:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809835672375296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:01:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809856643895296[0;39m 生成今日电子书快照开始
2022-07-20 12:01:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809856643895296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809856643895296[0;39m ==> Parameters: 
2022-07-20 12:01:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809856643895296[0;39m <==    Updates: 0
2022-07-20 12:01:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809856643895296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:01:20.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809877586055168[0;39m 生成今日电子书快照开始
2022-07-20 12:01:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809877586055168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809877586055168[0;39m ==> Parameters: 
2022-07-20 12:01:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809877586055168[0;39m <==    Updates: 0
2022-07-20 12:01:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809877586055168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:01:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809898578546688[0;39m 生成今日电子书快照开始
2022-07-20 12:01:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809898578546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809898578546688[0;39m ==> Parameters: 
2022-07-20 12:01:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809898578546688[0;39m <==    Updates: 0
2022-07-20 12:01:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809898578546688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:01:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809919554260992[0;39m 生成今日电子书快照开始
2022-07-20 12:01:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809919554260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809919554260992[0;39m ==> Parameters: 
2022-07-20 12:01:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809919554260992[0;39m <==    Updates: 0
2022-07-20 12:01:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809919554260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:01:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809940546752512[0;39m 生成今日电子书快照开始
2022-07-20 12:01:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809940546752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809940546752512[0;39m ==> Parameters: 
2022-07-20 12:01:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809940546752512[0;39m <==    Updates: 0
2022-07-20 12:01:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809940546752512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:01:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204809940559335424[0;39m 更新电子书下的文档数据开始
2022-07-20 12:01:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809940559335424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:01:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809940559335424[0;39m ==> Parameters: 
2022-07-20 12:01:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204809940559335424[0;39m <==    Updates: 7
2022-07-20 12:01:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204809940559335424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 12:01:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809961509883904[0;39m 生成今日电子书快照开始
2022-07-20 12:01:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809961509883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809961509883904[0;39m ==> Parameters: 
2022-07-20 12:01:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809961509883904[0;39m <==    Updates: 0
2022-07-20 12:01:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809961509883904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:01:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204809982473015296[0;39m 生成今日电子书快照开始
2022-07-20 12:01:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809982473015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809982473015296[0;39m ==> Parameters: 
2022-07-20 12:01:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204809982473015296[0;39m <==    Updates: 0
2022-07-20 12:01:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204809982473015296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:01:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810003457118208[0;39m 生成今日电子书快照开始
2022-07-20 12:01:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810003457118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810003457118208[0;39m ==> Parameters: 
2022-07-20 12:01:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810003457118208[0;39m <==    Updates: 0
2022-07-20 12:01:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810003457118208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:01:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810024437026816[0;39m 生成今日电子书快照开始
2022-07-20 12:01:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810024437026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:01:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810024437026816[0;39m ==> Parameters: 
2022-07-20 12:01:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810024437026816[0;39m <==    Updates: 0
2022-07-20 12:01:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810024437026816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:02:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810045412741120[0;39m 生成今日电子书快照开始
2022-07-20 12:02:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810045412741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810045412741120[0;39m ==> Parameters: 
2022-07-20 12:02:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810045412741120[0;39m <==    Updates: 0
2022-07-20 12:02:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810045412741120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:02:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810066380066816[0;39m 生成今日电子书快照开始
2022-07-20 12:02:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810066380066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810066380066816[0;39m ==> Parameters: 
2022-07-20 12:02:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810066380066816[0;39m <==    Updates: 0
2022-07-20 12:02:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810066380066816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:02:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204810066392649728[0;39m 更新电子书下的文档数据开始
2022-07-20 12:02:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810066392649728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:02:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810066392649728[0;39m ==> Parameters: 
2022-07-20 12:02:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810066392649728[0;39m <==    Updates: 7
2022-07-20 12:02:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204810066392649728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 12:02:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810087347392512[0;39m 生成今日电子书快照开始
2022-07-20 12:02:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810087347392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810087347392512[0;39m ==> Parameters: 
2022-07-20 12:02:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810087347392512[0;39m <==    Updates: 0
2022-07-20 12:02:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810087347392512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:02:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810108318912512[0;39m 生成今日电子书快照开始
2022-07-20 12:02:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810108318912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810108318912512[0;39m ==> Parameters: 
2022-07-20 12:02:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810108318912512[0;39m <==    Updates: 0
2022-07-20 12:02:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810108318912512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:02:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810129248489472[0;39m 生成今日电子书快照开始
2022-07-20 12:02:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810129248489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810129248489472[0;39m ==> Parameters: 
2022-07-20 12:02:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810129248489472[0;39m <==    Updates: 0
2022-07-20 12:02:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810129248489472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 12:02:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810150270341120[0;39m 生成今日电子书快照开始
2022-07-20 12:02:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810150270341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810150270341120[0;39m ==> Parameters: 
2022-07-20 12:02:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810150270341120[0;39m <==    Updates: 0
2022-07-20 12:02:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810150270341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:02:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810171199918080[0;39m 生成今日电子书快照开始
2022-07-20 12:02:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810171199918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810171199918080[0;39m ==> Parameters: 
2022-07-20 12:02:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810171199918080[0;39m <==    Updates: 0
2022-07-20 12:02:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810171199918080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:02:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810192196603904[0;39m 生成今日电子书快照开始
2022-07-20 12:02:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810192196603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810192196603904[0;39m ==> Parameters: 
2022-07-20 12:02:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810192196603904[0;39m <==    Updates: 0
2022-07-20 12:02:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810192196603904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:02:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204810192204992512[0;39m 更新电子书下的文档数据开始
2022-07-20 12:02:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810192204992512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:02:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810192204992512[0;39m ==> Parameters: 
2022-07-20 12:02:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810192204992512[0;39m <==    Updates: 7
2022-07-20 12:02:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204810192204992512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 12:02:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810213159735296[0;39m 生成今日电子书快照开始
2022-07-20 12:02:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810213159735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810213159735296[0;39m ==> Parameters: 
2022-07-20 12:02:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810213159735296[0;39m <==    Updates: 0
2022-07-20 12:02:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810213159735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:02:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810234156421120[0;39m 生成今日电子书快照开始
2022-07-20 12:02:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810234156421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810234156421120[0;39m ==> Parameters: 
2022-07-20 12:02:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810234156421120[0;39m <==    Updates: 0
2022-07-20 12:02:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810234156421120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:02:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810255136329728[0;39m 生成今日电子书快照开始
2022-07-20 12:02:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810255136329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810255136329728[0;39m ==> Parameters: 
2022-07-20 12:02:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810255136329728[0;39m <==    Updates: 0
2022-07-20 12:02:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810255136329728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:02:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810276086878208[0;39m 生成今日电子书快照开始
2022-07-20 12:02:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810276086878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:02:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810276086878208[0;39m ==> Parameters: 
2022-07-20 12:02:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810276086878208[0;39m <==    Updates: 0
2022-07-20 12:02:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810276086878208[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:03:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810297045815296[0;39m 生成今日电子书快照开始
2022-07-20 12:03:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810297045815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810297045815296[0;39m ==> Parameters: 
2022-07-20 12:03:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810297045815296[0;39m <==    Updates: 0
2022-07-20 12:03:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810297045815296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 12:03:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810318013140992[0;39m 生成今日电子书快照开始
2022-07-20 12:03:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810318013140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810318013140992[0;39m ==> Parameters: 
2022-07-20 12:03:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810318013140992[0;39m <==    Updates: 0
2022-07-20 12:03:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810318013140992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:03:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204810318029918208[0;39m 更新电子书下的文档数据开始
2022-07-20 12:03:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810318029918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:03:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810318029918208[0;39m ==> Parameters: 
2022-07-20 12:03:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810318029918208[0;39m <==    Updates: 7
2022-07-20 12:03:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204810318029918208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 12:03:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810339005632512[0;39m 生成今日电子书快照开始
2022-07-20 12:03:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810339005632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810339005632512[0;39m ==> Parameters: 
2022-07-20 12:03:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810339005632512[0;39m <==    Updates: 0
2022-07-20 12:03:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810339005632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:03:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810359964569600[0;39m 生成今日电子书快照开始
2022-07-20 12:03:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810359964569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810359964569600[0;39m ==> Parameters: 
2022-07-20 12:03:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810359964569600[0;39m <==    Updates: 0
2022-07-20 12:03:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810359964569600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:03:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810380965449728[0;39m 生成今日电子书快照开始
2022-07-20 12:03:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810380965449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810380965449728[0;39m ==> Parameters: 
2022-07-20 12:03:20.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810380965449728[0;39m <==    Updates: 0
2022-07-20 12:03:20.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810380965449728[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 12:03:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810401928581120[0;39m 生成今日电子书快照开始
2022-07-20 12:03:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810401928581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810401928581120[0;39m ==> Parameters: 
2022-07-20 12:03:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810401928581120[0;39m <==    Updates: 0
2022-07-20 12:03:25.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810401928581120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 12:03:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810422870740992[0;39m 生成今日电子书快照开始
2022-07-20 12:03:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810422870740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810422870740992[0;39m ==> Parameters: 
2022-07-20 12:03:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810422870740992[0;39m <==    Updates: 0
2022-07-20 12:03:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810422870740992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 12:03:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810443838066688[0;39m 生成今日电子书快照开始
2022-07-20 12:03:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810443838066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810443838066688[0;39m ==> Parameters: 
2022-07-20 12:03:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810443838066688[0;39m <==    Updates: 0
2022-07-20 12:03:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810443838066688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:03:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204810443850649600[0;39m 更新电子书下的文档数据开始
2022-07-20 12:03:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810443850649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:03:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810443850649600[0;39m ==> Parameters: 
2022-07-20 12:03:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810443850649600[0;39m <==    Updates: 7
2022-07-20 12:03:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204810443850649600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 12:03:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810464801198080[0;39m 生成今日电子书快照开始
2022-07-20 12:03:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810464801198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810464801198080[0;39m ==> Parameters: 
2022-07-20 12:03:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810464801198080[0;39m <==    Updates: 0
2022-07-20 12:03:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810464801198080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:03:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810485785300992[0;39m 生成今日电子书快照开始
2022-07-20 12:03:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810485785300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810485785300992[0;39m ==> Parameters: 
2022-07-20 12:03:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810485785300992[0;39m <==    Updates: 0
2022-07-20 12:03:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810485785300992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:03:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810506794569728[0;39m 生成今日电子书快照开始
2022-07-20 12:03:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810506794569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810506794569728[0;39m ==> Parameters: 
2022-07-20 12:03:50.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810506794569728[0;39m <==    Updates: 0
2022-07-20 12:03:50.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810506794569728[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-20 12:03:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810527757701120[0;39m 生成今日电子书快照开始
2022-07-20 12:03:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810527757701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:03:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810527757701120[0;39m ==> Parameters: 
2022-07-20 12:03:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810527757701120[0;39m <==    Updates: 0
2022-07-20 12:03:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810527757701120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 12:04:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810548678889472[0;39m 生成今日电子书快照开始
2022-07-20 12:04:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810548678889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810548678889472[0;39m ==> Parameters: 
2022-07-20 12:04:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810548678889472[0;39m <==    Updates: 0
2022-07-20 12:04:00.105 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810548678889472[0;39m 生成今日电子书快照结束，耗时：104 毫秒
2022-07-20 12:04:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204810569704935424[0;39m 更新电子书下的文档数据开始
2022-07-20 12:04:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810569704935424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:04:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810569704935424[0;39m ==> Parameters: 
2022-07-20 12:04:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810569704935424[0;39m <==    Updates: 7
2022-07-20 12:04:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204810569704935424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 12:04:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810569717518336[0;39m 生成今日电子书快照开始
2022-07-20 12:04:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810569717518336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810569717518336[0;39m ==> Parameters: 
2022-07-20 12:04:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810569717518336[0;39m <==    Updates: 0
2022-07-20 12:04:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810569717518336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:04:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810590668066816[0;39m 生成今日电子书快照开始
2022-07-20 12:04:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810590668066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810590668066816[0;39m ==> Parameters: 
2022-07-20 12:04:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810590668066816[0;39m <==    Updates: 0
2022-07-20 12:04:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810590668066816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 12:04:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810611606032384[0;39m 生成今日电子书快照开始
2022-07-20 12:04:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810611606032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810611606032384[0;39m ==> Parameters: 
2022-07-20 12:04:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810611606032384[0;39m <==    Updates: 0
2022-07-20 12:04:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810611606032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:04:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810632611106816[0;39m 生成今日电子书快照开始
2022-07-20 12:04:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810632611106816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810632611106816[0;39m ==> Parameters: 
2022-07-20 12:04:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810632611106816[0;39m <==    Updates: 0
2022-07-20 12:04:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810632611106816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:04:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810653540683776[0;39m 生成今日电子书快照开始
2022-07-20 12:04:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810653540683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810653540683776[0;39m ==> Parameters: 
2022-07-20 12:04:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810653540683776[0;39m <==    Updates: 0
2022-07-20 12:04:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810653540683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:04:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810674562535424[0;39m 生成今日电子书快照开始
2022-07-20 12:04:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810674562535424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810674562535424[0;39m ==> Parameters: 
2022-07-20 12:04:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810674562535424[0;39m <==    Updates: 0
2022-07-20 12:04:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810674562535424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:04:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204810695508889600[0;39m 更新电子书下的文档数据开始
2022-07-20 12:04:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810695508889600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:04:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810695508889600[0;39m ==> Parameters: 
2022-07-20 12:04:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810695508889600[0;39m <==    Updates: 7
2022-07-20 12:04:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204810695508889600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-20 12:04:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810695517278208[0;39m 生成今日电子书快照开始
2022-07-20 12:04:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810695517278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810695517278208[0;39m ==> Parameters: 
2022-07-20 12:04:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810695517278208[0;39m <==    Updates: 0
2022-07-20 12:04:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810695517278208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-20 12:04:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810716488798208[0;39m 生成今日电子书快照开始
2022-07-20 12:04:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810716488798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810716488798208[0;39m ==> Parameters: 
2022-07-20 12:04:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810716488798208[0;39m <==    Updates: 0
2022-07-20 12:04:40.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810716488798208[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-20 12:04:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810737426763776[0;39m 生成今日电子书快照开始
2022-07-20 12:04:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810737426763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810737426763776[0;39m ==> Parameters: 
2022-07-20 12:04:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810737426763776[0;39m <==    Updates: 0
2022-07-20 12:04:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810737426763776[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 12:04:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810758423449600[0;39m 生成今日电子书快照开始
2022-07-20 12:04:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810758423449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810758423449600[0;39m ==> Parameters: 
2022-07-20 12:04:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810758423449600[0;39m <==    Updates: 0
2022-07-20 12:04:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810758423449600[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 12:04:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810779411746816[0;39m 生成今日电子书快照开始
2022-07-20 12:04:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810779411746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:04:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810779411746816[0;39m ==> Parameters: 
2022-07-20 12:04:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810779411746816[0;39m <==    Updates: 0
2022-07-20 12:04:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810779411746816[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-20 12:05:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810800379072512[0;39m 生成今日电子书快照开始
2022-07-20 12:05:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810800379072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:05:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810800379072512[0;39m ==> Parameters: 
2022-07-20 12:05:00.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810800379072512[0;39m <==    Updates: 0
2022-07-20 12:05:00.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810800379072512[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-20 12:05:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810821354786816[0;39m 生成今日电子书快照开始
2022-07-20 12:05:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810821354786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:05:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810821354786816[0;39m ==> Parameters: 
2022-07-20 12:05:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810821354786816[0;39m <==    Updates: 0
2022-07-20 12:05:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810821354786816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:05:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204810821363175424[0;39m 更新电子书下的文档数据开始
2022-07-20 12:05:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810821363175424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 12:05:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810821363175424[0;39m ==> Parameters: 
2022-07-20 12:05:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204810821363175424[0;39m <==    Updates: 7
2022-07-20 12:05:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204810821363175424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 12:05:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810842343084032[0;39m 生成今日电子书快照开始
2022-07-20 12:05:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810842343084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:05:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810842343084032[0;39m ==> Parameters: 
2022-07-20 12:05:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810842343084032[0;39m <==    Updates: 0
2022-07-20 12:05:10.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810842343084032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:05:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810863264272384[0;39m 生成今日电子书快照开始
2022-07-20 12:05:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810863264272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:05:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810863264272384[0;39m ==> Parameters: 
2022-07-20 12:05:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810863264272384[0;39m <==    Updates: 0
2022-07-20 12:05:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810863264272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:05:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204810884227403776[0;39m 生成今日电子书快照开始
2022-07-20 12:05:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810884227403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 12:05:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810884227403776[0;39m ==> Parameters: 
2022-07-20 12:05:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204810884227403776[0;39m <==    Updates: 0
2022-07-20 12:05:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204810884227403776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 12:05:20.960 ERROR com.zs.wikibb.websocket.WebSocketServer           :57  
                [32m204798725804134400[0;39m 发生错误
java.io.EOFException: null
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.fillReadBuffer(NioEndpoint.java:1339)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper.read(NioEndpoint.java:1226)
	at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:75)
	at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:183)
	at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:162)
	at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:157)
	at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:60)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:59)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
2022-07-20 12:05:20.963 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m204798725804134400[0;39m 连接关闭，token：iRnosjMbnD，session id：1！当前连接数：0
2022-07-20 14:41:52.880 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850280813170688[0;39m 生成今日电子书快照开始
2022-07-20 14:41:52.882 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850280813170688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:41:52.883 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850280813170688[0;39m ==> Parameters: 
2022-07-20 14:41:52.887 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850280813170688[0;39m <==    Updates: 0
2022-07-20 14:41:52.889 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850280813170688[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-20 14:41:52.890 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204850280855113728[0;39m 更新电子书下的文档数据开始
2022-07-20 14:41:52.890 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204850280855113728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 14:41:52.890 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204850280855113728[0;39m ==> Parameters: 
2022-07-20 14:41:52.892 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204850280855113728[0;39m <==    Updates: 7
2022-07-20 14:41:52.893 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204850280855113728[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-20 14:41:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850289768009728[0;39m 生成今日电子书快照开始
2022-07-20 14:41:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850289768009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:41:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850289768009728[0;39m ==> Parameters: 
2022-07-20 14:41:55.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850289768009728[0;39m <==    Updates: 0
2022-07-20 14:41:55.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850289768009728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 14:42:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850310689198080[0;39m 生成今日电子书快照开始
2022-07-20 14:42:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850310689198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:42:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850310689198080[0;39m ==> Parameters: 
2022-07-20 14:42:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850310689198080[0;39m <==    Updates: 0
2022-07-20 14:42:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850310689198080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 14:42:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204850331690078208[0;39m 更新电子书下的文档数据开始
2022-07-20 14:42:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204850331690078208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 14:42:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204850331690078208[0;39m ==> Parameters: 
2022-07-20 14:42:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204850331690078208[0;39m <==    Updates: 7
2022-07-20 14:42:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204850331690078208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 14:42:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850331694272512[0;39m 生成今日电子书快照开始
2022-07-20 14:42:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850331694272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:42:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850331694272512[0;39m ==> Parameters: 
2022-07-20 14:42:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850331694272512[0;39m <==    Updates: 0
2022-07-20 14:42:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850331694272512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 14:42:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850352628043776[0;39m 生成今日电子书快照开始
2022-07-20 14:42:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850352628043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:42:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850352628043776[0;39m ==> Parameters: 
2022-07-20 14:42:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850352628043776[0;39m <==    Updates: 0
2022-07-20 14:42:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850352628043776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 14:42:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850373637312512[0;39m 生成今日电子书快照开始
2022-07-20 14:42:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850373637312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:42:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850373637312512[0;39m ==> Parameters: 
2022-07-20 14:42:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850373637312512[0;39m <==    Updates: 0
2022-07-20 14:42:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850373637312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 14:42:19.296 WARN  com.zaxxer.hikari.pool.HikariPool                 :788 
                [32m                  [0;39m HikariPool-5 - Thread starvation or clock leap detected (housekeeper delta=2h36m57s897ms97µs100ns).
2022-07-20 14:42:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850394617221120[0;39m 生成今日电子书快照开始
2022-07-20 14:42:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850394617221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:42:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850394617221120[0;39m ==> Parameters: 
2022-07-20 14:42:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850394617221120[0;39m <==    Updates: 0
2022-07-20 14:42:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850394617221120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-20 14:42:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850415597129728[0;39m 生成今日电子书快照开始
2022-07-20 14:42:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850415597129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:42:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850415597129728[0;39m ==> Parameters: 
2022-07-20 14:42:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850415597129728[0;39m <==    Updates: 0
2022-07-20 14:42:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850415597129728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 14:42:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850436568649728[0;39m 生成今日电子书快照开始
2022-07-20 14:42:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850436568649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:42:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850436568649728[0;39m ==> Parameters: 
2022-07-20 14:42:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850436568649728[0;39m <==    Updates: 0
2022-07-20 14:42:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850436568649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 14:42:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m204850457519198208[0;39m 更新电子书下的文档数据开始
2022-07-20 14:42:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204850457519198208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-20 14:42:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204850457519198208[0;39m ==> Parameters: 
2022-07-20 14:42:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m204850457519198208[0;39m <==    Updates: 7
2022-07-20 14:42:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m204850457519198208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-20 14:42:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850457523392512[0;39m 生成今日电子书快照开始
2022-07-20 14:42:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850457523392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:42:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850457523392512[0;39m ==> Parameters: 
2022-07-20 14:42:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850457523392512[0;39m <==    Updates: 0
2022-07-20 14:42:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850457523392512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-20 14:42:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m204850478511689728[0;39m 生成今日电子书快照开始
2022-07-20 14:42:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850478511689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-20 14:42:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850478511689728[0;39m ==> Parameters: 
2022-07-20 14:42:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m204850478511689728[0;39m <==    Updates: 0
2022-07-20 14:42:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m204850478511689728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-20 14:42:43.657 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-5 - Shutdown initiated...
2022-07-20 14:42:43.660 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-5 - Shutdown completed.
