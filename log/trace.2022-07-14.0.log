2022-07-14 16:23:08.046 INFO  org.hibernate.validator.internal.util.Version     :21  
                [32m                  [0;39m HV000001: Hibernate Validator 6.2.3.Final
2022-07-14 16:23:08.057 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 51532 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-14 16:23:08.058 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-14 16:23:08.112 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2022-07-14 16:23:08.114 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2022-07-14 16:23:09.881 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-14 16:23:09.884 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-14 16:23:09.907 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2022-07-14 16:23:11.195 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-14 16:23:11.202 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-14 16:23:11.203 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-14 16:23:11.203 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-14 16:23:11.329 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-14 16:23:11.329 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 3215 ms
2022-07-14 16:23:14.197 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-14 16:23:14.219 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-14 16:23:14.250 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-14 16:23:14.329 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 7.246 seconds (JVM running for 9.914)
2022-07-14 16:23:14.386 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-14 16:23:14.386 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-14 16:23:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701463930146816[0;39m 生成今日电子书快照开始
2022-07-14 16:23:15.044 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m202701463930146816[0;39m HikariPool-1 - Starting...
2022-07-14 16:23:15.558 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m202701463930146816[0;39m HikariPool-1 - Start completed.
2022-07-14 16:23:15.564 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701463930146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:23:15.597 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701463930146816[0;39m ==> Parameters: 
2022-07-14 16:23:15.692 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701463930146816[0;39m <==    Updates: 6
2022-07-14 16:23:15.694 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701463930146816[0;39m 生成今日电子书快照结束，耗时：682 毫秒
2022-07-14 16:23:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701484889083904[0;39m 生成今日电子书快照开始
2022-07-14 16:23:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701484889083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:23:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701484889083904[0;39m ==> Parameters: 
2022-07-14 16:23:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701484889083904[0;39m <==    Updates: 0
2022-07-14 16:23:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701484889083904[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 16:23:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701505835438080[0;39m 生成今日电子书快照开始
2022-07-14 16:23:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701505835438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:23:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701505835438080[0;39m ==> Parameters: 
2022-07-14 16:23:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701505835438080[0;39m <==    Updates: 0
2022-07-14 16:23:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701505835438080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:23:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701526853095424[0;39m 生成今日电子书快照开始
2022-07-14 16:23:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701526853095424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:23:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701526853095424[0;39m ==> Parameters: 
2022-07-14 16:23:30.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701526853095424[0;39m <==    Updates: 0
2022-07-14 16:23:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701526853095424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:23:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202701547791060992[0;39m 更新电子书下的文档数据开始
2022-07-14 16:23:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701547791060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:23:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701547791060992[0;39m ==> Parameters: 
2022-07-14 16:23:35.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701547791060992[0;39m <==    Updates: 2
2022-07-14 16:23:35.022 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202701547791060992[0;39m 更新电子书下的文档数据结束，耗时：16 毫秒
2022-07-14 16:23:35.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701547862364160[0;39m 生成今日电子书快照开始
2022-07-14 16:23:35.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701547862364160[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:23:35.024 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701547862364160[0;39m ==> Parameters: 
2022-07-14 16:23:35.025 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701547862364160[0;39m <==    Updates: 0
2022-07-14 16:23:35.026 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701547862364160[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:23:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701568758386688[0;39m 生成今日电子书快照开始
2022-07-14 16:23:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701568758386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:23:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701568758386688[0;39m ==> Parameters: 
2022-07-14 16:23:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701568758386688[0;39m <==    Updates: 0
2022-07-14 16:23:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701568758386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:23:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701589721518080[0;39m 生成今日电子书快照开始
2022-07-14 16:23:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701589721518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:23:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701589721518080[0;39m ==> Parameters: 
2022-07-14 16:23:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701589721518080[0;39m <==    Updates: 0
2022-07-14 16:23:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701589721518080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:23:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701610722398208[0;39m 生成今日电子书快照开始
2022-07-14 16:23:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701610722398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:23:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701610722398208[0;39m ==> Parameters: 
2022-07-14 16:23:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701610722398208[0;39m <==    Updates: 0
2022-07-14 16:23:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701610722398208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:23:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701631660363776[0;39m 生成今日电子书快照开始
2022-07-14 16:23:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701631660363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:23:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701631660363776[0;39m ==> Parameters: 
2022-07-14 16:23:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701631660363776[0;39m <==    Updates: 0
2022-07-14 16:23:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701631660363776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:24:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701652661243904[0;39m 生成今日电子书快照开始
2022-07-14 16:24:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701652661243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701652661243904[0;39m ==> Parameters: 
2022-07-14 16:24:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701652661243904[0;39m <==    Updates: 0
2022-07-14 16:24:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701652661243904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:24:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701673603403776[0;39m 生成今日电子书快照开始
2022-07-14 16:24:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701673603403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701673603403776[0;39m ==> Parameters: 
2022-07-14 16:24:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701673603403776[0;39m <==    Updates: 0
2022-07-14 16:24:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701673603403776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:24:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202701673615986688[0;39m 更新电子书下的文档数据开始
2022-07-14 16:24:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701673615986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:24:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701673615986688[0;39m ==> Parameters: 
2022-07-14 16:24:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701673615986688[0;39m <==    Updates: 2
2022-07-14 16:24:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202701673615986688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:24:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701694587506688[0;39m 生成今日电子书快照开始
2022-07-14 16:24:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701694587506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701694587506688[0;39m ==> Parameters: 
2022-07-14 16:24:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701694587506688[0;39m <==    Updates: 0
2022-07-14 16:24:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701694587506688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:24:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701715546443776[0;39m 生成今日电子书快照开始
2022-07-14 16:24:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701715546443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701715546443776[0;39m ==> Parameters: 
2022-07-14 16:24:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701715546443776[0;39m <==    Updates: 0
2022-07-14 16:24:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701715546443776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:24:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701736551518208[0;39m 生成今日电子书快照开始
2022-07-14 16:24:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701736551518208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701736551518208[0;39m ==> Parameters: 
2022-07-14 16:24:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701736551518208[0;39m <==    Updates: 0
2022-07-14 16:24:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701736551518208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:24:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701757502066688[0;39m 生成今日电子书快照开始
2022-07-14 16:24:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701757502066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701757502066688[0;39m ==> Parameters: 
2022-07-14 16:24:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701757502066688[0;39m <==    Updates: 0
2022-07-14 16:24:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701757502066688[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 16:24:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701778498752512[0;39m 生成今日电子书快照开始
2022-07-14 16:24:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701778498752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701778498752512[0;39m ==> Parameters: 
2022-07-14 16:24:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701778498752512[0;39m <==    Updates: 0
2022-07-14 16:24:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701778498752512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:24:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701799440912384[0;39m 生成今日电子书快照开始
2022-07-14 16:24:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701799440912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701799440912384[0;39m ==> Parameters: 
2022-07-14 16:24:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701799440912384[0;39m <==    Updates: 0
2022-07-14 16:24:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701799440912384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:24:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202701799457689600[0;39m 更新电子书下的文档数据开始
2022-07-14 16:24:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701799457689600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:24:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701799457689600[0;39m ==> Parameters: 
2022-07-14 16:24:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701799457689600[0;39m <==    Updates: 2
2022-07-14 16:24:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202701799457689600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:24:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701820450181120[0;39m 生成今日电子书快照开始
2022-07-14 16:24:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701820450181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701820450181120[0;39m ==> Parameters: 
2022-07-14 16:24:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701820450181120[0;39m <==    Updates: 0
2022-07-14 16:24:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701820450181120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:24:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701841400729600[0;39m 生成今日电子书快照开始
2022-07-14 16:24:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701841400729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701841400729600[0;39m ==> Parameters: 
2022-07-14 16:24:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701841400729600[0;39m <==    Updates: 0
2022-07-14 16:24:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701841400729600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:24:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701862347083776[0;39m 生成今日电子书快照开始
2022-07-14 16:24:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701862347083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701862347083776[0;39m ==> Parameters: 
2022-07-14 16:24:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701862347083776[0;39m <==    Updates: 0
2022-07-14 16:24:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701862347083776[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-14 16:24:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701883335380992[0;39m 生成今日电子书快照开始
2022-07-14 16:24:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701883335380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:24:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701883335380992[0;39m ==> Parameters: 
2022-07-14 16:24:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701883335380992[0;39m <==    Updates: 0
2022-07-14 16:24:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701883335380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:25:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701904344649728[0;39m 生成今日电子书快照开始
2022-07-14 16:25:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701904344649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701904344649728[0;39m ==> Parameters: 
2022-07-14 16:25:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701904344649728[0;39m <==    Updates: 0
2022-07-14 16:25:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701904344649728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701925307781120[0;39m 生成今日电子书快照开始
2022-07-14 16:25:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701925307781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701925307781120[0;39m ==> Parameters: 
2022-07-14 16:25:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701925307781120[0;39m <==    Updates: 0
2022-07-14 16:25:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701925307781120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202701925324558336[0;39m 更新电子书下的文档数据开始
2022-07-14 16:25:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701925324558336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:25:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701925324558336[0;39m ==> Parameters: 
2022-07-14 16:25:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202701925324558336[0;39m <==    Updates: 2
2022-07-14 16:25:05.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202701925324558336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:25:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701946258329600[0;39m 生成今日电子书快照开始
2022-07-14 16:25:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701946258329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701946258329600[0;39m ==> Parameters: 
2022-07-14 16:25:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701946258329600[0;39m <==    Updates: 0
2022-07-14 16:25:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701946258329600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701967217266688[0;39m 生成今日电子书快照开始
2022-07-14 16:25:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701967217266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701967217266688[0;39m ==> Parameters: 
2022-07-14 16:25:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701967217266688[0;39m <==    Updates: 0
2022-07-14 16:25:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701967217266688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202701988201369600[0;39m 生成今日电子书快照开始
2022-07-14 16:25:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701988201369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701988201369600[0;39m ==> Parameters: 
2022-07-14 16:25:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202701988201369600[0;39m <==    Updates: 0
2022-07-14 16:25:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202701988201369600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:25:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702009181278208[0;39m 生成今日电子书快照开始
2022-07-14 16:25:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702009181278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702009181278208[0;39m ==> Parameters: 
2022-07-14 16:25:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702009181278208[0;39m <==    Updates: 0
2022-07-14 16:25:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702009181278208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702030152798208[0;39m 生成今日电子书快照开始
2022-07-14 16:25:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702030152798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702030152798208[0;39m ==> Parameters: 
2022-07-14 16:25:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702030152798208[0;39m <==    Updates: 0
2022-07-14 16:25:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702030152798208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702051145289728[0;39m 生成今日电子书快照开始
2022-07-14 16:25:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702051145289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702051145289728[0;39m ==> Parameters: 
2022-07-14 16:25:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702051145289728[0;39m <==    Updates: 0
2022-07-14 16:25:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702051145289728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202702051157872640[0;39m 更新电子书下的文档数据开始
2022-07-14 16:25:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702051157872640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:25:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702051157872640[0;39m ==> Parameters: 
2022-07-14 16:25:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702051157872640[0;39m <==    Updates: 2
2022-07-14 16:25:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202702051157872640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:25:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702072108421120[0;39m 生成今日电子书快照开始
2022-07-14 16:25:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702072108421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702072108421120[0;39m ==> Parameters: 
2022-07-14 16:25:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702072108421120[0;39m <==    Updates: 0
2022-07-14 16:25:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702072108421120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702093042192384[0;39m 生成今日电子书快照开始
2022-07-14 16:25:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702093042192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702093042192384[0;39m ==> Parameters: 
2022-07-14 16:25:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702093042192384[0;39m <==    Updates: 0
2022-07-14 16:25:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702093042192384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702114034683904[0;39m 生成今日电子书快照开始
2022-07-14 16:25:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702114034683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702114034683904[0;39m ==> Parameters: 
2022-07-14 16:25:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702114034683904[0;39m <==    Updates: 0
2022-07-14 16:25:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702114034683904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:25:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702135027175424[0;39m 生成今日电子书快照开始
2022-07-14 16:25:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702135027175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:25:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702135027175424[0;39m ==> Parameters: 
2022-07-14 16:25:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702135027175424[0;39m <==    Updates: 0
2022-07-14 16:25:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702135027175424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:26:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702155986112512[0;39m 生成今日电子书快照开始
2022-07-14 16:26:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702155986112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702155986112512[0;39m ==> Parameters: 
2022-07-14 16:26:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702155986112512[0;39m <==    Updates: 0
2022-07-14 16:26:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702155986112512[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 16:26:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202702176924078080[0;39m 更新电子书下的文档数据开始
2022-07-14 16:26:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702176924078080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:26:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702176924078080[0;39m ==> Parameters: 
2022-07-14 16:26:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702176924078080[0;39m <==    Updates: 2
2022-07-14 16:26:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202702176924078080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:26:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702176932466688[0;39m 生成今日电子书快照开始
2022-07-14 16:26:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702176932466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702176932466688[0;39m ==> Parameters: 
2022-07-14 16:26:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702176932466688[0;39m <==    Updates: 0
2022-07-14 16:26:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702176932466688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:26:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702197929152512[0;39m 生成今日电子书快照开始
2022-07-14 16:26:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702197929152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702197929152512[0;39m ==> Parameters: 
2022-07-14 16:26:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702197929152512[0;39m <==    Updates: 0
2022-07-14 16:26:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702197929152512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:26:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702218900672512[0;39m 生成今日电子书快照开始
2022-07-14 16:26:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702218900672512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702218900672512[0;39m ==> Parameters: 
2022-07-14 16:26:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702218900672512[0;39m <==    Updates: 0
2022-07-14 16:26:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702218900672512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:26:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702239838638080[0;39m 生成今日电子书快照开始
2022-07-14 16:26:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702239838638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702239838638080[0;39m ==> Parameters: 
2022-07-14 16:26:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702239838638080[0;39m <==    Updates: 0
2022-07-14 16:26:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702239838638080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:26:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702260843712512[0;39m 生成今日电子书快照开始
2022-07-14 16:26:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702260843712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702260843712512[0;39m ==> Parameters: 
2022-07-14 16:26:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702260843712512[0;39m <==    Updates: 0
2022-07-14 16:26:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702260843712512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:26:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702281773289472[0;39m 生成今日电子书快照开始
2022-07-14 16:26:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702281773289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702281773289472[0;39m ==> Parameters: 
2022-07-14 16:26:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702281773289472[0;39m <==    Updates: 0
2022-07-14 16:26:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702281773289472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:26:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702302799335424[0;39m 生成今日电子书快照开始
2022-07-14 16:26:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702302799335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702302799335424[0;39m ==> Parameters: 
2022-07-14 16:26:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702302799335424[0;39m <==    Updates: 0
2022-07-14 16:26:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702302799335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:26:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202702302811918336[0;39m 更新电子书下的文档数据开始
2022-07-14 16:26:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702302811918336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:26:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702302811918336[0;39m ==> Parameters: 
2022-07-14 16:26:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702302811918336[0;39m <==    Updates: 2
2022-07-14 16:26:35.018 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202702302811918336[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:26:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702323775049728[0;39m 生成今日电子书快照开始
2022-07-14 16:26:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702323775049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702323775049728[0;39m ==> Parameters: 
2022-07-14 16:26:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702323775049728[0;39m <==    Updates: 0
2022-07-14 16:26:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702323775049728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:26:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702344692043776[0;39m 生成今日电子书快照开始
2022-07-14 16:26:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702344692043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702344692043776[0;39m ==> Parameters: 
2022-07-14 16:26:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702344692043776[0;39m <==    Updates: 0
2022-07-14 16:26:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702344692043776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:26:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702365692923904[0;39m 生成今日电子书快照开始
2022-07-14 16:26:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702365692923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702365692923904[0;39m ==> Parameters: 
2022-07-14 16:26:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702365692923904[0;39m <==    Updates: 0
2022-07-14 16:26:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702365692923904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:26:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702386647666688[0;39m 生成今日电子书快照开始
2022-07-14 16:26:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702386647666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:26:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702386647666688[0;39m ==> Parameters: 
2022-07-14 16:26:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702386647666688[0;39m <==    Updates: 0
2022-07-14 16:26:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702386647666688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:27:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702407602409472[0;39m 生成今日电子书快照开始
2022-07-14 16:27:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702407602409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702407602409472[0;39m ==> Parameters: 
2022-07-14 16:27:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702407602409472[0;39m <==    Updates: 0
2022-07-14 16:27:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702407602409472[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:27:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202702428611678208[0;39m 更新电子书下的文档数据开始
2022-07-14 16:27:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702428611678208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:27:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702428611678208[0;39m ==> Parameters: 
2022-07-14 16:27:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702428611678208[0;39m <==    Updates: 2
2022-07-14 16:27:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202702428611678208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:27:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702428620066816[0;39m 生成今日电子书快照开始
2022-07-14 16:27:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702428620066816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702428620066816[0;39m ==> Parameters: 
2022-07-14 16:27:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702428620066816[0;39m <==    Updates: 0
2022-07-14 16:27:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702428620066816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:27:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702449583198208[0;39m 生成今日电子书快照开始
2022-07-14 16:27:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702449583198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702449583198208[0;39m ==> Parameters: 
2022-07-14 16:27:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702449583198208[0;39m <==    Updates: 0
2022-07-14 16:27:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702449583198208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:27:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702470537940992[0;39m 生成今日电子书快照开始
2022-07-14 16:27:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702470537940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702470537940992[0;39m ==> Parameters: 
2022-07-14 16:27:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702470537940992[0;39m <==    Updates: 0
2022-07-14 16:27:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702470537940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:27:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702491551404032[0;39m 生成今日电子书快照开始
2022-07-14 16:27:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702491551404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702491551404032[0;39m ==> Parameters: 
2022-07-14 16:27:20.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702491551404032[0;39m <==    Updates: 0
2022-07-14 16:27:20.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702491551404032[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 16:27:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702512522924032[0;39m 生成今日电子书快照开始
2022-07-14 16:27:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702512522924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:25.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702512522924032[0;39m ==> Parameters: 
2022-07-14 16:27:25.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702512522924032[0;39m <==    Updates: 0
2022-07-14 16:27:25.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702512522924032[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:27:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702533481861120[0;39m 生成今日电子书快照开始
2022-07-14 16:27:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702533481861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702533481861120[0;39m ==> Parameters: 
2022-07-14 16:27:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702533481861120[0;39m <==    Updates: 0
2022-07-14 16:27:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702533481861120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:27:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202702554411438080[0;39m 更新电子书下的文档数据开始
2022-07-14 16:27:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702554411438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:27:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702554411438080[0;39m ==> Parameters: 
2022-07-14 16:27:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702554411438080[0;39m <==    Updates: 2
2022-07-14 16:27:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202702554411438080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:27:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702554419826688[0;39m 生成今日电子书快照开始
2022-07-14 16:27:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702554419826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702554419826688[0;39m ==> Parameters: 
2022-07-14 16:27:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702554419826688[0;39m <==    Updates: 0
2022-07-14 16:27:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702554419826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:27:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702575416512512[0;39m 生成今日电子书快照开始
2022-07-14 16:27:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702575416512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702575416512512[0;39m ==> Parameters: 
2022-07-14 16:27:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702575416512512[0;39m <==    Updates: 0
2022-07-14 16:27:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702575416512512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:27:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702596358672384[0;39m 生成今日电子书快照开始
2022-07-14 16:27:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702596358672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702596358672384[0;39m ==> Parameters: 
2022-07-14 16:27:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702596358672384[0;39m <==    Updates: 0
2022-07-14 16:27:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702596358672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:27:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702617317609472[0;39m 生成今日电子书快照开始
2022-07-14 16:27:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702617317609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702617317609472[0;39m ==> Parameters: 
2022-07-14 16:27:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702617317609472[0;39m <==    Updates: 0
2022-07-14 16:27:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702617317609472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:27:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702638310100992[0;39m 生成今日电子书快照开始
2022-07-14 16:27:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702638310100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:27:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702638310100992[0;39m ==> Parameters: 
2022-07-14 16:27:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702638310100992[0;39m <==    Updates: 0
2022-07-14 16:27:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702638310100992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:28:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702659302592512[0;39m 生成今日电子书快照开始
2022-07-14 16:28:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702659302592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702659302592512[0;39m ==> Parameters: 
2022-07-14 16:28:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702659302592512[0;39m <==    Updates: 0
2022-07-14 16:28:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702659302592512[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:28:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702680257335296[0;39m 生成今日电子书快照开始
2022-07-14 16:28:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702680257335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702680257335296[0;39m ==> Parameters: 
2022-07-14 16:28:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702680257335296[0;39m <==    Updates: 0
2022-07-14 16:28:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702680257335296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:28:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202702680269918208[0;39m 更新电子书下的文档数据开始
2022-07-14 16:28:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702680269918208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:28:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702680269918208[0;39m ==> Parameters: 
2022-07-14 16:28:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702680269918208[0;39m <==    Updates: 2
2022-07-14 16:28:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202702680269918208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:28:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702701203689472[0;39m 生成今日电子书快照开始
2022-07-14 16:28:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702701203689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702701203689472[0;39m ==> Parameters: 
2022-07-14 16:28:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702701203689472[0;39m <==    Updates: 0
2022-07-14 16:28:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702701203689472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:28:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702722238124032[0;39m 生成今日电子书快照开始
2022-07-14 16:28:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702722238124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702722238124032[0;39m ==> Parameters: 
2022-07-14 16:28:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702722238124032[0;39m <==    Updates: 0
2022-07-14 16:28:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702722238124032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:28:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702743159312384[0;39m 生成今日电子书快照开始
2022-07-14 16:28:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702743159312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702743159312384[0;39m ==> Parameters: 
2022-07-14 16:28:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702743159312384[0;39m <==    Updates: 0
2022-07-14 16:28:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702743159312384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:28:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702764172775424[0;39m 生成今日电子书快照开始
2022-07-14 16:28:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702764172775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702764172775424[0;39m ==> Parameters: 
2022-07-14 16:28:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702764172775424[0;39m <==    Updates: 0
2022-07-14 16:28:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702764172775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:28:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702785135906816[0;39m 生成今日电子书快照开始
2022-07-14 16:28:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702785135906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702785135906816[0;39m ==> Parameters: 
2022-07-14 16:28:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702785135906816[0;39m <==    Updates: 0
2022-07-14 16:28:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702785135906816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:28:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702806090649600[0;39m 生成今日电子书快照开始
2022-07-14 16:28:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702806090649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702806090649600[0;39m ==> Parameters: 
2022-07-14 16:28:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702806090649600[0;39m <==    Updates: 0
2022-07-14 16:28:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702806090649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:28:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202702806103232512[0;39m 更新电子书下的文档数据开始
2022-07-14 16:28:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702806103232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:28:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702806103232512[0;39m ==> Parameters: 
2022-07-14 16:28:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702806103232512[0;39m <==    Updates: 2
2022-07-14 16:28:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202702806103232512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:28:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702827032809472[0;39m 生成今日电子书快照开始
2022-07-14 16:28:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702827032809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702827032809472[0;39m ==> Parameters: 
2022-07-14 16:28:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702827032809472[0;39m <==    Updates: 0
2022-07-14 16:28:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702827032809472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:28:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702848025300992[0;39m 生成今日电子书快照开始
2022-07-14 16:28:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702848025300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702848025300992[0;39m ==> Parameters: 
2022-07-14 16:28:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702848025300992[0;39m <==    Updates: 0
2022-07-14 16:28:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702848025300992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:28:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702869021986816[0;39m 生成今日电子书快照开始
2022-07-14 16:28:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702869021986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702869021986816[0;39m ==> Parameters: 
2022-07-14 16:28:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702869021986816[0;39m <==    Updates: 0
2022-07-14 16:28:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702869021986816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:28:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702889959952384[0;39m 生成今日电子书快照开始
2022-07-14 16:28:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702889959952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:28:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702889959952384[0;39m ==> Parameters: 
2022-07-14 16:28:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702889959952384[0;39m <==    Updates: 0
2022-07-14 16:28:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702889959952384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:29:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702910965026816[0;39m 生成今日电子书快照开始
2022-07-14 16:29:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702910965026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702910965026816[0;39m ==> Parameters: 
2022-07-14 16:29:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702910965026816[0;39m <==    Updates: 0
2022-07-14 16:29:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702910965026816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:29:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702931923963904[0;39m 生成今日电子书快照开始
2022-07-14 16:29:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702931923963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702931923963904[0;39m ==> Parameters: 
2022-07-14 16:29:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702931923963904[0;39m <==    Updates: 0
2022-07-14 16:29:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702931923963904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:29:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202702931940741120[0;39m 更新电子书下的文档数据开始
2022-07-14 16:29:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702931940741120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:29:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702931940741120[0;39m ==> Parameters: 
2022-07-14 16:29:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202702931940741120[0;39m <==    Updates: 2
2022-07-14 16:29:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202702931940741120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:29:05.323 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-07-14 16:29:05.323 INFO  org.springframework.web.servlet.DispatcherServlet :525 
                [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2022-07-14 16:29:05.325 INFO  org.springframework.web.servlet.DispatcherServlet :547 
                [32m                  [0;39m Completed initialization in 2 ms
2022-07-14 16:29:05.498 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702933970784258[0;39m ------------- 开始 -------------
2022-07-14 16:29:05.498 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702933970784256[0;39m ------------- 开始 -------------
2022-07-14 16:29:05.498 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702933970784257[0;39m ------------- 开始 -------------
2022-07-14 16:29:05.499 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702933970784258[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:29:05.499 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702933970784257[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:29:05.499 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702933970784256[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:29:05.499 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702933970784258[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:29:05.499 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702933970784257[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:29:05.499 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702933970784256[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:29:05.499 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702933970784258[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:05.499 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702933970784257[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:05.499 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702933970784256[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:05.504 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：ZRr4MxRdMA，session id：0，当前连接数：1
2022-07-14 16:29:05.542 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702933970784257[0;39m 请求参数: []
2022-07-14 16:29:05.542 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702933970784256[0;39m 请求参数: []
2022-07-14 16:29:05.542 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702933970784258[0;39m 请求参数: []
2022-07-14 16:29:05.547 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202702933970784258[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:29:05.547 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202702933970784256[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:29:05.548 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202702933970784256[0;39m ==> Parameters: 
2022-07-14 16:29:05.547 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202702933970784258[0;39m ==> Parameters: 
2022-07-14 16:29:05.567 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202702933970784257[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:29:05.567 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202702933970784257[0;39m ==> Parameters: 
2022-07-14 16:29:05.569 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202702933970784258[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:29:05.569 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202702933970784256[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:29:05.570 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202702933970784258[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:29:05.570 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:29:05.570 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202702933970784256[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:29:05.571 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:29:05.572 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:29:05.572 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:29:05.573 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202702933970784256[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:29:05.573 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:29:05.573 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202702933970784258[0;39m <==        Row: 2022-07-14, 2743, 114, 0, 0
2022-07-14 16:29:05.573 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202702933970784256[0;39m <==      Total: 2
2022-07-14 16:29:05.573 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:29:05.574 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202702933970784258[0;39m <==      Total: 2
2022-07-14 16:29:05.574 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:29:05.574 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:29:05.575 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:29:05.575 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:29:05.576 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:29:05.577 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:29:05.577 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:29:05.578 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:29:05.578 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:29:05.579 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:29:05.579 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202702933970784257[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:29:05.581 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202702933970784257[0;39m <==      Total: 16
2022-07-14 16:29:05.609 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702933970784257[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:29:05.609 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702933970784257[0;39m ------------- 结束 耗时：112 ms -------------
2022-07-14 16:29:05.610 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702933970784258[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0}],"success":true}
2022-07-14 16:29:05.610 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702933970784256[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:29:05.611 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702933970784258[0;39m ------------- 结束 耗时：114 ms -------------
2022-07-14 16:29:05.611 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702933970784256[0;39m ------------- 结束 耗时：114 ms -------------
2022-07-14 16:29:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702952899678208[0;39m 生成今日电子书快照开始
2022-07-14 16:29:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702952899678208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702952899678208[0;39m ==> Parameters: 
2022-07-14 16:29:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702952899678208[0;39m <==    Updates: 0
2022-07-14 16:29:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702952899678208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:29:11.549 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702959354712064[0;39m ------------- 开始 -------------
2022-07-14 16:29:11.549 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702959354712064[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:11.549 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702959354712064[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:11.549 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702959354712064[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:11.551 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702959354712064[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2022-07-14 16:29:11.749 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702959354712064[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:11.749 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702959354712064[0;39m ==> Parameters: 101(Long)
2022-07-14 16:29:11.750 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702959354712064[0;39m <==    Columns: count(0)
2022-07-14 16:29:11.750 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702959354712064[0;39m <==        Row: 1
2022-07-14 16:29:11.751 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702959354712064[0;39m <==      Total: 1
2022-07-14 16:29:11.752 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202702959354712064[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:29:11.753 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202702959354712064[0;39m ==> Parameters: 101(Long), 1000(Integer)
2022-07-14 16:29:11.753 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202702959354712064[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:29:11.754 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202702959354712064[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 23, 43, 55
2022-07-14 16:29:11.754 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202702959354712064[0;39m <==      Total: 1
2022-07-14 16:29:11.756 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202702959354712064[0;39m 总行数：1
2022-07-14 16:29:11.756 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202702959354712064[0;39m 总页数：1
2022-07-14 16:29:11.764 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702959354712064[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":23,"id":6,"name":"Vue CLI 入门教程","viewCount":43,"voteCount":55}],"total":1},"success":true}
2022-07-14 16:29:11.765 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702959354712064[0;39m ------------- 结束 耗时：216 ms -------------
2022-07-14 16:29:12.102 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702961674162176[0;39m ------------- 开始 -------------
2022-07-14 16:29:12.103 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702961674162176[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:12.103 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702961674162176[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:12.103 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702961674162176[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:12.103 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702961674162176[0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2022-07-14 16:29:12.106 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702961674162176[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:12.107 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702961674162176[0;39m ==> Parameters: 102(Long)
2022-07-14 16:29:12.107 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702961674162176[0;39m <==    Columns: count(0)
2022-07-14 16:29:12.108 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702961674162176[0;39m <==        Row: 0
2022-07-14 16:29:12.108 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702961674162176[0;39m <==      Total: 1
2022-07-14 16:29:12.108 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202702961674162176[0;39m 总行数：0
2022-07-14 16:29:12.108 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202702961674162176[0;39m 总页数：0
2022-07-14 16:29:12.109 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702961674162176[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:29:12.109 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702961674162176[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:29:13.138 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702966019461120[0;39m ------------- 开始 -------------
2022-07-14 16:29:13.138 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702966019461120[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:13.138 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702966019461120[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:13.138 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702966019461120[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:13.139 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702966019461120[0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2022-07-14 16:29:13.141 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702966019461120[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:13.141 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702966019461120[0;39m ==> Parameters: 102(Long)
2022-07-14 16:29:13.142 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702966019461120[0;39m <==    Columns: count(0)
2022-07-14 16:29:13.142 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702966019461120[0;39m <==        Row: 0
2022-07-14 16:29:13.142 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702966019461120[0;39m <==      Total: 1
2022-07-14 16:29:13.142 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202702966019461120[0;39m 总行数：0
2022-07-14 16:29:13.142 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202702966019461120[0;39m 总页数：0
2022-07-14 16:29:13.143 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702966019461120[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:29:13.143 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702966019461120[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:29:14.922 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702973502099456[0;39m ------------- 开始 -------------
2022-07-14 16:29:14.922 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702973502099456[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:14.922 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702973502099456[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:14.923 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702973502099456[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:14.923 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702973502099456[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2022-07-14 16:29:14.925 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702973502099456[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:14.925 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702973502099456[0;39m ==> Parameters: 201(Long)
2022-07-14 16:29:14.926 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702973502099456[0;39m <==    Columns: count(0)
2022-07-14 16:29:14.926 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702973502099456[0;39m <==        Row: 1
2022-07-14 16:29:14.927 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702973502099456[0;39m <==      Total: 1
2022-07-14 16:29:14.927 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202702973502099456[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:29:14.927 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202702973502099456[0;39m ==> Parameters: 201(Long), 1000(Integer)
2022-07-14 16:29:14.928 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202702973502099456[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:29:14.928 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202702973502099456[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 56, 10
2022-07-14 16:29:14.928 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202702973502099456[0;39m <==      Total: 1
2022-07-14 16:29:14.929 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202702973502099456[0;39m 总行数：1
2022-07-14 16:29:14.929 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202702973502099456[0;39m 总页数：1
2022-07-14 16:29:14.929 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702973502099456[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":56,"voteCount":10}],"total":1},"success":true}
2022-07-14 16:29:14.929 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702973502099456[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:29:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702973887975424[0;39m 生成今日电子书快照开始
2022-07-14 16:29:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702973887975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702973887975424[0;39m ==> Parameters: 
2022-07-14 16:29:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702973887975424[0;39m <==    Updates: 0
2022-07-14 16:29:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702973887975424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:29:16.060 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702978275217408[0;39m ------------- 开始 -------------
2022-07-14 16:29:16.060 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702978275217408[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:16.060 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702978275217408[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:16.060 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702978275217408[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:16.060 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702978275217408[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2022-07-14 16:29:16.063 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702978275217408[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:16.064 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702978275217408[0;39m ==> Parameters: 202(Long)
2022-07-14 16:29:16.064 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702978275217408[0;39m <==    Columns: count(0)
2022-07-14 16:29:16.064 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702978275217408[0;39m <==        Row: 0
2022-07-14 16:29:16.065 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702978275217408[0;39m <==      Total: 1
2022-07-14 16:29:16.065 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202702978275217408[0;39m 总行数：0
2022-07-14 16:29:16.065 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202702978275217408[0;39m 总页数：0
2022-07-14 16:29:16.065 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702978275217408[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:29:16.065 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702978275217408[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:29:16.887 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702981743906816[0;39m ------------- 开始 -------------
2022-07-14 16:29:16.887 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702981743906816[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:16.887 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702981743906816[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:16.887 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702981743906816[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:16.889 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702981743906816[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-14 16:29:16.890 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702981743906816[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:16.890 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702981743906816[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-14 16:29:16.891 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702981743906816[0;39m <==    Columns: count(0)
2022-07-14 16:29:16.891 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702981743906816[0;39m <==        Row: 0
2022-07-14 16:29:16.891 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702981743906816[0;39m <==      Total: 1
2022-07-14 16:29:16.892 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202702981743906816[0;39m 总行数：0
2022-07-14 16:29:16.892 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202702981743906816[0;39m 总页数：0
2022-07-14 16:29:16.892 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702981743906816[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:29:16.892 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702981743906816[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:29:18.553 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702988731617280[0;39m ------------- 开始 -------------
2022-07-14 16:29:18.553 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702988731617280[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:18.553 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702988731617280[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:18.553 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702988731617280[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:18.554 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702988731617280[0;39m 请求参数: [{"categoryId2":301,"page":1,"size":1000}]
2022-07-14 16:29:18.560 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702988731617280[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:18.561 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702988731617280[0;39m ==> Parameters: 301(Long)
2022-07-14 16:29:18.561 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702988731617280[0;39m <==    Columns: count(0)
2022-07-14 16:29:18.561 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702988731617280[0;39m <==        Row: 1
2022-07-14 16:29:18.562 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702988731617280[0;39m <==      Total: 1
2022-07-14 16:29:18.562 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202702988731617280[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:29:18.562 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202702988731617280[0;39m ==> Parameters: 301(Long), 1000(Integer)
2022-07-14 16:29:18.563 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202702988731617280[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:29:18.563 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202702988731617280[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 55, 234, 34
2022-07-14 16:29:18.563 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202702988731617280[0;39m <==      Total: 1
2022-07-14 16:29:18.564 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202702988731617280[0;39m 总行数：1
2022-07-14 16:29:18.564 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202702988731617280[0;39m 总页数：1
2022-07-14 16:29:18.564 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702988731617280[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":55,"id":3,"name":"Python 入门教程","viewCount":234,"voteCount":34}],"total":1},"success":true}
2022-07-14 16:29:18.564 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702988731617280[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 16:29:19.482 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202702992628125696[0;39m ------------- 开始 -------------
2022-07-14 16:29:19.483 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202702992628125696[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:19.483 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202702992628125696[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:19.483 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202702992628125696[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:19.483 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202702992628125696[0;39m 请求参数: [{"categoryId2":302,"page":1,"size":1000}]
2022-07-14 16:29:19.485 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702992628125696[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:19.486 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702992628125696[0;39m ==> Parameters: 302(Long)
2022-07-14 16:29:19.486 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702992628125696[0;39m <==    Columns: count(0)
2022-07-14 16:29:19.487 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202702992628125696[0;39m <==        Row: 0
2022-07-14 16:29:19.487 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202702992628125696[0;39m <==      Total: 1
2022-07-14 16:29:19.487 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202702992628125696[0;39m 总行数：0
2022-07-14 16:29:19.488 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202702992628125696[0;39m 总页数：0
2022-07-14 16:29:19.488 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202702992628125696[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:29:19.488 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202702992628125696[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:29:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202702994825940992[0;39m 生成今日电子书快照开始
2022-07-14 16:29:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702994825940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702994825940992[0;39m ==> Parameters: 
2022-07-14 16:29:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202702994825940992[0;39m <==    Updates: 0
2022-07-14 16:29:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202702994825940992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:29:21.455 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703000903487488[0;39m ------------- 开始 -------------
2022-07-14 16:29:21.455 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703000903487488[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:21.455 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703000903487488[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:21.456 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703000903487488[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:21.456 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703000903487488[0;39m 请求参数: [{"categoryId2":401,"page":1,"size":1000}]
2022-07-14 16:29:21.457 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703000903487488[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:21.458 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703000903487488[0;39m ==> Parameters: 401(Long)
2022-07-14 16:29:21.462 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703000903487488[0;39m <==    Columns: count(0)
2022-07-14 16:29:21.462 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703000903487488[0;39m <==        Row: 2
2022-07-14 16:29:21.462 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703000903487488[0;39m <==      Total: 1
2022-07-14 16:29:21.463 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703000903487488[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:29:21.463 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703000903487488[0;39m ==> Parameters: 401(Long), 1000(Integer)
2022-07-14 16:29:21.464 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703000903487488[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:29:21.465 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703000903487488[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 88, 2342, 2
2022-07-14 16:29:21.465 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703000903487488[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 12, 32, 4
2022-07-14 16:29:21.465 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703000903487488[0;39m <==      Total: 2
2022-07-14 16:29:21.466 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703000903487488[0;39m 总行数：2
2022-07-14 16:29:21.466 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703000903487488[0;39m 总页数：1
2022-07-14 16:29:21.467 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703000903487488[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":88,"id":4,"name":"Mysql 入门教程","viewCount":2342,"voteCount":2},{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":12,"id":5,"name":"Oracle入门教程","viewCount":32,"voteCount":4}],"total":2},"success":true}
2022-07-14 16:29:21.467 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703000903487488[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-14 16:29:23.390 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703009019465728[0;39m ------------- 开始 -------------
2022-07-14 16:29:23.391 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703009019465728[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:23.391 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703009019465728[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:23.391 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703009019465728[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:23.391 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703009019465728[0;39m 请求参数: [{"categoryId2":501,"page":1,"size":1000}]
2022-07-14 16:29:23.393 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703009019465728[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:23.394 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703009019465728[0;39m ==> Parameters: 501(Long)
2022-07-14 16:29:23.395 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703009019465728[0;39m <==    Columns: count(0)
2022-07-14 16:29:23.395 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703009019465728[0;39m <==        Row: 0
2022-07-14 16:29:23.396 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703009019465728[0;39m <==      Total: 1
2022-07-14 16:29:23.396 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703009019465728[0;39m 总行数：0
2022-07-14 16:29:23.396 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703009019465728[0;39m 总页数：0
2022-07-14 16:29:23.396 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703009019465728[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:29:23.396 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703009019465728[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:29:24.510 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703013717086208[0;39m ------------- 开始 -------------
2022-07-14 16:29:24.510 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703013717086208[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:24.510 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703013717086208[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:24.511 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703013717086208[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:24.511 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703013717086208[0;39m 请求参数: [{"categoryId2":502,"page":1,"size":1000}]
2022-07-14 16:29:24.512 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703013717086208[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:24.513 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703013717086208[0;39m ==> Parameters: 502(Long)
2022-07-14 16:29:24.513 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703013717086208[0;39m <==    Columns: count(0)
2022-07-14 16:29:24.513 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703013717086208[0;39m <==        Row: 0
2022-07-14 16:29:24.514 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703013717086208[0;39m <==      Total: 1
2022-07-14 16:29:24.514 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703013717086208[0;39m 总行数：0
2022-07-14 16:29:24.514 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703013717086208[0;39m 总页数：0
2022-07-14 16:29:24.514 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703013717086208[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:29:24.515 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703013717086208[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:29:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703015814238208[0;39m 生成今日电子书快照开始
2022-07-14 16:29:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703015814238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703015814238208[0;39m ==> Parameters: 
2022-07-14 16:29:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703015814238208[0;39m <==    Updates: 0
2022-07-14 16:29:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703015814238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:29:25.072 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703016074285056[0;39m ------------- 开始 -------------
2022-07-14 16:29:25.072 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703016074285056[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:25.072 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703016074285056[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:25.072 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703016074285056[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:25.073 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703016074285056[0;39m 请求参数: [{"categoryId2":503,"page":1,"size":1000}]
2022-07-14 16:29:25.075 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703016074285056[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:25.075 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703016074285056[0;39m ==> Parameters: 503(Long)
2022-07-14 16:29:25.076 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703016074285056[0;39m <==    Columns: count(0)
2022-07-14 16:29:25.076 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703016074285056[0;39m <==        Row: 1
2022-07-14 16:29:25.076 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703016074285056[0;39m <==      Total: 1
2022-07-14 16:29:25.077 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703016074285056[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:29:25.077 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703016074285056[0;39m ==> Parameters: 503(Long), 1000(Integer)
2022-07-14 16:29:25.078 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703016074285056[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:29:25.078 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703016074285056[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 36, 9
2022-07-14 16:29:25.078 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703016074285056[0;39m <==      Total: 1
2022-07-14 16:29:25.078 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703016074285056[0;39m 总行数：1
2022-07-14 16:29:25.079 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703016074285056[0;39m 总页数：1
2022-07-14 16:29:25.079 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703016074285056[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":36,"voteCount":9}],"total":1},"success":true}
2022-07-14 16:29:25.079 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703016074285056[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:29:28.406 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703030058094592[0;39m ------------- 开始 -------------
2022-07-14 16:29:28.407 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703030058094592[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:28.407 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703030058094592[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:28.407 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703030058094592[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:28.408 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703030058094592[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2022-07-14 16:29:28.409 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703030058094592[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:28.409 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703030058094592[0;39m ==> Parameters: 201(Long)
2022-07-14 16:29:28.410 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703030058094592[0;39m <==    Columns: count(0)
2022-07-14 16:29:28.410 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703030058094592[0;39m <==        Row: 1
2022-07-14 16:29:28.411 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703030058094592[0;39m <==      Total: 1
2022-07-14 16:29:28.411 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703030058094592[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:29:28.411 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703030058094592[0;39m ==> Parameters: 201(Long), 1000(Integer)
2022-07-14 16:29:28.412 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703030058094592[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:29:28.412 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703030058094592[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 56, 10
2022-07-14 16:29:28.412 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703030058094592[0;39m <==      Total: 1
2022-07-14 16:29:28.413 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703030058094592[0;39m 总行数：1
2022-07-14 16:29:28.413 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703030058094592[0;39m 总页数：1
2022-07-14 16:29:28.413 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703030058094592[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":56,"voteCount":10}],"total":1},"success":true}
2022-07-14 16:29:28.413 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703030058094592[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:29:29.234 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703033530978304[0;39m ------------- 开始 -------------
2022-07-14 16:29:29.234 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703033530978304[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:29.234 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703033530978304[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:29.235 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703033530978304[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:29.235 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703033530978304[0;39m 请求参数: [{"categoryId2":202,"page":1,"size":1000}]
2022-07-14 16:29:29.236 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703033530978304[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:29.237 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703033530978304[0;39m ==> Parameters: 202(Long)
2022-07-14 16:29:29.237 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703033530978304[0;39m <==    Columns: count(0)
2022-07-14 16:29:29.238 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703033530978304[0;39m <==        Row: 0
2022-07-14 16:29:29.238 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703033530978304[0;39m <==      Total: 1
2022-07-14 16:29:29.238 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703033530978304[0;39m 总行数：0
2022-07-14 16:29:29.238 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703033530978304[0;39m 总页数：0
2022-07-14 16:29:29.238 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703033530978304[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:29:29.238 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703033530978304[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:29:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703036756398080[0;39m 生成今日电子书快照开始
2022-07-14 16:29:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703036756398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703036756398080[0;39m ==> Parameters: 
2022-07-14 16:29:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703036756398080[0;39m <==    Updates: 0
2022-07-14 16:29:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703036756398080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:29:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703057778249728[0;39m 生成今日电子书快照开始
2022-07-14 16:29:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703057778249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703057778249728[0;39m ==> Parameters: 
2022-07-14 16:29:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703057778249728[0;39m <==    Updates: 0
2022-07-14 16:29:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703057778249728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:29:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202703057786638336[0;39m 更新电子书下的文档数据开始
2022-07-14 16:29:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703057786638336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:29:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703057786638336[0;39m ==> Parameters: 
2022-07-14 16:29:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703057786638336[0;39m <==    Updates: 2
2022-07-14 16:29:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202703057786638336[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:29:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703078691049472[0;39m 生成今日电子书快照开始
2022-07-14 16:29:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703078691049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703078691049472[0;39m ==> Parameters: 
2022-07-14 16:29:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703078691049472[0;39m <==    Updates: 0
2022-07-14 16:29:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703078691049472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:29:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703099708706816[0;39m 生成今日电子书快照开始
2022-07-14 16:29:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703099708706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703099708706816[0;39m ==> Parameters: 
2022-07-14 16:29:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703099708706816[0;39m <==    Updates: 0
2022-07-14 16:29:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703099708706816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:29:49.141 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703117026988032[0;39m ------------- 开始 -------------
2022-07-14 16:29:49.142 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703117026988032[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:29:49.142 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703117026988032[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:29:49.142 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703117026988032[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:49.142 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703117026988032[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2022-07-14 16:29:49.144 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703117026988032[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:29:49.145 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703117026988032[0;39m ==> Parameters: 101(Long)
2022-07-14 16:29:49.145 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703117026988032[0;39m <==    Columns: count(0)
2022-07-14 16:29:49.146 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703117026988032[0;39m <==        Row: 1
2022-07-14 16:29:49.146 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703117026988032[0;39m <==      Total: 1
2022-07-14 16:29:49.147 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703117026988032[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:29:49.147 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703117026988032[0;39m ==> Parameters: 101(Long), 1000(Integer)
2022-07-14 16:29:49.148 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703117026988032[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:29:49.148 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703117026988032[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 23, 43, 55
2022-07-14 16:29:49.148 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703117026988032[0;39m <==      Total: 1
2022-07-14 16:29:49.148 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703117026988032[0;39m 总行数：1
2022-07-14 16:29:49.149 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703117026988032[0;39m 总页数：1
2022-07-14 16:29:49.149 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703117026988032[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":23,"id":6,"name":"Vue CLI 入门教程","viewCount":43,"voteCount":55}],"total":1},"success":true}
2022-07-14 16:29:49.149 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703117026988032[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:29:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703120692809728[0;39m 生成今日电子书快照开始
2022-07-14 16:29:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703120692809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703120692809728[0;39m ==> Parameters: 
2022-07-14 16:29:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703120692809728[0;39m <==    Updates: 0
2022-07-14 16:29:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703120692809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:29:50.467 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703122588635136[0;39m ------------- 开始 -------------
2022-07-14 16:29:50.468 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703122588635136[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2022-07-14 16:29:50.468 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703122588635136[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:29:50.468 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703122588635136[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:50.468 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703122588635136[0;39m 请求参数: [6]
2022-07-14 16:29:50.475 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703122588635136[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:29:50.475 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703122588635136[0;39m ==> Parameters: 6(Long)
2022-07-14 16:29:50.476 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703122588635136[0;39m <==      Total: 0
2022-07-14 16:29:50.477 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703122588635136[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:29:50.477 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703122588635136[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:29:51.183 ERROR c.zs.wikibb.controller.ControllerExceptionHandler :60  
                [32m202702988731617280[0;39m 系统异常：
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; nested exception is java.lang.NumberFormatException: For input string: "undefined"
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:133)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.NumberFormatException: For input string: "undefined"
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Long.parseLong(Long.java:589)
	at java.lang.Long.valueOf(Long.java:803)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:214)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:429)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:402)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:155)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:53)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:700)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:125)
	... 47 common frames omitted
2022-07-14 16:29:51.185 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m202702988731617280[0;39m Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; nested exception is java.lang.NumberFormatException: For input string: "undefined"]
2022-07-14 16:29:53.572 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202702992628125696[0;39m 连接关闭，token：ZRr4MxRdMA，session id：0！当前连接数：0
2022-07-14 16:29:54.099 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703000903487488[0;39m 有新连接：token：t2zC3Zn5jA，session id：1，当前连接数：1
2022-07-14 16:29:54.127 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703137939787776[0;39m ------------- 开始 -------------
2022-07-14 16:29:54.127 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703137939787776[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2022-07-14 16:29:54.127 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703137939787776[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:29:54.127 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703137939787776[0;39m 远程地址: 127.0.0.1
2022-07-14 16:29:54.127 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703137939787776[0;39m 请求参数: [6]
2022-07-14 16:29:54.128 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703137939787776[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:29:54.128 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703137939787776[0;39m ==> Parameters: 6(Long)
2022-07-14 16:29:54.129 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703137939787776[0;39m <==      Total: 0
2022-07-14 16:29:54.130 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703137939787776[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:29:54.130 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703137939787776[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:29:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703141605609472[0;39m 生成今日电子书快照开始
2022-07-14 16:29:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703141605609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:29:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703141605609472[0;39m ==> Parameters: 
2022-07-14 16:29:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703141605609472[0;39m <==    Updates: 0
2022-07-14 16:29:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703141605609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:30:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703162640044032[0;39m 生成今日电子书快照开始
2022-07-14 16:30:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703162640044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703162640044032[0;39m ==> Parameters: 
2022-07-14 16:30:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703162640044032[0;39m <==    Updates: 0
2022-07-14 16:30:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703162640044032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:30:03.008 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703175189401600[0;39m ------------- 开始 -------------
2022-07-14 16:30:03.008 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703175189401600[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:30:03.008 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703175189401602[0;39m ------------- 开始 -------------
2022-07-14 16:30:03.008 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703175189401601[0;39m ------------- 开始 -------------
2022-07-14 16:30:03.008 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703175189401600[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:30:03.008 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703175189401602[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:30:03.008 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703175189401601[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:30:03.009 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703175189401600[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:03.009 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703175189401601[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:30:03.009 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703175189401602[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:30:03.009 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703175189401601[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:03.009 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703175189401600[0;39m 请求参数: []
2022-07-14 16:30:03.009 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703175189401602[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:03.009 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703175189401601[0;39m 请求参数: []
2022-07-14 16:30:03.009 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703175189401602[0;39m 请求参数: []
2022-07-14 16:30:03.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703175189401600[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:30:03.010 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703175189401602[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:30:03.010 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703175189401601[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:30:03.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703175189401600[0;39m ==> Parameters: 
2022-07-14 16:30:03.010 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703175189401601[0;39m ==> Parameters: 
2022-07-14 16:30:03.010 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703175189401602[0;39m ==> Parameters: 
2022-07-14 16:30:03.011 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:30:03.011 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703175189401602[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:30:03.011 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703175189401600[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:30:03.011 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:30:03.012 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703175189401600[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:30:03.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:30:03.012 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703175189401602[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:30:03.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:30:03.012 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703175189401600[0;39m <==        Row: 2022-07-14, 2743, 114, 0, 0
2022-07-14 16:30:03.012 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703175189401602[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:30:03.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:30:03.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703175189401600[0;39m <==      Total: 2
2022-07-14 16:30:03.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:30:03.012 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703175189401602[0;39m <==      Total: 2
2022-07-14 16:30:03.013 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703175189401600[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0}],"success":true}
2022-07-14 16:30:03.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:30:03.013 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703175189401600[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:30:03.013 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703175189401602[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:30:03.013 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703175189401602[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:30:03.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:30:03.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:30:03.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:30:03.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:30:03.015 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:30:03.015 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:30:03.015 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:30:03.016 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:30:03.016 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:30:03.016 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703175189401601[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:30:03.017 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703175189401601[0;39m <==      Total: 16
2022-07-14 16:30:03.018 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703175189401601[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:30:03.018 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703175189401601[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:30:04.796 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703182688817152[0;39m ------------- 开始 -------------
2022-07-14 16:30:04.796 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703182688817152[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:30:04.796 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703182688817152[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:30:04.796 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703182688817152[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:04.796 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703182688817152[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2022-07-14 16:30:04.799 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703182688817152[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:30:04.799 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703182688817152[0;39m ==> Parameters: 101(Long)
2022-07-14 16:30:04.800 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703182688817152[0;39m <==    Columns: count(0)
2022-07-14 16:30:04.800 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703182688817152[0;39m <==        Row: 1
2022-07-14 16:30:04.800 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703182688817152[0;39m <==      Total: 1
2022-07-14 16:30:04.801 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703182688817152[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:30:04.801 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703182688817152[0;39m ==> Parameters: 101(Long), 1000(Integer)
2022-07-14 16:30:04.802 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703182688817152[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:30:04.802 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703182688817152[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 23, 43, 55
2022-07-14 16:30:04.802 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703182688817152[0;39m <==      Total: 1
2022-07-14 16:30:04.802 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703182688817152[0;39m 总行数：1
2022-07-14 16:30:04.802 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703182688817152[0;39m 总页数：1
2022-07-14 16:30:04.803 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703182688817152[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":23,"id":6,"name":"Vue CLI 入门教程","viewCount":43,"voteCount":55}],"total":1},"success":true}
2022-07-14 16:30:04.803 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703182688817152[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:30:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703183590592512[0;39m 生成今日电子书快照开始
2022-07-14 16:30:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703183590592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703183590592512[0;39m ==> Parameters: 
2022-07-14 16:30:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703183590592512[0;39m <==    Updates: 0
2022-07-14 16:30:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703183590592512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:30:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202703183607369728[0;39m 更新电子书下的文档数据开始
2022-07-14 16:30:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703183607369728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:30:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703183607369728[0;39m ==> Parameters: 
2022-07-14 16:30:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703183607369728[0;39m <==    Updates: 2
2022-07-14 16:30:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202703183607369728[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:30:05.846 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703187092836352[0;39m ------------- 开始 -------------
2022-07-14 16:30:05.846 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703187092836352[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:30:05.846 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703187092836352[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:30:05.847 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703187092836352[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:05.847 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703187092836352[0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2022-07-14 16:30:05.848 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703187092836352[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:30:05.849 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703187092836352[0;39m ==> Parameters: 102(Long)
2022-07-14 16:30:05.849 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703187092836352[0;39m <==    Columns: count(0)
2022-07-14 16:30:05.850 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703187092836352[0;39m <==        Row: 0
2022-07-14 16:30:05.850 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703187092836352[0;39m <==      Total: 1
2022-07-14 16:30:05.850 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703187092836352[0;39m 总行数：0
2022-07-14 16:30:05.850 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703187092836352[0;39m 总页数：0
2022-07-14 16:30:05.850 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703187092836352[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:30:05.851 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703187092836352[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:30:06.744 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703190859321344[0;39m ------------- 开始 -------------
2022-07-14 16:30:06.745 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703190859321344[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:30:06.745 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703190859321344[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:30:06.745 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703190859321344[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:06.745 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703190859321344[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2022-07-14 16:30:06.748 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703190859321344[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:30:06.749 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703190859321344[0;39m ==> Parameters: 101(Long)
2022-07-14 16:30:06.749 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703190859321344[0;39m <==    Columns: count(0)
2022-07-14 16:30:06.750 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703190859321344[0;39m <==        Row: 1
2022-07-14 16:30:06.750 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703190859321344[0;39m <==      Total: 1
2022-07-14 16:30:06.750 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703190859321344[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:30:06.750 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703190859321344[0;39m ==> Parameters: 101(Long), 1000(Integer)
2022-07-14 16:30:06.751 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703190859321344[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:30:06.751 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703190859321344[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 23, 43, 55
2022-07-14 16:30:06.752 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703190859321344[0;39m <==      Total: 1
2022-07-14 16:30:06.752 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703190859321344[0;39m 总行数：1
2022-07-14 16:30:06.752 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703190859321344[0;39m 总页数：1
2022-07-14 16:30:06.752 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703190859321344[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":23,"id":6,"name":"Vue CLI 入门教程","viewCount":43,"voteCount":55}],"total":1},"success":true}
2022-07-14 16:30:06.752 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703190859321344[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:30:07.629 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703194571280384[0;39m ------------- 开始 -------------
2022-07-14 16:30:07.629 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703194571280384[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:30:07.630 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703194571280384[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:30:07.630 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703194571280384[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:07.630 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703194571280384[0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2022-07-14 16:30:07.631 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703194571280384[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:30:07.632 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703194571280384[0;39m ==> Parameters: 102(Long)
2022-07-14 16:30:07.632 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703194571280384[0;39m <==    Columns: count(0)
2022-07-14 16:30:07.633 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703194571280384[0;39m <==        Row: 0
2022-07-14 16:30:07.633 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703194571280384[0;39m <==      Total: 1
2022-07-14 16:30:07.633 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703194571280384[0;39m 总行数：0
2022-07-14 16:30:07.633 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703194571280384[0;39m 总页数：0
2022-07-14 16:30:07.633 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703194571280384[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:30:07.633 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703194571280384[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:30:08.781 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703199403118592[0;39m ------------- 开始 -------------
2022-07-14 16:30:08.781 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703199403118592[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:30:08.781 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703199403118592[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:30:08.781 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703199403118592[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:08.781 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703199403118592[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2022-07-14 16:30:08.783 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703199403118592[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:30:08.783 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703199403118592[0;39m ==> Parameters: 101(Long)
2022-07-14 16:30:08.784 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703199403118592[0;39m <==    Columns: count(0)
2022-07-14 16:30:08.784 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703199403118592[0;39m <==        Row: 1
2022-07-14 16:30:08.784 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703199403118592[0;39m <==      Total: 1
2022-07-14 16:30:08.784 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703199403118592[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:30:08.785 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703199403118592[0;39m ==> Parameters: 101(Long), 1000(Integer)
2022-07-14 16:30:08.785 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703199403118592[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:30:08.785 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703199403118592[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 23, 43, 55
2022-07-14 16:30:08.786 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703199403118592[0;39m <==      Total: 1
2022-07-14 16:30:08.786 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703199403118592[0;39m 总行数：1
2022-07-14 16:30:08.786 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703199403118592[0;39m 总页数：1
2022-07-14 16:30:08.786 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703199403118592[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":23,"id":6,"name":"Vue CLI 入门教程","viewCount":43,"voteCount":55}],"total":1},"success":true}
2022-07-14 16:30:08.786 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703199403118592[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:30:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703204553723904[0;39m 生成今日电子书快照开始
2022-07-14 16:30:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703204553723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703204553723904[0;39m ==> Parameters: 
2022-07-14 16:30:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703204553723904[0;39m <==    Updates: 0
2022-07-14 16:30:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703204553723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:30:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703225533632512[0;39m 生成今日电子书快照开始
2022-07-14 16:30:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703225533632512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703225533632512[0;39m ==> Parameters: 
2022-07-14 16:30:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703225533632512[0;39m <==    Updates: 0
2022-07-14 16:30:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703225533632512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:30:17.806 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703237256712192[0;39m ------------- 开始 -------------
2022-07-14 16:30:17.807 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703237256712192[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/login POST
2022-07-14 16:30:17.807 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703237256712192[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.login
2022-07-14 16:30:17.807 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703237256712192[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:17.813 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703237256712192[0;39m 请求参数: [{"loginName":"test"}]
2022-07-14 16:30:17.819 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202703237256712192[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki WHERE ( login_name = ? )
2022-07-14 16:30:17.819 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202703237256712192[0;39m ==> Parameters: test(String)
2022-07-14 16:30:17.824 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202703237256712192[0;39m <==    Columns: id, login_name, name, password
2022-07-14 16:30:17.824 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202703237256712192[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 16:30:17.825 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202703237256712192[0;39m <==      Total: 1
2022-07-14 16:30:17.830 INFO  com.zs.wikibb.controller.UserwikiController       :83  
                [32m202703237256712192[0;39m 生成单点登录token，并放入redis中
2022-07-14 16:30:19.073 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703237256712192[0;39m 返回结果: {"content":{"id":1,"loginName":"test","name":"测试","token":"202703237357375488"},"success":true}
2022-07-14 16:30:19.073 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703237256712192[0;39m ------------- 结束 耗时：1267 ms -------------
2022-07-14 16:30:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703246471598080[0;39m 生成今日电子书快照开始
2022-07-14 16:30:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703246471598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703246471598080[0;39m ==> Parameters: 
2022-07-14 16:30:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703246471598080[0;39m <==    Updates: 0
2022-07-14 16:30:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703246471598080[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-14 16:30:20.334 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703247859912704[0;39m ------------- 开始 -------------
2022-07-14 16:30:20.334 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703247859912704[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:30:20.334 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703247859912704[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:30:20.334 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703247859912704[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:20.334 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703247859912704[0;39m 请求参数: []
2022-07-14 16:30:20.334 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703247859912704[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:30:20.334 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703247859912704[0;39m ==> Parameters: 
2022-07-14 16:30:20.345 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:30:20.345 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:30:20.346 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:30:20.346 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:30:20.346 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:30:20.347 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:30:20.347 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:30:20.347 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:30:20.347 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:30:20.347 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:30:20.348 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:30:20.348 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:30:20.348 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:30:20.348 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:30:20.349 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:30:20.349 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:30:20.349 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703247859912704[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:30:20.349 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703247859912704[0;39m <==      Total: 16
2022-07-14 16:30:20.351 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703247859912704[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:30:20.351 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703247859912704[0;39m ------------- 结束 耗时：17 ms -------------
2022-07-14 16:30:20.364 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703247985741824[0;39m ------------- 开始 -------------
2022-07-14 16:30:20.364 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703247985741824[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:30:20.364 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703247985741824[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:30:20.364 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703247985741824[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:20.364 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703247985741824[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 16:30:20.365 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703247985741824[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:30:20.365 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703247985741824[0;39m ==> Parameters: 
2022-07-14 16:30:20.366 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703247985741824[0;39m <==    Columns: count(0)
2022-07-14 16:30:20.367 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703247985741824[0;39m <==        Row: 6
2022-07-14 16:30:20.367 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703247985741824[0;39m <==      Total: 1
2022-07-14 16:30:20.367 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703247985741824[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 16:30:20.368 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703247985741824[0;39m ==> Parameters: 4(Integer)
2022-07-14 16:30:20.368 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703247985741824[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:30:20.368 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703247985741824[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 56, 10
2022-07-14 16:30:20.369 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703247985741824[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 36, 9
2022-07-14 16:30:20.369 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703247985741824[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 55, 234, 34
2022-07-14 16:30:20.369 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703247985741824[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 88, 2342, 2
2022-07-14 16:30:20.369 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703247985741824[0;39m <==      Total: 4
2022-07-14 16:30:20.370 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703247985741824[0;39m 总行数：6
2022-07-14 16:30:20.370 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703247985741824[0;39m 总页数：2
2022-07-14 16:30:20.370 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703247985741824[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":56,"voteCount":10},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":36,"voteCount":9},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":55,"id":3,"name":"Python 入门教程","viewCount":234,"voteCount":34},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":88,"id":4,"name":"Mysql 入门教程","viewCount":2342,"voteCount":2}],"total":6},"success":true}
2022-07-14 16:30:20.371 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703247985741824[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:30:23.433 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703260858060800[0;39m ------------- 开始 -------------
2022-07-14 16:30:23.433 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703260858060800[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:30:23.433 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703260858060800[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:30:23.433 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703260858060800[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:23.433 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703260858060800[0;39m 请求参数: [{"page":2,"size":4}]
2022-07-14 16:30:23.434 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703260858060800[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:30:23.435 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703260858060800[0;39m ==> Parameters: 
2022-07-14 16:30:23.435 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703260858060800[0;39m <==    Columns: count(0)
2022-07-14 16:30:23.436 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703260858060800[0;39m <==        Row: 6
2022-07-14 16:30:23.436 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703260858060800[0;39m <==      Total: 1
2022-07-14 16:30:23.437 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703260858060800[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2022-07-14 16:30:23.437 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703260858060800[0;39m ==> Parameters: 4(Long), 4(Integer)
2022-07-14 16:30:23.438 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703260858060800[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:30:23.439 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703260858060800[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 12, 32, 4
2022-07-14 16:30:23.440 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703260858060800[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 23, 43, 55
2022-07-14 16:30:23.441 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703260858060800[0;39m <==      Total: 2
2022-07-14 16:30:23.441 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703260858060800[0;39m 总行数：6
2022-07-14 16:30:23.442 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703260858060800[0;39m 总页数：2
2022-07-14 16:30:23.444 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703260858060800[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":12,"id":5,"name":"Oracle入门教程","viewCount":32,"voteCount":4},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":23,"id":6,"name":"Vue CLI 入门教程","viewCount":43,"voteCount":55}],"total":6},"success":true}
2022-07-14 16:30:23.444 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703260858060800[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 16:30:24.670 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703266046414848[0;39m ------------- 开始 -------------
2022-07-14 16:30:24.670 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703266046414848[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2022-07-14 16:30:24.670 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703266046414848[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:30:24.670 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703266046414848[0;39m 远程地址: 127.0.0.1
2022-07-14 16:30:24.670 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703266046414848[0;39m 请求参数: [6]
2022-07-14 16:30:24.671 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703266046414848[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:30:24.672 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703266046414848[0;39m ==> Parameters: 6(Long)
2022-07-14 16:30:24.673 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703266046414848[0;39m <==      Total: 0
2022-07-14 16:30:24.673 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703266046414848[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:30:24.673 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703266046414848[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:30:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703267434729472[0;39m 生成今日电子书快照开始
2022-07-14 16:30:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703267434729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703267434729472[0;39m ==> Parameters: 
2022-07-14 16:30:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703267434729472[0;39m <==    Updates: 0
2022-07-14 16:30:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703267434729472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:30:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703288443998208[0;39m 生成今日电子书快照开始
2022-07-14 16:30:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703288443998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703288443998208[0;39m ==> Parameters: 
2022-07-14 16:30:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703288443998208[0;39m <==    Updates: 0
2022-07-14 16:30:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703288443998208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:30:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703309386158080[0;39m 生成今日电子书快照开始
2022-07-14 16:30:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703309386158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703309386158080[0;39m ==> Parameters: 
2022-07-14 16:30:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703309386158080[0;39m <==    Updates: 0
2022-07-14 16:30:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703309386158080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:30:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202703309394546688[0;39m 更新电子书下的文档数据开始
2022-07-14 16:30:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703309394546688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:30:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703309394546688[0;39m ==> Parameters: 
2022-07-14 16:30:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703309394546688[0;39m <==    Updates: 2
2022-07-14 16:30:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202703309394546688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:30:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703330403815424[0;39m 生成今日电子书快照开始
2022-07-14 16:30:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703330403815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703330403815424[0;39m ==> Parameters: 
2022-07-14 16:30:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703330403815424[0;39m <==    Updates: 0
2022-07-14 16:30:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703330403815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:30:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703351354363904[0;39m 生成今日电子书快照开始
2022-07-14 16:30:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703351354363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703351354363904[0;39m ==> Parameters: 
2022-07-14 16:30:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703351354363904[0;39m <==    Updates: 0
2022-07-14 16:30:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703351354363904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:30:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703372346855424[0;39m 生成今日电子书快照开始
2022-07-14 16:30:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703372346855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703372346855424[0;39m ==> Parameters: 
2022-07-14 16:30:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703372346855424[0;39m <==    Updates: 0
2022-07-14 16:30:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703372346855424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:30:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703393280626688[0;39m 生成今日电子书快照开始
2022-07-14 16:30:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703393280626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:30:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703393280626688[0;39m ==> Parameters: 
2022-07-14 16:30:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703393280626688[0;39m <==    Updates: 0
2022-07-14 16:30:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703393280626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:31:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703414243758080[0;39m 生成今日电子书快照开始
2022-07-14 16:31:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703414243758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703414243758080[0;39m ==> Parameters: 
2022-07-14 16:31:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703414243758080[0;39m <==    Updates: 0
2022-07-14 16:31:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703414243758080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:31:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703435248832512[0;39m 生成今日电子书快照开始
2022-07-14 16:31:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703435248832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703435248832512[0;39m ==> Parameters: 
2022-07-14 16:31:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703435248832512[0;39m <==    Updates: 0
2022-07-14 16:31:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703435248832512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:31:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202703435261415424[0;39m 更新电子书下的文档数据开始
2022-07-14 16:31:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703435261415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:31:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703435261415424[0;39m ==> Parameters: 
2022-07-14 16:31:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703435261415424[0;39m <==    Updates: 2
2022-07-14 16:31:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202703435261415424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:31:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703456186798080[0;39m 生成今日电子书快照开始
2022-07-14 16:31:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703456186798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703456186798080[0;39m ==> Parameters: 
2022-07-14 16:31:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703456186798080[0;39m <==    Updates: 0
2022-07-14 16:31:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703456186798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:31:10.921 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202703175189401602[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 16:31:10.922 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202703175189401602[0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2022-07-14 16:31:10.923 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202703247859912704[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 16:31:10.923 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202703247859912704[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 16:31:10.923 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202703247859912704[0;39m 登录校验开始，token：202703237357375488
2022-07-14 16:31:10.966 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202703247859912704[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202703237357375488"}
2022-07-14 16:31:11.086 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703460729229312[0;39m ------------- 开始 -------------
2022-07-14 16:31:11.087 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703460729229312[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 16:31:11.087 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703460729229312[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 16:31:11.087 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703460729229312[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:11.088 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703460729229312[0;39m 请求参数: [{"content":"<blockquote><h1 id=\"8byqb\"><font face=\"仿宋\" size=\"6\">Vue3全家桶</font></h1></blockquote>","ebookId":6,"name":"Vue3","parent":0,"sort":1}]
2022-07-14 16:31:11.106 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202703460729229312[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 16:31:11.106 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202703460729229312[0;39m ==> Parameters: 202703460804726784(Long), 6(Long), 0(Long), Vue3(String), 1(Integer), 0(Integer), 0(Integer)
2022-07-14 16:31:11.108 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202703460729229312[0;39m <==    Updates: 1
2022-07-14 16:31:11.109 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202703460729229312[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 16:31:11.109 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202703460729229312[0;39m ==> Parameters: 202703460804726784(Long), <blockquote><h1 id="8byqb"><font face="仿宋" size="6">Vue3全家桶</font></h1></blockquote>(String)
2022-07-14 16:31:11.119 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202703460729229312[0;39m <==    Updates: 1
2022-07-14 16:31:11.155 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703460729229312[0;39m 返回结果: {"success":true}
2022-07-14 16:31:11.155 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703460729229312[0;39m ------------- 结束 耗时：69 ms -------------
2022-07-14 16:31:11.156 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202703460729229312[0;39m ------------- LoginInterceptor 结束 耗时：233 ms -------------
2022-07-14 16:31:11.166 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703461064773632[0;39m ------------- 开始 -------------
2022-07-14 16:31:11.167 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703461064773632[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2022-07-14 16:31:11.167 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703461064773632[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:31:11.167 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703461064773632[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:11.168 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703461064773632[0;39m 请求参数: [6]
2022-07-14 16:31:11.170 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703461064773632[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:31:11.171 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703461064773632[0;39m ==> Parameters: 6(Long)
2022-07-14 16:31:11.171 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703461064773632[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:31:11.172 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703461064773632[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 0, 0
2022-07-14 16:31:11.172 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703461064773632[0;39m <==      Total: 1
2022-07-14 16:31:11.177 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703461064773632[0;39m 返回结果: {"content":[{"ebookId":6,"id":202703460804726784,"name":"Vue3","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 16:31:11.178 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703461064773632[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-14 16:31:12.665 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703467352035328[0;39m ------------- 开始 -------------
2022-07-14 16:31:12.665 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703467352035328[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703467352035328[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703467356229632[0;39m ------------- 开始 -------------
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703467356229633[0;39m ------------- 开始 -------------
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703467352035328[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703467356229632[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703467356229633[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703467356229632[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703467352035328[0;39m 请求参数: []
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703467356229632[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703467356229633[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703467356229632[0;39m 请求参数: []
2022-07-14 16:31:12.666 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703467356229633[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:12.667 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703467356229633[0;39m 请求参数: []
2022-07-14 16:31:12.667 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703467356229632[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:31:12.667 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703467352035328[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:31:12.667 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703467356229632[0;39m ==> Parameters: 
2022-07-14 16:31:12.667 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703467356229633[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:31:12.667 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703467352035328[0;39m ==> Parameters: 
2022-07-14 16:31:12.668 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703467356229633[0;39m ==> Parameters: 
2022-07-14 16:31:12.668 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703467356229632[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:31:12.668 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:31:12.669 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:31:12.669 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703467356229632[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:31:12.669 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703467356229633[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:31:12.669 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:31:12.669 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703467356229633[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:31:12.669 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703467356229632[0;39m <==        Row: 2022-07-14, 2743, 114, 0, 0
2022-07-14 16:31:12.669 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:31:12.670 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703467356229633[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:31:12.670 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:31:12.670 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703467356229632[0;39m <==      Total: 2
2022-07-14 16:31:12.670 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703467356229633[0;39m <==      Total: 2
2022-07-14 16:31:12.670 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:31:12.671 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703467356229632[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0}],"success":true}
2022-07-14 16:31:12.671 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703467356229633[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:31:12.671 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:31:12.671 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703467356229632[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:31:12.671 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703467356229633[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:31:12.671 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:31:12.671 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:31:12.672 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:31:12.672 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:31:12.672 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:31:12.672 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:31:12.673 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:31:12.673 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:31:12.673 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:31:12.674 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703467352035328[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:31:12.674 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703467352035328[0;39m <==      Total: 16
2022-07-14 16:31:12.675 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703467352035328[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:31:12.675 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703467352035328[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:31:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703477200261120[0;39m 生成今日电子书快照开始
2022-07-14 16:31:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703477200261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703477200261120[0;39m ==> Parameters: 
2022-07-14 16:31:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703477200261120[0;39m <==    Updates: 0
2022-07-14 16:31:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703477200261120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:31:15.617 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703479733620736[0;39m ------------- 开始 -------------
2022-07-14 16:31:15.617 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703479733620736[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:31:15.618 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703479733620736[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:31:15.618 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703479733620736[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:15.618 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703479733620736[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2022-07-14 16:31:15.619 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703479733620736[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:31:15.620 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703479733620736[0;39m ==> Parameters: 101(Long)
2022-07-14 16:31:15.621 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703479733620736[0;39m <==    Columns: count(0)
2022-07-14 16:31:15.621 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703479733620736[0;39m <==        Row: 1
2022-07-14 16:31:15.621 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703479733620736[0;39m <==      Total: 1
2022-07-14 16:31:15.622 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703479733620736[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:31:15.622 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703479733620736[0;39m ==> Parameters: 101(Long), 1000(Integer)
2022-07-14 16:31:15.623 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703479733620736[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:31:15.623 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703479733620736[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 23, 43, 55
2022-07-14 16:31:15.623 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703479733620736[0;39m <==      Total: 1
2022-07-14 16:31:15.623 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703479733620736[0;39m 总行数：1
2022-07-14 16:31:15.623 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703479733620736[0;39m 总页数：1
2022-07-14 16:31:15.624 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703479733620736[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":23,"id":6,"name":"Vue CLI 入门教程","viewCount":43,"voteCount":55}],"total":1},"success":true}
2022-07-14 16:31:15.624 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703479733620736[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:31:16.163 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703482023710720[0;39m ------------- 开始 -------------
2022-07-14 16:31:16.163 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703482023710720[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2022-07-14 16:31:16.164 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703482023710720[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:31:16.164 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703482023710720[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:16.164 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703482023710720[0;39m 请求参数: [6]
2022-07-14 16:31:16.164 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703482023710720[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:31:16.165 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703482023710720[0;39m ==> Parameters: 6(Long)
2022-07-14 16:31:16.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703482023710720[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:31:16.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703482023710720[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 0, 0
2022-07-14 16:31:16.167 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703482023710720[0;39m <==      Total: 1
2022-07-14 16:31:16.168 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703482023710720[0;39m 返回结果: {"content":[{"ebookId":6,"id":202703460804726784,"name":"Vue3","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 16:31:16.168 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703482023710720[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:31:16.177 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703482082430976[0;39m ------------- 开始 -------------
2022-07-14 16:31:16.177 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703482082430976[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202703460804726784 GET
2022-07-14 16:31:16.177 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703482082430976[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:31:16.177 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703482082430976[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:16.177 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703482082430976[0;39m 请求参数: [202703460804726784]
2022-07-14 16:31:16.178 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703482082430976[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:31:16.178 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703482082430976[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:31:16.180 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703482082430976[0;39m <==    Columns: id, content
2022-07-14 16:31:16.181 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703482082430976[0;39m <==        Row: 202703460804726784, <<BLOB>>
2022-07-14 16:31:16.181 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703482082430976[0;39m <==      Total: 1
2022-07-14 16:31:16.182 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703482082430976[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:31:16.183 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703482082430976[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:31:16.228 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703482082430976[0;39m <==    Updates: 1
2022-07-14 16:31:16.228 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703482082430976[0;39m 返回结果: {"content":"<blockquote><h1 id=\"8byqb\"><font face=\"仿宋\" size=\"6\">Vue3全家桶</font></h1></blockquote>","success":true}
2022-07-14 16:31:16.229 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703482082430976[0;39m ------------- 结束 耗时：52 ms -------------
2022-07-14 16:31:17.745 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703488659099648[0;39m ------------- 开始 -------------
2022-07-14 16:31:17.745 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703488659099648[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202703460804726784 GET
2022-07-14 16:31:17.745 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703488659099648[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 16:31:17.745 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703488659099648[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:17.745 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703488659099648[0;39m 请求参数: [202703460804726784]
2022-07-14 16:31:17.785 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202703488659099648[0;39m key不存在，放入：DOC_VOTE_202703460804726784_127.0.0.1，过期 86400 秒
2022-07-14 16:31:17.820 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202703488659099648[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 16:31:17.821 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202703488659099648[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:31:17.835 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202703488659099648[0;39m <==    Updates: 1
2022-07-14 16:31:17.837 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202703488659099648[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 16:31:17.839 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202703488659099648[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:31:17.841 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202703488659099648[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:31:17.842 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202703488659099648[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 1, 1
2022-07-14 16:31:17.844 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202703488659099648[0;39m <==      Total: 1
2022-07-14 16:31:17.850 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703488659099648[0;39m 返回结果: {"success":true}
2022-07-14 16:31:17.851 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703488659099648[0;39m ------------- 结束 耗时：106 ms -------------
2022-07-14 16:31:17.910 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202703488659099648[0;39m 推送消息：t2zC3Zn5jA，内容：【Vue3】被点赞
2022-07-14 16:31:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703498129838080[0;39m 生成今日电子书快照开始
2022-07-14 16:31:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703498129838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703498129838080[0;39m ==> Parameters: 
2022-07-14 16:31:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703498129838080[0;39m <==    Updates: 0
2022-07-14 16:31:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703498129838080[0;39m 生成今日电子书快照结束，耗时：11 毫秒
2022-07-14 16:31:20.046 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703498305998848[0;39m ------------- 开始 -------------
2022-07-14 16:31:20.046 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703498305998848[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202703460804726784 GET
2022-07-14 16:31:20.046 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703498305998848[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 16:31:20.046 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703498305998848[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:20.046 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703498305998848[0;39m 请求参数: [202703460804726784]
2022-07-14 16:31:20.080 INFO  com.zs.wikibb.utils.RedisUtil                     :28  
                [32m202703498305998848[0;39m key已存在：DOC_VOTE_202703460804726784_127.0.0.1
2022-07-14 16:31:20.082 WARN  c.zs.wikibb.controller.ControllerExceptionHandler :45  
                [32m202703498305998848[0;39m 业务异常：您已点赞过
2022-07-14 16:31:20.083 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m202703498305998848[0;39m Resolved [com.zs.wikibb.exception.BusinessException: 您已点赞过]
2022-07-14 16:31:22.485 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703467356229632[0;39m 连接关闭，token：t2zC3Zn5jA，session id：1！当前连接数：0
2022-07-14 16:31:23.122 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703467352035328[0;39m 有新连接：token：utlYaspcQM，session id：2，当前连接数：1
2022-07-14 16:31:23.151 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703511333507072[0;39m ------------- 开始 -------------
2022-07-14 16:31:23.152 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703511333507072[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2022-07-14 16:31:23.152 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703511333507072[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:31:23.152 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703511333507072[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:23.152 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703511333507072[0;39m 请求参数: [6]
2022-07-14 16:31:23.153 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703511333507072[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:31:23.153 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703511333507072[0;39m ==> Parameters: 6(Long)
2022-07-14 16:31:23.154 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703511333507072[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:31:23.154 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703511333507072[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 1, 1
2022-07-14 16:31:23.154 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703511333507072[0;39m <==      Total: 1
2022-07-14 16:31:23.155 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703511333507072[0;39m 返回结果: {"content":[{"ebookId":6,"id":202703460804726784,"name":"Vue3","parent":0,"sort":1,"viewCount":1,"voteCount":1}],"success":true}
2022-07-14 16:31:23.155 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703511333507072[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:31:23.192 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703511505473536[0;39m ------------- 开始 -------------
2022-07-14 16:31:23.192 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703511505473536[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202703460804726784 GET
2022-07-14 16:31:23.192 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703511505473536[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:31:23.192 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703511505473536[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:23.192 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703511505473536[0;39m 请求参数: [202703460804726784]
2022-07-14 16:31:23.193 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703511505473536[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:31:23.193 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703511505473536[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:31:23.194 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703511505473536[0;39m <==    Columns: id, content
2022-07-14 16:31:23.194 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703511505473536[0;39m <==        Row: 202703460804726784, <<BLOB>>
2022-07-14 16:31:23.194 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703511505473536[0;39m <==      Total: 1
2022-07-14 16:31:23.195 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703511505473536[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:31:23.195 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703511505473536[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:31:23.236 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703511505473536[0;39m <==    Updates: 1
2022-07-14 16:31:23.237 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703511505473536[0;39m 返回结果: {"content":"<blockquote><h1 id=\"8byqb\"><font face=\"仿宋\" size=\"6\">Vue3全家桶</font></h1></blockquote>","success":true}
2022-07-14 16:31:23.237 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703511505473536[0;39m ------------- 结束 耗时：45 ms -------------
2022-07-14 16:31:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703519134912512[0;39m 生成今日电子书快照开始
2022-07-14 16:31:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703519134912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703519134912512[0;39m ==> Parameters: 
2022-07-14 16:31:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703519134912512[0;39m <==    Updates: 0
2022-07-14 16:31:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703519134912512[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 16:31:25.115 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703482023710720[0;39m 连接关闭，token：utlYaspcQM，session id：2！当前连接数：0
2022-07-14 16:31:25.529 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703460729229312[0;39m 有新连接：token：xsOjrXF8e9，session id：3，当前连接数：1
2022-07-14 16:31:25.560 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703521437585408[0;39m ------------- 开始 -------------
2022-07-14 16:31:25.560 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703521437585408[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2022-07-14 16:31:25.560 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703521437585408[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:31:25.560 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703521437585408[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:25.560 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703521437585408[0;39m 请求参数: [6]
2022-07-14 16:31:25.561 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703521437585408[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:31:25.561 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703521437585408[0;39m ==> Parameters: 6(Long)
2022-07-14 16:31:25.562 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703521437585408[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:31:25.562 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703521437585408[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 2, 1
2022-07-14 16:31:25.563 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703521437585408[0;39m <==      Total: 1
2022-07-14 16:31:25.563 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703521437585408[0;39m 返回结果: {"content":[{"ebookId":6,"id":202703460804726784,"name":"Vue3","parent":0,"sort":1,"viewCount":2,"voteCount":1}],"success":true}
2022-07-14 16:31:25.563 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703521437585408[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:31:25.598 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703521596968960[0;39m ------------- 开始 -------------
2022-07-14 16:31:25.598 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703521596968960[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202703460804726784 GET
2022-07-14 16:31:25.598 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703521596968960[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:31:25.598 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703521596968960[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:25.598 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703521596968960[0;39m 请求参数: [202703460804726784]
2022-07-14 16:31:25.599 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703521596968960[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:31:25.599 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703521596968960[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:31:25.600 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703521596968960[0;39m <==    Columns: id, content
2022-07-14 16:31:25.601 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703521596968960[0;39m <==        Row: 202703460804726784, <<BLOB>>
2022-07-14 16:31:25.601 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703521596968960[0;39m <==      Total: 1
2022-07-14 16:31:25.602 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703521596968960[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:31:25.603 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703521596968960[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:31:25.629 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703521596968960[0;39m <==    Updates: 1
2022-07-14 16:31:25.630 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703521596968960[0;39m 返回结果: {"content":"<blockquote><h1 id=\"8byqb\"><font face=\"仿宋\" size=\"6\">Vue3全家桶</font></h1></blockquote>","success":true}
2022-07-14 16:31:25.630 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703521596968960[0;39m ------------- 结束 耗时：32 ms -------------
2022-07-14 16:31:27.544 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703529759084544[0;39m ------------- 开始 -------------
2022-07-14 16:31:27.544 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703529759084545[0;39m ------------- 开始 -------------
2022-07-14 16:31:27.545 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703529759084544[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:31:27.545 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703529759084545[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:31:27.545 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703529759084544[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:31:27.545 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703529759084545[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:31:27.545 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703529759084544[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:27.546 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703529759084545[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:27.546 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703529759084544[0;39m 请求参数: []
2022-07-14 16:31:27.546 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703529759084545[0;39m 请求参数: []
2022-07-14 16:31:27.546 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703529767473152[0;39m ------------- 开始 -------------
2022-07-14 16:31:27.546 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703529767473152[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:31:27.546 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703529759084545[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:31:27.546 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703529759084544[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:31:27.547 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703529767473152[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:31:27.547 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703529767473152[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:27.547 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703529759084545[0;39m ==> Parameters: 
2022-07-14 16:31:27.547 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703529759084544[0;39m ==> Parameters: 
2022-07-14 16:31:27.547 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703529767473152[0;39m 请求参数: []
2022-07-14 16:31:27.548 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703529767473152[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:31:27.548 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703529759084545[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:31:27.548 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703529759084544[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:31:27.548 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703529759084545[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:31:27.548 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703529767473152[0;39m ==> Parameters: 
2022-07-14 16:31:27.548 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703529759084544[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:31:27.549 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703529759084545[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:31:27.549 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703529759084544[0;39m <==        Row: 2022-07-14, 2743, 114, 0, 0
2022-07-14 16:31:27.549 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703529759084545[0;39m <==      Total: 2
2022-07-14 16:31:27.549 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:31:27.550 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703529759084545[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:31:27.550 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:31:27.550 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703529759084545[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:31:27.550 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:31:27.550 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703529759084544[0;39m <==      Total: 2
2022-07-14 16:31:27.550 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:31:27.551 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703529759084544[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0}],"success":true}
2022-07-14 16:31:27.551 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703529759084544[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:31:27.551 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:31:27.551 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:31:27.552 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:31:27.552 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:31:27.553 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:31:27.554 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:31:27.554 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:31:27.554 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:31:27.555 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:31:27.555 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:31:27.555 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:31:27.556 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:31:27.556 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703529767473152[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:31:27.556 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703529767473152[0;39m <==      Total: 16
2022-07-14 16:31:27.557 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703529767473152[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:31:27.558 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703529767473152[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-14 16:31:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703540102238208[0;39m 生成今日电子书快照开始
2022-07-14 16:31:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703540102238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703540102238208[0;39m ==> Parameters: 
2022-07-14 16:31:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703540102238208[0;39m <==    Updates: 0
2022-07-14 16:31:30.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703540102238208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 16:31:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703561048592384[0;39m 生成今日电子书快照开始
2022-07-14 16:31:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703561048592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703561048592384[0;39m ==> Parameters: 
2022-07-14 16:31:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703561048592384[0;39m <==    Updates: 0
2022-07-14 16:31:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703561048592384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:31:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202703561056980992[0;39m 更新电子书下的文档数据开始
2022-07-14 16:31:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703561056980992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:31:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703561056980992[0;39m ==> Parameters: 
2022-07-14 16:31:35.096 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703561056980992[0;39m <==    Updates: 3
2022-07-14 16:31:35.096 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202703561056980992[0;39m 更新电子书下的文档数据结束，耗时：89 毫秒
2022-07-14 16:31:35.196 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703467352035328[0;39m 连接关闭，token：xsOjrXF8e9，session id：3！当前连接数：0
2022-07-14 16:31:35.972 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703511333507072[0;39m 有新连接：token：spOPClsxAz，session id：4，当前连接数：1
2022-07-14 16:31:36.033 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703565364531202[0;39m ------------- 开始 -------------
2022-07-14 16:31:36.033 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703565364531201[0;39m ------------- 开始 -------------
2022-07-14 16:31:36.033 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703565364531200[0;39m ------------- 开始 -------------
2022-07-14 16:31:36.033 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703565364531202[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:31:36.033 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703565364531201[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:31:36.033 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703565364531200[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:31:36.033 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703565364531201[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:31:36.033 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703565364531202[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:31:36.033 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703565364531200[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:31:36.034 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703565364531201[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:36.034 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703565364531202[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:36.034 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703565364531200[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:36.034 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703565364531201[0;39m 请求参数: []
2022-07-14 16:31:36.034 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703565364531202[0;39m 请求参数: []
2022-07-14 16:31:36.034 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703565364531200[0;39m 请求参数: []
2022-07-14 16:31:36.034 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703565364531200[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:31:36.034 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703565364531202[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:31:36.034 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703565364531201[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:31:36.035 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703565364531202[0;39m ==> Parameters: 
2022-07-14 16:31:36.035 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703565364531201[0;39m ==> Parameters: 
2022-07-14 16:31:36.035 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703565364531200[0;39m ==> Parameters: 
2022-07-14 16:31:36.035 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703565364531200[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:31:36.035 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:31:36.036 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703565364531202[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:31:36.036 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703565364531200[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:31:36.036 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:31:36.036 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703565364531202[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:31:36.036 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:31:36.036 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703565364531200[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:31:36.036 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703565364531202[0;39m <==        Row: 2022-07-14, 2743, 114, 0, 0
2022-07-14 16:31:36.036 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:31:36.037 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703565364531200[0;39m <==      Total: 2
2022-07-14 16:31:36.037 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703565364531202[0;39m <==      Total: 2
2022-07-14 16:31:36.037 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:31:36.037 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703565364531200[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:31:36.037 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:31:36.037 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703565364531200[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:31:36.037 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703565364531202[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0}],"success":true}
2022-07-14 16:31:36.038 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703565364531202[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:31:36.038 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:31:36.038 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:31:36.038 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:31:36.038 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:31:36.039 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:31:36.039 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:31:36.039 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:31:36.040 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:31:36.040 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:31:36.040 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:31:36.041 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703565364531201[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:31:36.041 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703565364531201[0;39m <==      Total: 16
2022-07-14 16:31:36.042 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703565364531201[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:31:36.042 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703565364531201[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:31:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703582066249728[0;39m 生成今日电子书快照开始
2022-07-14 16:31:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703582066249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703582066249728[0;39m ==> Parameters: 
2022-07-14 16:31:40.052 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703582066249728[0;39m <==    Updates: 0
2022-07-14 16:31:40.052 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703582066249728[0;39m 生成今日电子书快照结束，耗时：37 毫秒
2022-07-14 16:31:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703602995826688[0;39m 生成今日电子书快照开始
2022-07-14 16:31:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703602995826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703602995826688[0;39m ==> Parameters: 
2022-07-14 16:31:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703602995826688[0;39m <==    Updates: 0
2022-07-14 16:31:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703602995826688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:31:48.881 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703619252948992[0;39m ------------- 开始 -------------
2022-07-14 16:31:48.881 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703619252948992[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:31:48.881 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703619252948992[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:31:48.882 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703619252948992[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:48.882 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703619252948992[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2022-07-14 16:31:48.884 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703619252948992[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:31:48.885 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703619252948992[0;39m ==> Parameters: 201(Long)
2022-07-14 16:31:48.886 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703619252948992[0;39m <==    Columns: count(0)
2022-07-14 16:31:48.886 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703619252948992[0;39m <==        Row: 1
2022-07-14 16:31:48.886 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703619252948992[0;39m <==      Total: 1
2022-07-14 16:31:48.887 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703619252948992[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:31:48.887 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703619252948992[0;39m ==> Parameters: 201(Long), 1000(Integer)
2022-07-14 16:31:48.888 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703619252948992[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:31:48.888 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703619252948992[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 56, 10
2022-07-14 16:31:48.888 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703619252948992[0;39m <==      Total: 1
2022-07-14 16:31:48.888 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703619252948992[0;39m 总行数：1
2022-07-14 16:31:48.889 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703619252948992[0;39m 总页数：1
2022-07-14 16:31:48.889 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703619252948992[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":56,"voteCount":10}],"total":1},"success":true}
2022-07-14 16:31:48.889 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703619252948992[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:31:49.919 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703623606636544[0;39m ------------- 开始 -------------
2022-07-14 16:31:49.919 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703623606636544[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2022-07-14 16:31:49.919 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703623606636544[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:31:49.919 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703623606636544[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:49.919 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703623606636544[0;39m 请求参数: [1]
2022-07-14 16:31:49.920 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703623606636544[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:31:49.921 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703623606636544[0;39m ==> Parameters: 1(Long)
2022-07-14 16:31:49.922 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703623606636544[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:31:49.922 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703623606636544[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 28, 3
2022-07-14 16:31:49.922 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703623606636544[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 10, 3
2022-07-14 16:31:49.922 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703623606636544[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 6, 1
2022-07-14 16:31:49.923 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703623606636544[0;39m <==        Row: 6, 1, 5, 文档2.2.1, 1, 4, 1
2022-07-14 16:31:49.923 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703623606636544[0;39m <==        Row: 3, 1, 0, 文档2, 2, 4, 1
2022-07-14 16:31:49.923 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703623606636544[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 4, 1
2022-07-14 16:31:49.923 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703623606636544[0;39m <==      Total: 6
2022-07-14 16:31:49.924 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703623606636544[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":28,"voteCount":3},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":4,"voteCount":1},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":4,"voteCount":1}],"success":true}
2022-07-14 16:31:49.924 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703623606636544[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:31:49.941 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703623698911232[0;39m ------------- 开始 -------------
2022-07-14 16:31:49.941 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703623698911232[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/1 GET
2022-07-14 16:31:49.941 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703623698911232[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:31:49.942 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703623698911232[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:49.942 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703623698911232[0;39m 请求参数: [1]
2022-07-14 16:31:49.942 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703623698911232[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:31:49.943 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703623698911232[0;39m ==> Parameters: 1(Long)
2022-07-14 16:31:49.943 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703623698911232[0;39m <==    Columns: id, content
2022-07-14 16:31:49.944 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703623698911232[0;39m <==        Row: 1, <<BLOB>>
2022-07-14 16:31:49.944 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703623698911232[0;39m <==      Total: 1
2022-07-14 16:31:49.944 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703623698911232[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:31:49.944 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703623698911232[0;39m ==> Parameters: 1(Long)
2022-07-14 16:31:49.999 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703623698911232[0;39m <==    Updates: 1
2022-07-14 16:31:50.000 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703623698911232[0;39m 返回结果: {"content":"<blockquote><h1 id=\"japt6\"><font face=\"仿宋\" color=\"#7b5ba1\"><b><u>33332222</u></b></font></h1><p><font face=\"仿宋\" color=\"#c24f4a\"><b style=\"background-color: rgb(139, 170, 74);\">2022.7.4</b></font></p><img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png\" alt=\"[[舔屏]]\"><div><font face=\"仿宋\" color=\"#7b5ba1\"><b></b></font></div></blockquote>","success":true}
2022-07-14 16:31:50.000 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703623698911232[0;39m ------------- 结束 耗时：59 ms -------------
2022-07-14 16:31:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703623979929600[0;39m 生成今日电子书快照开始
2022-07-14 16:31:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703623979929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703623979929600[0;39m ==> Parameters: 
2022-07-14 16:31:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703623979929600[0;39m <==    Updates: 0
2022-07-14 16:31:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703623979929600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:31:50.825 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703627406675968[0;39m ------------- 开始 -------------
2022-07-14 16:31:50.826 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703627406675968[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/1 GET
2022-07-14 16:31:50.826 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703627406675968[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 16:31:50.826 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703627406675968[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:50.826 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703627406675968[0;39m 请求参数: [1]
2022-07-14 16:31:50.860 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202703627406675968[0;39m key不存在，放入：DOC_VOTE_1_127.0.0.1，过期 86400 秒
2022-07-14 16:31:50.895 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202703627406675968[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 16:31:50.895 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202703627406675968[0;39m ==> Parameters: 1(Long)
2022-07-14 16:31:50.904 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202703627406675968[0;39m <==    Updates: 1
2022-07-14 16:31:50.905 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202703627406675968[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 16:31:50.905 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202703627406675968[0;39m ==> Parameters: 1(Long)
2022-07-14 16:31:50.906 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202703627406675968[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:31:50.906 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202703627406675968[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 29, 4
2022-07-14 16:31:50.906 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202703627406675968[0;39m <==      Total: 1
2022-07-14 16:31:50.906 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703627406675968[0;39m 返回结果: {"success":true}
2022-07-14 16:31:50.907 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703627406675968[0;39m ------------- 结束 耗时：82 ms -------------
2022-07-14 16:31:50.907 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202703627406675968[0;39m 推送消息：spOPClsxAz，内容：【Ant Design Of Vue】被点赞
2022-07-14 16:31:53.077 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703565364531202[0;39m 连接关闭，token：spOPClsxAz，session id：4！当前连接数：0
2022-07-14 16:31:53.701 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703565364531201[0;39m 有新连接：token：l0dgntuIpa，session id：5，当前连接数：1
2022-07-14 16:31:53.731 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703639595323392[0;39m ------------- 开始 -------------
2022-07-14 16:31:53.732 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703639595323392[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2022-07-14 16:31:53.732 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703639595323392[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:31:53.732 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703639595323392[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:53.732 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703639595323392[0;39m 请求参数: [1]
2022-07-14 16:31:53.733 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703639595323392[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:31:53.734 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703639595323392[0;39m ==> Parameters: 1(Long)
2022-07-14 16:31:53.735 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703639595323392[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:31:53.736 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703639595323392[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 29, 4
2022-07-14 16:31:53.736 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703639595323392[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 10, 3
2022-07-14 16:31:53.736 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703639595323392[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 6, 1
2022-07-14 16:31:53.736 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703639595323392[0;39m <==        Row: 6, 1, 5, 文档2.2.1, 1, 4, 1
2022-07-14 16:31:53.737 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703639595323392[0;39m <==        Row: 3, 1, 0, 文档2, 2, 4, 1
2022-07-14 16:31:53.738 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703639595323392[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 4, 1
2022-07-14 16:31:53.738 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703639595323392[0;39m <==      Total: 6
2022-07-14 16:31:53.740 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703639595323392[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":29,"voteCount":4},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":4,"voteCount":1},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":4,"voteCount":1}],"success":true}
2022-07-14 16:31:53.740 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703639595323392[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:31:53.775 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703639779872768[0;39m ------------- 开始 -------------
2022-07-14 16:31:53.775 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703639779872768[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/1 GET
2022-07-14 16:31:53.776 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703639779872768[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:31:53.776 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703639779872768[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:53.776 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703639779872768[0;39m 请求参数: [1]
2022-07-14 16:31:53.777 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703639779872768[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:31:53.777 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703639779872768[0;39m ==> Parameters: 1(Long)
2022-07-14 16:31:53.778 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703639779872768[0;39m <==    Columns: id, content
2022-07-14 16:31:53.779 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703639779872768[0;39m <==        Row: 1, <<BLOB>>
2022-07-14 16:31:53.779 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703639779872768[0;39m <==      Total: 1
2022-07-14 16:31:53.780 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703639779872768[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:31:53.780 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703639779872768[0;39m ==> Parameters: 1(Long)
2022-07-14 16:31:53.799 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703639779872768[0;39m <==    Updates: 1
2022-07-14 16:31:53.799 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703639779872768[0;39m 返回结果: {"content":"<blockquote><h1 id=\"japt6\"><font face=\"仿宋\" color=\"#7b5ba1\"><b><u>33332222</u></b></font></h1><p><font face=\"仿宋\" color=\"#c24f4a\"><b style=\"background-color: rgb(139, 170, 74);\">2022.7.4</b></font></p><img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png\" alt=\"[[舔屏]]\"><div><font face=\"仿宋\" color=\"#7b5ba1\"><b></b></font></div></blockquote>","success":true}
2022-07-14 16:31:53.799 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703639779872768[0;39m ------------- 结束 耗时：24 ms -------------
2022-07-14 16:31:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703644955643904[0;39m 生成今日电子书快照开始
2022-07-14 16:31:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703644955643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:31:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703644955643904[0;39m ==> Parameters: 
2022-07-14 16:31:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703644955643904[0;39m <==    Updates: 0
2022-07-14 16:31:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703644955643904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:31:55.792 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703648239783936[0;39m ------------- 开始 -------------
2022-07-14 16:31:55.792 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703648239783937[0;39m ------------- 开始 -------------
2022-07-14 16:31:55.792 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703648239783936[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:31:55.792 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703648239783938[0;39m ------------- 开始 -------------
2022-07-14 16:31:55.792 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703648239783937[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:31:55.792 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703648239783936[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:31:55.793 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703648239783937[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:31:55.793 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703648239783938[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:31:55.793 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703648239783937[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:55.793 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703648239783936[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:55.793 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703648239783938[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:31:55.793 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703648239783937[0;39m 请求参数: []
2022-07-14 16:31:55.793 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703648239783936[0;39m 请求参数: []
2022-07-14 16:31:55.793 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703648239783938[0;39m 远程地址: 127.0.0.1
2022-07-14 16:31:55.793 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703648239783938[0;39m 请求参数: []
2022-07-14 16:31:55.793 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703648239783937[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:31:55.793 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703648239783936[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:31:55.794 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703648239783937[0;39m ==> Parameters: 
2022-07-14 16:31:55.794 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703648239783938[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:31:55.794 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703648239783936[0;39m ==> Parameters: 
2022-07-14 16:31:55.794 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703648239783938[0;39m ==> Parameters: 
2022-07-14 16:31:55.794 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703648239783937[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:31:55.795 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703648239783936[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:31:55.795 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:31:55.795 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703648239783937[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:31:55.795 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:31:55.795 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703648239783936[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:31:55.795 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:31:55.795 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703648239783937[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:31:55.795 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703648239783936[0;39m <==        Row: 2022-07-14, 2703, 60, -40, -54
2022-07-14 16:31:55.795 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:31:55.795 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703648239783937[0;39m <==      Total: 2
2022-07-14 16:31:55.796 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:31:55.796 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703648239783936[0;39m <==      Total: 2
2022-07-14 16:31:55.796 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703648239783937[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:31:55.796 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703648239783936[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2703,"viewIncrease":-40,"voteCount":60,"voteIncrease":-54}],"success":true}
2022-07-14 16:31:55.796 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:31:55.796 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703648239783937[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:31:55.796 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703648239783936[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:31:55.796 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:31:55.796 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:31:55.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:31:55.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:31:55.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:31:55.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:31:55.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:31:55.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:31:55.799 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:31:55.799 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:31:55.799 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703648239783938[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:31:55.800 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703648239783938[0;39m <==      Total: 16
2022-07-14 16:31:55.800 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703648239783938[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:31:55.800 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703648239783938[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:32:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703665893609472[0;39m 生成今日电子书快照开始
2022-07-14 16:32:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703665893609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703665893609472[0;39m ==> Parameters: 
2022-07-14 16:32:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703665893609472[0;39m <==    Updates: 0
2022-07-14 16:32:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703665893609472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:32:01.363 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703623698911232[0;39m 连接关闭，token：l0dgntuIpa，session id：5！当前连接数：0
2022-07-14 16:32:01.536 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703511333507072[0;39m 有新连接：token：cXjR09IUXW，session id：6，当前连接数：1
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703672499638274[0;39m ------------- 开始 -------------
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703672499638272[0;39m ------------- 开始 -------------
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703672499638273[0;39m ------------- 开始 -------------
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703672499638274[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703672499638272[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703672499638273[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703672499638274[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703672499638272[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703672499638273[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703672499638274[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703672499638272[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703672499638273[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703672499638274[0;39m 请求参数: []
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703672499638272[0;39m 请求参数: []
2022-07-14 16:32:01.576 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703672499638273[0;39m 请求参数: []
2022-07-14 16:32:01.577 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703672499638274[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:01.577 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703672499638272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:01.578 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703672499638273[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:32:01.578 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703672499638274[0;39m ==> Parameters: 
2022-07-14 16:32:01.578 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703672499638272[0;39m ==> Parameters: 
2022-07-14 16:32:01.578 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703672499638273[0;39m ==> Parameters: 
2022-07-14 16:32:01.579 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:32:01.579 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703672499638272[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:32:01.579 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:32:01.579 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703672499638274[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:32:01.580 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703672499638272[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:32:01.580 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703672499638274[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:32:01.580 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:32:01.580 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:32:01.580 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703672499638274[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:32:01.580 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703672499638272[0;39m <==        Row: 2022-07-14, 2703, 60, -40, -54
2022-07-14 16:32:01.580 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:32:01.581 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703672499638274[0;39m <==      Total: 2
2022-07-14 16:32:01.581 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703672499638272[0;39m <==      Total: 2
2022-07-14 16:32:01.581 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:32:01.581 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:32:01.581 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703672499638272[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2703,"viewIncrease":-40,"voteCount":60,"voteIncrease":-54}],"success":true}
2022-07-14 16:32:01.581 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703672499638274[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:32:01.581 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703672499638272[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:32:01.581 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703672499638274[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:32:01.581 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:32:01.582 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:32:01.582 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:32:01.582 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:32:01.582 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:32:01.583 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:32:01.583 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:32:01.583 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:32:01.583 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:32:01.584 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703672499638273[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:32:01.584 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703672499638273[0;39m <==      Total: 16
2022-07-14 16:32:01.585 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703672499638273[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:32:01.585 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703672499638273[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:32:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202703686915461120[0;39m 更新电子书下的文档数据开始
2022-07-14 16:32:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703686915461120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:32:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703686915461120[0;39m ==> Parameters: 
2022-07-14 16:32:05.040 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703686915461120[0;39m <==    Updates: 3
2022-07-14 16:32:05.040 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202703686915461120[0;39m 更新电子书下的文档数据结束，耗时：27 毫秒
2022-07-14 16:32:05.040 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703687028707328[0;39m 生成今日电子书快照开始
2022-07-14 16:32:05.040 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703687028707328[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:05.041 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703687028707328[0;39m ==> Parameters: 
2022-07-14 16:32:05.085 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703687028707328[0;39m <==    Updates: 0
2022-07-14 16:32:05.085 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703687028707328[0;39m 生成今日电子书快照结束，耗时：45 毫秒
2022-07-14 16:32:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703707866009600[0;39m 生成今日电子书快照开始
2022-07-14 16:32:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703707866009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703707866009600[0;39m ==> Parameters: 
2022-07-14 16:32:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703707866009600[0;39m <==    Updates: 0
2022-07-14 16:32:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703707866009600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:32:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703728866889728[0;39m 生成今日电子书快照开始
2022-07-14 16:32:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703728866889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703728866889728[0;39m ==> Parameters: 
2022-07-14 16:32:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703728866889728[0;39m <==    Updates: 0
2022-07-14 16:32:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703728866889728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:32:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703749804855296[0;39m 生成今日电子书快照开始
2022-07-14 16:32:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703749804855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703749804855296[0;39m ==> Parameters: 
2022-07-14 16:32:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703749804855296[0;39m <==    Updates: 0
2022-07-14 16:32:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703749804855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:32:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703770784763904[0;39m 生成今日电子书快照开始
2022-07-14 16:32:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703770784763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703770784763904[0;39m ==> Parameters: 
2022-07-14 16:32:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703770784763904[0;39m <==    Updates: 0
2022-07-14 16:32:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703770784763904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:32:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703791777255424[0;39m 生成今日电子书快照开始
2022-07-14 16:32:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703791777255424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703791777255424[0;39m ==> Parameters: 
2022-07-14 16:32:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703791777255424[0;39m <==    Updates: 0
2022-07-14 16:32:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703791777255424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:32:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202703812748775424[0;39m 更新电子书下的文档数据开始
2022-07-14 16:32:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703812748775424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:32:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703812748775424[0;39m ==> Parameters: 
2022-07-14 16:32:35.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703812748775424[0;39m <==    Updates: 3
2022-07-14 16:32:35.021 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202703812748775424[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-14 16:32:35.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703812778135552[0;39m 生成今日电子书快照开始
2022-07-14 16:32:35.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703812778135552[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:35.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703812778135552[0;39m ==> Parameters: 
2022-07-14 16:32:35.023 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703812778135552[0;39m <==    Updates: 0
2022-07-14 16:32:35.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703812778135552[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:32:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703833707712512[0;39m 生成今日电子书快照开始
2022-07-14 16:32:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703833707712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703833707712512[0;39m ==> Parameters: 
2022-07-14 16:32:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703833707712512[0;39m <==    Updates: 0
2022-07-14 16:32:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703833707712512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:32:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703854675038208[0;39m 生成今日电子书快照开始
2022-07-14 16:32:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703854675038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703854675038208[0;39m ==> Parameters: 
2022-07-14 16:32:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703854675038208[0;39m <==    Updates: 0
2022-07-14 16:32:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703854675038208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:32:47.464 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703639595323392[0;39m 连接关闭，token：cXjR09IUXW，session id：6！当前连接数：0
2022-07-14 16:32:48.152 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703639779872768[0;39m 有新连接：token：y4csFyoroe，session id：7，当前连接数：1
2022-07-14 16:32:48.206 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703868080033792[0;39m ------------- 开始 -------------
2022-07-14 16:32:48.207 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703868080033792[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:32:48.207 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703868080033792[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:32:48.207 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703868080033792[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:48.207 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703868084228097[0;39m ------------- 开始 -------------
2022-07-14 16:32:48.207 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703868084228096[0;39m ------------- 开始 -------------
2022-07-14 16:32:48.207 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703868080033792[0;39m 请求参数: []
2022-07-14 16:32:48.207 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703868084228097[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:32:48.208 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703868084228096[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:32:48.208 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703868084228097[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:32:48.208 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703868084228096[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:32:48.208 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703868084228097[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:48.208 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703868084228096[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:48.208 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703868080033792[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:48.208 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703868084228097[0;39m 请求参数: []
2022-07-14 16:32:48.208 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703868084228096[0;39m 请求参数: []
2022-07-14 16:32:48.208 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703868080033792[0;39m ==> Parameters: 
2022-07-14 16:32:48.209 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703868084228096[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:48.209 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703868084228097[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:32:48.209 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703868084228096[0;39m ==> Parameters: 
2022-07-14 16:32:48.209 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703868084228097[0;39m ==> Parameters: 
2022-07-14 16:32:48.209 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703868080033792[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:32:48.210 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703868080033792[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:32:48.210 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703868084228096[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:32:48.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:32:48.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:32:48.210 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703868080033792[0;39m <==        Row: 2022-07-14, 2705, 61, -38, -53
2022-07-14 16:32:48.210 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703868084228096[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:32:48.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:32:48.211 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703868084228096[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:32:48.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:32:48.211 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703868080033792[0;39m <==      Total: 2
2022-07-14 16:32:48.211 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703868084228096[0;39m <==      Total: 2
2022-07-14 16:32:48.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:32:48.211 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703868080033792[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2705,"viewIncrease":-38,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:32:48.211 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703868084228096[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:32:48.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:32:48.211 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703868084228096[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:32:48.211 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703868080033792[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:32:48.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:32:48.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:32:48.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:32:48.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:32:48.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:32:48.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:32:48.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:32:48.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:32:48.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:32:48.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:32:48.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703868084228097[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:32:48.214 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703868084228097[0;39m <==      Total: 16
2022-07-14 16:32:48.214 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703868084228097[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:32:48.214 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703868084228097[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:32:49.761 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703623698911232[0;39m 连接关闭，token：y4csFyoroe，session id：7！当前连接数：0
2022-07-14 16:32:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703875638169600[0;39m 生成今日电子书快照开始
2022-07-14 16:32:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703875638169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703875638169600[0;39m ==> Parameters: 
2022-07-14 16:32:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703875638169600[0;39m <==    Updates: 0
2022-07-14 16:32:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703875638169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:32:50.178 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703511333507072[0;39m 有新连接：token：a6MQeAAQfE，session id：8，当前连接数：1
2022-07-14 16:32:50.235 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703876590276608[0;39m ------------- 开始 -------------
2022-07-14 16:32:50.236 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703876590276608[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:32:50.236 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703876590276608[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:32:50.236 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703876594470912[0;39m ------------- 开始 -------------
2022-07-14 16:32:50.236 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703876594470913[0;39m ------------- 开始 -------------
2022-07-14 16:32:50.236 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703876590276608[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:50.236 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703876594470912[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:32:50.237 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703876594470913[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:32:50.237 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703876590276608[0;39m 请求参数: []
2022-07-14 16:32:50.237 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703876594470912[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:32:50.237 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703876594470913[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:32:50.237 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703876594470912[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:50.237 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703876594470913[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:50.237 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703876594470912[0;39m 请求参数: []
2022-07-14 16:32:50.237 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703876594470913[0;39m 请求参数: []
2022-07-14 16:32:50.237 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703876590276608[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:50.238 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703876590276608[0;39m ==> Parameters: 
2022-07-14 16:32:50.238 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703876594470912[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:50.238 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703876594470913[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:32:50.238 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703876594470913[0;39m ==> Parameters: 
2022-07-14 16:32:50.238 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703876594470912[0;39m ==> Parameters: 
2022-07-14 16:32:50.239 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703876590276608[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:32:50.239 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:32:50.239 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703876594470912[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:32:50.239 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:32:50.239 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703876590276608[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:32:50.239 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703876594470912[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:32:50.239 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:32:50.240 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703876594470912[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:32:50.240 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703876590276608[0;39m <==        Row: 2022-07-14, 2705, 61, -38, -53
2022-07-14 16:32:50.240 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:32:50.240 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703876594470912[0;39m <==      Total: 2
2022-07-14 16:32:50.240 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703876590276608[0;39m <==      Total: 2
2022-07-14 16:32:50.240 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:32:50.240 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703876590276608[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2705,"viewIncrease":-38,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:32:50.240 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703876594470912[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:32:50.240 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:32:50.240 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703876590276608[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:32:50.240 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703876594470912[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:32:50.241 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:32:50.241 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:32:50.241 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:32:50.241 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:32:50.242 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:32:50.243 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:32:50.244 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:32:50.244 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:32:50.245 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:32:50.245 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:32:50.245 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703876594470913[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:32:50.245 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703876594470913[0;39m <==      Total: 16
2022-07-14 16:32:50.246 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703876594470913[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:32:50.246 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703876594470913[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:32:52.563 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703639595323392[0;39m 连接关闭，token：a6MQeAAQfE，session id：8！当前连接数：0
2022-07-14 16:32:52.905 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703639779872768[0;39m 有新连接：token：mPMKQobyvG，session id：9，当前连接数：1
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703887961034752[0;39m ------------- 开始 -------------
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703887961034753[0;39m ------------- 开始 -------------
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703887961034752[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703887961034753[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703887961034752[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703887961034753[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703887961034752[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703887961034754[0;39m ------------- 开始 -------------
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703887961034753[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703887961034752[0;39m 请求参数: []
2022-07-14 16:32:52.946 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703887961034754[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:32:52.947 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703887961034753[0;39m 请求参数: []
2022-07-14 16:32:52.947 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703887961034754[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:32:52.947 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703887961034754[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:52.947 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703887961034754[0;39m 请求参数: []
2022-07-14 16:32:52.947 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703887961034753[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:52.947 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703887961034752[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:52.947 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703887961034754[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:32:52.947 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703887961034752[0;39m ==> Parameters: 
2022-07-14 16:32:52.947 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703887961034753[0;39m ==> Parameters: 
2022-07-14 16:32:52.948 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703887961034754[0;39m ==> Parameters: 
2022-07-14 16:32:52.948 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:32:52.948 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703887961034752[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:32:52.948 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703887961034753[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:32:52.949 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:32:52.949 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703887961034752[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:32:52.949 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703887961034753[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:32:52.949 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:32:52.949 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703887961034752[0;39m <==        Row: 2022-07-14, 2705, 61, -38, -53
2022-07-14 16:32:52.949 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:32:52.949 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703887961034753[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:32:52.949 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703887961034752[0;39m <==      Total: 2
2022-07-14 16:32:52.950 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703887961034753[0;39m <==      Total: 2
2022-07-14 16:32:52.950 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:32:52.950 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703887961034752[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2705,"viewIncrease":-38,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:32:52.950 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703887961034753[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:32:52.950 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703887961034752[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:32:52.950 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:32:52.950 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703887961034753[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:32:52.950 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:32:52.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:32:52.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:32:52.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:32:52.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:32:52.952 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:32:52.952 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:32:52.952 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:32:52.953 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:32:52.953 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:32:52.953 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703887961034754[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:32:52.954 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703887961034754[0;39m <==      Total: 16
2022-07-14 16:32:52.954 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703887961034754[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:32:52.955 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703887961034754[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:32:54.764 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703623698911232[0;39m 连接关闭，token：mPMKQobyvG，session id：9！当前连接数：0
2022-07-14 16:32:54.935 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703511333507072[0;39m 有新连接：token：9b0EUx6Piq，session id：a，当前连接数：1
2022-07-14 16:32:54.977 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703896479666177[0;39m ------------- 开始 -------------
2022-07-14 16:32:54.977 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703896479666176[0;39m ------------- 开始 -------------
2022-07-14 16:32:54.978 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703896479666177[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:32:54.978 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703896479666176[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:32:54.978 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703896479666177[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:32:54.978 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703896479666176[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:32:54.978 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703896479666177[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:54.978 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703896479666176[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:54.978 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703896479666177[0;39m 请求参数: []
2022-07-14 16:32:54.978 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703896479666176[0;39m 请求参数: []
2022-07-14 16:32:54.979 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703896479666176[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:54.979 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703896479666177[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:32:54.979 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703896479666176[0;39m ==> Parameters: 
2022-07-14 16:32:54.979 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703896479666177[0;39m ==> Parameters: 
2022-07-14 16:32:54.979 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703896488054784[0;39m ------------- 开始 -------------
2022-07-14 16:32:54.980 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703896488054784[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:32:54.980 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703896488054784[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:32:54.980 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703896488054784[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:54.980 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703896479666177[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:32:54.980 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703896479666176[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:32:54.981 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703896479666176[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:32:54.981 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703896488054784[0;39m 请求参数: []
2022-07-14 16:32:54.981 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703896479666177[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:32:54.981 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703896479666177[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:32:54.981 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703896479666176[0;39m <==        Row: 2022-07-14, 2705, 61, -38, -53
2022-07-14 16:32:54.981 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703896488054784[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:32:54.982 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703896479666177[0;39m <==      Total: 2
2022-07-14 16:32:54.982 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703896479666176[0;39m <==      Total: 2
2022-07-14 16:32:54.982 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703896488054784[0;39m ==> Parameters: 
2022-07-14 16:32:54.982 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703896479666176[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2705,"viewIncrease":-38,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:32:54.982 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703896479666177[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:32:54.982 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703896479666176[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:32:54.982 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703896479666177[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:32:54.982 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:32:54.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:32:54.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:32:54.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:32:54.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:32:54.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:32:54.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:32:54.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:32:54.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:32:54.986 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:32:54.986 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:32:54.987 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:32:54.987 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:32:54.987 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:32:54.988 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:32:54.988 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:32:54.988 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703896488054784[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:32:54.989 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703896488054784[0;39m <==      Total: 16
2022-07-14 16:32:54.989 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703896488054784[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:32:54.990 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703896488054784[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 16:32:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703896613883904[0;39m 生成今日电子书快照开始
2022-07-14 16:32:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703896613883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:32:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703896613883904[0;39m ==> Parameters: 
2022-07-14 16:32:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703896613883904[0;39m <==    Updates: 0
2022-07-14 16:32:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703896613883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:32:57.885 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703908676702208[0;39m ------------- 开始 -------------
2022-07-14 16:32:57.886 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703908676702208[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:32:57.886 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703908676702208[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:32:57.886 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703908676702208[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:57.886 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703908676702208[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2022-07-14 16:32:57.887 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703908676702208[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:32:57.888 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703908676702208[0;39m ==> Parameters: 201(Long)
2022-07-14 16:32:57.889 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703908676702208[0;39m <==    Columns: count(0)
2022-07-14 16:32:57.889 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703908676702208[0;39m <==        Row: 1
2022-07-14 16:32:57.889 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703908676702208[0;39m <==      Total: 1
2022-07-14 16:32:57.890 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703908676702208[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:32:57.890 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703908676702208[0;39m ==> Parameters: 201(Long), 1000(Integer)
2022-07-14 16:32:57.891 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703908676702208[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:32:57.891 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703908676702208[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 58, 11
2022-07-14 16:32:57.891 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703908676702208[0;39m <==      Total: 1
2022-07-14 16:32:57.891 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703908676702208[0;39m 总行数：1
2022-07-14 16:32:57.891 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703908676702208[0;39m 总页数：1
2022-07-14 16:32:57.892 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703908676702208[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":58,"voteCount":11}],"total":1},"success":true}
2022-07-14 16:32:57.892 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703908676702208[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:32:58.660 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703911927287808[0;39m ------------- 开始 -------------
2022-07-14 16:32:58.660 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703911927287808[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2022-07-14 16:32:58.660 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703911927287808[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:32:58.661 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703911927287808[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:58.661 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703911927287808[0;39m 请求参数: [1]
2022-07-14 16:32:58.662 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703911927287808[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:32:58.662 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703911927287808[0;39m ==> Parameters: 1(Long)
2022-07-14 16:32:58.663 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703911927287808[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:32:58.664 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703911927287808[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 30, 4
2022-07-14 16:32:58.664 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703911927287808[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 10, 3
2022-07-14 16:32:58.664 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703911927287808[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 6, 1
2022-07-14 16:32:58.664 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703911927287808[0;39m <==        Row: 6, 1, 5, 文档2.2.1, 1, 4, 1
2022-07-14 16:32:58.664 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703911927287808[0;39m <==        Row: 3, 1, 0, 文档2, 2, 4, 1
2022-07-14 16:32:58.665 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703911927287808[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 4, 1
2022-07-14 16:32:58.665 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703911927287808[0;39m <==      Total: 6
2022-07-14 16:32:58.665 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703911927287808[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":30,"voteCount":4},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":4,"voteCount":1},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":4,"voteCount":1}],"success":true}
2022-07-14 16:32:58.665 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703911927287808[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:32:58.682 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703912019562496[0;39m ------------- 开始 -------------
2022-07-14 16:32:58.682 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703912019562496[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/1 GET
2022-07-14 16:32:58.683 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703912019562496[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:32:58.683 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703912019562496[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:58.683 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703912019562496[0;39m 请求参数: [1]
2022-07-14 16:32:58.683 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703912019562496[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:32:58.683 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703912019562496[0;39m ==> Parameters: 1(Long)
2022-07-14 16:32:58.684 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703912019562496[0;39m <==    Columns: id, content
2022-07-14 16:32:58.684 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703912019562496[0;39m <==        Row: 1, <<BLOB>>
2022-07-14 16:32:58.685 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703912019562496[0;39m <==      Total: 1
2022-07-14 16:32:58.685 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703912019562496[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:32:58.686 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703912019562496[0;39m ==> Parameters: 1(Long)
2022-07-14 16:32:58.744 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703912019562496[0;39m <==    Updates: 1
2022-07-14 16:32:58.744 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703912019562496[0;39m 返回结果: {"content":"<blockquote><h1 id=\"japt6\"><font face=\"仿宋\" color=\"#7b5ba1\"><b><u>33332222</u></b></font></h1><p><font face=\"仿宋\" color=\"#c24f4a\"><b style=\"background-color: rgb(139, 170, 74);\">2022.7.4</b></font></p><img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png\" alt=\"[[舔屏]]\"><div><font face=\"仿宋\" color=\"#7b5ba1\"><b></b></font></div></blockquote>","success":true}
2022-07-14 16:32:58.745 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703912019562496[0;39m ------------- 结束 耗时：63 ms -------------
2022-07-14 16:32:59.653 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703916092231680[0;39m ------------- 开始 -------------
2022-07-14 16:32:59.654 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703916092231680[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/1 GET
2022-07-14 16:32:59.654 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703916092231680[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 16:32:59.654 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703916092231680[0;39m 远程地址: 127.0.0.1
2022-07-14 16:32:59.654 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703916092231680[0;39m 请求参数: [1]
2022-07-14 16:32:59.688 INFO  com.zs.wikibb.utils.RedisUtil                     :28  
                [32m202703916092231680[0;39m key已存在：DOC_VOTE_1_127.0.0.1
2022-07-14 16:32:59.688 WARN  c.zs.wikibb.controller.ControllerExceptionHandler :45  
                [32m202703916092231680[0;39m 业务异常：您已点赞过
2022-07-14 16:32:59.689 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m202703916092231680[0;39m Resolved [com.zs.wikibb.exception.BusinessException: 您已点赞过]
2022-07-14 16:33:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703917560238080[0;39m 生成今日电子书快照开始
2022-07-14 16:33:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703917560238080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703917560238080[0;39m ==> Parameters: 
2022-07-14 16:33:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703917560238080[0;39m <==    Updates: 0
2022-07-14 16:33:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703917560238080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 16:33:02.028 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703926053703680[0;39m ------------- 开始 -------------
2022-07-14 16:33:02.028 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703926053703681[0;39m ------------- 开始 -------------
2022-07-14 16:33:02.028 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703926053703680[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:02.028 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703926053703681[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:02.028 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703926053703680[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:02.028 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703926053703681[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:02.028 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703926053703682[0;39m ------------- 开始 -------------
2022-07-14 16:33:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703926053703681[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703926053703680[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703926053703682[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703926053703681[0;39m 请求参数: []
2022-07-14 16:33:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703926053703680[0;39m 请求参数: []
2022-07-14 16:33:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703926053703682[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703926053703682[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703926053703682[0;39m 请求参数: []
2022-07-14 16:33:02.029 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703926053703680[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:02.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703926053703681[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:02.030 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703926053703680[0;39m ==> Parameters: 
2022-07-14 16:33:02.030 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703926053703681[0;39m ==> Parameters: 
2022-07-14 16:33:02.030 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703926053703682[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:02.031 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703926053703682[0;39m ==> Parameters: 
2022-07-14 16:33:02.031 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703926053703680[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:02.031 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703926053703681[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:02.031 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703926053703680[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:02.031 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703926053703681[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:02.031 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:02.032 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703926053703680[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:02.032 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:02.032 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703926053703681[0;39m <==        Row: 2022-07-14, 2705, 61, -38, -53
2022-07-14 16:33:02.032 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:02.032 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703926053703680[0;39m <==      Total: 2
2022-07-14 16:33:02.032 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703926053703681[0;39m <==      Total: 2
2022-07-14 16:33:02.032 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:02.032 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:02.032 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703926053703680[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:02.032 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703926053703681[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2705,"viewIncrease":-38,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:02.033 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703926053703680[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:02.033 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:02.033 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703926053703681[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:02.033 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:02.033 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:02.033 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:02.033 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:02.034 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:02.034 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:02.035 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:02.035 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:02.035 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:02.035 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:02.036 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703926053703682[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:02.036 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703926053703682[0;39m <==      Total: 16
2022-07-14 16:33:02.037 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703926053703682[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:02.037 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703926053703682[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:33:03.897 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703933892857856[0;39m ------------- 开始 -------------
2022-07-14 16:33:03.898 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703933892857856[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:33:03.898 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703933892857856[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:33:03.898 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703933892857856[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:03.898 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703933892857856[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2022-07-14 16:33:03.899 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703933892857856[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:33:03.900 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703933892857856[0;39m ==> Parameters: 201(Long)
2022-07-14 16:33:03.900 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703933892857856[0;39m <==    Columns: count(0)
2022-07-14 16:33:03.901 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202703933892857856[0;39m <==        Row: 1
2022-07-14 16:33:03.901 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202703933892857856[0;39m <==      Total: 1
2022-07-14 16:33:03.902 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703933892857856[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:33:03.902 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703933892857856[0;39m ==> Parameters: 201(Long), 1000(Integer)
2022-07-14 16:33:03.903 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703933892857856[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:33:03.903 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202703933892857856[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 58, 11
2022-07-14 16:33:03.903 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202703933892857856[0;39m <==      Total: 1
2022-07-14 16:33:03.903 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202703933892857856[0;39m 总行数：1
2022-07-14 16:33:03.904 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202703933892857856[0;39m 总页数：1
2022-07-14 16:33:03.904 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703933892857856[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":58,"voteCount":11}],"total":1},"success":true}
2022-07-14 16:33:03.904 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703933892857856[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:33:04.484 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703936354914304[0;39m ------------- 开始 -------------
2022-07-14 16:33:04.484 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703936354914304[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2022-07-14 16:33:04.485 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703936354914304[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:33:04.485 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703936354914304[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:04.485 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703936354914304[0;39m 请求参数: [1]
2022-07-14 16:33:04.486 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703936354914304[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:33:04.487 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703936354914304[0;39m ==> Parameters: 1(Long)
2022-07-14 16:33:04.487 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703936354914304[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:33:04.488 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703936354914304[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 31, 4
2022-07-14 16:33:04.488 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703936354914304[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 10, 3
2022-07-14 16:33:04.488 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703936354914304[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 6, 1
2022-07-14 16:33:04.488 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703936354914304[0;39m <==        Row: 6, 1, 5, 文档2.2.1, 1, 4, 1
2022-07-14 16:33:04.488 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703936354914304[0;39m <==        Row: 3, 1, 0, 文档2, 2, 4, 1
2022-07-14 16:33:04.489 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202703936354914304[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 4, 1
2022-07-14 16:33:04.489 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202703936354914304[0;39m <==      Total: 6
2022-07-14 16:33:04.489 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703936354914304[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":31,"voteCount":4},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":1,"id":6,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":4,"voteCount":1},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":4,"voteCount":1}],"success":true}
2022-07-14 16:33:04.489 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703936354914304[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:04.502 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703936430411776[0;39m ------------- 开始 -------------
2022-07-14 16:33:04.502 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703936430411776[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/1 GET
2022-07-14 16:33:04.503 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703936430411776[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:33:04.503 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703936430411776[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:04.503 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703936430411776[0;39m 请求参数: [1]
2022-07-14 16:33:04.503 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703936430411776[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:33:04.504 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703936430411776[0;39m ==> Parameters: 1(Long)
2022-07-14 16:33:04.504 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703936430411776[0;39m <==    Columns: id, content
2022-07-14 16:33:04.505 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202703936430411776[0;39m <==        Row: 1, <<BLOB>>
2022-07-14 16:33:04.505 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703936430411776[0;39m <==      Total: 1
2022-07-14 16:33:04.505 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703936430411776[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:33:04.506 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703936430411776[0;39m ==> Parameters: 1(Long)
2022-07-14 16:33:04.528 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703936430411776[0;39m <==    Updates: 1
2022-07-14 16:33:04.529 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703936430411776[0;39m 返回结果: {"content":"<blockquote><h1 id=\"japt6\"><font face=\"仿宋\" color=\"#7b5ba1\"><b><u>33332222</u></b></font></h1><p><font face=\"仿宋\" color=\"#c24f4a\"><b style=\"background-color: rgb(139, 170, 74);\">2022.7.4</b></font></p><img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png\" alt=\"[[舔屏]]\"><div><font face=\"仿宋\" color=\"#7b5ba1\"><b></b></font></div></blockquote>","success":true}
2022-07-14 16:33:04.529 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703936430411776[0;39m ------------- 结束 耗时：27 ms -------------
2022-07-14 16:33:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703938548535296[0;39m 生成今日电子书快照开始
2022-07-14 16:33:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703938548535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703938548535296[0;39m ==> Parameters: 
2022-07-14 16:33:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703938548535296[0;39m <==    Updates: 0
2022-07-14 16:33:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703938548535296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:33:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202703938565312512[0;39m 更新电子书下的文档数据开始
2022-07-14 16:33:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703938565312512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:33:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703938565312512[0;39m ==> Parameters: 
2022-07-14 16:33:05.034 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202703938565312512[0;39m <==    Updates: 3
2022-07-14 16:33:05.034 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202703938565312512[0;39m 更新电子书下的文档数据结束，耗时：23 毫秒
2022-07-14 16:33:05.103 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703938951188480[0;39m ------------- 开始 -------------
2022-07-14 16:33:05.104 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703938951188480[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/4 GET
2022-07-14 16:33:05.104 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703938951188480[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:33:05.104 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703938951188480[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:05.104 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703938951188480[0;39m 请求参数: [4]
2022-07-14 16:33:05.104 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703938951188480[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:33:05.104 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703938951188480[0;39m ==> Parameters: 4(Long)
2022-07-14 16:33:05.105 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202703938951188480[0;39m <==      Total: 0
2022-07-14 16:33:05.105 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703938951188480[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:33:05.106 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703938951188480[0;39m ==> Parameters: 4(Long)
2022-07-14 16:33:05.127 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202703938951188480[0;39m <==    Updates: 1
2022-07-14 16:33:05.127 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703938951188480[0;39m 返回结果: {"content":"","success":true}
2022-07-14 16:33:05.127 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703938951188480[0;39m ------------- 结束 耗时：24 ms -------------
2022-07-14 16:33:05.946 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703942486986752[0;39m ------------- 开始 -------------
2022-07-14 16:33:05.946 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703942486986752[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/4 GET
2022-07-14 16:33:05.947 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703942486986752[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 16:33:05.947 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703942486986752[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:05.947 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703942486986752[0;39m 请求参数: [4]
2022-07-14 16:33:05.983 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202703942486986752[0;39m key不存在，放入：DOC_VOTE_4_127.0.0.1，过期 86400 秒
2022-07-14 16:33:06.018 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202703942486986752[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 16:33:06.019 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202703942486986752[0;39m ==> Parameters: 4(Long)
2022-07-14 16:33:06.042 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202703942486986752[0;39m <==    Updates: 1
2022-07-14 16:33:06.043 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202703942486986752[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 16:33:06.043 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202703942486986752[0;39m ==> Parameters: 4(Long)
2022-07-14 16:33:06.044 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202703942486986752[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:33:06.044 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202703942486986752[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 7, 2
2022-07-14 16:33:06.044 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202703942486986752[0;39m <==      Total: 1
2022-07-14 16:33:06.045 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703942486986752[0;39m 返回结果: {"success":true}
2022-07-14 16:33:06.045 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703942486986752[0;39m ------------- 结束 耗时：99 ms -------------
2022-07-14 16:33:06.045 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202703942486986752[0;39m 推送消息：9b0EUx6Piq，内容：【文档2.1】被点赞
2022-07-14 16:33:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703959520055296[0;39m 生成今日电子书快照开始
2022-07-14 16:33:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703959520055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703959520055296[0;39m ==> Parameters: 
2022-07-14 16:33:10.045 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703959520055296[0;39m <==    Updates: 0
2022-07-14 16:33:10.045 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703959520055296[0;39m 生成今日电子书快照结束，耗时：38 毫秒
2022-07-14 16:33:12.189 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703968672026624[0;39m ------------- 开始 -------------
2022-07-14 16:33:12.189 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703968672026625[0;39m ------------- 开始 -------------
2022-07-14 16:33:12.189 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703968672026626[0;39m ------------- 开始 -------------
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703968672026624[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703968672026625[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703968672026626[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703968672026624[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703968672026625[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703968672026624[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703968672026626[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703968672026625[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703968672026626[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703968672026624[0;39m 请求参数: []
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703968672026626[0;39m 请求参数: []
2022-07-14 16:33:12.190 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703968672026625[0;39m 请求参数: []
2022-07-14 16:33:12.191 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703968672026626[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:12.191 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703968672026624[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:12.191 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703968672026625[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:12.191 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703968672026624[0;39m ==> Parameters: 
2022-07-14 16:33:12.191 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703968672026626[0;39m ==> Parameters: 
2022-07-14 16:33:12.191 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703968672026625[0;39m ==> Parameters: 
2022-07-14 16:33:12.192 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703968672026624[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:12.192 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:12.192 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703968672026625[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:12.192 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:12.192 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703968672026624[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:12.192 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703968672026625[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:12.193 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:12.193 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703968672026624[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:12.193 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703968672026625[0;39m <==        Row: 2022-07-14, 2707, 61, -36, -53
2022-07-14 16:33:12.193 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:12.193 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703968672026624[0;39m <==      Total: 2
2022-07-14 16:33:12.193 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703968672026625[0;39m <==      Total: 2
2022-07-14 16:33:12.193 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:12.193 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703968672026624[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:12.193 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703968672026625[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2707,"viewIncrease":-36,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:12.193 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:12.194 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703968672026624[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:12.194 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703968672026625[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:12.194 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:12.194 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:12.194 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:12.194 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:12.195 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:12.195 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:12.195 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:12.196 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:12.196 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:12.197 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:12.197 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703968672026626[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:12.197 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703968672026626[0;39m <==      Total: 16
2022-07-14 16:33:12.199 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703968672026626[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:12.199 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703968672026626[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:33:13.848 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703933892857856[0;39m 连接关闭，token：9b0EUx6Piq，session id：a！当前连接数：0
2022-07-14 16:33:14.459 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703936354914304[0;39m 有新连接：token：VF2RgmPOMq，session id：b，当前连接数：1
2022-07-14 16:33:14.512 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703978415394816[0;39m ------------- 开始 -------------
2022-07-14 16:33:14.512 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703978415394817[0;39m ------------- 开始 -------------
2022-07-14 16:33:14.512 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703978415394816[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:14.512 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703978415394817[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703978415394816[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703978419589120[0;39m ------------- 开始 -------------
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703978415394817[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703978415394816[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703978419589120[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703978415394817[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703978415394816[0;39m 请求参数: []
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703978419589120[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703978415394817[0;39m 请求参数: []
2022-07-14 16:33:14.513 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703978419589120[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:14.514 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703978419589120[0;39m 请求参数: []
2022-07-14 16:33:14.514 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703978415394816[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:14.514 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703978415394817[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:14.514 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703978419589120[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:14.514 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703978415394817[0;39m ==> Parameters: 
2022-07-14 16:33:14.514 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703978415394816[0;39m ==> Parameters: 
2022-07-14 16:33:14.514 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703978419589120[0;39m ==> Parameters: 
2022-07-14 16:33:14.515 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703978415394816[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:14.515 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:14.515 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703978415394817[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:14.515 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:14.515 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703978415394816[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:14.515 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703978415394817[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:14.516 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:14.516 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:14.516 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703978415394816[0;39m <==        Row: 2022-07-14, 2707, 61, -36, -53
2022-07-14 16:33:14.516 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:14.516 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703978415394817[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:14.516 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703978415394816[0;39m <==      Total: 2
2022-07-14 16:33:14.516 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:14.516 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703978415394817[0;39m <==      Total: 2
2022-07-14 16:33:14.516 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:14.517 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703978415394816[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2707,"viewIncrease":-36,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:14.517 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:14.517 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703978415394817[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:14.517 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703978415394816[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:14.517 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:14.517 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703978415394817[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:14.517 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:14.517 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:14.517 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:14.518 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:14.518 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:14.518 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:14.519 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:14.519 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703978419589120[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:14.519 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703978419589120[0;39m <==      Total: 16
2022-07-14 16:33:14.520 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703978419589120[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:14.520 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703978419589120[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:33:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202703980470603776[0;39m 生成今日电子书快照开始
2022-07-14 16:33:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703980470603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703980470603776[0;39m ==> Parameters: 
2022-07-14 16:33:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202703980470603776[0;39m <==    Updates: 0
2022-07-14 16:33:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202703980470603776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:33:16.652 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703912019562496[0;39m 连接关闭，token：VF2RgmPOMq，session id：b！当前连接数：0
2022-07-14 16:33:17.071 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703942486986752[0;39m 有新连接：token：ntCCMS7C8J，session id：c，当前连接数：1
2022-07-14 16:33:17.126 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703989379305472[0;39m ------------- 开始 -------------
2022-07-14 16:33:17.127 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703989379305472[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:17.127 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703989379305472[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:17.127 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703989379305472[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:17.128 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703989379305472[0;39m 请求参数: []
2022-07-14 16:33:17.128 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703989387694080[0;39m ------------- 开始 -------------
2022-07-14 16:33:17.128 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202703989387694081[0;39m ------------- 开始 -------------
2022-07-14 16:33:17.128 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703989387694080[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:17.128 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202703989387694081[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:17.128 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703989387694080[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:17.129 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202703989387694081[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:17.129 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703989387694080[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:17.129 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703989379305472[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:17.129 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703989387694080[0;39m 请求参数: []
2022-07-14 16:33:17.129 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202703989387694081[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:17.129 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202703989387694081[0;39m 请求参数: []
2022-07-14 16:33:17.129 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703989379305472[0;39m ==> Parameters: 
2022-07-14 16:33:17.130 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703989387694081[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:17.130 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703989379305472[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:17.130 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703989387694080[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:17.130 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703989387694081[0;39m ==> Parameters: 
2022-07-14 16:33:17.130 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703989379305472[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:17.131 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703989387694080[0;39m ==> Parameters: 
2022-07-14 16:33:17.131 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202703989379305472[0;39m <==        Row: 2022-07-14, 2707, 61, -36, -53
2022-07-14 16:33:17.131 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703989387694081[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:17.131 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202703989379305472[0;39m <==      Total: 2
2022-07-14 16:33:17.131 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:17.132 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703989387694081[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:17.132 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:17.132 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703989379305472[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2707,"viewIncrease":-36,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:17.132 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202703989387694081[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:17.132 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703989379305472[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:33:17.132 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:17.132 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:17.132 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202703989387694081[0;39m <==      Total: 2
2022-07-14 16:33:17.133 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:17.133 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703989387694081[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:17.133 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:17.133 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703989387694081[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:17.133 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:17.133 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:17.134 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:17.134 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:17.134 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:17.135 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:17.135 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:17.135 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:17.135 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:17.135 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:17.136 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202703989387694080[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:17.136 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202703989387694080[0;39m <==      Total: 16
2022-07-14 16:33:17.137 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202703989387694080[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:17.137 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202703989387694080[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:33:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704001488261120[0;39m 生成今日电子书快照开始
2022-07-14 16:33:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704001488261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704001488261120[0;39m ==> Parameters: 
2022-07-14 16:33:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704001488261120[0;39m <==    Updates: 0
2022-07-14 16:33:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704001488261120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:33:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704022413643776[0;39m 生成今日电子书快照开始
2022-07-14 16:33:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704022413643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704022413643776[0;39m ==> Parameters: 
2022-07-14 16:33:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704022413643776[0;39m <==    Updates: 0
2022-07-14 16:33:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704022413643776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:33:26.548 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703933892857856[0;39m 连接关闭，token：ntCCMS7C8J，session id：c！当前连接数：0
2022-07-14 16:33:26.892 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703936354914304[0;39m 有新连接：token：uG9CRV3arX，session id：d，当前连接数：1
2022-07-14 16:33:26.934 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704030517039105[0;39m ------------- 开始 -------------
2022-07-14 16:33:26.934 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704030517039104[0;39m ------------- 开始 -------------
2022-07-14 16:33:26.934 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704030517039106[0;39m ------------- 开始 -------------
2022-07-14 16:33:26.934 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704030517039105[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:26.934 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704030517039106[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:26.934 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704030517039104[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:26.934 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704030517039105[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:26.934 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704030517039106[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:26.934 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704030517039104[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:26.935 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704030517039106[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:26.935 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704030517039104[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:26.935 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704030517039105[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:26.935 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704030517039106[0;39m 请求参数: []
2022-07-14 16:33:26.935 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704030517039104[0;39m 请求参数: []
2022-07-14 16:33:26.935 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704030517039105[0;39m 请求参数: []
2022-07-14 16:33:26.936 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704030517039106[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:26.936 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704030517039105[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:26.936 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704030517039104[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:26.936 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704030517039106[0;39m ==> Parameters: 
2022-07-14 16:33:26.936 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704030517039105[0;39m ==> Parameters: 
2022-07-14 16:33:26.936 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704030517039104[0;39m ==> Parameters: 
2022-07-14 16:33:26.937 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704030517039105[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:26.937 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704030517039106[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:26.937 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:26.938 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704030517039105[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:26.938 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704030517039106[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:26.938 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:26.938 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:26.938 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704030517039105[0;39m <==        Row: 2022-07-14, 2707, 61, -36, -53
2022-07-14 16:33:26.939 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704030517039106[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:26.939 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:26.939 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704030517039105[0;39m <==      Total: 2
2022-07-14 16:33:26.939 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:26.939 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704030517039106[0;39m <==      Total: 2
2022-07-14 16:33:26.939 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704030517039106[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:26.939 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704030517039105[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2707,"viewIncrease":-36,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:26.939 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:26.940 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704030517039106[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:33:26.940 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704030517039105[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:33:26.940 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:26.940 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:26.940 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:26.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:26.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:26.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:26.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:26.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:26.943 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:26.944 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:26.944 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704030517039104[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:26.944 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704030517039104[0;39m <==      Total: 16
2022-07-14 16:33:26.945 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704030517039104[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:26.945 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704030517039104[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 16:33:29.732 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703912019562496[0;39m 连接关闭，token：uG9CRV3arX，session id：d！当前连接数：0
2022-07-14 16:33:29.901 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703942486986752[0;39m 有新连接：token：XDwdUIZBn7，session id：e，当前连接数：1
2022-07-14 16:33:29.937 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704043112534016[0;39m ------------- 开始 -------------
2022-07-14 16:33:29.937 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704043112534017[0;39m ------------- 开始 -------------
2022-07-14 16:33:29.937 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704043112534016[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704043116728320[0;39m ------------- 开始 -------------
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704043112534017[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704043112534016[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704043116728320[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704043116728320[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704043112534016[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704043112534017[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704043116728320[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704043112534016[0;39m 请求参数: []
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704043112534017[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704043116728320[0;39m 请求参数: []
2022-07-14 16:33:29.938 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704043112534017[0;39m 请求参数: []
2022-07-14 16:33:29.939 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704043112534016[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:29.939 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704043116728320[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:29.939 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704043112534017[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:29.939 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704043112534016[0;39m ==> Parameters: 
2022-07-14 16:33:29.939 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704043116728320[0;39m ==> Parameters: 
2022-07-14 16:33:29.939 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704043112534017[0;39m ==> Parameters: 
2022-07-14 16:33:29.940 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704043112534016[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:29.940 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704043112534017[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:29.940 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:29.940 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:29.940 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704043112534017[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:29.940 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704043112534016[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:29.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:29.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:29.941 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704043112534017[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:29.941 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704043112534016[0;39m <==        Row: 2022-07-14, 2707, 61, -36, -53
2022-07-14 16:33:29.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:29.941 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704043112534017[0;39m <==      Total: 2
2022-07-14 16:33:29.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:29.941 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704043112534016[0;39m <==      Total: 2
2022-07-14 16:33:29.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:29.941 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704043112534017[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:29.942 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704043112534016[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2707,"viewIncrease":-36,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:29.942 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704043112534017[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:29.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:29.942 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704043112534016[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:29.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:29.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:29.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:29.943 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:29.943 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:29.943 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:29.943 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:29.944 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:29.944 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704043116728320[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:29.944 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704043116728320[0;39m <==      Total: 16
2022-07-14 16:33:29.945 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704043116728320[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:29.945 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704043116728320[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:33:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704043414523904[0;39m 生成今日电子书快照开始
2022-07-14 16:33:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704043414523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704043414523904[0;39m ==> Parameters: 
2022-07-14 16:33:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704043414523904[0;39m <==    Updates: 0
2022-07-14 16:33:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704043414523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:33:31.238 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703933892857856[0;39m 连接关闭，token：XDwdUIZBn7，session id：e！当前连接数：0
2022-07-14 16:33:31.404 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703936354914304[0;39m 有新连接：token：IDc4z2edyV，session id：f，当前连接数：1
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704049441738752[0;39m ------------- 开始 -------------
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704049441738753[0;39m ------------- 开始 -------------
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704049441738752[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704049441738753[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704049441738752[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704049441738754[0;39m ------------- 开始 -------------
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704049441738753[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704049441738752[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704049441738754[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704049441738753[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:31.446 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704049441738752[0;39m 请求参数: []
2022-07-14 16:33:31.447 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704049441738754[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:31.447 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704049441738753[0;39m 请求参数: []
2022-07-14 16:33:31.447 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704049441738754[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:31.447 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704049441738754[0;39m 请求参数: []
2022-07-14 16:33:31.447 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704049441738752[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:31.447 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704049441738753[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:31.447 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704049441738752[0;39m ==> Parameters: 
2022-07-14 16:33:31.447 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704049441738754[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:31.448 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704049441738753[0;39m ==> Parameters: 
2022-07-14 16:33:31.448 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704049441738754[0;39m ==> Parameters: 
2022-07-14 16:33:31.448 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704049441738753[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:31.448 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:31.448 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704049441738752[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:31.449 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:31.449 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704049441738753[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:31.449 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704049441738752[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:31.449 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:31.449 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704049441738753[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:31.449 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:31.449 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704049441738752[0;39m <==        Row: 2022-07-14, 2707, 61, -36, -53
2022-07-14 16:33:31.449 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704049441738753[0;39m <==      Total: 2
2022-07-14 16:33:31.449 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:31.449 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704049441738752[0;39m <==      Total: 2
2022-07-14 16:33:31.449 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:31.450 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704049441738753[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:31.450 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704049441738752[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2707,"viewIncrease":-36,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:31.450 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704049441738753[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:33:31.450 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:31.450 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704049441738752[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:33:31.450 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:31.450 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:31.451 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:31.451 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:31.451 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:31.452 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:31.452 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:31.452 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:31.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:31.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704049441738754[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:31.453 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704049441738754[0;39m <==      Total: 16
2022-07-14 16:33:31.453 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704049441738754[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:31.454 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704049441738754[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:33:32.000 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703912019562496[0;39m 连接关闭，token：IDc4z2edyV，session id：f！当前连接数：0
2022-07-14 16:33:32.165 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703942486986752[0;39m 有新连接：token：mfecqnZebK，session id：10，当前连接数：1
2022-07-14 16:33:32.206 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704052629409792[0;39m ------------- 开始 -------------
2022-07-14 16:33:32.206 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704052629409793[0;39m ------------- 开始 -------------
2022-07-14 16:33:32.206 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704052629409793[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:32.206 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704052629409792[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:32.206 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704052629409793[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:32.206 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704052629409792[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:32.207 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704052633604096[0;39m ------------- 开始 -------------
2022-07-14 16:33:32.207 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704052629409793[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:32.207 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704052629409792[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:32.207 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704052633604096[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:32.207 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704052629409792[0;39m 请求参数: []
2022-07-14 16:33:32.207 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704052629409793[0;39m 请求参数: []
2022-07-14 16:33:32.207 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704052633604096[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:32.207 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704052633604096[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:32.208 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704052633604096[0;39m 请求参数: []
2022-07-14 16:33:32.208 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704052629409792[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:32.208 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704052629409793[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:32.208 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704052629409793[0;39m ==> Parameters: 
2022-07-14 16:33:32.208 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704052629409792[0;39m ==> Parameters: 
2022-07-14 16:33:32.209 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704052633604096[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:32.209 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704052633604096[0;39m ==> Parameters: 
2022-07-14 16:33:32.209 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704052629409793[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:32.209 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704052629409792[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:32.210 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704052629409792[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:32.210 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704052629409793[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:32.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:32.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:32.210 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704052629409793[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:32.210 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704052629409792[0;39m <==        Row: 2022-07-14, 2707, 61, -36, -53
2022-07-14 16:33:32.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:32.210 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704052629409793[0;39m <==      Total: 2
2022-07-14 16:33:32.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:32.210 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704052629409792[0;39m <==      Total: 2
2022-07-14 16:33:32.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:32.211 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704052629409793[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:32.211 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704052629409792[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2707,"viewIncrease":-36,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:32.211 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704052629409793[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:32.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:32.211 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704052629409792[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:32.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:32.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:32.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:32.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:32.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:32.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:32.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:32.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:32.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:32.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:32.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704052633604096[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:32.214 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704052633604096[0;39m <==      Total: 16
2022-07-14 16:33:32.215 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704052633604096[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:32.215 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704052633604096[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:33:32.908 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703933892857856[0;39m 连接关闭，token：mfecqnZebK，session id：10！当前连接数：0
2022-07-14 16:33:33.072 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703936354914304[0;39m 有新连接：token：qXOnEZvUyB，session id：11，当前连接数：1
2022-07-14 16:33:33.113 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704056433643520[0;39m ------------- 开始 -------------
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704056437837824[0;39m ------------- 开始 -------------
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704056433643520[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704056437837824[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704056433643520[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704056437837825[0;39m ------------- 开始 -------------
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704056437837824[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704056433643520[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704056437837825[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704056437837824[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704056437837825[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:33.114 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704056433643520[0;39m 请求参数: []
2022-07-14 16:33:33.115 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704056437837824[0;39m 请求参数: []
2022-07-14 16:33:33.115 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704056437837825[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:33.115 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704056437837825[0;39m 请求参数: []
2022-07-14 16:33:33.115 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704056437837824[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:33.115 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704056433643520[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:33.115 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704056437837824[0;39m ==> Parameters: 
2022-07-14 16:33:33.115 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704056437837825[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:33.115 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704056433643520[0;39m ==> Parameters: 
2022-07-14 16:33:33.116 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704056437837825[0;39m ==> Parameters: 
2022-07-14 16:33:33.116 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704056433643520[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:33.116 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704056437837824[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:33.116 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:33.116 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704056433643520[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:33.116 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704056437837824[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:33.116 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:33.117 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704056433643520[0;39m <==        Row: 2022-07-14, 2707, 61, -36, -53
2022-07-14 16:33:33.117 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:33.117 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704056437837824[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:33.117 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704056433643520[0;39m <==      Total: 2
2022-07-14 16:33:33.117 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:33.117 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704056437837824[0;39m <==      Total: 2
2022-07-14 16:33:33.117 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704056433643520[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2707,"viewIncrease":-36,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:33.117 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704056433643520[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:33:33.117 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:33.118 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704056437837824[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:33.118 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:33.118 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704056437837824[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:33:33.118 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:33.118 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:33.118 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:33.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:33.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:33.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:33.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:33.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:33.120 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:33.120 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:33.120 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704056437837825[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:33.120 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704056437837825[0;39m <==      Total: 16
2022-07-14 16:33:33.121 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704056437837825[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:33.121 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704056437837825[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:33:34.003 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703912019562496[0;39m 连接关闭，token：qXOnEZvUyB，session id：11！当前连接数：0
2022-07-14 16:33:34.171 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703942486986752[0;39m 有新连接：token：hBKJGnpUhn，session id：12，当前连接数：1
2022-07-14 16:33:34.210 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704061034795008[0;39m ------------- 开始 -------------
2022-07-14 16:33:34.210 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704061034795009[0;39m ------------- 开始 -------------
2022-07-14 16:33:34.211 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704061034795008[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:34.211 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704061034795009[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:34.211 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704061034795008[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:34.211 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704061034795009[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:34.211 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704061034795008[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:34.211 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704061038989312[0;39m ------------- 开始 -------------
2022-07-14 16:33:34.211 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704061034795009[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:34.211 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704061034795008[0;39m 请求参数: []
2022-07-14 16:33:34.211 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704061038989312[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:34.212 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704061034795009[0;39m 请求参数: []
2022-07-14 16:33:34.212 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704061038989312[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:34.212 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704061038989312[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:34.212 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704061038989312[0;39m 请求参数: []
2022-07-14 16:33:34.212 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704061034795008[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:34.212 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704061034795009[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:34.212 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704061034795008[0;39m ==> Parameters: 
2022-07-14 16:33:34.213 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704061034795009[0;39m ==> Parameters: 
2022-07-14 16:33:34.213 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704061038989312[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:34.213 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704061038989312[0;39m ==> Parameters: 
2022-07-14 16:33:34.213 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704061034795008[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:34.213 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704061034795009[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:34.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:34.214 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704061034795008[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:34.214 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704061034795009[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:34.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:34.214 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704061034795008[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:34.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:34.214 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704061034795009[0;39m <==        Row: 2022-07-14, 2707, 61, -36, -53
2022-07-14 16:33:34.214 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704061034795008[0;39m <==      Total: 2
2022-07-14 16:33:34.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:34.215 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704061034795009[0;39m <==      Total: 2
2022-07-14 16:33:34.215 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704061034795008[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:34.215 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:34.215 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704061034795008[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:34.215 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704061034795009[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2707,"viewIncrease":-36,"voteCount":61,"voteIncrease":-53}],"success":true}
2022-07-14 16:33:34.215 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:34.215 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704061034795009[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:34.215 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:34.216 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:34.216 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:34.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:34.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:34.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:34.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:34.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:34.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:34.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:34.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704061038989312[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:34.218 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704061038989312[0;39m <==      Total: 16
2022-07-14 16:33:34.219 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704061038989312[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:34.219 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704061038989312[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:33:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202704064373460992[0;39m 更新电子书下的文档数据开始
2022-07-14 16:33:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704064373460992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:33:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704064373460992[0;39m ==> Parameters: 
2022-07-14 16:33:35.072 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704064373460992[0;39m <==    Updates: 3
2022-07-14 16:33:35.072 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202704064373460992[0;39m 更新电子书下的文档数据结束，耗时：66 毫秒
2022-07-14 16:33:35.072 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704064650285056[0;39m 生成今日电子书快照开始
2022-07-14 16:33:35.072 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704064650285056[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:35.073 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704064650285056[0;39m ==> Parameters: 
2022-07-14 16:33:35.104 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704064650285056[0;39m <==    Updates: 0
2022-07-14 16:33:35.104 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704064650285056[0;39m 生成今日电子书快照结束，耗时：32 毫秒
2022-07-14 16:33:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704085349175296[0;39m 生成今日电子书快照开始
2022-07-14 16:33:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704085349175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704085349175296[0;39m ==> Parameters: 
2022-07-14 16:33:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704085349175296[0;39m <==    Updates: 0
2022-07-14 16:33:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704085349175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:33:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704106308112384[0;39m 生成今日电子书快照开始
2022-07-14 16:33:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704106308112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704106308112384[0;39m ==> Parameters: 
2022-07-14 16:33:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704106308112384[0;39m <==    Updates: 0
2022-07-14 16:33:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704106308112384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:33:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704127292215296[0;39m 生成今日电子书快照开始
2022-07-14 16:33:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704127292215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704127292215296[0;39m ==> Parameters: 
2022-07-14 16:33:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704127292215296[0;39m <==    Updates: 0
2022-07-14 16:33:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704127292215296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:33:52.514 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202703933892857856[0;39m 连接关闭，token：hBKJGnpUhn，session id：12！当前连接数：0
2022-07-14 16:33:52.687 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202703936354914304[0;39m 有新连接：token：RcpVUUqJd5，session id：13，当前连接数：1
2022-07-14 16:33:52.723 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704138683944960[0;39m ------------- 开始 -------------
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704138688139264[0;39m ------------- 开始 -------------
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704138683944960[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202704138688139265[0;39m ------------- 开始 -------------
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704138688139264[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202704138688139265[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704138683944960[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704138688139264[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704138683944960[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202704138688139265[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704138688139264[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202704138688139265[0;39m 远程地址: 127.0.0.1
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704138683944960[0;39m 请求参数: []
2022-07-14 16:33:52.724 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704138688139264[0;39m 请求参数: []
2022-07-14 16:33:52.725 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202704138688139265[0;39m 请求参数: []
2022-07-14 16:33:52.725 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704138688139264[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:33:52.725 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704138683944960[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:52.725 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704138688139265[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:33:52.725 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704138688139264[0;39m ==> Parameters: 
2022-07-14 16:33:52.725 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704138683944960[0;39m ==> Parameters: 
2022-07-14 16:33:52.726 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704138688139265[0;39m ==> Parameters: 
2022-07-14 16:33:52.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:33:52.726 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704138683944960[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:33:52.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:33:52.727 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704138683944960[0;39m <==        Row: 2022-07-13, 2743, 114, 0, 0
2022-07-14 16:33:52.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:33:52.727 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704138688139265[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 16:33:52.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:33:52.727 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202704138683944960[0;39m <==        Row: 2022-07-14, 2708, 62, -35, -52
2022-07-14 16:33:52.727 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704138688139265[0;39m <==        Row: 2022-07-12, 2743, 114
2022-07-14 16:33:52.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:33:52.728 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202704138683944960[0;39m <==      Total: 2
2022-07-14 16:33:52.728 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:33:52.728 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202704138688139265[0;39m <==        Row: 2022-07-13, 0, 0
2022-07-14 16:33:52.728 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:33:52.728 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704138683944960[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":2743,"viewIncrease":0,"voteCount":114,"voteIncrease":0},{"date":1657728000000,"viewCount":2708,"viewIncrease":-35,"voteCount":62,"voteIncrease":-52}],"success":true}
2022-07-14 16:33:52.728 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202704138688139265[0;39m <==      Total: 2
2022-07-14 16:33:52.728 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:33:52.728 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704138683944960[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:52.728 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704138688139265[0;39m 返回结果: {"content":[{"date":1657555200000,"viewCount":0,"viewIncrease":2743,"voteCount":0,"voteIncrease":114},{"date":1657641600000,"viewCount":0,"viewIncrease":0,"voteCount":0,"voteIncrease":0}],"success":true}
2022-07-14 16:33:52.728 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:33:52.729 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704138688139265[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:33:52.729 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:33:52.729 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:33:52.729 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:33:52.730 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:33:52.730 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:33:52.730 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:33:52.731 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:33:52.731 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202704138688139264[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:33:52.731 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202704138688139264[0;39m <==      Total: 16
2022-07-14 16:33:52.732 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202704138688139264[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:33:52.732 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202704138688139264[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:33:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704148280512512[0;39m 生成今日电子书快照开始
2022-07-14 16:33:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704148280512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:33:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704148280512512[0;39m ==> Parameters: 
2022-07-14 16:33:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704148280512512[0;39m <==    Updates: 0
2022-07-14 16:33:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704148280512512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:34:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704169273004032[0;39m 生成今日电子书快照开始
2022-07-14 16:34:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704169273004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704169273004032[0;39m ==> Parameters: 
2022-07-14 16:34:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704169273004032[0;39m <==    Updates: 0
2022-07-14 16:34:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704169273004032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:34:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704190189998080[0;39m 生成今日电子书快照开始
2022-07-14 16:34:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704190189998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704190189998080[0;39m ==> Parameters: 
2022-07-14 16:34:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704190189998080[0;39m <==    Updates: 0
2022-07-14 16:34:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704190189998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:34:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202704190198386688[0;39m 更新电子书下的文档数据开始
2022-07-14 16:34:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704190198386688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:34:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704190198386688[0;39m ==> Parameters: 
2022-07-14 16:34:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704190198386688[0;39m <==    Updates: 3
2022-07-14 16:34:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202704190198386688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:34:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704211153129472[0;39m 生成今日电子书快照开始
2022-07-14 16:34:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704211153129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704211153129472[0;39m ==> Parameters: 
2022-07-14 16:34:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704211153129472[0;39m <==    Updates: 0
2022-07-14 16:34:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704211153129472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:34:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704232170786816[0;39m 生成今日电子书快照开始
2022-07-14 16:34:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704232170786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704232170786816[0;39m ==> Parameters: 
2022-07-14 16:34:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704232170786816[0;39m <==    Updates: 0
2022-07-14 16:34:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704232170786816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:34:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704253125529600[0;39m 生成今日电子书快照开始
2022-07-14 16:34:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704253125529600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704253125529600[0;39m ==> Parameters: 
2022-07-14 16:34:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704253125529600[0;39m <==    Updates: 0
2022-07-14 16:34:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704253125529600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:34:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704274092855296[0;39m 生成今日电子书快照开始
2022-07-14 16:34:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704274092855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704274092855296[0;39m ==> Parameters: 
2022-07-14 16:34:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704274092855296[0;39m <==    Updates: 0
2022-07-14 16:34:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704274092855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:34:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704295097929728[0;39m 生成今日电子书快照开始
2022-07-14 16:34:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704295097929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704295097929728[0;39m ==> Parameters: 
2022-07-14 16:34:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704295097929728[0;39m <==    Updates: 0
2022-07-14 16:34:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704295097929728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:34:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202704316014923776[0;39m 更新电子书下的文档数据开始
2022-07-14 16:34:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704316014923776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:34:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704316014923776[0;39m ==> Parameters: 
2022-07-14 16:34:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704316014923776[0;39m <==    Updates: 3
2022-07-14 16:34:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202704316014923776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:34:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704316023312384[0;39m 生成今日电子书快照开始
2022-07-14 16:34:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704316023312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704316023312384[0;39m ==> Parameters: 
2022-07-14 16:34:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704316023312384[0;39m <==    Updates: 0
2022-07-14 16:34:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704316023312384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:34:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704337019998208[0;39m 生成今日电子书快照开始
2022-07-14 16:34:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704337019998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704337019998208[0;39m ==> Parameters: 
2022-07-14 16:34:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704337019998208[0;39m <==    Updates: 0
2022-07-14 16:34:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704337019998208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:34:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704357962158080[0;39m 生成今日电子书快照开始
2022-07-14 16:34:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704357962158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704357962158080[0;39m ==> Parameters: 
2022-07-14 16:34:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704357962158080[0;39m <==    Updates: 0
2022-07-14 16:34:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704357962158080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:34:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704378979815424[0;39m 生成今日电子书快照开始
2022-07-14 16:34:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704378979815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704378979815424[0;39m ==> Parameters: 
2022-07-14 16:34:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704378979815424[0;39m <==    Updates: 0
2022-07-14 16:34:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704378979815424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:34:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704399913586688[0;39m 生成今日电子书快照开始
2022-07-14 16:34:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704399913586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:34:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704399913586688[0;39m ==> Parameters: 
2022-07-14 16:34:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704399913586688[0;39m <==    Updates: 0
2022-07-14 16:34:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704399913586688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:35:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704420885106688[0;39m 生成今日电子书快照开始
2022-07-14 16:35:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704420885106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704420885106688[0;39m ==> Parameters: 
2022-07-14 16:35:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704420885106688[0;39m <==    Updates: 0
2022-07-14 16:35:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704420885106688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:35:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704441865015296[0;39m 生成今日电子书快照开始
2022-07-14 16:35:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704441865015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704441865015296[0;39m ==> Parameters: 
2022-07-14 16:35:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704441865015296[0;39m <==    Updates: 0
2022-07-14 16:35:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704441865015296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:35:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202704441877598208[0;39m 更新电子书下的文档数据开始
2022-07-14 16:35:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704441877598208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:35:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704441877598208[0;39m ==> Parameters: 
2022-07-14 16:35:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704441877598208[0;39m <==    Updates: 3
2022-07-14 16:35:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202704441877598208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:35:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704462853312512[0;39m 生成今日电子书快照开始
2022-07-14 16:35:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704462853312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704462853312512[0;39m ==> Parameters: 
2022-07-14 16:35:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704462853312512[0;39m <==    Updates: 0
2022-07-14 16:35:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704462853312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:35:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704483799666688[0;39m 生成今日电子书快照开始
2022-07-14 16:35:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704483799666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704483799666688[0;39m ==> Parameters: 
2022-07-14 16:35:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704483799666688[0;39m <==    Updates: 0
2022-07-14 16:35:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704483799666688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:35:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704504821518336[0;39m 生成今日电子书快照开始
2022-07-14 16:35:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704504821518336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704504821518336[0;39m ==> Parameters: 
2022-07-14 16:35:20.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704504821518336[0;39m <==    Updates: 0
2022-07-14 16:35:20.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704504821518336[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:35:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704525738512384[0;39m 生成今日电子书快照开始
2022-07-14 16:35:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704525738512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704525738512384[0;39m ==> Parameters: 
2022-07-14 16:35:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704525738512384[0;39m <==    Updates: 0
2022-07-14 16:35:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704525738512384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:35:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704546731003904[0;39m 生成今日电子书快照开始
2022-07-14 16:35:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704546731003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704546731003904[0;39m ==> Parameters: 
2022-07-14 16:35:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704546731003904[0;39m <==    Updates: 0
2022-07-14 16:35:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704546731003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:35:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704567681552384[0;39m 生成今日电子书快照开始
2022-07-14 16:35:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704567681552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704567681552384[0;39m ==> Parameters: 
2022-07-14 16:35:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704567681552384[0;39m <==    Updates: 0
2022-07-14 16:35:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704567681552384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:35:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202704567689940992[0;39m 更新电子书下的文档数据开始
2022-07-14 16:35:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704567689940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:35:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704567689940992[0;39m ==> Parameters: 
2022-07-14 16:35:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704567689940992[0;39m <==    Updates: 3
2022-07-14 16:35:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202704567689940992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:35:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704588682432512[0;39m 生成今日电子书快照开始
2022-07-14 16:35:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704588682432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704588682432512[0;39m ==> Parameters: 
2022-07-14 16:35:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704588682432512[0;39m <==    Updates: 0
2022-07-14 16:35:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704588682432512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:35:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704609658146816[0;39m 生成今日电子书快照开始
2022-07-14 16:35:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704609658146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704609658146816[0;39m ==> Parameters: 
2022-07-14 16:35:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704609658146816[0;39m <==    Updates: 0
2022-07-14 16:35:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704609658146816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:35:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704630608695296[0;39m 生成今日电子书快照开始
2022-07-14 16:35:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704630608695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704630608695296[0;39m ==> Parameters: 
2022-07-14 16:35:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704630608695296[0;39m <==    Updates: 0
2022-07-14 16:35:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704630608695296[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 16:35:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704651617964032[0;39m 生成今日电子书快照开始
2022-07-14 16:35:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704651617964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:35:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704651617964032[0;39m ==> Parameters: 
2022-07-14 16:35:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704651617964032[0;39m <==    Updates: 0
2022-07-14 16:35:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704651617964032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:36:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704672543346688[0;39m 生成今日电子书快照开始
2022-07-14 16:36:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704672543346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704672543346688[0;39m ==> Parameters: 
2022-07-14 16:36:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704672543346688[0;39m <==    Updates: 0
2022-07-14 16:36:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704672543346688[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-14 16:36:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704693527449600[0;39m 生成今日电子书快照开始
2022-07-14 16:36:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704693527449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704693527449600[0;39m ==> Parameters: 
2022-07-14 16:36:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704693527449600[0;39m <==    Updates: 0
2022-07-14 16:36:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704693527449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:36:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202704693535838208[0;39m 更新电子书下的文档数据开始
2022-07-14 16:36:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704693535838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:36:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704693535838208[0;39m ==> Parameters: 
2022-07-14 16:36:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704693535838208[0;39m <==    Updates: 3
2022-07-14 16:36:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202704693535838208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:36:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704714473803776[0;39m 生成今日电子书快照开始
2022-07-14 16:36:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704714473803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704714473803776[0;39m ==> Parameters: 
2022-07-14 16:36:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704714473803776[0;39m <==    Updates: 0
2022-07-14 16:36:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704714473803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:36:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704735445323776[0;39m 生成今日电子书快照开始
2022-07-14 16:36:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704735445323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704735445323776[0;39m ==> Parameters: 
2022-07-14 16:36:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704735445323776[0;39m <==    Updates: 0
2022-07-14 16:36:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704735445323776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:36:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704756446203904[0;39m 生成今日电子书快照开始
2022-07-14 16:36:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704756446203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704756446203904[0;39m ==> Parameters: 
2022-07-14 16:36:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704756446203904[0;39m <==    Updates: 0
2022-07-14 16:36:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704756446203904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:36:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704777438695424[0;39m 生成今日电子书快照开始
2022-07-14 16:36:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704777438695424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704777438695424[0;39m ==> Parameters: 
2022-07-14 16:36:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704777438695424[0;39m <==    Updates: 0
2022-07-14 16:36:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704777438695424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:36:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704798380855296[0;39m 生成今日电子书快照开始
2022-07-14 16:36:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704798380855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704798380855296[0;39m ==> Parameters: 
2022-07-14 16:36:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704798380855296[0;39m <==    Updates: 0
2022-07-14 16:36:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704798380855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:36:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704819348180992[0;39m 生成今日电子书快照开始
2022-07-14 16:36:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704819348180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704819348180992[0;39m ==> Parameters: 
2022-07-14 16:36:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704819348180992[0;39m <==    Updates: 0
2022-07-14 16:36:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704819348180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:36:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202704819360763904[0;39m 更新电子书下的文档数据开始
2022-07-14 16:36:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704819360763904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:36:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704819360763904[0;39m ==> Parameters: 
2022-07-14 16:36:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704819360763904[0;39m <==    Updates: 3
2022-07-14 16:36:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202704819360763904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:36:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704840302923776[0;39m 生成今日电子书快照开始
2022-07-14 16:36:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704840302923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704840302923776[0;39m ==> Parameters: 
2022-07-14 16:36:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704840302923776[0;39m <==    Updates: 0
2022-07-14 16:36:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704840302923776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:36:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704861312192512[0;39m 生成今日电子书快照开始
2022-07-14 16:36:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704861312192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704861312192512[0;39m ==> Parameters: 
2022-07-14 16:36:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704861312192512[0;39m <==    Updates: 0
2022-07-14 16:36:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704861312192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:36:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704882271129600[0;39m 生成今日电子书快照开始
2022-07-14 16:36:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704882271129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704882271129600[0;39m ==> Parameters: 
2022-07-14 16:36:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704882271129600[0;39m <==    Updates: 0
2022-07-14 16:36:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704882271129600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:36:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704903238455296[0;39m 生成今日电子书快照开始
2022-07-14 16:36:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704903238455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:36:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704903238455296[0;39m ==> Parameters: 
2022-07-14 16:36:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704903238455296[0;39m <==    Updates: 0
2022-07-14 16:36:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704903238455296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:37:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704924193198080[0;39m 生成今日电子书快照开始
2022-07-14 16:37:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704924193198080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704924193198080[0;39m ==> Parameters: 
2022-07-14 16:37:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704924193198080[0;39m <==    Updates: 0
2022-07-14 16:37:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704924193198080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:37:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704945164718080[0;39m 生成今日电子书快照开始
2022-07-14 16:37:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704945164718080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704945164718080[0;39m ==> Parameters: 
2022-07-14 16:37:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704945164718080[0;39m <==    Updates: 0
2022-07-14 16:37:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704945164718080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:37:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202704945173106688[0;39m 更新电子书下的文档数据开始
2022-07-14 16:37:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704945173106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:37:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704945173106688[0;39m ==> Parameters: 
2022-07-14 16:37:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202704945173106688[0;39m <==    Updates: 3
2022-07-14 16:37:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202704945173106688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:37:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704966182375424[0;39m 生成今日电子书快照开始
2022-07-14 16:37:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704966182375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704966182375424[0;39m ==> Parameters: 
2022-07-14 16:37:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704966182375424[0;39m <==    Updates: 0
2022-07-14 16:37:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704966182375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:37:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202704987153895424[0;39m 生成今日电子书快照开始
2022-07-14 16:37:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704987153895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704987153895424[0;39m ==> Parameters: 
2022-07-14 16:37:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202704987153895424[0;39m <==    Updates: 0
2022-07-14 16:37:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202704987153895424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:37:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705008075083776[0;39m 生成今日电子书快照开始
2022-07-14 16:37:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705008075083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705008075083776[0;39m ==> Parameters: 
2022-07-14 16:37:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705008075083776[0;39m <==    Updates: 0
2022-07-14 16:37:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705008075083776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:37:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705029050798080[0;39m 生成今日电子书快照开始
2022-07-14 16:37:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705029050798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705029050798080[0;39m ==> Parameters: 
2022-07-14 16:37:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705029050798080[0;39m <==    Updates: 0
2022-07-14 16:37:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705029050798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:37:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705050018123776[0;39m 生成今日电子书快照开始
2022-07-14 16:37:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705050018123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705050018123776[0;39m ==> Parameters: 
2022-07-14 16:37:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705050018123776[0;39m <==    Updates: 0
2022-07-14 16:37:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705050018123776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:37:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705070998032384[0;39m 生成今日电子书快照开始
2022-07-14 16:37:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705070998032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705070998032384[0;39m ==> Parameters: 
2022-07-14 16:37:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705070998032384[0;39m <==    Updates: 0
2022-07-14 16:37:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705070998032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:37:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202705071006420992[0;39m 更新电子书下的文档数据开始
2022-07-14 16:37:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705071006420992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:37:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705071006420992[0;39m ==> Parameters: 
2022-07-14 16:37:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705071006420992[0;39m <==    Updates: 3
2022-07-14 16:37:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202705071006420992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:37:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705091973746688[0;39m 生成今日电子书快照开始
2022-07-14 16:37:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705091973746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705091973746688[0;39m ==> Parameters: 
2022-07-14 16:37:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705091973746688[0;39m <==    Updates: 0
2022-07-14 16:37:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705091973746688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:37:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705112962043904[0;39m 生成今日电子书快照开始
2022-07-14 16:37:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705112962043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705112962043904[0;39m ==> Parameters: 
2022-07-14 16:37:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705112962043904[0;39m <==    Updates: 0
2022-07-14 16:37:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705112962043904[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 16:37:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705133925175296[0;39m 生成今日电子书快照开始
2022-07-14 16:37:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705133925175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705133925175296[0;39m ==> Parameters: 
2022-07-14 16:37:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705133925175296[0;39m <==    Updates: 0
2022-07-14 16:37:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705133925175296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:37:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705154934444032[0;39m 生成今日电子书快照开始
2022-07-14 16:37:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705154934444032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:37:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705154934444032[0;39m ==> Parameters: 
2022-07-14 16:37:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705154934444032[0;39m <==    Updates: 0
2022-07-14 16:37:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705154934444032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:38:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705175884992512[0;39m 生成今日电子书快照开始
2022-07-14 16:38:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705175884992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705175884992512[0;39m ==> Parameters: 
2022-07-14 16:38:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705175884992512[0;39m <==    Updates: 0
2022-07-14 16:38:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705175884992512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:38:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202705196822958080[0;39m 更新电子书下的文档数据开始
2022-07-14 16:38:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705196822958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:38:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705196822958080[0;39m ==> Parameters: 
2022-07-14 16:38:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705196822958080[0;39m <==    Updates: 3
2022-07-14 16:38:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202705196822958080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:38:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705196827152384[0;39m 生成今日电子书快照开始
2022-07-14 16:38:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705196827152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705196827152384[0;39m ==> Parameters: 
2022-07-14 16:38:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705196827152384[0;39m <==    Updates: 0
2022-07-14 16:38:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705196827152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:38:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705217786089472[0;39m 生成今日电子书快照开始
2022-07-14 16:38:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705217786089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705217786089472[0;39m ==> Parameters: 
2022-07-14 16:38:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705217786089472[0;39m <==    Updates: 0
2022-07-14 16:38:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705217786089472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:38:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705238812135424[0;39m 生成今日电子书快照开始
2022-07-14 16:38:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705238812135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705238812135424[0;39m ==> Parameters: 
2022-07-14 16:38:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705238812135424[0;39m <==    Updates: 0
2022-07-14 16:38:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705238812135424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:38:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705259754295296[0;39m 生成今日电子书快照开始
2022-07-14 16:38:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705259754295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705259754295296[0;39m ==> Parameters: 
2022-07-14 16:38:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705259754295296[0;39m <==    Updates: 0
2022-07-14 16:38:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705259754295296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:38:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705280738398208[0;39m 生成今日电子书快照开始
2022-07-14 16:38:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705280738398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705280738398208[0;39m ==> Parameters: 
2022-07-14 16:38:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705280738398208[0;39m <==    Updates: 0
2022-07-14 16:38:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705280738398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:38:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705301672169472[0;39m 生成今日电子书快照开始
2022-07-14 16:38:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705301672169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705301672169472[0;39m ==> Parameters: 
2022-07-14 16:38:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705301672169472[0;39m <==    Updates: 0
2022-07-14 16:38:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705301672169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:38:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705322647883776[0;39m 生成今日电子书快照开始
2022-07-14 16:38:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705322647883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705322647883776[0;39m ==> Parameters: 
2022-07-14 16:38:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705322647883776[0;39m <==    Updates: 0
2022-07-14 16:38:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705322647883776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:38:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202705322656272384[0;39m 更新电子书下的文档数据开始
2022-07-14 16:38:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705322656272384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:38:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705322656272384[0;39m ==> Parameters: 
2022-07-14 16:38:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705322656272384[0;39m <==    Updates: 3
2022-07-14 16:38:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202705322656272384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:38:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705343678124032[0;39m 生成今日电子书快照开始
2022-07-14 16:38:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705343678124032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:40.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705343678124032[0;39m ==> Parameters: 
2022-07-14 16:38:40.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705343678124032[0;39m <==    Updates: 0
2022-07-14 16:38:40.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705343678124032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:38:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705364590923776[0;39m 生成今日电子书快照开始
2022-07-14 16:38:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705364590923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705364590923776[0;39m ==> Parameters: 
2022-07-14 16:38:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705364590923776[0;39m <==    Updates: 0
2022-07-14 16:38:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705364590923776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:38:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705385558249472[0;39m 生成今日电子书快照开始
2022-07-14 16:38:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705385558249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705385558249472[0;39m ==> Parameters: 
2022-07-14 16:38:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705385558249472[0;39m <==    Updates: 0
2022-07-14 16:38:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705385558249472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:38:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705406580101120[0;39m 生成今日电子书快照开始
2022-07-14 16:38:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705406580101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:38:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705406580101120[0;39m ==> Parameters: 
2022-07-14 16:38:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705406580101120[0;39m <==    Updates: 0
2022-07-14 16:38:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705406580101120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:39:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705427518066688[0;39m 生成今日电子书快照开始
2022-07-14 16:39:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705427518066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705427518066688[0;39m ==> Parameters: 
2022-07-14 16:39:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705427518066688[0;39m <==    Updates: 0
2022-07-14 16:39:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705427518066688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:39:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202705448472809472[0;39m 更新电子书下的文档数据开始
2022-07-14 16:39:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705448472809472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:39:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705448472809472[0;39m ==> Parameters: 
2022-07-14 16:39:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705448472809472[0;39m <==    Updates: 3
2022-07-14 16:39:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202705448472809472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:39:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705448477003776[0;39m 生成今日电子书快照开始
2022-07-14 16:39:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705448477003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705448477003776[0;39m ==> Parameters: 
2022-07-14 16:39:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705448477003776[0;39m <==    Updates: 0
2022-07-14 16:39:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705448477003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:39:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705469461106688[0;39m 生成今日电子书快照开始
2022-07-14 16:39:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705469461106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705469461106688[0;39m ==> Parameters: 
2022-07-14 16:39:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705469461106688[0;39m <==    Updates: 0
2022-07-14 16:39:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705469461106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:39:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705490432626688[0;39m 生成今日电子书快照开始
2022-07-14 16:39:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705490432626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705490432626688[0;39m ==> Parameters: 
2022-07-14 16:39:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705490432626688[0;39m <==    Updates: 0
2022-07-14 16:39:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705490432626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:39:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705511404146688[0;39m 生成今日电子书快照开始
2022-07-14 16:39:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705511404146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705511404146688[0;39m ==> Parameters: 
2022-07-14 16:39:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705511404146688[0;39m <==    Updates: 0
2022-07-14 16:39:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705511404146688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:39:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705532388249600[0;39m 生成今日电子书快照开始
2022-07-14 16:39:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705532388249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705532388249600[0;39m ==> Parameters: 
2022-07-14 16:39:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705532388249600[0;39m <==    Updates: 0
2022-07-14 16:39:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705532388249600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:39:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705553351380992[0;39m 生成今日电子书快照开始
2022-07-14 16:39:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705553351380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705553351380992[0;39m ==> Parameters: 
2022-07-14 16:39:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705553351380992[0;39m <==    Updates: 0
2022-07-14 16:39:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705553351380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:39:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705574314512384[0;39m 生成今日电子书快照开始
2022-07-14 16:39:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705574314512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705574314512384[0;39m ==> Parameters: 
2022-07-14 16:39:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705574314512384[0;39m <==    Updates: 0
2022-07-14 16:39:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705574314512384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:39:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202705574327095296[0;39m 更新电子书下的文档数据开始
2022-07-14 16:39:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705574327095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:39:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705574327095296[0;39m ==> Parameters: 
2022-07-14 16:39:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705574327095296[0;39m <==    Updates: 3
2022-07-14 16:39:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202705574327095296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:39:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705595290226688[0;39m 生成今日电子书快照开始
2022-07-14 16:39:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705595290226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705595290226688[0;39m ==> Parameters: 
2022-07-14 16:39:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705595290226688[0;39m <==    Updates: 0
2022-07-14 16:39:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705595290226688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:39:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705616244969472[0;39m 生成今日电子书快照开始
2022-07-14 16:39:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705616244969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705616244969472[0;39m ==> Parameters: 
2022-07-14 16:39:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705616244969472[0;39m <==    Updates: 0
2022-07-14 16:39:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705616244969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:39:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705637229072384[0;39m 生成今日电子书快照开始
2022-07-14 16:39:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705637229072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705637229072384[0;39m ==> Parameters: 
2022-07-14 16:39:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705637229072384[0;39m <==    Updates: 0
2022-07-14 16:39:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705637229072384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:39:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705658250924032[0;39m 生成今日电子书快照开始
2022-07-14 16:39:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705658250924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:39:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705658250924032[0;39m ==> Parameters: 
2022-07-14 16:39:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705658250924032[0;39m <==    Updates: 0
2022-07-14 16:39:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705658250924032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:40:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705679163723776[0;39m 生成今日电子书快照开始
2022-07-14 16:40:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705679163723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705679163723776[0;39m ==> Parameters: 
2022-07-14 16:40:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705679163723776[0;39m <==    Updates: 0
2022-07-14 16:40:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705679163723776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:40:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705700139438080[0;39m 生成今日电子书快照开始
2022-07-14 16:40:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705700139438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705700139438080[0;39m ==> Parameters: 
2022-07-14 16:40:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705700139438080[0;39m <==    Updates: 0
2022-07-14 16:40:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705700139438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:40:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202705700147826688[0;39m 更新电子书下的文档数据开始
2022-07-14 16:40:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705700147826688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:40:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705700147826688[0;39m ==> Parameters: 
2022-07-14 16:40:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705700147826688[0;39m <==    Updates: 3
2022-07-14 16:40:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202705700147826688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:40:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705721140318208[0;39m 生成今日电子书快照开始
2022-07-14 16:40:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705721140318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705721140318208[0;39m ==> Parameters: 
2022-07-14 16:40:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705721140318208[0;39m <==    Updates: 0
2022-07-14 16:40:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705721140318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:40:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705742095060992[0;39m 生成今日电子书快照开始
2022-07-14 16:40:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705742095060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705742095060992[0;39m ==> Parameters: 
2022-07-14 16:40:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705742095060992[0;39m <==    Updates: 0
2022-07-14 16:40:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705742095060992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:40:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705763049803776[0;39m 生成今日电子书快照开始
2022-07-14 16:40:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705763049803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705763049803776[0;39m ==> Parameters: 
2022-07-14 16:40:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705763049803776[0;39m <==    Updates: 0
2022-07-14 16:40:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705763049803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:40:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705784033906688[0;39m 生成今日电子书快照开始
2022-07-14 16:40:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705784033906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705784033906688[0;39m ==> Parameters: 
2022-07-14 16:40:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705784033906688[0;39m <==    Updates: 0
2022-07-14 16:40:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705784033906688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:40:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705805043175424[0;39m 生成今日电子书快照开始
2022-07-14 16:40:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705805043175424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705805043175424[0;39m ==> Parameters: 
2022-07-14 16:40:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705805043175424[0;39m <==    Updates: 0
2022-07-14 16:40:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705805043175424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:40:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202705826014695424[0;39m 更新电子书下的文档数据开始
2022-07-14 16:40:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705826014695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:40:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705826014695424[0;39m ==> Parameters: 
2022-07-14 16:40:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705826014695424[0;39m <==    Updates: 3
2022-07-14 16:40:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202705826014695424[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-14 16:40:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705826027278336[0;39m 生成今日电子书快照开始
2022-07-14 16:40:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705826027278336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705826027278336[0;39m ==> Parameters: 
2022-07-14 16:40:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705826027278336[0;39m <==    Updates: 0
2022-07-14 16:40:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705826027278336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:40:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705846969438208[0;39m 生成今日电子书快照开始
2022-07-14 16:40:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705846969438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705846969438208[0;39m ==> Parameters: 
2022-07-14 16:40:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705846969438208[0;39m <==    Updates: 0
2022-07-14 16:40:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705846969438208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:40:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705867932569600[0;39m 生成今日电子书快照开始
2022-07-14 16:40:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705867932569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705867932569600[0;39m ==> Parameters: 
2022-07-14 16:40:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705867932569600[0;39m <==    Updates: 0
2022-07-14 16:40:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705867932569600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 16:40:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705888891506688[0;39m 生成今日电子书快照开始
2022-07-14 16:40:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705888891506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705888891506688[0;39m ==> Parameters: 
2022-07-14 16:40:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705888891506688[0;39m <==    Updates: 0
2022-07-14 16:40:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705888891506688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:40:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705909863026688[0;39m 生成今日电子书快照开始
2022-07-14 16:40:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705909863026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:40:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705909863026688[0;39m ==> Parameters: 
2022-07-14 16:40:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705909863026688[0;39m <==    Updates: 0
2022-07-14 16:40:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705909863026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:41:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705930859712512[0;39m 生成今日电子书快照开始
2022-07-14 16:41:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705930859712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705930859712512[0;39m ==> Parameters: 
2022-07-14 16:41:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705930859712512[0;39m <==    Updates: 0
2022-07-14 16:41:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705930859712512[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 16:41:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202705951818649600[0;39m 更新电子书下的文档数据开始
2022-07-14 16:41:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705951818649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:41:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705951818649600[0;39m ==> Parameters: 
2022-07-14 16:41:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202705951818649600[0;39m <==    Updates: 3
2022-07-14 16:41:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202705951818649600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:41:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705951827038208[0;39m 生成今日电子书快照开始
2022-07-14 16:41:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705951827038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705951827038208[0;39m ==> Parameters: 
2022-07-14 16:41:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705951827038208[0;39m <==    Updates: 0
2022-07-14 16:41:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705951827038208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:41:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705972819529728[0;39m 生成今日电子书快照开始
2022-07-14 16:41:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705972819529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705972819529728[0;39m ==> Parameters: 
2022-07-14 16:41:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705972819529728[0;39m <==    Updates: 0
2022-07-14 16:41:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705972819529728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:41:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202705993765883904[0;39m 生成今日电子书快照开始
2022-07-14 16:41:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705993765883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705993765883904[0;39m ==> Parameters: 
2022-07-14 16:41:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202705993765883904[0;39m <==    Updates: 0
2022-07-14 16:41:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202705993765883904[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:41:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706014737403904[0;39m 生成今日电子书快照开始
2022-07-14 16:41:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706014737403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706014737403904[0;39m ==> Parameters: 
2022-07-14 16:41:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706014737403904[0;39m <==    Updates: 0
2022-07-14 16:41:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706014737403904[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 16:41:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706035713118208[0;39m 生成今日电子书快照开始
2022-07-14 16:41:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706035713118208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706035713118208[0;39m ==> Parameters: 
2022-07-14 16:41:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706035713118208[0;39m <==    Updates: 0
2022-07-14 16:41:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706035713118208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 16:41:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706056659472384[0;39m 生成今日电子书快照开始
2022-07-14 16:41:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706056659472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706056659472384[0;39m ==> Parameters: 
2022-07-14 16:41:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706056659472384[0;39m <==    Updates: 0
2022-07-14 16:41:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706056659472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:41:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202706077668741120[0;39m 更新电子书下的文档数据开始
2022-07-14 16:41:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706077668741120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:41:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706077668741120[0;39m ==> Parameters: 
2022-07-14 16:41:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706077668741120[0;39m <==    Updates: 3
2022-07-14 16:41:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202706077668741120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:41:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706077677129728[0;39m 生成今日电子书快照开始
2022-07-14 16:41:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706077677129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706077677129728[0;39m ==> Parameters: 
2022-07-14 16:41:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706077677129728[0;39m <==    Updates: 0
2022-07-14 16:41:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706077677129728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:41:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706098640261120[0;39m 生成今日电子书快照开始
2022-07-14 16:41:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706098640261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706098640261120[0;39m ==> Parameters: 
2022-07-14 16:41:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706098640261120[0;39m <==    Updates: 0
2022-07-14 16:41:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706098640261120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:41:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706119565643776[0;39m 生成今日电子书快照开始
2022-07-14 16:41:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706119565643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706119565643776[0;39m ==> Parameters: 
2022-07-14 16:41:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706119565643776[0;39m <==    Updates: 0
2022-07-14 16:41:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706119565643776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:41:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706140558135296[0;39m 生成今日电子书快照开始
2022-07-14 16:41:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706140558135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706140558135296[0;39m ==> Parameters: 
2022-07-14 16:41:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706140558135296[0;39m <==    Updates: 0
2022-07-14 16:41:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706140558135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:41:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706161546432512[0;39m 生成今日电子书快照开始
2022-07-14 16:41:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706161546432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:41:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706161546432512[0;39m ==> Parameters: 
2022-07-14 16:41:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706161546432512[0;39m <==    Updates: 0
2022-07-14 16:41:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706161546432512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:42:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706182522146816[0;39m 生成今日电子书快照开始
2022-07-14 16:42:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706182522146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706182522146816[0;39m ==> Parameters: 
2022-07-14 16:42:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706182522146816[0;39m <==    Updates: 0
2022-07-14 16:42:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706182522146816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:42:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202706203497861120[0;39m 更新电子书下的文档数据开始
2022-07-14 16:42:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706203497861120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:42:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706203497861120[0;39m ==> Parameters: 
2022-07-14 16:42:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706203497861120[0;39m <==    Updates: 3
2022-07-14 16:42:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202706203497861120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:42:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706203506249728[0;39m 生成今日电子书快照开始
2022-07-14 16:42:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706203506249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706203506249728[0;39m ==> Parameters: 
2022-07-14 16:42:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706203506249728[0;39m <==    Updates: 0
2022-07-14 16:42:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706203506249728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:42:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706224473575424[0;39m 生成今日电子书快照开始
2022-07-14 16:42:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706224473575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706224473575424[0;39m ==> Parameters: 
2022-07-14 16:42:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706224473575424[0;39m <==    Updates: 0
2022-07-14 16:42:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706224473575424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:42:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706245407346688[0;39m 生成今日电子书快照开始
2022-07-14 16:42:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706245407346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706245407346688[0;39m ==> Parameters: 
2022-07-14 16:42:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706245407346688[0;39m <==    Updates: 0
2022-07-14 16:42:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706245407346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:42:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706266374672384[0;39m 生成今日电子书快照开始
2022-07-14 16:42:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706266374672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706266374672384[0;39m ==> Parameters: 
2022-07-14 16:42:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706266374672384[0;39m <==    Updates: 0
2022-07-14 16:42:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706266374672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:42:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706287392329728[0;39m 生成今日电子书快照开始
2022-07-14 16:42:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706287392329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706287392329728[0;39m ==> Parameters: 
2022-07-14 16:42:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706287392329728[0;39m <==    Updates: 0
2022-07-14 16:42:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706287392329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:42:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706308338683904[0;39m 生成今日电子书快照开始
2022-07-14 16:42:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706308338683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706308338683904[0;39m ==> Parameters: 
2022-07-14 16:42:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706308338683904[0;39m <==    Updates: 0
2022-07-14 16:42:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706308338683904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:42:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202706329285038080[0;39m 更新电子书下的文档数据开始
2022-07-14 16:42:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706329285038080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:42:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706329285038080[0;39m ==> Parameters: 
2022-07-14 16:42:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706329285038080[0;39m <==    Updates: 3
2022-07-14 16:42:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202706329285038080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:42:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706329293426688[0;39m 生成今日电子书快照开始
2022-07-14 16:42:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706329293426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706329293426688[0;39m ==> Parameters: 
2022-07-14 16:42:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706329293426688[0;39m <==    Updates: 0
2022-07-14 16:42:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706329293426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:42:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706350294306816[0;39m 生成今日电子书快照开始
2022-07-14 16:42:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706350294306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=t1.view_count- ifnull(t2.view_count, 0), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706350294306816[0;39m ==> Parameters: 
2022-07-14 16:42:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706350294306816[0;39m <==    Updates: 0
2022-07-14 16:42:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706350294306816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:42:42.831 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：RcpVUUqJd5，session id：13！当前连接数：0
2022-07-14 16:42:42.935 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2022-07-14 16:42:42.948 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-1 - Shutdown completed.
2022-07-14 16:42:43.265 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 51532 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-14 16:42:43.265 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-14 16:42:43.458 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-14 16:42:43.458 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-14 16:42:43.466 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2022-07-14 16:42:43.695 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-14 16:42:43.695 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-14 16:42:43.695 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-14 16:42:43.696 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-14 16:42:43.731 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-14 16:42:43.731 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 464 ms
2022-07-14 16:42:44.236 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-14 16:42:44.246 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-14 16:42:44.247 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-14 16:42:44.251 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 1.016 seconds (JVM running for 1179.835)
2022-07-14 16:42:44.252 INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener :63  
                [32m                  [0;39m Condition evaluation unchanged
2022-07-14 16:42:44.252 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-14 16:42:44.253 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-14 16:42:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706371278409728[0;39m 生成今日电子书快照开始
2022-07-14 16:42:45.017 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m202706371278409728[0;39m HikariPool-2 - Starting...
2022-07-14 16:42:45.021 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m202706371278409728[0;39m HikariPool-2 - Start completed.
2022-07-14 16:42:45.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706371278409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:45.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706371278409728[0;39m ==> Parameters: 
2022-07-14 16:42:45.035 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706371278409728[0;39m <==    Updates: 0
2022-07-14 16:42:45.035 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706371278409728[0;39m 生成今日电子书快照结束，耗时：18 毫秒
2022-07-14 16:42:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706392207986688[0;39m 生成今日电子书快照开始
2022-07-14 16:42:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706392207986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706392207986688[0;39m ==> Parameters: 
2022-07-14 16:42:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706392207986688[0;39m <==    Updates: 0
2022-07-14 16:42:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706392207986688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:42:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706413166923776[0;39m 生成今日电子书快照开始
2022-07-14 16:42:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706413166923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:42:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706413166923776[0;39m ==> Parameters: 
2022-07-14 16:42:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706413166923776[0;39m <==    Updates: 0
2022-07-14 16:42:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706413166923776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:43:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706434184581120[0;39m 生成今日电子书快照开始
2022-07-14 16:43:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706434184581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706434184581120[0;39m ==> Parameters: 
2022-07-14 16:43:00.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706434184581120[0;39m <==    Updates: 0
2022-07-14 16:43:00.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706434184581120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:43:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706455130935296[0;39m 生成今日电子书快照开始
2022-07-14 16:43:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706455130935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706455130935296[0;39m ==> Parameters: 
2022-07-14 16:43:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706455130935296[0;39m <==    Updates: 0
2022-07-14 16:43:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706455130935296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:43:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202706455135129600[0;39m 更新电子书下的文档数据开始
2022-07-14 16:43:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706455135129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:43:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706455135129600[0;39m ==> Parameters: 
2022-07-14 16:43:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706455135129600[0;39m <==    Updates: 3
2022-07-14 16:43:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202706455135129600[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-14 16:43:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706476123426816[0;39m 生成今日电子书快照开始
2022-07-14 16:43:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706476123426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706476123426816[0;39m ==> Parameters: 
2022-07-14 16:43:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706476123426816[0;39m <==    Updates: 0
2022-07-14 16:43:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706476123426816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:43:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706497061392384[0;39m 生成今日电子书快照开始
2022-07-14 16:43:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706497061392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706497061392384[0;39m ==> Parameters: 
2022-07-14 16:43:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706497061392384[0;39m <==    Updates: 0
2022-07-14 16:43:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706497061392384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:43:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706518037106688[0;39m 生成今日电子书快照开始
2022-07-14 16:43:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706518037106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706518037106688[0;39m ==> Parameters: 
2022-07-14 16:43:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706518037106688[0;39m <==    Updates: 0
2022-07-14 16:43:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706518037106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:43:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706539004432384[0;39m 生成今日电子书快照开始
2022-07-14 16:43:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706539004432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706539004432384[0;39m ==> Parameters: 
2022-07-14 16:43:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706539004432384[0;39m <==    Updates: 0
2022-07-14 16:43:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706539004432384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:43:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706559971758080[0;39m 生成今日电子书快照开始
2022-07-14 16:43:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706559971758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706559971758080[0;39m ==> Parameters: 
2022-07-14 16:43:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706559971758080[0;39m <==    Updates: 0
2022-07-14 16:43:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706559971758080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:43:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706580985221120[0;39m 生成今日电子书快照开始
2022-07-14 16:43:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706580985221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706580985221120[0;39m ==> Parameters: 
2022-07-14 16:43:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706580985221120[0;39m <==    Updates: 0
2022-07-14 16:43:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706580985221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:43:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202706580997804032[0;39m 更新电子书下的文档数据开始
2022-07-14 16:43:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706580997804032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:43:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706580997804032[0;39m ==> Parameters: 
2022-07-14 16:43:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706580997804032[0;39m <==    Updates: 3
2022-07-14 16:43:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202706580997804032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:43:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706601935769600[0;39m 生成今日电子书快照开始
2022-07-14 16:43:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706601935769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706601935769600[0;39m ==> Parameters: 
2022-07-14 16:43:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706601935769600[0;39m <==    Updates: 0
2022-07-14 16:43:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706601935769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:43:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706622886318080[0;39m 生成今日电子书快照开始
2022-07-14 16:43:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706622886318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706622886318080[0;39m ==> Parameters: 
2022-07-14 16:43:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706622886318080[0;39m <==    Updates: 0
2022-07-14 16:43:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706622886318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:43:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706643903975424[0;39m 生成今日电子书快照开始
2022-07-14 16:43:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706643903975424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706643903975424[0;39m ==> Parameters: 
2022-07-14 16:43:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706643903975424[0;39m <==    Updates: 0
2022-07-14 16:43:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706643903975424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:43:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706664837746688[0;39m 生成今日电子书快照开始
2022-07-14 16:43:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706664837746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:43:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706664837746688[0;39m ==> Parameters: 
2022-07-14 16:43:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706664837746688[0;39m <==    Updates: 0
2022-07-14 16:43:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706664837746688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:44:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706685830238208[0;39m 生成今日电子书快照开始
2022-07-14 16:44:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706685830238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706685830238208[0;39m ==> Parameters: 
2022-07-14 16:44:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706685830238208[0;39m <==    Updates: 0
2022-07-14 16:44:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706685830238208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:44:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202706706776592384[0;39m 更新电子书下的文档数据开始
2022-07-14 16:44:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706706776592384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:44:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706706776592384[0;39m ==> Parameters: 
2022-07-14 16:44:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706706776592384[0;39m <==    Updates: 3
2022-07-14 16:44:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202706706776592384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:44:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706706784980992[0;39m 生成今日电子书快照开始
2022-07-14 16:44:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706706784980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706706784980992[0;39m ==> Parameters: 
2022-07-14 16:44:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706706784980992[0;39m <==    Updates: 0
2022-07-14 16:44:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706706784980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:44:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706727735529472[0;39m 生成今日电子书快照开始
2022-07-14 16:44:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706727735529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706727735529472[0;39m ==> Parameters: 
2022-07-14 16:44:10.055 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706727735529472[0;39m <==    Updates: 6
2022-07-14 16:44:10.055 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706727735529472[0;39m 生成今日电子书快照结束，耗时：54 毫秒
2022-07-14 16:44:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706748728020992[0;39m 生成今日电子书快照开始
2022-07-14 16:44:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706748728020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706748728020992[0;39m ==> Parameters: 
2022-07-14 16:44:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706748728020992[0;39m <==    Updates: 0
2022-07-14 16:44:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706748728020992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:44:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706769678569472[0;39m 生成今日电子书快照开始
2022-07-14 16:44:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706769678569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706769678569472[0;39m ==> Parameters: 
2022-07-14 16:44:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706769678569472[0;39m <==    Updates: 0
2022-07-14 16:44:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706769678569472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:44:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706790654283776[0;39m 生成今日电子书快照开始
2022-07-14 16:44:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706790654283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706790654283776[0;39m ==> Parameters: 
2022-07-14 16:44:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706790654283776[0;39m <==    Updates: 0
2022-07-14 16:44:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706790654283776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:44:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706811663552512[0;39m 生成今日电子书快照开始
2022-07-14 16:44:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706811663552512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706811663552512[0;39m ==> Parameters: 
2022-07-14 16:44:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706811663552512[0;39m <==    Updates: 0
2022-07-14 16:44:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706811663552512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:44:34.788 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-07-14 16:44:34.788 INFO  org.springframework.web.servlet.DispatcherServlet :525 
                [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2022-07-14 16:44:34.789 INFO  org.springframework.web.servlet.DispatcherServlet :547 
                [32m                  [0;39m Completed initialization in 1 ms
2022-07-14 16:44:34.790 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：ZDbNdSkFhi，session id：14，当前连接数：1
2022-07-14 16:44:34.882 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706832089812992[0;39m ------------- 开始 -------------
2022-07-14 16:44:34.882 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706832094007296[0;39m ------------- 开始 -------------
2022-07-14 16:44:34.882 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706832089812992[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:44:34.882 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706832089812992[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:44:34.882 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706832094007296[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:44:34.882 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706832094007297[0;39m ------------- 开始 -------------
2022-07-14 16:44:34.883 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706832089812992[0;39m 远程地址: 127.0.0.1
2022-07-14 16:44:34.883 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706832094007297[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:44:34.883 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706832094007296[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:44:34.883 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706832094007297[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:44:34.883 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706832094007296[0;39m 远程地址: 127.0.0.1
2022-07-14 16:44:34.883 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706832094007297[0;39m 远程地址: 127.0.0.1
2022-07-14 16:44:34.884 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706832089812992[0;39m 请求参数: []
2022-07-14 16:44:34.884 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706832094007297[0;39m 请求参数: []
2022-07-14 16:44:34.884 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706832094007296[0;39m 请求参数: []
2022-07-14 16:44:34.889 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706832094007296[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:44:34.889 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706832089812992[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:44:34.889 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706832094007296[0;39m ==> Parameters: 
2022-07-14 16:44:34.889 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706832089812992[0;39m ==> Parameters: 
2022-07-14 16:44:34.890 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706832094007296[0;39m <==      Total: 0
2022-07-14 16:44:34.890 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202706832089812992[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:44:34.891 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706832094007297[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:44:34.891 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202706832089812992[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:44:34.892 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706832094007297[0;39m ==> Parameters: 
2022-07-14 16:44:34.892 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706832089812992[0;39m <==      Total: 1
2022-07-14 16:44:34.892 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706832094007296[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:44:34.893 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706832094007296[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 16:44:34.893 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706832089812992[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:44:34.896 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706832089812992[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-14 16:44:34.898 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:44:34.899 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:44:34.900 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:44:34.900 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:44:34.901 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:44:34.901 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:44:34.902 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:44:34.902 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:44:34.902 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:44:34.902 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:44:34.902 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:44:34.903 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:44:34.903 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:44:34.903 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:44:34.903 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:44:34.903 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:44:34.903 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706832094007297[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:44:34.904 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706832094007297[0;39m <==      Total: 16
2022-07-14 16:44:34.911 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706832094007297[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:44:34.912 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706832094007297[0;39m ------------- 结束 耗时：30 ms -------------
2022-07-14 16:44:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202706832618295296[0;39m 更新电子书下的文档数据开始
2022-07-14 16:44:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706832618295296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:44:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706832618295296[0;39m ==> Parameters: 
2022-07-14 16:44:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706832618295296[0;39m <==    Updates: 3
2022-07-14 16:44:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202706832618295296[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-14 16:44:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706832630878208[0;39m 生成今日电子书快照开始
2022-07-14 16:44:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706832630878208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706832630878208[0;39m ==> Parameters: 
2022-07-14 16:44:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706832630878208[0;39m <==    Updates: 0
2022-07-14 16:44:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706832630878208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:44:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706853602398208[0;39m 生成今日电子书快照开始
2022-07-14 16:44:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706853602398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706853602398208[0;39m ==> Parameters: 
2022-07-14 16:44:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706853602398208[0;39m <==    Updates: 0
2022-07-14 16:44:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706853602398208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 16:44:43.783 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：ZDbNdSkFhi，session id：14！当前连接数：0
2022-07-14 16:44:44.479 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：qNrKmJuKVQ，session id：15，当前连接数：1
2022-07-14 16:44:44.540 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706872602595329[0;39m ------------- 开始 -------------
2022-07-14 16:44:44.540 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706872602595328[0;39m ------------- 开始 -------------
2022-07-14 16:44:44.540 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706872602595330[0;39m ------------- 开始 -------------
2022-07-14 16:44:44.540 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706872602595329[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:44:44.540 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706872602595328[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:44:44.541 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706872602595329[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:44:44.541 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706872602595330[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:44:44.541 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706872602595329[0;39m 远程地址: 127.0.0.1
2022-07-14 16:44:44.541 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706872602595328[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:44:44.541 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706872602595329[0;39m 请求参数: []
2022-07-14 16:44:44.541 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706872602595328[0;39m 远程地址: 127.0.0.1
2022-07-14 16:44:44.541 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706872602595330[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:44:44.542 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706872602595328[0;39m 请求参数: []
2022-07-14 16:44:44.542 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706872602595330[0;39m 远程地址: 127.0.0.1
2022-07-14 16:44:44.542 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706872602595329[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:44:44.542 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706872602595330[0;39m 请求参数: []
2022-07-14 16:44:44.542 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706872602595328[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:44:44.542 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706872602595329[0;39m ==> Parameters: 
2022-07-14 16:44:44.543 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706872602595328[0;39m ==> Parameters: 
2022-07-14 16:44:44.543 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706872602595330[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:44:44.543 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706872602595330[0;39m ==> Parameters: 
2022-07-14 16:44:44.543 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202706872602595328[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:44:44.544 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202706872602595328[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:44:44.544 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706872602595328[0;39m <==      Total: 1
2022-07-14 16:44:44.544 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706872602595330[0;39m <==      Total: 0
2022-07-14 16:44:44.544 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706872602595328[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:44:44.544 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706872602595328[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:44:44.544 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706872602595330[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:44:44.545 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706872602595330[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:44:44.554 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:44:44.555 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:44:44.555 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:44:44.555 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:44:44.555 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:44:44.555 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:44:44.556 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:44:44.556 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:44:44.556 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:44:44.556 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:44:44.556 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:44:44.556 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:44:44.557 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:44:44.557 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:44:44.557 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:44:44.557 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:44:44.558 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706872602595329[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:44:44.558 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706872602595329[0;39m <==      Total: 16
2022-07-14 16:44:44.559 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706872602595329[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:44:44.559 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706872602595329[0;39m ------------- 结束 耗时：19 ms -------------
2022-07-14 16:44:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706874573918208[0;39m 生成今日电子书快照开始
2022-07-14 16:44:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706874573918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:44:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706874573918208[0;39m ==> Parameters: 
2022-07-14 16:44:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706874573918208[0;39m <==    Updates: 0
2022-07-14 16:44:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706874573918208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:44:49.289 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：qNrKmJuKVQ，session id：15！当前连接数：0
2022-07-14 16:44:49.298 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-2 - Shutdown initiated...
2022-07-14 16:44:49.302 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-2 - Shutdown completed.
2022-07-14 16:44:52.539 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 65732 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-14 16:44:52.539 INFO  org.hibernate.validator.internal.util.Version     :21  
                [32m                  [0;39m HV000001: Hibernate Validator 6.2.3.Final
2022-07-14 16:44:52.542 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-14 16:44:52.592 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2022-07-14 16:44:52.592 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2022-07-14 16:44:53.188 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-14 16:44:53.190 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-14 16:44:53.215 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2022-07-14 16:44:53.929 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-14 16:44:53.935 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-14 16:44:53.936 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-14 16:44:53.936 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-14 16:44:54.049 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-14 16:44:54.050 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 1457 ms
2022-07-14 16:44:55.373 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-14 16:44:55.397 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-14 16:44:55.411 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-14 16:44:55.423 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 3.377 seconds (JVM running for 4.908)
2022-07-14 16:44:55.425 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-14 16:44:55.426 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-14 16:44:57.848 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-07-14 16:44:57.849 INFO  org.springframework.web.servlet.DispatcherServlet :525 
                [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2022-07-14 16:44:57.851 INFO  org.springframework.web.servlet.DispatcherServlet :547 
                [32m                  [0;39m Completed initialization in 2 ms
2022-07-14 16:44:57.905 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706928651079681[0;39m ------------- 开始 -------------
2022-07-14 16:44:57.905 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706928651079680[0;39m ------------- 开始 -------------
2022-07-14 16:44:57.905 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706928651079682[0;39m ------------- 开始 -------------
2022-07-14 16:44:57.906 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706928651079682[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:44:57.906 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706928651079681[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:44:57.906 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706928651079680[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:44:57.907 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706928651079682[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:44:57.907 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706928651079681[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:44:57.907 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706928651079680[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:44:57.907 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706928651079681[0;39m 远程地址: 127.0.0.1
2022-07-14 16:44:57.907 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706928651079682[0;39m 远程地址: 127.0.0.1
2022-07-14 16:44:57.907 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706928651079680[0;39m 远程地址: 127.0.0.1
2022-07-14 16:44:57.915 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：m3vBfu1CsT，session id：0，当前连接数：1
2022-07-14 16:44:57.952 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706928651079682[0;39m 请求参数: []
2022-07-14 16:44:57.952 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706928651079680[0;39m 请求参数: []
2022-07-14 16:44:57.952 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706928651079681[0;39m 请求参数: []
2022-07-14 16:44:57.971 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m202706928651079682[0;39m HikariPool-1 - Starting...
2022-07-14 16:44:58.081 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m202706928651079682[0;39m HikariPool-1 - Start completed.
2022-07-14 16:44:58.091 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706928651079681[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:44:58.091 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706928651079680[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:44:58.091 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706928651079682[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:44:58.113 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706928651079681[0;39m ==> Parameters: 
2022-07-14 16:44:58.113 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706928651079682[0;39m ==> Parameters: 
2022-07-14 16:44:58.113 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706928651079680[0;39m ==> Parameters: 
2022-07-14 16:44:58.132 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202706928651079680[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:44:58.132 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706928651079682[0;39m <==      Total: 0
2022-07-14 16:44:58.132 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:44:58.132 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:44:58.133 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202706928651079680[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:44:58.134 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:44:58.135 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706928651079680[0;39m <==      Total: 1
2022-07-14 16:44:58.135 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:44:58.135 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:44:58.136 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:44:58.136 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:44:58.136 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:44:58.137 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:44:58.137 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:44:58.138 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:44:58.138 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:44:58.139 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:44:58.140 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:44:58.140 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:44:58.141 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:44:58.141 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706928651079681[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:44:58.142 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706928651079681[0;39m <==      Total: 16
2022-07-14 16:44:58.159 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706928651079682[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:44:58.159 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706928651079682[0;39m ------------- 结束 耗时：256 ms -------------
2022-07-14 16:44:58.162 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706928651079681[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:44:58.163 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706928651079681[0;39m ------------- 结束 耗时：260 ms -------------
2022-07-14 16:44:58.163 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706928651079680[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:44:58.163 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706928651079680[0;39m ------------- 结束 耗时：260 ms -------------
2022-07-14 16:45:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706937509449728[0;39m 生成今日电子书快照开始
2022-07-14 16:45:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706937509449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706937509449728[0;39m ==> Parameters: 
2022-07-14 16:45:00.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706937509449728[0;39m <==    Updates: 0
2022-07-14 16:45:00.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706937509449728[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:45:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202706958468386816[0;39m 更新电子书下的文档数据开始
2022-07-14 16:45:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706958468386816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:45:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706958468386816[0;39m ==> Parameters: 
2022-07-14 16:45:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202706958468386816[0;39m <==    Updates: 3
2022-07-14 16:45:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202706958468386816[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-14 16:45:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706958489358336[0;39m 生成今日电子书快照开始
2022-07-14 16:45:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706958489358336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706958489358336[0;39m ==> Parameters: 
2022-07-14 16:45:05.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706958489358336[0;39m <==    Updates: 0
2022-07-14 16:45:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706958489358336[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:45:08.966 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：m3vBfu1CsT，session id：0！当前连接数：0
2022-07-14 16:45:09.808 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：NLhHOyp4Mi，session id：1，当前连接数：1
2022-07-14 16:45:09.869 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706978840121346[0;39m ------------- 开始 -------------
2022-07-14 16:45:09.869 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706978840121345[0;39m ------------- 开始 -------------
2022-07-14 16:45:09.869 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202706978840121344[0;39m ------------- 开始 -------------
2022-07-14 16:45:09.870 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706978840121344[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:45:09.870 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706978840121346[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:45:09.870 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202706978840121345[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:45:09.870 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706978840121346[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:45:09.870 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706978840121344[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:45:09.870 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202706978840121345[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:45:09.870 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706978840121346[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:09.871 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706978840121344[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:09.871 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202706978840121345[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:09.871 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706978840121346[0;39m 请求参数: []
2022-07-14 16:45:09.871 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706978840121344[0;39m 请求参数: []
2022-07-14 16:45:09.871 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202706978840121345[0;39m 请求参数: []
2022-07-14 16:45:09.872 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706978840121346[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:45:09.872 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706978840121345[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:45:09.872 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706978840121344[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:45:09.872 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706978840121346[0;39m ==> Parameters: 
2022-07-14 16:45:09.872 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706978840121345[0;39m ==> Parameters: 
2022-07-14 16:45:09.872 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706978840121344[0;39m ==> Parameters: 
2022-07-14 16:45:09.873 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202706978840121346[0;39m <==      Total: 0
2022-07-14 16:45:09.873 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202706978840121345[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:45:09.873 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:45:09.874 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706978840121346[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:45:09.874 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:45:09.874 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202706978840121345[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:45:09.874 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706978840121346[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:45:09.874 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:45:09.874 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202706978840121345[0;39m <==      Total: 1
2022-07-14 16:45:09.875 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:45:09.875 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706978840121345[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:45:09.875 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706978840121345[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:45:09.875 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:45:09.876 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:45:09.876 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:45:09.877 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:45:09.877 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:45:09.879 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:45:09.880 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:45:09.880 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:45:09.881 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:45:09.881 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:45:09.882 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:45:09.882 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:45:09.882 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202706978840121344[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:45:09.883 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202706978840121344[0;39m <==      Total: 16
2022-07-14 16:45:09.884 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202706978840121344[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:45:09.884 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202706978840121344[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-14 16:45:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202706979397963776[0;39m 生成今日电子书快照开始
2022-07-14 16:45:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706979397963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706979397963776[0;39m ==> Parameters: 
2022-07-14 16:45:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202706979397963776[0;39m <==    Updates: 0
2022-07-14 16:45:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202706979397963776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:45:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707000411426816[0;39m 生成今日电子书快照开始
2022-07-14 16:45:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707000411426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707000411426816[0;39m ==> Parameters: 
2022-07-14 16:45:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707000411426816[0;39m <==    Updates: 0
2022-07-14 16:45:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707000411426816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:45:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707021370363904[0;39m 生成今日电子书快照开始
2022-07-14 16:45:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707021370363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707021370363904[0;39m ==> Parameters: 
2022-07-14 16:45:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707021370363904[0;39m <==    Updates: 0
2022-07-14 16:45:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707021370363904[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 16:45:24.575 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202706928651079681[0;39m 连接关闭，token：NLhHOyp4Mi，session id：1！当前连接数：0
2022-07-14 16:45:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707042362855424[0;39m 生成今日电子书快照开始
2022-07-14 16:45:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707042362855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707042362855424[0;39m ==> Parameters: 
2022-07-14 16:45:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707042362855424[0;39m <==    Updates: 0
2022-07-14 16:45:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707042362855424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:45:25.368 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202706928651079680[0;39m 有新连接：token：VntonD5U9l，session id：2，当前连接数：1
2022-07-14 16:45:25.532 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707044535504896[0;39m ------------- 开始 -------------
2022-07-14 16:45:25.532 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707044535504897[0;39m ------------- 开始 -------------
2022-07-14 16:45:25.532 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707044535504898[0;39m ------------- 开始 -------------
2022-07-14 16:45:25.533 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707044535504896[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:45:25.533 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707044535504898[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:45:25.533 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707044535504897[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:45:25.533 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707044535504896[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:45:25.533 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707044535504898[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:45:25.533 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707044535504897[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:45:25.533 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707044535504896[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:25.533 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707044535504898[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:25.534 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707044535504897[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:25.534 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707044535504896[0;39m 请求参数: []
2022-07-14 16:45:25.534 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707044535504898[0;39m 请求参数: []
2022-07-14 16:45:25.534 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707044535504897[0;39m 请求参数: []
2022-07-14 16:45:25.535 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707044535504898[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:45:25.535 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707044535504896[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:45:25.535 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707044535504898[0;39m ==> Parameters: 
2022-07-14 16:45:25.535 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707044535504896[0;39m ==> Parameters: 
2022-07-14 16:45:25.535 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707044535504897[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:45:25.536 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707044535504897[0;39m ==> Parameters: 
2022-07-14 16:45:25.536 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707044535504898[0;39m <==      Total: 0
2022-07-14 16:45:25.536 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707044535504896[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:45:25.537 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707044535504898[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:45:25.537 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707044535504898[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:45:25.537 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707044535504896[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:45:25.537 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:45:25.538 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707044535504896[0;39m <==      Total: 1
2022-07-14 16:45:25.538 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:45:25.539 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707044535504896[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:45:25.539 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:45:25.539 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707044535504896[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:45:25.540 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:45:25.540 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:45:25.541 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:45:25.542 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:45:25.543 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:45:25.543 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:45:25.544 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:45:25.544 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:45:25.545 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:45:25.545 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:45:25.546 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:45:25.546 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:45:25.547 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:45:25.547 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707044535504897[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:45:25.547 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707044535504897[0;39m <==      Total: 16
2022-07-14 16:45:25.549 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707044535504897[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:45:25.549 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707044535504897[0;39m ------------- 结束 耗时：17 ms -------------
2022-07-14 16:45:28.994 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707059056185344[0;39m ------------- 开始 -------------
2022-07-14 16:45:28.994 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707059056185344[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:45:28.994 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707059056185344[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:45:28.994 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707059056185344[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:28.996 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707059056185344[0;39m 请求参数: [{"categoryId2":503,"page":1,"size":1000}]
2022-07-14 16:45:29.166 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707059056185344[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:45:29.167 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707059056185344[0;39m ==> Parameters: 503(Long)
2022-07-14 16:45:29.167 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707059056185344[0;39m <==    Columns: count(0)
2022-07-14 16:45:29.168 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707059056185344[0;39m <==        Row: 1
2022-07-14 16:45:29.169 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707059056185344[0;39m <==      Total: 1
2022-07-14 16:45:29.171 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707059056185344[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:45:29.171 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707059056185344[0;39m ==> Parameters: 503(Long), 1000(Integer)
2022-07-14 16:45:29.172 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707059056185344[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:45:29.173 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707059056185344[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 36, 9
2022-07-14 16:45:29.173 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707059056185344[0;39m <==      Total: 1
2022-07-14 16:45:29.174 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202707059056185344[0;39m 总行数：1
2022-07-14 16:45:29.174 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202707059056185344[0;39m 总页数：1
2022-07-14 16:45:29.181 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707059056185344[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":36,"voteCount":9}],"total":1},"success":true}
2022-07-14 16:45:29.182 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707059056185344[0;39m ------------- 结束 耗时：188 ms -------------
2022-07-14 16:45:29.452 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707060977176576[0;39m ------------- 开始 -------------
2022-07-14 16:45:29.452 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707060977176576[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:45:29.453 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707060977176576[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:45:29.453 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707060977176576[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:29.453 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707060977176576[0;39m 请求参数: [{"categoryId2":502,"page":1,"size":1000}]
2022-07-14 16:45:29.456 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707060977176576[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:45:29.457 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707060977176576[0;39m ==> Parameters: 502(Long)
2022-07-14 16:45:29.458 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707060977176576[0;39m <==    Columns: count(0)
2022-07-14 16:45:29.458 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707060977176576[0;39m <==        Row: 0
2022-07-14 16:45:29.458 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707060977176576[0;39m <==      Total: 1
2022-07-14 16:45:29.459 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202707060977176576[0;39m 总行数：0
2022-07-14 16:45:29.459 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202707060977176576[0;39m 总页数：0
2022-07-14 16:45:29.459 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707060977176576[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:45:29.459 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707060977176576[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:45:29.977 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707063179186176[0;39m ------------- 开始 -------------
2022-07-14 16:45:29.978 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707063179186176[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:45:29.978 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707063179186176[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:45:29.978 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707063179186176[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:29.979 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707063179186176[0;39m 请求参数: [{"categoryId2":502,"page":1,"size":1000}]
2022-07-14 16:45:29.984 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707063179186176[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:45:29.985 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707063179186176[0;39m ==> Parameters: 502(Long)
2022-07-14 16:45:29.985 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707063179186176[0;39m <==    Columns: count(0)
2022-07-14 16:45:29.985 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707063179186176[0;39m <==        Row: 0
2022-07-14 16:45:29.986 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707063179186176[0;39m <==      Total: 1
2022-07-14 16:45:29.986 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202707063179186176[0;39m 总行数：0
2022-07-14 16:45:29.986 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202707063179186176[0;39m 总页数：0
2022-07-14 16:45:29.986 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707063179186176[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:45:29.987 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707063179186176[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:45:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707063305015296[0;39m 生成今日电子书快照开始
2022-07-14 16:45:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707063305015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707063305015296[0;39m ==> Parameters: 
2022-07-14 16:45:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707063305015296[0;39m <==    Updates: 0
2022-07-14 16:45:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707063305015296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:45:32.199 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707072498929664[0;39m ------------- 开始 -------------
2022-07-14 16:45:32.199 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707072498929664[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:45:32.200 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707072498929664[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:45:32.200 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707072498929664[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:32.200 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707072498929664[0;39m 请求参数: [{"categoryId2":401,"page":1,"size":1000}]
2022-07-14 16:45:32.202 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707072498929664[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:45:32.202 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707072498929664[0;39m ==> Parameters: 401(Long)
2022-07-14 16:45:32.204 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707072498929664[0;39m <==    Columns: count(0)
2022-07-14 16:45:32.204 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707072498929664[0;39m <==        Row: 2
2022-07-14 16:45:32.204 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707072498929664[0;39m <==      Total: 1
2022-07-14 16:45:32.205 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707072498929664[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:45:32.205 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707072498929664[0;39m ==> Parameters: 401(Long), 1000(Integer)
2022-07-14 16:45:32.206 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707072498929664[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:45:32.206 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707072498929664[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 88, 2342, 2
2022-07-14 16:45:32.206 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707072498929664[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 12, 32, 4
2022-07-14 16:45:32.207 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707072498929664[0;39m <==      Total: 2
2022-07-14 16:45:32.207 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202707072498929664[0;39m 总行数：2
2022-07-14 16:45:32.207 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202707072498929664[0;39m 总页数：1
2022-07-14 16:45:32.207 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707072498929664[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":88,"id":4,"name":"Mysql 入门教程","viewCount":2342,"voteCount":2},{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":12,"id":5,"name":"Oracle入门教程","viewCount":32,"voteCount":4}],"total":2},"success":true}
2022-07-14 16:45:32.208 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707072498929664[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:45:33.612 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707078425481216[0;39m ------------- 开始 -------------
2022-07-14 16:45:33.612 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707078425481216[0;39m 请求地址: http://127.0.0.1:8880/doc/all/4 GET
2022-07-14 16:45:33.612 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707078425481216[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:45:33.612 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707078425481216[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:33.612 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707078425481216[0;39m 请求参数: [4]
2022-07-14 16:45:33.617 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202707078425481216[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:45:33.618 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202707078425481216[0;39m ==> Parameters: 4(Long)
2022-07-14 16:45:33.621 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202707078425481216[0;39m <==      Total: 0
2022-07-14 16:45:33.621 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707078425481216[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:45:33.621 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707078425481216[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:45:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707084255563776[0;39m 生成今日电子书快照开始
2022-07-14 16:45:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707084255563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707084255563776[0;39m ==> Parameters: 
2022-07-14 16:45:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707084255563776[0;39m <==    Updates: 0
2022-07-14 16:45:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707084255563776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:45:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202707084276535296[0;39m 更新电子书下的文档数据开始
2022-07-14 16:45:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707084276535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:45:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707084276535296[0;39m ==> Parameters: 
2022-07-14 16:45:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707084276535296[0;39m <==    Updates: 3
2022-07-14 16:45:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202707084276535296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:45:36.825 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707091901779968[0;39m ------------- 开始 -------------
2022-07-14 16:45:36.826 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707091901779968[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:45:36.826 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707091905974272[0;39m ------------- 开始 -------------
2022-07-14 16:45:36.826 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707091905974273[0;39m ------------- 开始 -------------
2022-07-14 16:45:36.826 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707091901779968[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:45:36.826 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707091905974272[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:45:36.826 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707091905974273[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:45:36.826 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707091905974272[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:45:36.826 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707091901779968[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:36.827 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707091905974273[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:45:36.827 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707091905974272[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:36.827 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707091901779968[0;39m 请求参数: []
2022-07-14 16:45:36.827 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707091905974273[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:36.827 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707091905974272[0;39m 请求参数: []
2022-07-14 16:45:36.827 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707091905974273[0;39m 请求参数: []
2022-07-14 16:45:36.828 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707091901779968[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:45:36.828 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707091905974272[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:45:36.828 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707091905974273[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:45:36.828 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707091905974272[0;39m ==> Parameters: 
2022-07-14 16:45:36.828 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707091901779968[0;39m ==> Parameters: 
2022-07-14 16:45:36.828 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707091905974273[0;39m ==> Parameters: 
2022-07-14 16:45:36.830 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707091901779968[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:45:36.830 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707091905974272[0;39m <==      Total: 0
2022-07-14 16:45:36.830 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:45:36.830 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707091901779968[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:45:36.830 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:45:36.830 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707091905974272[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:45:36.830 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707091901779968[0;39m <==      Total: 1
2022-07-14 16:45:36.830 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707091905974272[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:45:36.830 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:45:36.831 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707091901779968[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:45:36.831 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:45:36.831 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707091901779968[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:45:36.831 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:45:36.831 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:45:36.832 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:45:36.832 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:45:36.832 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:45:36.833 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:45:36.833 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:45:36.834 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:45:36.834 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:45:36.834 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:45:36.835 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:45:36.835 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:45:36.835 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707091905974273[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:45:36.835 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707091905974273[0;39m <==      Total: 16
2022-07-14 16:45:36.836 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707091905974273[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:45:36.836 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707091905974273[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:45:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707105256443904[0;39m 生成今日电子书快照开始
2022-07-14 16:45:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707105256443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707105256443904[0;39m ==> Parameters: 
2022-07-14 16:45:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707105256443904[0;39m <==    Updates: 0
2022-07-14 16:45:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707105256443904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:45:43.781 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707121077358592[0;39m ------------- 开始 -------------
2022-07-14 16:45:43.782 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707121077358592[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:45:43.782 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707121077358592[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:45:43.782 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707121077358592[0;39m 远程地址: 127.0.0.1
2022-07-14 16:45:43.782 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707121077358592[0;39m 请求参数: [{"categoryId2":401,"page":1,"size":1000}]
2022-07-14 16:45:43.785 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707121077358592[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:45:43.786 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707121077358592[0;39m ==> Parameters: 401(Long)
2022-07-14 16:45:43.787 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707121077358592[0;39m <==    Columns: count(0)
2022-07-14 16:45:43.787 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707121077358592[0;39m <==        Row: 2
2022-07-14 16:45:43.788 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707121077358592[0;39m <==      Total: 1
2022-07-14 16:45:43.788 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707121077358592[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:45:43.788 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707121077358592[0;39m ==> Parameters: 401(Long), 1000(Integer)
2022-07-14 16:45:43.789 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707121077358592[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:45:43.789 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707121077358592[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 88, 2342, 2
2022-07-14 16:45:43.790 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707121077358592[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 12, 32, 4
2022-07-14 16:45:43.790 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707121077358592[0;39m <==      Total: 2
2022-07-14 16:45:43.790 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202707121077358592[0;39m 总行数：2
2022-07-14 16:45:43.790 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202707121077358592[0;39m 总页数：1
2022-07-14 16:45:43.791 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707121077358592[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":88,"id":4,"name":"Mysql 入门教程","viewCount":2342,"voteCount":2},{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":12,"id":5,"name":"Oracle入门教程","viewCount":32,"voteCount":4}],"total":2},"success":true}
2022-07-14 16:45:43.791 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707121077358592[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:45:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707126215380992[0;39m 生成今日电子书快照开始
2022-07-14 16:45:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707126215380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707126215380992[0;39m ==> Parameters: 
2022-07-14 16:45:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707126215380992[0;39m <==    Updates: 0
2022-07-14 16:45:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707126215380992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:45:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707147170123776[0;39m 生成今日电子书快照开始
2022-07-14 16:45:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707147170123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707147170123776[0;39m ==> Parameters: 
2022-07-14 16:45:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707147170123776[0;39m <==    Updates: 0
2022-07-14 16:45:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707147170123776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:45:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707168166809600[0;39m 生成今日电子书快照开始
2022-07-14 16:45:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707168166809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:45:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707168166809600[0;39m ==> Parameters: 
2022-07-14 16:45:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707168166809600[0;39m <==    Updates: 0
2022-07-14 16:45:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707168166809600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:46:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707189125746688[0;39m 生成今日电子书快照开始
2022-07-14 16:46:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707189125746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707189125746688[0;39m ==> Parameters: 
2022-07-14 16:46:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707189125746688[0;39m <==    Updates: 0
2022-07-14 16:46:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707189125746688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:46:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202707210130821120[0;39m 更新电子书下的文档数据开始
2022-07-14 16:46:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707210130821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:46:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707210130821120[0;39m ==> Parameters: 
2022-07-14 16:46:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707210130821120[0;39m <==    Updates: 3
2022-07-14 16:46:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202707210130821120[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-14 16:46:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707210143404032[0;39m 生成今日电子书快照开始
2022-07-14 16:46:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707210143404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707210143404032[0;39m ==> Parameters: 
2022-07-14 16:46:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707210143404032[0;39m <==    Updates: 0
2022-07-14 16:46:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707210143404032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:46:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707231072980992[0;39m 生成今日电子书快照开始
2022-07-14 16:46:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707231072980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707231072980992[0;39m ==> Parameters: 
2022-07-14 16:46:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707231072980992[0;39m <==    Updates: 0
2022-07-14 16:46:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707231072980992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:46:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707252048695296[0;39m 生成今日电子书快照开始
2022-07-14 16:46:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707252048695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707252048695296[0;39m ==> Parameters: 
2022-07-14 16:46:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707252048695296[0;39m <==    Updates: 0
2022-07-14 16:46:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707252048695296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:46:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707273003438080[0;39m 生成今日电子书快照开始
2022-07-14 16:46:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707273003438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707273003438080[0;39m ==> Parameters: 
2022-07-14 16:46:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707273003438080[0;39m <==    Updates: 0
2022-07-14 16:46:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707273003438080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:46:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707294025289728[0;39m 生成今日电子书快照开始
2022-07-14 16:46:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707294025289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707294025289728[0;39m ==> Parameters: 
2022-07-14 16:46:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707294025289728[0;39m <==    Updates: 0
2022-07-14 16:46:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707294025289728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:46:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707314975838208[0;39m 生成今日电子书快照开始
2022-07-14 16:46:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707314975838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707314975838208[0;39m ==> Parameters: 
2022-07-14 16:46:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707314975838208[0;39m <==    Updates: 0
2022-07-14 16:46:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707314975838208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:46:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202707335917998080[0;39m 更新电子书下的文档数据开始
2022-07-14 16:46:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707335917998080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:46:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707335917998080[0;39m ==> Parameters: 
2022-07-14 16:46:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707335917998080[0;39m <==    Updates: 3
2022-07-14 16:46:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202707335917998080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:46:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707335926386688[0;39m 生成今日电子书快照开始
2022-07-14 16:46:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707335926386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707335926386688[0;39m ==> Parameters: 
2022-07-14 16:46:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707335926386688[0;39m <==    Updates: 0
2022-07-14 16:46:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707335926386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:46:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707356897906688[0;39m 生成今日电子书快照开始
2022-07-14 16:46:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707356897906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707356897906688[0;39m ==> Parameters: 
2022-07-14 16:46:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707356897906688[0;39m <==    Updates: 0
2022-07-14 16:46:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707356897906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:46:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707377898786816[0;39m 生成今日电子书快照开始
2022-07-14 16:46:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707377898786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707377898786816[0;39m ==> Parameters: 
2022-07-14 16:46:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707377898786816[0;39m <==    Updates: 0
2022-07-14 16:46:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707377898786816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:46:46.011 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202707063179186176[0;39m 连接关闭，token：VntonD5U9l，session id：2！当前连接数：0
2022-07-14 16:46:46.624 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202707072498929664[0;39m 有新连接：token：LYp1Qh7KPS，session id：3，当前连接数：1
2022-07-14 16:46:46.683 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707384907468800[0;39m ------------- 开始 -------------
2022-07-14 16:46:46.684 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707384907468800[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:46:46.684 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707384907468800[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:46:46.684 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707384911663104[0;39m ------------- 开始 -------------
2022-07-14 16:46:46.684 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707384907468800[0;39m 远程地址: 127.0.0.1
2022-07-14 16:46:46.684 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707384911663104[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:46:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707384915857408[0;39m ------------- 开始 -------------
2022-07-14 16:46:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707384907468800[0;39m 请求参数: []
2022-07-14 16:46:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707384911663104[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:46:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707384915857408[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:46:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707384911663104[0;39m 远程地址: 127.0.0.1
2022-07-14 16:46:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707384915857408[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:46:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707384915857408[0;39m 远程地址: 127.0.0.1
2022-07-14 16:46:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707384911663104[0;39m 请求参数: []
2022-07-14 16:46:46.685 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707384907468800[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:46:46.685 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707384915857408[0;39m 请求参数: []
2022-07-14 16:46:46.686 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707384911663104[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:46:46.686 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707384907468800[0;39m ==> Parameters: 
2022-07-14 16:46:46.686 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707384911663104[0;39m ==> Parameters: 
2022-07-14 16:46:46.686 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707384915857408[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:46:46.686 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707384915857408[0;39m ==> Parameters: 
2022-07-14 16:46:46.687 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707384911663104[0;39m <==      Total: 0
2022-07-14 16:46:46.687 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707384907468800[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:46:46.687 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707384911663104[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:46:46.687 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707384907468800[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:46:46.687 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:46:46.687 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707384911663104[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:46:46.687 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:46:46.687 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707384907468800[0;39m <==      Total: 1
2022-07-14 16:46:46.688 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:46:46.688 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707384907468800[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:46:46.688 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:46:46.688 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707384907468800[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:46:46.688 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:46:46.689 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:46:46.689 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:46:46.689 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:46:46.690 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:46:46.690 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:46:46.690 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:46:46.690 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:46:46.691 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:46:46.691 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:46:46.691 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:46:46.691 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:46:46.691 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707384915857408[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:46:46.692 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707384915857408[0;39m <==      Total: 16
2022-07-14 16:46:46.692 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707384915857408[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:46:46.693 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707384915857408[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707397473603584[0;39m ------------- 开始 -------------
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707397473603586[0;39m ------------- 开始 -------------
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707397473603585[0;39m ------------- 开始 -------------
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707397473603584[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707397473603584[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707397473603585[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707397473603586[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707397473603584[0;39m 远程地址: 127.0.0.1
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707397473603585[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707397473603586[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707397473603585[0;39m 远程地址: 127.0.0.1
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707397473603586[0;39m 远程地址: 127.0.0.1
2022-07-14 16:46:49.679 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707397473603584[0;39m 请求参数: []
2022-07-14 16:46:49.680 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707397473603585[0;39m 请求参数: []
2022-07-14 16:46:49.680 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707397473603586[0;39m 请求参数: []
2022-07-14 16:46:49.680 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707397473603585[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:46:49.680 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707397473603584[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:46:49.680 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707397473603586[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:46:49.681 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707397473603585[0;39m ==> Parameters: 
2022-07-14 16:46:49.681 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707397473603584[0;39m ==> Parameters: 
2022-07-14 16:46:49.681 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707397473603586[0;39m ==> Parameters: 
2022-07-14 16:46:49.681 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707397473603586[0;39m <==      Total: 0
2022-07-14 16:46:49.681 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:46:49.681 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707397473603585[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:46:49.682 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707397473603586[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:46:49.682 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:46:49.682 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707397473603586[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:46:49.682 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707397473603585[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:46:49.682 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:46:49.682 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707397473603585[0;39m <==      Total: 1
2022-07-14 16:46:49.682 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:46:49.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:46:49.683 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707397473603585[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:46:49.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:46:49.683 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707397473603585[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:46:49.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:46:49.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:46:49.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:46:49.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:46:49.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:46:49.685 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:46:49.685 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:46:49.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:46:49.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:46:49.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:46:49.687 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707397473603584[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:46:49.687 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707397473603584[0;39m <==      Total: 16
2022-07-14 16:46:49.688 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707397473603584[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:46:49.689 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707397473603584[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:46:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707398832558080[0;39m 生成今日电子书快照开始
2022-07-14 16:46:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707398832558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707398832558080[0;39m ==> Parameters: 
2022-07-14 16:46:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707398832558080[0;39m <==    Updates: 0
2022-07-14 16:46:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707398832558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:46:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707419795689472[0;39m 生成今日电子书快照开始
2022-07-14 16:46:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707419795689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:46:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707419795689472[0;39m ==> Parameters: 
2022-07-14 16:46:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707419795689472[0;39m <==    Updates: 0
2022-07-14 16:46:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707419795689472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:47:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707440792375296[0;39m 生成今日电子书快照开始
2022-07-14 16:47:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707440792375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707440792375296[0;39m ==> Parameters: 
2022-07-14 16:47:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707440792375296[0;39m <==    Updates: 0
2022-07-14 16:47:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707440792375296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:47:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707461789061120[0;39m 生成今日电子书快照开始
2022-07-14 16:47:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707461789061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707461789061120[0;39m ==> Parameters: 
2022-07-14 16:47:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707461789061120[0;39m <==    Updates: 0
2022-07-14 16:47:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707461789061120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:47:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202707461810032640[0;39m 更新电子书下的文档数据开始
2022-07-14 16:47:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707461810032640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:47:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707461810032640[0;39m ==> Parameters: 
2022-07-14 16:47:05.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707461810032640[0;39m <==    Updates: 3
2022-07-14 16:47:05.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202707461810032640[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:47:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707482747998208[0;39m 生成今日电子书快照开始
2022-07-14 16:47:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707482747998208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707482747998208[0;39m ==> Parameters: 
2022-07-14 16:47:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707482747998208[0;39m <==    Updates: 0
2022-07-14 16:47:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707482747998208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:47:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707503711129600[0;39m 生成今日电子书快照开始
2022-07-14 16:47:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707503711129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707503711129600[0;39m ==> Parameters: 
2022-07-14 16:47:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707503711129600[0;39m <==    Updates: 0
2022-07-14 16:47:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707503711129600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:47:19.738 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202707059056185344[0;39m 连接关闭，token：LYp1Qh7KPS，session id：3！当前连接数：0
2022-07-14 16:47:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707524703621120[0;39m 生成今日电子书快照开始
2022-07-14 16:47:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707524703621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707524703621120[0;39m ==> Parameters: 
2022-07-14 16:47:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707524703621120[0;39m <==    Updates: 0
2022-07-14 16:47:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707524703621120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:47:21.897 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202707060977176576[0;39m 有新连接：token：7wNZ7V9S1a，session id：4，当前连接数：1
2022-07-14 16:47:22.012 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707533088034816[0;39m ------------- 开始 -------------
2022-07-14 16:47:22.012 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707533088034817[0;39m ------------- 开始 -------------
2022-07-14 16:47:22.012 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707533088034816[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:47:22.012 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707533088034817[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707533088034816[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707533088034817[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707533092229120[0;39m ------------- 开始 -------------
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707533088034816[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707533088034817[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707533092229120[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707533088034816[0;39m 请求参数: []
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707533088034817[0;39m 请求参数: []
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707533092229120[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707533092229120[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:22.013 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707533092229120[0;39m 请求参数: []
2022-07-14 16:47:22.014 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707533088034817[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:47:22.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707533088034816[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:47:22.014 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707533088034817[0;39m ==> Parameters: 
2022-07-14 16:47:22.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707533088034816[0;39m ==> Parameters: 
2022-07-14 16:47:22.014 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707533092229120[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:47:22.015 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707533092229120[0;39m ==> Parameters: 
2022-07-14 16:47:22.015 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707533088034817[0;39m <==      Total: 0
2022-07-14 16:47:22.015 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707533088034816[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:47:22.015 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707533088034817[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:47:22.015 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707533088034816[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:47:22.015 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:47:22.015 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707533088034817[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:47:22.016 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:47:22.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707533088034816[0;39m <==      Total: 1
2022-07-14 16:47:22.016 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:47:22.016 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707533088034816[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:47:22.016 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:47:22.016 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707533088034816[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:47:22.017 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:47:22.017 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:47:22.018 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:47:22.018 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:47:22.018 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:47:22.019 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:47:22.019 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:47:22.020 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:47:22.020 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:47:22.020 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:47:22.021 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:47:22.021 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:47:22.022 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707533092229120[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:47:22.022 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707533092229120[0;39m <==      Total: 16
2022-07-14 16:47:22.023 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707533092229120[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:47:22.023 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707533092229120[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:47:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707545679335424[0;39m 生成今日电子书快照开始
2022-07-14 16:47:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707545679335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707545679335424[0;39m ==> Parameters: 
2022-07-14 16:47:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707545679335424[0;39m <==    Updates: 0
2022-07-14 16:47:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707545679335424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:47:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707566655049728[0;39m 生成今日电子书快照开始
2022-07-14 16:47:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707566655049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707566655049728[0;39m ==> Parameters: 
2022-07-14 16:47:30.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707566655049728[0;39m <==    Updates: 0
2022-07-14 16:47:30.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707566655049728[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:47:30.366 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707568127250432[0;39m ------------- 开始 -------------
2022-07-14 16:47:30.366 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707568127250432[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:47:30.366 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707568127250432[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:47:30.366 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707568127250432[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:30.366 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707568127250432[0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2022-07-14 16:47:30.369 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707568127250432[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:47:30.370 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707568127250432[0;39m ==> Parameters: 102(Long)
2022-07-14 16:47:30.370 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707568127250432[0;39m <==    Columns: count(0)
2022-07-14 16:47:30.371 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707568127250432[0;39m <==        Row: 0
2022-07-14 16:47:30.371 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707568127250432[0;39m <==      Total: 1
2022-07-14 16:47:30.371 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202707568127250432[0;39m 总行数：0
2022-07-14 16:47:30.372 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202707568127250432[0;39m 总页数：0
2022-07-14 16:47:30.372 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707568127250432[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:47:30.372 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707568127250432[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:47:30.928 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707570484449280[0;39m ------------- 开始 -------------
2022-07-14 16:47:30.928 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707570484449280[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:47:30.929 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707570484449280[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:47:30.929 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707570484449280[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:30.929 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707570484449280[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2022-07-14 16:47:30.936 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707570484449280[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:47:30.937 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707570484449280[0;39m ==> Parameters: 101(Long)
2022-07-14 16:47:30.937 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707570484449280[0;39m <==    Columns: count(0)
2022-07-14 16:47:30.938 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202707570484449280[0;39m <==        Row: 1
2022-07-14 16:47:30.938 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202707570484449280[0;39m <==      Total: 1
2022-07-14 16:47:30.939 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707570484449280[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:47:30.939 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707570484449280[0;39m ==> Parameters: 101(Long), 1000(Integer)
2022-07-14 16:47:30.940 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707570484449280[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:47:30.940 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202707570484449280[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 3, 1
2022-07-14 16:47:30.941 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202707570484449280[0;39m <==      Total: 1
2022-07-14 16:47:30.941 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202707570484449280[0;39m 总行数：1
2022-07-14 16:47:30.942 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202707570484449280[0;39m 总页数：1
2022-07-14 16:47:30.942 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707570484449280[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":3,"voteCount":1}],"total":1},"success":true}
2022-07-14 16:47:30.942 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707570484449280[0;39m ------------- 结束 耗时：14 ms -------------
2022-07-14 16:47:32.658 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707577740595200[0;39m ------------- 开始 -------------
2022-07-14 16:47:32.658 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707577740595200[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2022-07-14 16:47:32.658 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707577740595200[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:47:32.658 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707577740595200[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:32.658 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707577740595200[0;39m 请求参数: [6]
2022-07-14 16:47:32.660 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202707577740595200[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:47:32.660 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202707577740595200[0;39m ==> Parameters: 6(Long)
2022-07-14 16:47:32.665 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202707577740595200[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:47:32.665 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202707577740595200[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 3, 1
2022-07-14 16:47:32.666 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202707577740595200[0;39m <==      Total: 1
2022-07-14 16:47:32.673 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707577740595200[0;39m 返回结果: {"content":[{"ebookId":6,"id":202703460804726784,"name":"Vue3","parent":0,"sort":1,"viewCount":3,"voteCount":1}],"success":true}
2022-07-14 16:47:32.673 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707577740595200[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-14 16:47:32.684 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707577849647104[0;39m ------------- 开始 -------------
2022-07-14 16:47:32.684 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707577849647104[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202703460804726784 GET
2022-07-14 16:47:32.684 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707577849647104[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:47:32.685 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707577849647104[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:32.685 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707577849647104[0;39m 请求参数: [202703460804726784]
2022-07-14 16:47:32.686 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202707577849647104[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:47:32.686 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202707577849647104[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:47:32.702 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202707577849647104[0;39m <==    Columns: id, content
2022-07-14 16:47:32.702 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202707577849647104[0;39m <==        Row: 202703460804726784, <<BLOB>>
2022-07-14 16:47:32.703 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202707577849647104[0;39m <==      Total: 1
2022-07-14 16:47:32.704 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202707577849647104[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:47:32.704 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202707577849647104[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 16:47:32.833 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202707577849647104[0;39m <==    Updates: 1
2022-07-14 16:47:32.834 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707577849647104[0;39m 返回结果: {"content":"<blockquote><h1 id=\"8byqb\"><font face=\"仿宋\" size=\"6\">Vue3全家桶</font></h1></blockquote>","success":true}
2022-07-14 16:47:32.834 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707577849647104[0;39m ------------- 结束 耗时：150 ms -------------
2022-07-14 16:47:33.585 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707581628715008[0;39m ------------- 开始 -------------
2022-07-14 16:47:33.586 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707581628715008[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202703460804726784 GET
2022-07-14 16:47:33.586 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707581628715008[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 16:47:33.586 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707581628715008[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:33.586 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707581628715008[0;39m 请求参数: [202703460804726784]
2022-07-14 16:47:34.587 INFO  com.zs.wikibb.utils.RedisUtil                     :28  
                [32m202707581628715008[0;39m key已存在：DOC_VOTE_202703460804726784_127.0.0.1
2022-07-14 16:47:34.589 WARN  c.zs.wikibb.controller.ControllerExceptionHandler :45  
                [32m202707581628715008[0;39m 业务异常：您已点赞过
2022-07-14 16:47:34.590 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m202707581628715008[0;39m Resolved [com.zs.wikibb.exception.BusinessException: 您已点赞过]
2022-07-14 16:47:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707587567849472[0;39m 生成今日电子书快照开始
2022-07-14 16:47:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707587567849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707587567849472[0;39m ==> Parameters: 
2022-07-14 16:47:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707587567849472[0;39m <==    Updates: 0
2022-07-14 16:47:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707587567849472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:47:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202707587580432384[0;39m 更新电子书下的文档数据开始
2022-07-14 16:47:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707587580432384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:47:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707587580432384[0;39m ==> Parameters: 
2022-07-14 16:47:35.061 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707587580432384[0;39m <==    Updates: 3
2022-07-14 16:47:35.061 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202707587580432384[0;39m 更新电子书下的文档数据结束，耗时：57 毫秒
2022-07-14 16:47:38.263 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707601249669120[0;39m ------------- 开始 -------------
2022-07-14 16:47:38.263 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707601249669121[0;39m ------------- 开始 -------------
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707601249669120[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707601249669121[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707601249669120[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707601249669121[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707601253863424[0;39m ------------- 开始 -------------
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707601249669120[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707601249669121[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707601253863424[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707601249669121[0;39m 请求参数: []
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707601249669120[0;39m 请求参数: []
2022-07-14 16:47:38.264 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707601253863424[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:47:38.265 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707601253863424[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:38.265 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707601253863424[0;39m 请求参数: []
2022-07-14 16:47:38.265 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707601249669120[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:47:38.265 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707601249669121[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:47:38.265 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707601249669120[0;39m ==> Parameters: 
2022-07-14 16:47:38.265 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707601249669121[0;39m ==> Parameters: 
2022-07-14 16:47:38.266 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707601253863424[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:47:38.266 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707601249669120[0;39m <==      Total: 0
2022-07-14 16:47:38.266 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707601249669121[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:47:38.266 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707601253863424[0;39m ==> Parameters: 
2022-07-14 16:47:38.267 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707601249669120[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:47:38.267 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707601249669121[0;39m <==        Row: 2022-07-14, 2708, 62, 2708, 62
2022-07-14 16:47:38.267 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707601249669120[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:47:38.267 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707601249669121[0;39m <==      Total: 1
2022-07-14 16:47:38.267 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:47:38.267 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:47:38.268 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707601249669121[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2708,"viewIncrease":2708,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:47:38.268 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707601249669121[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:47:38.268 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:47:38.268 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:47:38.269 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:47:38.269 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:47:38.269 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:47:38.270 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:47:38.270 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:47:38.270 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:47:38.270 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:47:38.271 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:47:38.271 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:47:38.271 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:47:38.271 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:47:38.272 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:47:38.272 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707601253863424[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:47:38.272 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707601253863424[0;39m <==      Total: 16
2022-07-14 16:47:38.273 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707601253863424[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:47:38.274 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707601253863424[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:47:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707608598089728[0;39m 生成今日电子书快照开始
2022-07-14 16:47:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707608598089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707608598089728[0;39m ==> Parameters: 
2022-07-14 16:47:40.067 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707608598089728[0;39m <==    Updates: 0
2022-07-14 16:47:40.067 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707608598089728[0;39m 生成今日电子书快照结束，耗时：52 毫秒
2022-07-14 16:47:40.208 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202707533088034816[0;39m 连接关闭，token：7wNZ7V9S1a，session id：4！当前连接数：0
2022-07-14 16:47:40.860 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202707533092229120[0;39m 有新连接：token：1mzfl1hFFv，session id：5，当前连接数：1
2022-07-14 16:47:40.911 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707612356186112[0;39m ------------- 开始 -------------
2022-07-14 16:47:40.912 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707612356186112[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:47:40.912 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707612356186112[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:47:40.912 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707612360380416[0;39m ------------- 开始 -------------
2022-07-14 16:47:40.912 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707612360380417[0;39m ------------- 开始 -------------
2022-07-14 16:47:40.912 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707612356186112[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:40.912 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707612360380416[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:47:40.912 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707612360380417[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:47:40.912 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707612360380416[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:47:40.912 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707612356186112[0;39m 请求参数: []
2022-07-14 16:47:40.913 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707612360380417[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:47:40.913 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707612360380416[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:40.913 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707612360380417[0;39m 远程地址: 127.0.0.1
2022-07-14 16:47:40.913 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707612360380416[0;39m 请求参数: []
2022-07-14 16:47:40.913 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707612360380417[0;39m 请求参数: []
2022-07-14 16:47:40.913 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707612356186112[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:47:40.913 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707612360380417[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:47:40.913 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707612360380416[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:47:40.913 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707612356186112[0;39m ==> Parameters: 
2022-07-14 16:47:40.914 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707612360380417[0;39m ==> Parameters: 
2022-07-14 16:47:40.914 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707612360380416[0;39m ==> Parameters: 
2022-07-14 16:47:40.914 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707612356186112[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:47:40.914 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707612360380417[0;39m <==      Total: 0
2022-07-14 16:47:40.914 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:47:40.915 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707612356186112[0;39m <==        Row: 2022-07-14, 2709, 62, 2709, 62
2022-07-14 16:47:40.915 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:47:40.915 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707612360380417[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:47:40.915 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707612360380417[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:47:40.915 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:47:40.915 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707612356186112[0;39m <==      Total: 1
2022-07-14 16:47:40.915 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:47:40.916 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707612356186112[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2709,"viewIncrease":2709,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:47:40.916 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:47:40.916 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707612356186112[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:47:40.916 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:47:40.916 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:47:40.916 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:47:40.917 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:47:40.917 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:47:40.917 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:47:40.917 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:47:40.918 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:47:40.918 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:47:40.918 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:47:40.919 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:47:40.919 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707612360380416[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:47:40.919 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707612360380416[0;39m <==      Total: 16
2022-07-14 16:47:40.920 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707612360380416[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:47:40.920 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707612360380416[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:47:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707629510889472[0;39m 生成今日电子书快照开始
2022-07-14 16:47:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707629510889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707629510889472[0;39m ==> Parameters: 
2022-07-14 16:47:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707629510889472[0;39m <==    Updates: 0
2022-07-14 16:47:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707629510889472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:47:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707650536935424[0;39m 生成今日电子书快照开始
2022-07-14 16:47:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707650536935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707650536935424[0;39m ==> Parameters: 
2022-07-14 16:47:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707650536935424[0;39m <==    Updates: 0
2022-07-14 16:47:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707650536935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:47:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707671508455424[0;39m 生成今日电子书快照开始
2022-07-14 16:47:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707671508455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:47:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707671508455424[0;39m ==> Parameters: 
2022-07-14 16:47:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707671508455424[0;39m <==    Updates: 0
2022-07-14 16:47:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707671508455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:48:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707692442226688[0;39m 生成今日电子书快照开始
2022-07-14 16:48:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707692442226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707692442226688[0;39m ==> Parameters: 
2022-07-14 16:48:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707692442226688[0;39m <==    Updates: 0
2022-07-14 16:48:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707692442226688[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 16:48:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707713413746688[0;39m 生成今日电子书快照开始
2022-07-14 16:48:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707713413746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707713413746688[0;39m ==> Parameters: 
2022-07-14 16:48:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707713413746688[0;39m <==    Updates: 0
2022-07-14 16:48:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707713413746688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:48:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202707713426329600[0;39m 更新电子书下的文档数据开始
2022-07-14 16:48:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707713426329600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:48:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707713426329600[0;39m ==> Parameters: 
2022-07-14 16:48:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707713426329600[0;39m <==    Updates: 3
2022-07-14 16:48:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202707713426329600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:48:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707734368489472[0;39m 生成今日电子书快照开始
2022-07-14 16:48:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707734368489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707734368489472[0;39m ==> Parameters: 
2022-07-14 16:48:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707734368489472[0;39m <==    Updates: 0
2022-07-14 16:48:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707734368489472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:48:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707755340009472[0;39m 生成今日电子书快照开始
2022-07-14 16:48:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707755340009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707755340009472[0;39m ==> Parameters: 
2022-07-14 16:48:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707755340009472[0;39m <==    Updates: 0
2022-07-14 16:48:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707755340009472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:48:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707776340889600[0;39m 生成今日电子书快照开始
2022-07-14 16:48:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707776340889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707776340889600[0;39m ==> Parameters: 
2022-07-14 16:48:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707776340889600[0;39m <==    Updates: 0
2022-07-14 16:48:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707776340889600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:48:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707797333381120[0;39m 生成今日电子书快照开始
2022-07-14 16:48:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707797333381120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707797333381120[0;39m ==> Parameters: 
2022-07-14 16:48:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707797333381120[0;39m <==    Updates: 0
2022-07-14 16:48:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707797333381120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:48:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707818296512512[0;39m 生成今日电子书快照开始
2022-07-14 16:48:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707818296512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707818296512512[0;39m ==> Parameters: 
2022-07-14 16:48:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707818296512512[0;39m <==    Updates: 0
2022-07-14 16:48:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707818296512512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:48:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707839230283776[0;39m 生成今日电子书快照开始
2022-07-14 16:48:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707839230283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707839230283776[0;39m ==> Parameters: 
2022-07-14 16:48:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707839230283776[0;39m <==    Updates: 0
2022-07-14 16:48:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707839230283776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:48:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202707839238672384[0;39m 更新电子书下的文档数据开始
2022-07-14 16:48:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707839238672384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:48:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707839238672384[0;39m ==> Parameters: 
2022-07-14 16:48:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707839238672384[0;39m <==    Updates: 3
2022-07-14 16:48:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202707839238672384[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:48:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707860197609472[0;39m 生成今日电子书快照开始
2022-07-14 16:48:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707860197609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707860197609472[0;39m ==> Parameters: 
2022-07-14 16:48:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707860197609472[0;39m <==    Updates: 0
2022-07-14 16:48:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707860197609472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:48:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707881232044032[0;39m 生成今日电子书快照开始
2022-07-14 16:48:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707881232044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707881232044032[0;39m ==> Parameters: 
2022-07-14 16:48:45.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707881232044032[0;39m <==    Updates: 0
2022-07-14 16:48:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707881232044032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:48:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707902140649472[0;39m 生成今日电子书快照开始
2022-07-14 16:48:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707902140649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707902140649472[0;39m ==> Parameters: 
2022-07-14 16:48:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707902140649472[0;39m <==    Updates: 0
2022-07-14 16:48:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707902140649472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:48:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707923124752384[0;39m 生成今日电子书快照开始
2022-07-14 16:48:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707923124752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:48:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707923124752384[0;39m ==> Parameters: 
2022-07-14 16:48:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707923124752384[0;39m <==    Updates: 0
2022-07-14 16:48:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707923124752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:49:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707944146604032[0;39m 生成今日电子书快照开始
2022-07-14 16:49:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707944146604032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707944146604032[0;39m ==> Parameters: 
2022-07-14 16:49:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707944146604032[0;39m <==    Updates: 0
2022-07-14 16:49:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707944146604032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:49:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707965067792384[0;39m 生成今日电子书快照开始
2022-07-14 16:49:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707965067792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707965067792384[0;39m ==> Parameters: 
2022-07-14 16:49:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707965067792384[0;39m <==    Updates: 0
2022-07-14 16:49:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707965067792384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:49:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202707965080375296[0;39m 更新电子书下的文档数据开始
2022-07-14 16:49:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707965080375296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:49:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707965080375296[0;39m ==> Parameters: 
2022-07-14 16:49:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202707965080375296[0;39m <==    Updates: 3
2022-07-14 16:49:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202707965080375296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:49:05.604 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202707601249669121[0;39m 连接关闭，token：1mzfl1hFFv，session id：5！当前连接数：0
2022-07-14 16:49:06.228 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202707601253863424[0;39m 有新连接：token：LEVZuvTvfQ，session id：6，当前连接数：1
2022-07-14 16:49:06.293 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707970474250240[0;39m ------------- 开始 -------------
2022-07-14 16:49:06.293 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707970474250241[0;39m ------------- 开始 -------------
2022-07-14 16:49:06.293 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707970474250241[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:49:06.293 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707970474250240[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:49:06.293 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707970474250241[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:49:06.293 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707970474250240[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:49:06.294 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202707970478444544[0;39m ------------- 开始 -------------
2022-07-14 16:49:06.294 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707970474250241[0;39m 远程地址: 127.0.0.1
2022-07-14 16:49:06.294 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202707970478444544[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:49:06.294 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707970474250240[0;39m 远程地址: 127.0.0.1
2022-07-14 16:49:06.294 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202707970478444544[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:49:06.294 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707970474250241[0;39m 请求参数: []
2022-07-14 16:49:06.294 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202707970478444544[0;39m 远程地址: 127.0.0.1
2022-07-14 16:49:06.294 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707970474250240[0;39m 请求参数: []
2022-07-14 16:49:06.294 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202707970478444544[0;39m 请求参数: []
2022-07-14 16:49:06.294 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707970474250241[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:49:06.294 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707970474250240[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:49:06.295 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707970478444544[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:49:06.295 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707970474250240[0;39m ==> Parameters: 
2022-07-14 16:49:06.295 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707970474250241[0;39m ==> Parameters: 
2022-07-14 16:49:06.295 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707970478444544[0;39m ==> Parameters: 
2022-07-14 16:49:06.296 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202707970474250240[0;39m <==      Total: 0
2022-07-14 16:49:06.296 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707970474250241[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:49:06.296 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:49:06.296 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707970474250240[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:49:06.296 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202707970474250241[0;39m <==        Row: 2022-07-14, 2709, 62, 2709, 62
2022-07-14 16:49:06.296 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:49:06.296 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707970474250240[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:49:06.297 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202707970474250241[0;39m <==      Total: 1
2022-07-14 16:49:06.297 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:49:06.297 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:49:06.297 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707970474250241[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":2709,"viewIncrease":2709,"voteCount":62,"voteIncrease":62}],"success":true}
2022-07-14 16:49:06.297 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707970474250241[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:49:06.297 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:49:06.298 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:49:06.298 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:49:06.299 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:49:06.299 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:49:06.299 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:49:06.300 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:49:06.300 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:49:06.300 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:49:06.301 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:49:06.301 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:49:06.301 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:49:06.302 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202707970478444544[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:49:06.302 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202707970478444544[0;39m <==      Total: 16
2022-07-14 16:49:06.303 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202707970478444544[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:49:06.304 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202707970478444544[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 16:49:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202707986026729472[0;39m 生成今日电子书快照开始
2022-07-14 16:49:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707986026729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707986026729472[0;39m ==> Parameters: 
2022-07-14 16:49:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202707986026729472[0;39m <==    Updates: 0
2022-07-14 16:49:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202707986026729472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:49:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708007027609600[0;39m 生成今日电子书快照开始
2022-07-14 16:49:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708007027609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708007027609600[0;39m ==> Parameters: 
2022-07-14 16:49:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708007027609600[0;39m <==    Updates: 0
2022-07-14 16:49:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708007027609600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:49:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708027990740992[0;39m 生成今日电子书快照开始
2022-07-14 16:49:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708027990740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708027990740992[0;39m ==> Parameters: 
2022-07-14 16:49:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708027990740992[0;39m <==    Updates: 0
2022-07-14 16:49:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708027990740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:49:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708048970649600[0;39m 生成今日电子书快照开始
2022-07-14 16:49:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708048970649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708048970649600[0;39m ==> Parameters: 
2022-07-14 16:49:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708048970649600[0;39m <==    Updates: 0
2022-07-14 16:49:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708048970649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:49:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708069929586688[0;39m 生成今日电子书快照开始
2022-07-14 16:49:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708069929586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708069929586688[0;39m ==> Parameters: 
2022-07-14 16:49:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708069929586688[0;39m <==    Updates: 0
2022-07-14 16:49:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708069929586688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:49:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708090947244032[0;39m 生成今日电子书快照开始
2022-07-14 16:49:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708090947244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708090947244032[0;39m ==> Parameters: 
2022-07-14 16:49:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708090947244032[0;39m <==    Updates: 0
2022-07-14 16:49:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708090947244032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:49:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202708090955632640[0;39m 更新电子书下的文档数据开始
2022-07-14 16:49:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708090955632640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:49:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708090955632640[0;39m ==> Parameters: 
2022-07-14 16:49:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708090955632640[0;39m <==    Updates: 3
2022-07-14 16:49:35.020 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202708090955632640[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:49:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708111855849472[0;39m 生成今日电子书快照开始
2022-07-14 16:49:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708111855849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708111855849472[0;39m ==> Parameters: 
2022-07-14 16:49:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708111855849472[0;39m <==    Updates: 0
2022-07-14 16:49:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708111855849472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:49:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708132852535296[0;39m 生成今日电子书快照开始
2022-07-14 16:49:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708132852535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708132852535296[0;39m ==> Parameters: 
2022-07-14 16:49:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708132852535296[0;39m <==    Updates: 0
2022-07-14 16:49:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708132852535296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:49:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708153857609728[0;39m 生成今日电子书快照开始
2022-07-14 16:49:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708153857609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708153857609728[0;39m ==> Parameters: 
2022-07-14 16:49:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708153857609728[0;39m <==    Updates: 0
2022-07-14 16:49:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708153857609728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:49:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708174787186688[0;39m 生成今日电子书快照开始
2022-07-14 16:49:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708174787186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:49:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708174787186688[0;39m ==> Parameters: 
2022-07-14 16:49:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708174787186688[0;39m <==    Updates: 0
2022-07-14 16:49:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708174787186688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:50:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708195758706688[0;39m 生成今日电子书快照开始
2022-07-14 16:50:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708195758706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708195758706688[0;39m ==> Parameters: 
2022-07-14 16:50:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708195758706688[0;39m <==    Updates: 0
2022-07-14 16:50:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708195758706688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:50:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708216763781120[0;39m 生成今日电子书快照开始
2022-07-14 16:50:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708216763781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708216763781120[0;39m ==> Parameters: 
2022-07-14 16:50:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708216763781120[0;39m <==    Updates: 0
2022-07-14 16:50:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708216763781120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:50:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202708216776364032[0;39m 更新电子书下的文档数据开始
2022-07-14 16:50:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708216776364032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:50:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708216776364032[0;39m ==> Parameters: 
2022-07-14 16:50:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708216776364032[0;39m <==    Updates: 3
2022-07-14 16:50:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202708216776364032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:50:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708237714329600[0;39m 生成今日电子书快照开始
2022-07-14 16:50:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708237714329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708237714329600[0;39m ==> Parameters: 
2022-07-14 16:50:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708237714329600[0;39m <==    Updates: 0
2022-07-14 16:50:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708237714329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:50:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708258660683776[0;39m 生成今日电子书快照开始
2022-07-14 16:50:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708258660683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708258660683776[0;39m ==> Parameters: 
2022-07-14 16:50:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708258660683776[0;39m <==    Updates: 0
2022-07-14 16:50:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708258660683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:50:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708279648980992[0;39m 生成今日电子书快照开始
2022-07-14 16:50:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708279648980992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708279648980992[0;39m ==> Parameters: 
2022-07-14 16:50:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708279648980992[0;39m <==    Updates: 0
2022-07-14 16:50:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708279648980992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:50:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708300654055424[0;39m 生成今日电子书快照开始
2022-07-14 16:50:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708300654055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708300654055424[0;39m ==> Parameters: 
2022-07-14 16:50:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708300654055424[0;39m <==    Updates: 0
2022-07-14 16:50:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708300654055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:50:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708321612992512[0;39m 生成今日电子书快照开始
2022-07-14 16:50:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708321612992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708321612992512[0;39m ==> Parameters: 
2022-07-14 16:50:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708321612992512[0;39m <==    Updates: 0
2022-07-14 16:50:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708321612992512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:50:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202708342597095424[0;39m 更新电子书下的文档数据开始
2022-07-14 16:50:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708342597095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:50:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708342597095424[0;39m ==> Parameters: 
2022-07-14 16:50:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708342597095424[0;39m <==    Updates: 3
2022-07-14 16:50:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202708342597095424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:50:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708342605484032[0;39m 生成今日电子书快照开始
2022-07-14 16:50:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708342605484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708342605484032[0;39m ==> Parameters: 
2022-07-14 16:50:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708342605484032[0;39m <==    Updates: 0
2022-07-14 16:50:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708342605484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:50:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708363560226816[0;39m 生成今日电子书快照开始
2022-07-14 16:50:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708363560226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708363560226816[0;39m ==> Parameters: 
2022-07-14 16:50:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708363560226816[0;39m <==    Updates: 0
2022-07-14 16:50:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708363560226816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:50:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708384519163904[0;39m 生成今日电子书快照开始
2022-07-14 16:50:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708384519163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708384519163904[0;39m ==> Parameters: 
2022-07-14 16:50:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708384519163904[0;39m <==    Updates: 0
2022-07-14 16:50:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708384519163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:50:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708405482295296[0;39m 生成今日电子书快照开始
2022-07-14 16:50:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708405482295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708405482295296[0;39m ==> Parameters: 
2022-07-14 16:50:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708405482295296[0;39m <==    Updates: 0
2022-07-14 16:50:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708405482295296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:50:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708426432843776[0;39m 生成今日电子书快照开始
2022-07-14 16:50:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708426432843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:50:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708426432843776[0;39m ==> Parameters: 
2022-07-14 16:50:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708426432843776[0;39m <==    Updates: 0
2022-07-14 16:50:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708426432843776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:51:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708447421140992[0;39m 生成今日电子书快照开始
2022-07-14 16:51:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708447421140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708447421140992[0;39m ==> Parameters: 
2022-07-14 16:51:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708447421140992[0;39m <==    Updates: 0
2022-07-14 16:51:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708447421140992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:51:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202708468392660992[0;39m 更新电子书下的文档数据开始
2022-07-14 16:51:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708468392660992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:51:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708468392660992[0;39m ==> Parameters: 
2022-07-14 16:51:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708468392660992[0;39m <==    Updates: 3
2022-07-14 16:51:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202708468392660992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:51:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708468401049600[0;39m 生成今日电子书快照开始
2022-07-14 16:51:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708468401049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708468401049600[0;39m ==> Parameters: 
2022-07-14 16:51:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708468401049600[0;39m <==    Updates: 0
2022-07-14 16:51:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708468401049600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:51:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708489393541120[0;39m 生成今日电子书快照开始
2022-07-14 16:51:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708489393541120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708489393541120[0;39m ==> Parameters: 
2022-07-14 16:51:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708489393541120[0;39m <==    Updates: 0
2022-07-14 16:51:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708489393541120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:51:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708510352478208[0;39m 生成今日电子书快照开始
2022-07-14 16:51:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708510352478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708510352478208[0;39m ==> Parameters: 
2022-07-14 16:51:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708510352478208[0;39m <==    Updates: 0
2022-07-14 16:51:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708510352478208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:51:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708531303026688[0;39m 生成今日电子书快照开始
2022-07-14 16:51:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708531303026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708531303026688[0;39m ==> Parameters: 
2022-07-14 16:51:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708531303026688[0;39m <==    Updates: 0
2022-07-14 16:51:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708531303026688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 16:51:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708552261963776[0;39m 生成今日电子书快照开始
2022-07-14 16:51:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708552261963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708552261963776[0;39m ==> Parameters: 
2022-07-14 16:51:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708552261963776[0;39m <==    Updates: 0
2022-07-14 16:51:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708552261963776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:51:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708573267038208[0;39m 生成今日电子书快照开始
2022-07-14 16:51:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708573267038208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708573267038208[0;39m ==> Parameters: 
2022-07-14 16:51:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708573267038208[0;39m <==    Updates: 0
2022-07-14 16:51:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708573267038208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:51:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708594238558208[0;39m 生成今日电子书快照开始
2022-07-14 16:51:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708594238558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708594238558208[0;39m ==> Parameters: 
2022-07-14 16:51:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708594238558208[0;39m <==    Updates: 0
2022-07-14 16:51:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708594238558208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:51:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202708594251141120[0;39m 更新电子书下的文档数据开始
2022-07-14 16:51:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708594251141120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:51:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708594251141120[0;39m ==> Parameters: 
2022-07-14 16:51:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708594251141120[0;39m <==    Updates: 3
2022-07-14 16:51:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202708594251141120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:51:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708615201689600[0;39m 生成今日电子书快照开始
2022-07-14 16:51:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708615201689600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708615201689600[0;39m ==> Parameters: 
2022-07-14 16:51:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708615201689600[0;39m <==    Updates: 0
2022-07-14 16:51:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708615201689600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:51:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708636169015296[0;39m 生成今日电子书快照开始
2022-07-14 16:51:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708636169015296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708636169015296[0;39m ==> Parameters: 
2022-07-14 16:51:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708636169015296[0;39m <==    Updates: 0
2022-07-14 16:51:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708636169015296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:51:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708657169895424[0;39m 生成今日电子书快照开始
2022-07-14 16:51:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708657169895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708657169895424[0;39m ==> Parameters: 
2022-07-14 16:51:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708657169895424[0;39m <==    Updates: 0
2022-07-14 16:51:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708657169895424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:51:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708678137221120[0;39m 生成今日电子书快照开始
2022-07-14 16:51:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708678137221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:51:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708678137221120[0;39m ==> Parameters: 
2022-07-14 16:51:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708678137221120[0;39m <==    Updates: 0
2022-07-14 16:51:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708678137221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:52:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708699058409472[0;39m 生成今日电子书快照开始
2022-07-14 16:52:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708699058409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708699058409472[0;39m ==> Parameters: 
2022-07-14 16:52:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708699058409472[0;39m <==    Updates: 0
2022-07-14 16:52:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708699058409472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:52:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708720029929472[0;39m 生成今日电子书快照开始
2022-07-14 16:52:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708720029929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708720029929472[0;39m ==> Parameters: 
2022-07-14 16:52:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708720029929472[0;39m <==    Updates: 0
2022-07-14 16:52:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708720029929472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:52:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202708720042512384[0;39m 更新电子书下的文档数据开始
2022-07-14 16:52:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708720042512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:52:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708720042512384[0;39m ==> Parameters: 
2022-07-14 16:52:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708720042512384[0;39m <==    Updates: 3
2022-07-14 16:52:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202708720042512384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:52:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708741030809600[0;39m 生成今日电子书快照开始
2022-07-14 16:52:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708741030809600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708741030809600[0;39m ==> Parameters: 
2022-07-14 16:52:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708741030809600[0;39m <==    Updates: 0
2022-07-14 16:52:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708741030809600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:52:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708761981358080[0;39m 生成今日电子书快照开始
2022-07-14 16:52:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708761981358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708761981358080[0;39m ==> Parameters: 
2022-07-14 16:52:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708761981358080[0;39m <==    Updates: 0
2022-07-14 16:52:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708761981358080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:52:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708782990626816[0;39m 生成今日电子书快照开始
2022-07-14 16:52:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708782990626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708782990626816[0;39m ==> Parameters: 
2022-07-14 16:52:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708782990626816[0;39m <==    Updates: 0
2022-07-14 16:52:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708782990626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:52:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708803949563904[0;39m 生成今日电子书快照开始
2022-07-14 16:52:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708803949563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708803949563904[0;39m ==> Parameters: 
2022-07-14 16:52:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708803949563904[0;39m <==    Updates: 0
2022-07-14 16:52:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708803949563904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:52:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708824916889600[0;39m 生成今日电子书快照开始
2022-07-14 16:52:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708824916889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708824916889600[0;39m ==> Parameters: 
2022-07-14 16:52:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708824916889600[0;39m <==    Updates: 0
2022-07-14 16:52:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708824916889600[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 16:52:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708845892603904[0;39m 生成今日电子书快照开始
2022-07-14 16:52:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708845892603904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708845892603904[0;39m ==> Parameters: 
2022-07-14 16:52:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708845892603904[0;39m <==    Updates: 0
2022-07-14 16:52:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708845892603904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:52:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202708845905186816[0;39m 更新电子书下的文档数据开始
2022-07-14 16:52:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708845905186816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:52:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708845905186816[0;39m ==> Parameters: 
2022-07-14 16:52:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708845905186816[0;39m <==    Updates: 3
2022-07-14 16:52:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202708845905186816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:52:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708866859929600[0;39m 生成今日电子书快照开始
2022-07-14 16:52:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708866859929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708866859929600[0;39m ==> Parameters: 
2022-07-14 16:52:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708866859929600[0;39m <==    Updates: 0
2022-07-14 16:52:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708866859929600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:52:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708887831449600[0;39m 生成今日电子书快照开始
2022-07-14 16:52:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708887831449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708887831449600[0;39m ==> Parameters: 
2022-07-14 16:52:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708887831449600[0;39m <==    Updates: 0
2022-07-14 16:52:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708887831449600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:52:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708908794580992[0;39m 生成今日电子书快照开始
2022-07-14 16:52:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708908794580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708908794580992[0;39m ==> Parameters: 
2022-07-14 16:52:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708908794580992[0;39m <==    Updates: 0
2022-07-14 16:52:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708908794580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:52:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708929795461120[0;39m 生成今日电子书快照开始
2022-07-14 16:52:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708929795461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:52:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708929795461120[0;39m ==> Parameters: 
2022-07-14 16:52:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708929795461120[0;39m <==    Updates: 0
2022-07-14 16:52:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708929795461120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:53:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708950746009600[0;39m 生成今日电子书快照开始
2022-07-14 16:53:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708950746009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708950746009600[0;39m ==> Parameters: 
2022-07-14 16:53:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708950746009600[0;39m <==    Updates: 0
2022-07-14 16:53:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708950746009600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:53:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708971688169472[0;39m 生成今日电子书快照开始
2022-07-14 16:53:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708971688169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708971688169472[0;39m ==> Parameters: 
2022-07-14 16:53:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708971688169472[0;39m <==    Updates: 0
2022-07-14 16:53:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708971688169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:53:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202708971696558080[0;39m 更新电子书下的文档数据开始
2022-07-14 16:53:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708971696558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:53:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708971696558080[0;39m ==> Parameters: 
2022-07-14 16:53:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202708971696558080[0;39m <==    Updates: 3
2022-07-14 16:53:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202708971696558080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:53:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202708992668078080[0;39m 生成今日电子书快照开始
2022-07-14 16:53:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708992668078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708992668078080[0;39m ==> Parameters: 
2022-07-14 16:53:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202708992668078080[0;39m <==    Updates: 0
2022-07-14 16:53:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202708992668078080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:53:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709013635403776[0;39m 生成今日电子书快照开始
2022-07-14 16:53:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709013635403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709013635403776[0;39m ==> Parameters: 
2022-07-14 16:53:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709013635403776[0;39m <==    Updates: 0
2022-07-14 16:53:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709013635403776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:53:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709034615312384[0;39m 生成今日电子书快照开始
2022-07-14 16:53:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709034615312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709034615312384[0;39m ==> Parameters: 
2022-07-14 16:53:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709034615312384[0;39m <==    Updates: 0
2022-07-14 16:53:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709034615312384[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 16:53:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709055586832384[0;39m 生成今日电子书快照开始
2022-07-14 16:53:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709055586832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709055586832384[0;39m ==> Parameters: 
2022-07-14 16:53:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709055586832384[0;39m <==    Updates: 0
2022-07-14 16:53:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709055586832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:53:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709076549963776[0;39m 生成今日电子书快照开始
2022-07-14 16:53:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709076549963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709076549963776[0;39m ==> Parameters: 
2022-07-14 16:53:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709076549963776[0;39m <==    Updates: 0
2022-07-14 16:53:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709076549963776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:53:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709097538260992[0;39m 生成今日电子书快照开始
2022-07-14 16:53:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709097538260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709097538260992[0;39m ==> Parameters: 
2022-07-14 16:53:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709097538260992[0;39m <==    Updates: 0
2022-07-14 16:53:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709097538260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:53:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202709097546649600[0;39m 更新电子书下的文档数据开始
2022-07-14 16:53:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709097546649600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:53:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709097546649600[0;39m ==> Parameters: 
2022-07-14 16:53:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709097546649600[0;39m <==    Updates: 3
2022-07-14 16:53:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202709097546649600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:53:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709118513975296[0;39m 生成今日电子书快照开始
2022-07-14 16:53:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709118513975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709118513975296[0;39m ==> Parameters: 
2022-07-14 16:53:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709118513975296[0;39m <==    Updates: 0
2022-07-14 16:53:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709118513975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:53:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709139460329472[0;39m 生成今日电子书快照开始
2022-07-14 16:53:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709139460329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709139460329472[0;39m ==> Parameters: 
2022-07-14 16:53:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709139460329472[0;39m <==    Updates: 0
2022-07-14 16:53:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709139460329472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:53:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709160461209600[0;39m 生成今日电子书快照开始
2022-07-14 16:53:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709160461209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709160461209600[0;39m ==> Parameters: 
2022-07-14 16:53:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709160461209600[0;39m <==    Updates: 0
2022-07-14 16:53:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709160461209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:53:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709181449506816[0;39m 生成今日电子书快照开始
2022-07-14 16:53:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709181449506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:53:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709181449506816[0;39m ==> Parameters: 
2022-07-14 16:53:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709181449506816[0;39m <==    Updates: 0
2022-07-14 16:53:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709181449506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:54:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709202395860992[0;39m 生成今日电子书快照开始
2022-07-14 16:54:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709202395860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709202395860992[0;39m ==> Parameters: 
2022-07-14 16:54:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709202395860992[0;39m <==    Updates: 0
2022-07-14 16:54:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709202395860992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:54:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709223358992384[0;39m 生成今日电子书快照开始
2022-07-14 16:54:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709223358992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709223358992384[0;39m ==> Parameters: 
2022-07-14 16:54:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709223358992384[0;39m <==    Updates: 0
2022-07-14 16:54:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709223358992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:54:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202709223371575296[0;39m 更新电子书下的文档数据开始
2022-07-14 16:54:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709223371575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:54:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709223371575296[0;39m ==> Parameters: 
2022-07-14 16:54:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709223371575296[0;39m <==    Updates: 3
2022-07-14 16:54:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202709223371575296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:54:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709244347289600[0;39m 生成今日电子书快照开始
2022-07-14 16:54:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709244347289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709244347289600[0;39m ==> Parameters: 
2022-07-14 16:54:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709244347289600[0;39m <==    Updates: 0
2022-07-14 16:54:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709244347289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:54:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709265310420992[0;39m 生成今日电子书快照开始
2022-07-14 16:54:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709265310420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709265310420992[0;39m ==> Parameters: 
2022-07-14 16:54:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709265310420992[0;39m <==    Updates: 0
2022-07-14 16:54:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709265310420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:54:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709286281940992[0;39m 生成今日电子书快照开始
2022-07-14 16:54:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709286281940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709286281940992[0;39m ==> Parameters: 
2022-07-14 16:54:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709286281940992[0;39m <==    Updates: 0
2022-07-14 16:54:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709286281940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:54:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709307295404032[0;39m 生成今日电子书快照开始
2022-07-14 16:54:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709307295404032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709307295404032[0;39m ==> Parameters: 
2022-07-14 16:54:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709307295404032[0;39m <==    Updates: 0
2022-07-14 16:54:25.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709307295404032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:54:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709328233369600[0;39m 生成今日电子书快照开始
2022-07-14 16:54:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709328233369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709328233369600[0;39m ==> Parameters: 
2022-07-14 16:54:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709328233369600[0;39m <==    Updates: 0
2022-07-14 16:54:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709328233369600[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:54:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202709349200695296[0;39m 更新电子书下的文档数据开始
2022-07-14 16:54:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709349200695296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:54:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709349200695296[0;39m ==> Parameters: 
2022-07-14 16:54:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709349200695296[0;39m <==    Updates: 3
2022-07-14 16:54:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202709349200695296[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-14 16:54:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709349225861120[0;39m 生成今日电子书快照开始
2022-07-14 16:54:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709349225861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709349225861120[0;39m ==> Parameters: 
2022-07-14 16:54:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709349225861120[0;39m <==    Updates: 0
2022-07-14 16:54:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709349225861120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:54:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709370163826688[0;39m 生成今日电子书快照开始
2022-07-14 16:54:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709370163826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709370163826688[0;39m ==> Parameters: 
2022-07-14 16:54:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709370163826688[0;39m <==    Updates: 0
2022-07-14 16:54:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709370163826688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:54:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709391156318208[0;39m 生成今日电子书快照开始
2022-07-14 16:54:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709391156318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709391156318208[0;39m ==> Parameters: 
2022-07-14 16:54:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709391156318208[0;39m <==    Updates: 0
2022-07-14 16:54:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709391156318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:54:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709412144615424[0;39m 生成今日电子书快照开始
2022-07-14 16:54:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709412144615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709412144615424[0;39m ==> Parameters: 
2022-07-14 16:54:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709412144615424[0;39m <==    Updates: 0
2022-07-14 16:54:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709412144615424[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:54:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709433069998080[0;39m 生成今日电子书快照开始
2022-07-14 16:54:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709433069998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:54:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709433069998080[0;39m ==> Parameters: 
2022-07-14 16:54:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709433069998080[0;39m <==    Updates: 0
2022-07-14 16:54:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709433069998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:55:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709454087655424[0;39m 生成今日电子书快照开始
2022-07-14 16:55:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709454087655424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:55:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709454087655424[0;39m ==> Parameters: 
2022-07-14 16:55:00.052 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709454087655424[0;39m <==    Updates: 0
2022-07-14 16:55:00.052 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709454087655424[0;39m 生成今日电子书快照结束，耗时：38 毫秒
2022-07-14 16:55:05.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709475000455168[0;39m 生成今日电子书快照开始
2022-07-14 16:55:05.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709475000455168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:55:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709475000455168[0;39m ==> Parameters: 
2022-07-14 16:55:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709475000455168[0;39m <==    Updates: 0
2022-07-14 16:55:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709475000455168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:55:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202709475008843776[0;39m 更新电子书下的文档数据开始
2022-07-14 16:55:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709475008843776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:55:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709475008843776[0;39m ==> Parameters: 
2022-07-14 16:55:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709475008843776[0;39m <==    Updates: 3
2022-07-14 16:55:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202709475008843776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 16:55:09.290 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：LEVZuvTvfQ，session id：6！当前连接数：0
2022-07-14 16:55:09.300 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2022-07-14 16:55:09.308 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-1 - Shutdown completed.
2022-07-14 16:55:33.087 INFO  org.hibernate.validator.internal.util.Version     :21  
                [32m                  [0;39m HV000001: Hibernate Validator 6.2.3.Final
2022-07-14 16:55:33.092 INFO  com.zs.wikibb.WikibbApplication                   :55  
                [32m                  [0;39m Starting WikibbApplication using Java 1.8.0_221 on LAPTOP-OO2VPQLS with PID 66280 (D:\wikibb\target\classes started by 张硕 in D:\wikibb)
2022-07-14 16:55:33.092 INFO  com.zs.wikibb.WikibbApplication                   :640 
                [32m                  [0;39m No active profile set, falling back to 1 default profile: "default"
2022-07-14 16:55:33.148 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2022-07-14 16:55:33.148 INFO  o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor :255 
                [32m                  [0;39m For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2022-07-14 16:55:33.981 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :262 
                [32m                  [0;39m Multiple Spring Data modules found, entering strict repository configuration mode!
2022-07-14 16:55:33.983 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :132 
                [32m                  [0;39m Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2022-07-14 16:55:34.020 INFO  o.s.d.r.config.RepositoryConfigurationDelegate    :201 
                [32m                  [0;39m Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2022-07-14 16:55:34.926 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :108 
                [32m                  [0;39m Tomcat initialized with port(s): 8880 (http)
2022-07-14 16:55:34.935 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Initializing ProtocolHandler ["http-nio-8880"]
2022-07-14 16:55:34.936 INFO  org.apache.catalina.core.StandardService          :173 
                [32m                  [0;39m Starting service [Tomcat]
2022-07-14 16:55:34.937 INFO  org.apache.catalina.core.StandardEngine           :173 
                [32m                  [0;39m Starting Servlet engine: [Apache Tomcat/9.0.60]
2022-07-14 16:55:35.084 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring embedded WebApplicationContext
2022-07-14 16:55:35.084 INFO  o.s.b.w.s.c.ServletWebServerApplicationContext    :290 
                [32m                  [0;39m Root WebApplicationContext: initialization completed in 1935 ms
2022-07-14 16:55:36.760 INFO  o.s.b.d.autoconfigure.OptionalLiveReloadServer    :58  
                [32m                  [0;39m LiveReload server is running on port 35729
2022-07-14 16:55:36.805 INFO  org.apache.coyote.http11.Http11NioProtocol        :173 
                [32m                  [0;39m Starting ProtocolHandler ["http-nio-8880"]
2022-07-14 16:55:36.823 INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer      :220 
                [32m                  [0;39m Tomcat started on port(s): 8880 (http) with context path ''
2022-07-14 16:55:36.845 INFO  com.zs.wikibb.WikibbApplication                   :61  
                [32m                  [0;39m Started WikibbApplication in 4.357 seconds (JVM running for 6.066)
2022-07-14 16:55:36.849 INFO  com.zs.wikibb.WikibbApplication                   :26  
                [32m                  [0;39m 启动成功！！
2022-07-14 16:55:36.849 INFO  com.zs.wikibb.WikibbApplication                   :27  
                [32m                  [0;39m 地址: 	http://127.0.0.1:8880
2022-07-14 16:55:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709621872398336[0;39m 生成今日电子书快照开始
2022-07-14 16:55:40.040 INFO  com.zaxxer.hikari.HikariDataSource                :110 
                [32m202709621872398336[0;39m HikariPool-1 - Starting...
2022-07-14 16:55:40.199 INFO  com.zaxxer.hikari.HikariDataSource                :123 
                [32m202709621872398336[0;39m HikariPool-1 - Start completed.
2022-07-14 16:55:40.208 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709621872398336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:55:40.238 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709621872398336[0;39m ==> Parameters: 
2022-07-14 16:55:40.246 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709621872398336[0;39m <==    Updates: 0
2022-07-14 16:55:40.249 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709621872398336[0;39m 生成今日电子书快照结束，耗时：231 毫秒
2022-07-14 16:55:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709642827141120[0;39m 生成今日电子书快照开始
2022-07-14 16:55:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709642827141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:55:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709642827141120[0;39m ==> Parameters: 
2022-07-14 16:55:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709642827141120[0;39m <==    Updates: 0
2022-07-14 16:55:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709642827141120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:55:49.106 INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] :173 
                [32m                  [0;39m Initializing Spring DispatcherServlet 'dispatcherServlet'
2022-07-14 16:55:49.107 INFO  org.springframework.web.servlet.DispatcherServlet :525 
                [32m                  [0;39m Initializing Servlet 'dispatcherServlet'
2022-07-14 16:55:49.108 INFO  org.springframework.web.servlet.DispatcherServlet :547 
                [32m                  [0;39m Completed initialization in 1 ms
2022-07-14 16:55:49.162 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：CjcKUJTGdN，session id：0，当前连接数：1
2022-07-14 16:55:49.262 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709660640350208[0;39m ------------- 开始 -------------
2022-07-14 16:55:49.262 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709660640350209[0;39m ------------- 开始 -------------
2022-07-14 16:55:49.262 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709660640350210[0;39m ------------- 开始 -------------
2022-07-14 16:55:49.263 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709660640350210[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:55:49.263 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709660640350208[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:55:49.263 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709660640350209[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:55:49.263 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709660640350209[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:55:49.263 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709660640350208[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:55:49.263 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709660640350210[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:55:49.263 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709660640350209[0;39m 远程地址: 127.0.0.1
2022-07-14 16:55:49.263 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709660640350208[0;39m 远程地址: 127.0.0.1
2022-07-14 16:55:49.263 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709660640350210[0;39m 远程地址: 127.0.0.1
2022-07-14 16:55:49.317 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709660640350209[0;39m 请求参数: []
2022-07-14 16:55:49.317 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709660640350210[0;39m 请求参数: []
2022-07-14 16:55:49.317 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709660640350208[0;39m 请求参数: []
2022-07-14 16:55:49.324 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709660640350209[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:55:49.324 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709660640350208[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:55:49.325 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709660640350208[0;39m ==> Parameters: 
2022-07-14 16:55:49.325 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709660640350209[0;39m ==> Parameters: 
2022-07-14 16:55:49.340 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709660640350210[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:55:49.340 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709660640350210[0;39m ==> Parameters: 
2022-07-14 16:55:49.344 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709660640350208[0;39m <==      Total: 0
2022-07-14 16:55:49.344 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709660640350209[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:55:49.344 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:55:49.345 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:55:49.346 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709660640350209[0;39m <==        Row: 2022-07-14, 101, 22, 101, 22
2022-07-14 16:55:49.347 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:55:49.348 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:55:49.349 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:55:49.349 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709660640350209[0;39m <==      Total: 1
2022-07-14 16:55:49.349 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:55:49.350 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:55:49.350 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:55:49.351 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:55:49.351 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:55:49.352 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:55:49.353 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:55:49.353 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:55:49.354 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:55:49.354 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:55:49.355 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:55:49.355 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709660640350210[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:55:49.356 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709660640350210[0;39m <==      Total: 16
2022-07-14 16:55:49.370 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709660640350208[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:55:49.370 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709660640350208[0;39m ------------- 结束 耗时：110 ms -------------
2022-07-14 16:55:49.373 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709660640350210[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:55:49.373 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709660640350210[0;39m ------------- 结束 耗时：113 ms -------------
2022-07-14 16:55:49.374 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709660640350209[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":101,"viewIncrease":101,"voteCount":22,"voteIncrease":22}],"success":true}
2022-07-14 16:55:49.375 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709660640350209[0;39m ------------- 结束 耗时：115 ms -------------
2022-07-14 16:55:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709663752523776[0;39m 生成今日电子书快照开始
2022-07-14 16:55:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709663752523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:55:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709663752523776[0;39m ==> Parameters: 
2022-07-14 16:55:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709663752523776[0;39m <==    Updates: 0
2022-07-14 16:55:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709663752523776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:55:51.583 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：CjcKUJTGdN，session id：0！当前连接数：0
2022-07-14 16:55:52.162 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：ayg5Z5Wg3p，session id：1，当前连接数：1
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709673051295744[0;39m ------------- 开始 -------------
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709673051295745[0;39m ------------- 开始 -------------
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709673051295744[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709673051295746[0;39m ------------- 开始 -------------
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709673051295745[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709673051295744[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709673051295745[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709673051295746[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709673051295744[0;39m 远程地址: 127.0.0.1
2022-07-14 16:55:52.219 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709673051295745[0;39m 远程地址: 127.0.0.1
2022-07-14 16:55:52.220 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709673051295744[0;39m 请求参数: []
2022-07-14 16:55:52.220 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709673051295745[0;39m 请求参数: []
2022-07-14 16:55:52.220 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709673051295746[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:55:52.220 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709673051295746[0;39m 远程地址: 127.0.0.1
2022-07-14 16:55:52.220 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709673051295746[0;39m 请求参数: []
2022-07-14 16:55:52.221 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709673051295744[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:55:52.221 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709673051295745[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:55:52.221 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709673051295744[0;39m ==> Parameters: 
2022-07-14 16:55:52.221 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709673051295746[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:55:52.221 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709673051295745[0;39m ==> Parameters: 
2022-07-14 16:55:52.222 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709673051295746[0;39m ==> Parameters: 
2022-07-14 16:55:52.222 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:55:52.222 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709673051295745[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:55:52.223 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:55:52.226 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709673051295745[0;39m <==        Row: 2022-07-14, 101, 22, 101, 22
2022-07-14 16:55:52.226 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709673051295746[0;39m <==      Total: 0
2022-07-14 16:55:52.226 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709673051295746[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:55:52.226 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:55:52.226 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709673051295745[0;39m <==      Total: 1
2022-07-14 16:55:52.226 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709673051295746[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:55:52.226 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:55:52.226 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709673051295745[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":101,"viewIncrease":101,"voteCount":22,"voteIncrease":22}],"success":true}
2022-07-14 16:55:52.227 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709673051295745[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:55:52.227 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:55:52.227 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:55:52.228 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:55:52.229 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:55:52.229 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:55:52.230 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:55:52.230 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:55:52.231 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:55:52.231 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:55:52.231 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:55:52.231 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:55:52.232 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:55:52.232 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709673051295744[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:55:52.232 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709673051295744[0;39m <==      Total: 16
2022-07-14 16:55:52.233 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709673051295744[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:55:52.233 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709673051295744[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-14 16:55:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709684765986816[0;39m 生成今日电子书快照开始
2022-07-14 16:55:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709684765986816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:55:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709684765986816[0;39m ==> Parameters: 
2022-07-14 16:55:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709684765986816[0;39m <==    Updates: 0
2022-07-14 16:55:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709684765986816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:56:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709705712340992[0;39m 生成今日电子书快照开始
2022-07-14 16:56:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709705712340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709705712340992[0;39m ==> Parameters: 
2022-07-14 16:56:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709705712340992[0;39m <==    Updates: 0
2022-07-14 16:56:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709705712340992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:56:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709726725804032[0;39m 生成今日电子书快照开始
2022-07-14 16:56:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709726725804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709726725804032[0;39m ==> Parameters: 
2022-07-14 16:56:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709726725804032[0;39m <==    Updates: 0
2022-07-14 16:56:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709726725804032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:56:05.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202709726734192640[0;39m 更新电子书下的文档数据开始
2022-07-14 16:56:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709726734192640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:56:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709726734192640[0;39m ==> Parameters: 
2022-07-14 16:56:05.022 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709726734192640[0;39m <==    Updates: 3
2022-07-14 16:56:05.022 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202709726734192640[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-14 16:56:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709747680546816[0;39m 生成今日电子书快照开始
2022-07-14 16:56:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709747680546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709747680546816[0;39m ==> Parameters: 
2022-07-14 16:56:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709747680546816[0;39m <==    Updates: 0
2022-07-14 16:56:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709747680546816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:56:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709768614318080[0;39m 生成今日电子书快照开始
2022-07-14 16:56:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709768614318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709768614318080[0;39m ==> Parameters: 
2022-07-14 16:56:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709768614318080[0;39m <==    Updates: 0
2022-07-14 16:56:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709768614318080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:56:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709789598420992[0;39m 生成今日电子书快照开始
2022-07-14 16:56:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709789598420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709789598420992[0;39m ==> Parameters: 
2022-07-14 16:56:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709789598420992[0;39m <==    Updates: 0
2022-07-14 16:56:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709789598420992[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:56:20.027 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：ayg5Z5Wg3p，session id：1！当前连接数：0
2022-07-14 16:56:20.656 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m                  [0;39m 有新连接：token：ZOK4QhWzjx，session id：2，当前连接数：1
2022-07-14 16:56:20.725 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709792614125568[0;39m ------------- 开始 -------------
2022-07-14 16:56:20.725 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709792614125569[0;39m ------------- 开始 -------------
2022-07-14 16:56:20.725 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709792614125570[0;39m ------------- 开始 -------------
2022-07-14 16:56:20.725 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709792614125568[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:56:20.725 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709792614125569[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:56:20.725 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709792614125570[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:56:20.725 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709792614125568[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:56:20.725 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709792614125569[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:56:20.726 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709792614125570[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:56:20.726 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709792614125568[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:20.726 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709792614125569[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:20.726 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709792614125570[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:20.726 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709792614125568[0;39m 请求参数: []
2022-07-14 16:56:20.726 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709792614125569[0;39m 请求参数: []
2022-07-14 16:56:20.726 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709792614125570[0;39m 请求参数: []
2022-07-14 16:56:20.727 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709792614125568[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:20.727 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709792614125569[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:56:20.727 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709792614125570[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:20.728 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709792614125569[0;39m ==> Parameters: 
2022-07-14 16:56:20.728 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709792614125570[0;39m ==> Parameters: 
2022-07-14 16:56:20.728 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709792614125568[0;39m ==> Parameters: 
2022-07-14 16:56:20.729 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709792614125570[0;39m <==      Total: 0
2022-07-14 16:56:20.729 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:56:20.729 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709792614125568[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:56:20.730 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:56:20.730 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709792614125568[0;39m <==        Row: 2022-07-14, 101, 22, 101, 22
2022-07-14 16:56:20.730 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:56:20.730 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709792614125570[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:56:20.730 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:56:20.730 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709792614125568[0;39m <==      Total: 1
2022-07-14 16:56:20.731 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709792614125570[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:56:20.731 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:56:20.731 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709792614125568[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":101,"viewIncrease":101,"voteCount":22,"voteIncrease":22}],"success":true}
2022-07-14 16:56:20.731 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:56:20.731 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709792614125568[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:56:20.732 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:56:20.732 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:56:20.732 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:56:20.733 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:56:20.734 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:56:20.734 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:56:20.735 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:56:20.735 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:56:20.735 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:56:20.736 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:56:20.736 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709792614125569[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:56:20.737 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709792614125569[0;39m <==      Total: 16
2022-07-14 16:56:20.738 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709792614125569[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:56:20.738 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709792614125569[0;39m ------------- 结束 耗时：13 ms -------------
2022-07-14 16:56:22.351 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709799434063872[0;39m ------------- 开始 -------------
2022-07-14 16:56:22.352 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709799434063872[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:56:22.352 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709799434063872[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:56:22.352 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709799434063872[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:22.353 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709799434063872[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2022-07-14 16:56:22.522 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709799434063872[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:56:22.523 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709799434063872[0;39m ==> Parameters: 101(Long)
2022-07-14 16:56:22.524 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709799434063872[0;39m <==    Columns: count(0)
2022-07-14 16:56:22.524 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709799434063872[0;39m <==        Row: 1
2022-07-14 16:56:22.525 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709799434063872[0;39m <==      Total: 1
2022-07-14 16:56:22.526 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202709799434063872[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:56:22.527 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202709799434063872[0;39m ==> Parameters: 101(Long), 1000(Integer)
2022-07-14 16:56:22.528 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202709799434063872[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:56:22.528 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202709799434063872[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 4, 1
2022-07-14 16:56:22.528 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202709799434063872[0;39m <==      Total: 1
2022-07-14 16:56:22.530 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202709799434063872[0;39m 总行数：1
2022-07-14 16:56:22.530 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202709799434063872[0;39m 总页数：1
2022-07-14 16:56:22.537 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709799434063872[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":4,"voteCount":1}],"total":1},"success":true}
2022-07-14 16:56:22.537 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709799434063872[0;39m ------------- 结束 耗时：186 ms -------------
2022-07-14 16:56:24.048 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709806551797760[0;39m ------------- 开始 -------------
2022-07-14 16:56:24.048 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709806551797760[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:56:24.049 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709806551797760[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:56:24.049 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709806551797760[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:24.049 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709806551797760[0;39m 请求参数: [{"categoryId2":102,"page":1,"size":1000}]
2022-07-14 16:56:24.052 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709806551797760[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:56:24.053 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709806551797760[0;39m ==> Parameters: 102(Long)
2022-07-14 16:56:24.054 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709806551797760[0;39m <==    Columns: count(0)
2022-07-14 16:56:24.054 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709806551797760[0;39m <==        Row: 0
2022-07-14 16:56:24.055 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709806551797760[0;39m <==      Total: 1
2022-07-14 16:56:24.055 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202709806551797760[0;39m 总行数：0
2022-07-14 16:56:24.055 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202709806551797760[0;39m 总页数：0
2022-07-14 16:56:24.056 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709806551797760[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:56:24.056 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709806551797760[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:56:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709810565746688[0;39m 生成今日电子书快照开始
2022-07-14 16:56:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709810565746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709810565746688[0;39m ==> Parameters: 
2022-07-14 16:56:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709810565746688[0;39m <==    Updates: 0
2022-07-14 16:56:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709810565746688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:56:25.486 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709812583206912[0;39m ------------- 开始 -------------
2022-07-14 16:56:25.487 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709812583206912[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:56:25.487 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709812583206912[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:56:25.487 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709812583206912[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:25.487 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709812583206912[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2022-07-14 16:56:25.490 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709812583206912[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:56:25.490 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709812583206912[0;39m ==> Parameters: 201(Long)
2022-07-14 16:56:25.491 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709812583206912[0;39m <==    Columns: count(0)
2022-07-14 16:56:25.491 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709812583206912[0;39m <==        Row: 1
2022-07-14 16:56:25.491 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709812583206912[0;39m <==      Total: 1
2022-07-14 16:56:25.492 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202709812583206912[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:56:25.492 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202709812583206912[0;39m ==> Parameters: 201(Long), 1000(Integer)
2022-07-14 16:56:25.493 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202709812583206912[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:56:25.493 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202709812583206912[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 61, 12
2022-07-14 16:56:25.493 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202709812583206912[0;39m <==      Total: 1
2022-07-14 16:56:25.494 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202709812583206912[0;39m 总行数：1
2022-07-14 16:56:25.494 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202709812583206912[0;39m 总页数：1
2022-07-14 16:56:25.494 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709812583206912[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":61,"voteCount":12}],"total":1},"success":true}
2022-07-14 16:56:25.494 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709812583206912[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:56:26.698 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709817666703360[0;39m ------------- 开始 -------------
2022-07-14 16:56:26.699 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709817666703360[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2022-07-14 16:56:26.699 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709817666703360[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:56:26.699 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709817666703360[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:26.699 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709817666703360[0;39m 请求参数: [1]
2022-07-14 16:56:26.705 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202709817666703360[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:56:26.705 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202709817666703360[0;39m ==> Parameters: 1(Long)
2022-07-14 16:56:26.706 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709817666703360[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:56:26.706 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709817666703360[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 32, 4
2022-07-14 16:56:26.707 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709817666703360[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 10, 3
2022-07-14 16:56:26.707 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709817666703360[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 7, 2
2022-07-14 16:56:26.707 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709817666703360[0;39m <==        Row: 6, 1, 5, 文档2.2.1, 1, 4, 1
2022-07-14 16:56:26.708 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709817666703360[0;39m <==        Row: 3, 1, 0, 文档2, 2, 4, 1
2022-07-14 16:56:26.708 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709817666703360[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 4, 1
2022-07-14 16:56:26.708 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202709817666703360[0;39m <==      Total: 6
2022-07-14 16:56:26.715 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709817666703360[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":32,"voteCount":4},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":7,"voteCount":2},{"ebookId":1,"id":6,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":4,"voteCount":1},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":4,"voteCount":1}],"success":true}
2022-07-14 16:56:26.715 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709817666703360[0;39m ------------- 结束 耗时：17 ms -------------
2022-07-14 16:56:26.732 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709817809309696[0;39m ------------- 开始 -------------
2022-07-14 16:56:26.732 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709817809309696[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/1 GET
2022-07-14 16:56:26.733 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709817809309696[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:56:26.733 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709817809309696[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:26.733 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709817809309696[0;39m 请求参数: [1]
2022-07-14 16:56:26.734 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202709817809309696[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:56:26.734 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202709817809309696[0;39m ==> Parameters: 1(Long)
2022-07-14 16:56:26.737 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202709817809309696[0;39m <==    Columns: id, content
2022-07-14 16:56:26.737 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202709817809309696[0;39m <==        Row: 1, <<BLOB>>
2022-07-14 16:56:26.737 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202709817809309696[0;39m <==      Total: 1
2022-07-14 16:56:26.739 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202709817809309696[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:56:26.739 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202709817809309696[0;39m ==> Parameters: 1(Long)
2022-07-14 16:56:26.850 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202709817809309696[0;39m <==    Updates: 1
2022-07-14 16:56:26.850 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709817809309696[0;39m 返回结果: {"content":"<blockquote><h1 id=\"japt6\"><font face=\"仿宋\" color=\"#7b5ba1\"><b><u>33332222</u></b></font></h1><p><font face=\"仿宋\" color=\"#c24f4a\"><b style=\"background-color: rgb(139, 170, 74);\">2022.7.4</b></font></p><img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png\" alt=\"[[舔屏]]\"><div><font face=\"仿宋\" color=\"#7b5ba1\"><b></b></font></div></blockquote>","success":true}
2022-07-14 16:56:26.850 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709817809309696[0;39m ------------- 结束 耗时：118 ms -------------
2022-07-14 16:56:28.119 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709823626809344[0;39m ------------- 开始 -------------
2022-07-14 16:56:28.120 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709823626809344[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/1 GET
2022-07-14 16:56:28.120 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709823626809344[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 16:56:28.120 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709823626809344[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:28.120 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709823626809344[0;39m 请求参数: [1]
2022-07-14 16:56:29.150 INFO  com.zs.wikibb.utils.RedisUtil                     :28  
                [32m202709823626809344[0;39m key已存在：DOC_VOTE_1_127.0.0.1
2022-07-14 16:56:29.153 WARN  c.zs.wikibb.controller.ControllerExceptionHandler :45  
                [32m202709823626809344[0;39m 业务异常：您已点赞过
2022-07-14 16:56:29.154 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m202709823626809344[0;39m Resolved [com.zs.wikibb.exception.BusinessException: 您已点赞过]
2022-07-14 16:56:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709831562432512[0;39m 生成今日电子书快照开始
2022-07-14 16:56:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709831562432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709831562432512[0;39m ==> Parameters: 
2022-07-14 16:56:30.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709831562432512[0;39m <==    Updates: 0
2022-07-14 16:56:30.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709831562432512[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 16:56:30.115 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709831998640128[0;39m ------------- 开始 -------------
2022-07-14 16:56:30.115 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709831998640128[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/6 GET
2022-07-14 16:56:30.115 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709831998640128[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:56:30.116 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709831998640128[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:30.116 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709831998640128[0;39m 请求参数: [6]
2022-07-14 16:56:30.116 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202709831998640128[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:56:30.117 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202709831998640128[0;39m ==> Parameters: 6(Long)
2022-07-14 16:56:30.117 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202709831998640128[0;39m <==      Total: 0
2022-07-14 16:56:30.118 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202709831998640128[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:56:30.119 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202709831998640128[0;39m ==> Parameters: 6(Long)
2022-07-14 16:56:30.131 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202709831998640128[0;39m <==    Updates: 1
2022-07-14 16:56:30.132 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709831998640128[0;39m 返回结果: {"content":"","success":true}
2022-07-14 16:56:30.132 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709831998640128[0;39m ------------- 结束 耗时：17 ms -------------
2022-07-14 16:56:30.899 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709835286974464[0;39m ------------- 开始 -------------
2022-07-14 16:56:30.899 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709835286974464[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/6 GET
2022-07-14 16:56:30.899 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709835286974464[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 16:56:30.899 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709835286974464[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:30.900 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709835286974464[0;39m 请求参数: [6]
2022-07-14 16:56:30.933 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202709835286974464[0;39m key不存在，放入：DOC_VOTE_6_127.0.0.1，过期 86400 秒
2022-07-14 16:56:30.970 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202709835286974464[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 16:56:30.971 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202709835286974464[0;39m ==> Parameters: 6(Long)
2022-07-14 16:56:30.985 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202709835286974464[0;39m <==    Updates: 1
2022-07-14 16:56:30.986 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202709835286974464[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 16:56:30.986 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202709835286974464[0;39m ==> Parameters: 6(Long)
2022-07-14 16:56:30.987 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202709835286974464[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:56:30.987 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202709835286974464[0;39m <==        Row: 6, 1, 5, 文档2.2.1, 1, 5, 2
2022-07-14 16:56:30.987 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202709835286974464[0;39m <==      Total: 1
2022-07-14 16:56:30.989 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709835286974464[0;39m 返回结果: {"success":true}
2022-07-14 16:56:30.989 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709835286974464[0;39m ------------- 结束 耗时：90 ms -------------
2022-07-14 16:56:30.992 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202709835286974464[0;39m 推送消息：ZOK4QhWzjx，内容：【文档2.2.1】被点赞
2022-07-14 16:56:33.642 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709846791950336[0;39m ------------- 开始 -------------
2022-07-14 16:56:33.642 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709846791950337[0;39m ------------- 开始 -------------
2022-07-14 16:56:33.642 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709846791950338[0;39m ------------- 开始 -------------
2022-07-14 16:56:33.642 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709846791950336[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:56:33.642 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709846791950337[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:56:33.642 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709846791950338[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:56:33.642 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709846791950337[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:56:33.642 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709846791950336[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:56:33.642 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709846791950338[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:56:33.643 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709846791950337[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:33.643 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709846791950338[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:33.643 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709846791950336[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:33.643 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709846791950337[0;39m 请求参数: []
2022-07-14 16:56:33.643 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709846791950338[0;39m 请求参数: []
2022-07-14 16:56:33.643 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709846791950336[0;39m 请求参数: []
2022-07-14 16:56:33.643 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709846791950337[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:33.643 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709846791950338[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:56:33.644 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709846791950337[0;39m ==> Parameters: 
2022-07-14 16:56:33.644 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709846791950338[0;39m ==> Parameters: 
2022-07-14 16:56:33.644 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709846791950336[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:33.644 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709846791950336[0;39m ==> Parameters: 
2022-07-14 16:56:33.650 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709846791950337[0;39m <==      Total: 0
2022-07-14 16:56:33.650 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709846791950336[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:56:33.650 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:56:33.650 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709846791950337[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:56:33.650 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:56:33.650 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709846791950336[0;39m <==        Row: 2022-07-14, 101, 22, 101, 22
2022-07-14 16:56:33.650 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709846791950337[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:56:33.651 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709846791950336[0;39m <==      Total: 1
2022-07-14 16:56:33.651 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:56:33.651 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:56:33.651 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709846791950336[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":101,"viewIncrease":101,"voteCount":22,"voteIncrease":22}],"success":true}
2022-07-14 16:56:33.651 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709846791950336[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:56:33.651 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:56:33.652 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:56:33.652 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:56:33.653 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:56:33.653 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:56:33.653 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:56:33.654 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:56:33.654 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:56:33.654 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:56:33.655 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:56:33.655 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:56:33.655 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:56:33.656 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709846791950338[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:56:33.656 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709846791950338[0;39m <==      Total: 16
2022-07-14 16:56:33.657 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709846791950338[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:56:33.657 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709846791950338[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-14 16:56:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709852500398080[0;39m 生成今日电子书快照开始
2022-07-14 16:56:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709852500398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709852500398080[0;39m ==> Parameters: 
2022-07-14 16:56:35.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709852500398080[0;39m <==    Updates: 0
2022-07-14 16:56:35.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709852500398080[0;39m 生成今日电子书快照结束，耗时：16 毫秒
2022-07-14 16:56:35.021 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202709852575895552[0;39m 更新电子书下的文档数据开始
2022-07-14 16:56:35.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709852575895552[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:56:35.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709852575895552[0;39m ==> Parameters: 
2022-07-14 16:56:35.059 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709852575895552[0;39m <==    Updates: 3
2022-07-14 16:56:35.060 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202709852575895552[0;39m 更新电子书下的文档数据结束，耗时：39 毫秒
2022-07-14 16:56:35.104 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202709806551797760[0;39m 连接关闭，token：ZOK4QhWzjx，session id：2！当前连接数：0
2022-07-14 16:56:35.345 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202709812583206912[0;39m 有新连接：token：svgG1gnEx9，session id：3，当前连接数：1
2022-07-14 16:56:35.390 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709854123593730[0;39m ------------- 开始 -------------
2022-07-14 16:56:35.390 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709854123593729[0;39m ------------- 开始 -------------
2022-07-14 16:56:35.390 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709854123593728[0;39m ------------- 开始 -------------
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709854123593730[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709854123593728[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709854123593729[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709854123593730[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709854123593729[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709854123593728[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709854123593730[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709854123593729[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709854123593728[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:35.391 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709854123593730[0;39m 请求参数: []
2022-07-14 16:56:35.392 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709854123593729[0;39m 请求参数: []
2022-07-14 16:56:35.392 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709854123593728[0;39m 请求参数: []
2022-07-14 16:56:35.392 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709854123593730[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:56:35.392 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709854123593729[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:35.392 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709854123593728[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:35.392 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709854123593730[0;39m ==> Parameters: 
2022-07-14 16:56:35.393 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709854123593728[0;39m ==> Parameters: 
2022-07-14 16:56:35.393 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709854123593729[0;39m ==> Parameters: 
2022-07-14 16:56:35.393 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:56:35.394 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709854123593728[0;39m <==      Total: 0
2022-07-14 16:56:35.394 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709854123593729[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:56:35.394 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:56:35.394 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709854123593728[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:56:35.394 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709854123593729[0;39m <==        Row: 2022-07-14, 101, 22, 101, 22
2022-07-14 16:56:35.394 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709854123593728[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:56:35.394 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:56:35.394 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:56:35.395 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709854123593729[0;39m <==      Total: 1
2022-07-14 16:56:35.395 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:56:35.395 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709854123593729[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":101,"viewIncrease":101,"voteCount":22,"voteIncrease":22}],"success":true}
2022-07-14 16:56:35.395 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:56:35.395 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709854123593729[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:56:35.395 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:56:35.396 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:56:35.396 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:56:35.397 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:56:35.397 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:56:35.398 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:56:35.398 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:56:35.399 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:56:35.399 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:56:35.399 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:56:35.400 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709854123593730[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:56:35.400 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709854123593730[0;39m <==      Total: 16
2022-07-14 16:56:35.402 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709854123593730[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:56:35.402 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709854123593730[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-14 16:56:39.833 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709872758886400[0;39m ------------- 开始 -------------
2022-07-14 16:56:39.834 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709872758886400[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:56:39.834 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709872758886400[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:56:39.834 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709872758886400[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:39.834 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709872758886400[0;39m 请求参数: [{"categoryId2":501,"page":1,"size":1000}]
2022-07-14 16:56:39.837 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709872758886400[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:56:39.838 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709872758886400[0;39m ==> Parameters: 501(Long)
2022-07-14 16:56:39.839 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709872758886400[0;39m <==    Columns: count(0)
2022-07-14 16:56:39.840 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709872758886400[0;39m <==        Row: 0
2022-07-14 16:56:39.840 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709872758886400[0;39m <==      Total: 1
2022-07-14 16:56:39.841 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202709872758886400[0;39m 总行数：0
2022-07-14 16:56:39.841 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202709872758886400[0;39m 总页数：0
2022-07-14 16:56:39.842 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709872758886400[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:56:39.842 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709872758886400[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:56:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709873497083904[0;39m 生成今日电子书快照开始
2022-07-14 16:56:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709873497083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709873497083904[0;39m ==> Parameters: 
2022-07-14 16:56:40.051 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709873497083904[0;39m <==    Updates: 0
2022-07-14 16:56:40.051 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709873497083904[0;39m 生成今日电子书快照结束，耗时：42 毫秒
2022-07-14 16:56:40.345 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709874906370048[0;39m ------------- 开始 -------------
2022-07-14 16:56:40.345 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709874906370048[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:56:40.345 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709874906370048[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:56:40.345 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709874906370048[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:40.346 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709874906370048[0;39m 请求参数: [{"categoryId2":502,"page":1,"size":1000}]
2022-07-14 16:56:40.347 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709874906370048[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:56:40.348 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709874906370048[0;39m ==> Parameters: 502(Long)
2022-07-14 16:56:40.348 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709874906370048[0;39m <==    Columns: count(0)
2022-07-14 16:56:40.349 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709874906370048[0;39m <==        Row: 0
2022-07-14 16:56:40.349 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709874906370048[0;39m <==      Total: 1
2022-07-14 16:56:40.349 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202709874906370048[0;39m 总行数：0
2022-07-14 16:56:40.349 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202709874906370048[0;39m 总页数：0
2022-07-14 16:56:40.349 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709874906370048[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 16:56:40.350 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709874906370048[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:56:40.774 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709876705726464[0;39m ------------- 开始 -------------
2022-07-14 16:56:40.774 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709876705726464[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:56:40.775 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709876705726464[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:56:40.775 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709876705726464[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:40.775 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709876705726464[0;39m 请求参数: [{"categoryId2":503,"page":1,"size":1000}]
2022-07-14 16:56:40.781 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709876705726464[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:56:40.781 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709876705726464[0;39m ==> Parameters: 503(Long)
2022-07-14 16:56:40.782 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709876705726464[0;39m <==    Columns: count(0)
2022-07-14 16:56:40.782 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202709876705726464[0;39m <==        Row: 1
2022-07-14 16:56:40.782 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202709876705726464[0;39m <==      Total: 1
2022-07-14 16:56:40.783 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202709876705726464[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:56:40.784 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202709876705726464[0;39m ==> Parameters: 503(Long), 1000(Integer)
2022-07-14 16:56:40.784 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202709876705726464[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:56:40.784 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202709876705726464[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 36, 9
2022-07-14 16:56:40.785 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202709876705726464[0;39m <==      Total: 1
2022-07-14 16:56:40.785 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202709876705726464[0;39m 总行数：1
2022-07-14 16:56:40.785 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202709876705726464[0;39m 总页数：1
2022-07-14 16:56:40.785 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709876705726464[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":36,"voteCount":9}],"total":1},"success":true}
2022-07-14 16:56:40.785 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709876705726464[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 16:56:41.904 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709881445289984[0;39m ------------- 开始 -------------
2022-07-14 16:56:41.904 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709881445289984[0;39m 请求地址: http://127.0.0.1:8880/doc/all/2 GET
2022-07-14 16:56:41.904 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709881445289984[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:56:41.904 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709881445289984[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:41.904 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709881445289984[0;39m 请求参数: [2]
2022-07-14 16:56:41.906 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202709881445289984[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:56:41.906 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202709881445289984[0;39m ==> Parameters: 2(Long)
2022-07-14 16:56:41.907 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709881445289984[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:56:41.908 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709881445289984[0;39m <==        Row: 198979979210526720, 2, 0, test, 1, 23, 2
2022-07-14 16:56:41.908 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709881445289984[0;39m <==        Row: 200156194042679296, 2, 200153426007560192, test1, 1, 4, 2
2022-07-14 16:56:41.908 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709881445289984[0;39m <==        Row: 200605131799138304, 2, 0, test2, 1, 1, 1
2022-07-14 16:56:41.909 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709881445289984[0;39m <==        Row: 200605680900640769, 2, 0, test3, 1, 1, 1
2022-07-14 16:56:41.909 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709881445289984[0;39m <==        Row: 200153426007560192, 2, 0, test1, 2, 4, 1
2022-07-14 16:56:41.909 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709881445289984[0;39m <==        Row: 200610827236151296, 2, 0, test4, 2, 2, 1
2022-07-14 16:56:41.909 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202709881445289984[0;39m <==        Row: 200613197034688512, 2, 0, TEST5, 2, 1, 1
2022-07-14 16:56:41.909 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202709881445289984[0;39m <==      Total: 7
2022-07-14 16:56:41.910 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709881445289984[0;39m 返回结果: {"content":[{"ebookId":2,"id":198979979210526720,"name":"test","parent":0,"sort":1,"viewCount":23,"voteCount":2},{"ebookId":2,"id":200156194042679296,"name":"test1","parent":200153426007560192,"sort":1,"viewCount":4,"voteCount":2},{"ebookId":2,"id":200605131799138304,"name":"test2","parent":0,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":2,"id":200605680900640769,"name":"test3","parent":0,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":2,"id":200153426007560192,"name":"test1","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":2,"id":200610827236151296,"name":"test4","parent":0,"sort":2,"viewCount":2,"voteCount":1},{"ebookId":2,"id":200613197034688512,"name":"TEST5","parent":0,"sort":2,"viewCount":1,"voteCount":1}],"success":true}
2022-07-14 16:56:41.910 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709881445289984[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:56:41.922 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709881520787456[0;39m ------------- 开始 -------------
2022-07-14 16:56:41.922 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709881520787456[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/198979979210526720 GET
2022-07-14 16:56:41.922 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709881520787456[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 16:56:41.923 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709881520787456[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:41.923 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709881520787456[0;39m 请求参数: [198979979210526720]
2022-07-14 16:56:41.924 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202709881520787456[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 16:56:41.925 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202709881520787456[0;39m ==> Parameters: 198979979210526720(Long)
2022-07-14 16:56:41.930 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202709881520787456[0;39m <==    Columns: id, content
2022-07-14 16:56:41.931 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202709881520787456[0;39m <==        Row: 198979979210526720, <<BLOB>>
2022-07-14 16:56:41.931 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202709881520787456[0;39m <==      Total: 1
2022-07-14 16:56:41.932 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202709881520787456[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 16:56:41.932 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202709881520787456[0;39m ==> Parameters: 198979979210526720(Long)
2022-07-14 16:56:41.956 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202709881520787456[0;39m <==    Updates: 1
2022-07-14 16:56:41.958 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709881520787456[0;39m 返回结果: {"content":"<p>111</p>","success":true}
2022-07-14 16:56:41.958 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709881520787456[0;39m ------------- 结束 耗时：36 ms -------------
2022-07-14 16:56:44.328 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709891612282880[0;39m ------------- 开始 -------------
2022-07-14 16:56:44.329 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709891612282880[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/198979979210526720 GET
2022-07-14 16:56:44.329 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709891612282880[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 16:56:44.329 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709891612282880[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:44.329 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709891612282880[0;39m 请求参数: [198979979210526720]
2022-07-14 16:56:44.363 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202709891612282880[0;39m key不存在，放入：DOC_VOTE_198979979210526720_127.0.0.1，过期 86400 秒
2022-07-14 16:56:44.400 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202709891612282880[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 16:56:44.400 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202709891612282880[0;39m ==> Parameters: 198979979210526720(Long)
2022-07-14 16:56:44.420 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202709891612282880[0;39m <==    Updates: 1
2022-07-14 16:56:44.421 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202709891612282880[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 16:56:44.421 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202709891612282880[0;39m ==> Parameters: 198979979210526720(Long)
2022-07-14 16:56:44.422 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202709891612282880[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:56:44.423 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202709891612282880[0;39m <==        Row: 198979979210526720, 2, 0, test, 1, 24, 3
2022-07-14 16:56:44.423 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202709891612282880[0;39m <==      Total: 1
2022-07-14 16:56:44.423 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709891612282880[0;39m 返回结果: {"success":true}
2022-07-14 16:56:44.424 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709891612282880[0;39m ------------- 结束 耗时：96 ms -------------
2022-07-14 16:56:44.424 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202709891612282880[0;39m 推送消息：svgG1gnEx9，内容：【test】被点赞
2022-07-14 16:56:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709894435049472[0;39m 生成今日电子书快照开始
2022-07-14 16:56:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709894435049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709894435049472[0;39m ==> Parameters: 
2022-07-14 16:56:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709894435049472[0;39m <==    Updates: 0
2022-07-14 16:56:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709894435049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:56:45.927 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709898318974976[0;39m ------------- 开始 -------------
2022-07-14 16:56:45.927 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709898318974977[0;39m ------------- 开始 -------------
2022-07-14 16:56:45.927 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709898318974976[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709898318974977[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709898323169280[0;39m ------------- 开始 -------------
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709898318974976[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709898318974977[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709898323169280[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709898318974976[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709898318974977[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709898323169280[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709898318974976[0;39m 请求参数: []
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709898323169280[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709898318974977[0;39m 请求参数: []
2022-07-14 16:56:45.928 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709898323169280[0;39m 请求参数: []
2022-07-14 16:56:45.929 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709898318974977[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:45.929 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709898323169280[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:56:45.929 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709898318974976[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:45.929 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709898323169280[0;39m ==> Parameters: 
2022-07-14 16:56:45.930 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709898318974977[0;39m ==> Parameters: 
2022-07-14 16:56:45.930 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709898318974976[0;39m ==> Parameters: 
2022-07-14 16:56:45.930 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709898318974977[0;39m <==      Total: 0
2022-07-14 16:56:45.930 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709898318974976[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:56:45.930 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:56:45.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:56:45.931 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709898318974977[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:56:45.931 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709898318974976[0;39m <==        Row: 2022-07-14, 103, 23, 103, 23
2022-07-14 16:56:45.931 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709898318974977[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:56:45.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:56:45.931 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709898318974976[0;39m <==      Total: 1
2022-07-14 16:56:45.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:56:45.931 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709898318974976[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":103,"viewIncrease":103,"voteCount":23,"voteIncrease":23}],"success":true}
2022-07-14 16:56:45.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:56:45.932 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709898318974976[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:56:45.932 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:56:45.932 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:56:45.932 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:56:45.933 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:56:45.933 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:56:45.934 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:56:45.934 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:56:45.934 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:56:45.935 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:56:45.935 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:56:45.935 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:56:45.935 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709898323169280[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:56:45.936 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709898323169280[0;39m <==      Total: 16
2022-07-14 16:56:45.936 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709898323169280[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:56:45.936 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709898323169280[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:56:46.911 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202709854123593730[0;39m 连接关闭，token：svgG1gnEx9，session id：3！当前连接数：0
2022-07-14 16:56:47.703 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202709872758886400[0;39m 有新连接：token：f0lcNpRihA，session id：4，当前连接数：1
2022-07-14 16:56:47.762 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709906015522816[0;39m ------------- 开始 -------------
2022-07-14 16:56:47.762 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709906015522817[0;39m ------------- 开始 -------------
2022-07-14 16:56:48.253 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709906015522816[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:56:48.253 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709906015522817[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:56:47.762 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202709906015522818[0;39m ------------- 开始 -------------
2022-07-14 16:56:48.253 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709906015522817[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:56:48.253 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202709906015522818[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:56:48.253 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709906015522817[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:48.253 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709906015522816[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:56:48.256 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709906015522817[0;39m 请求参数: []
2022-07-14 16:56:48.257 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202709906015522818[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:56:48.257 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709906015522816[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:48.257 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202709906015522818[0;39m 远程地址: 127.0.0.1
2022-07-14 16:56:48.257 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709906015522816[0;39m 请求参数: []
2022-07-14 16:56:48.258 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709906015522817[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:48.258 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202709906015522818[0;39m 请求参数: []
2022-07-14 16:56:48.258 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709906015522816[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:56:48.258 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709906015522817[0;39m ==> Parameters: 
2022-07-14 16:56:48.259 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709906015522818[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:56:48.259 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709906015522816[0;39m ==> Parameters: 
2022-07-14 16:56:48.259 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709906015522818[0;39m ==> Parameters: 
2022-07-14 16:56:48.259 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202709906015522817[0;39m <==      Total: 0
2022-07-14 16:56:48.259 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709906015522816[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:56:48.260 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:56:48.260 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202709906015522816[0;39m <==        Row: 2022-07-14, 103, 23, 103, 23
2022-07-14 16:56:48.260 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709906015522817[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:56:48.260 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:56:48.260 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709906015522817[0;39m ------------- 结束 耗时：498 ms -------------
2022-07-14 16:56:48.260 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:56:48.260 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202709906015522816[0;39m <==      Total: 1
2022-07-14 16:56:48.261 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:56:48.261 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709906015522816[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":103,"viewIncrease":103,"voteCount":23,"voteIncrease":23}],"success":true}
2022-07-14 16:56:48.261 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709906015522816[0;39m ------------- 结束 耗时：499 ms -------------
2022-07-14 16:56:48.261 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:56:48.261 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:56:48.261 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:56:48.262 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:56:48.262 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:56:48.263 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:56:48.263 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:56:48.263 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:56:48.263 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:56:48.264 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:56:48.264 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:56:48.264 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:56:48.265 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202709906015522818[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:56:48.265 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202709906015522818[0;39m <==      Total: 16
2022-07-14 16:56:48.265 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202709906015522818[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:56:48.266 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202709906015522818[0;39m ------------- 结束 耗时：504 ms -------------
2022-07-14 16:56:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709915431735296[0;39m 生成今日电子书快照开始
2022-07-14 16:56:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709915431735296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709915431735296[0;39m ==> Parameters: 
2022-07-14 16:56:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709915431735296[0;39m <==    Updates: 0
2022-07-14 16:56:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709915431735296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:56:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709936403255296[0;39m 生成今日电子书快照开始
2022-07-14 16:56:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709936403255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:56:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709936403255296[0;39m ==> Parameters: 
2022-07-14 16:56:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709936403255296[0;39m <==    Updates: 0
2022-07-14 16:56:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709936403255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:57:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709957349609472[0;39m 生成今日电子书快照开始
2022-07-14 16:57:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709957349609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709957349609472[0;39m ==> Parameters: 
2022-07-14 16:57:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709957349609472[0;39m <==    Updates: 0
2022-07-14 16:57:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709957349609472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 16:57:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709978354683904[0;39m 生成今日电子书快照开始
2022-07-14 16:57:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709978354683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709978354683904[0;39m ==> Parameters: 
2022-07-14 16:57:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709978354683904[0;39m <==    Updates: 0
2022-07-14 16:57:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709978354683904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:57:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202709978367266816[0;39m 更新电子书下的文档数据开始
2022-07-14 16:57:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709978367266816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:57:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709978367266816[0;39m ==> Parameters: 
2022-07-14 16:57:05.094 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202709978367266816[0;39m <==    Updates: 3
2022-07-14 16:57:05.094 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202709978367266816[0;39m 更新电子书下的文档数据结束，耗时：82 毫秒
2022-07-14 16:57:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202709999296843776[0;39m 生成今日电子书快照开始
2022-07-14 16:57:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709999296843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709999296843776[0;39m ==> Parameters: 
2022-07-14 16:57:10.054 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202709999296843776[0;39m <==    Updates: 0
2022-07-14 16:57:10.055 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202709999296843776[0;39m 生成今日电子书快照结束，耗时：53 毫秒
2022-07-14 16:57:12.184 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710008448815104[0;39m ------------- 开始 -------------
2022-07-14 16:57:12.184 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710008448815104[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:57:12.184 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710008448815104[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:57:12.184 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710008448815104[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:12.185 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710008448815104[0;39m 请求参数: [{"categoryId2":401,"page":1,"size":1000}]
2022-07-14 16:57:12.191 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710008448815104[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 16:57:12.192 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710008448815104[0;39m ==> Parameters: 401(Long)
2022-07-14 16:57:12.193 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710008448815104[0;39m <==    Columns: count(0)
2022-07-14 16:57:12.194 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710008448815104[0;39m <==        Row: 2
2022-07-14 16:57:12.194 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710008448815104[0;39m <==      Total: 1
2022-07-14 16:57:12.195 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710008448815104[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 16:57:12.195 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710008448815104[0;39m ==> Parameters: 401(Long), 1000(Integer)
2022-07-14 16:57:12.196 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710008448815104[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:57:12.196 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710008448815104[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 0, 0, 0
2022-07-14 16:57:12.197 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710008448815104[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2022-07-14 16:57:12.197 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710008448815104[0;39m <==      Total: 2
2022-07-14 16:57:12.197 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710008448815104[0;39m 总行数：2
2022-07-14 16:57:12.197 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710008448815104[0;39m 总页数：1
2022-07-14 16:57:12.198 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710008448815104[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0}],"total":2},"success":true}
2022-07-14 16:57:12.198 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710008448815104[0;39m ------------- 结束 耗时：14 ms -------------
2022-07-14 16:57:12.996 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710011854589952[0;39m ------------- 开始 -------------
2022-07-14 16:57:12.996 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710011854589952[0;39m 请求地址: http://127.0.0.1:8880/doc/all/4 GET
2022-07-14 16:57:12.997 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710011854589952[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:57:12.997 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710011854589952[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:12.997 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710011854589952[0;39m 请求参数: [4]
2022-07-14 16:57:12.998 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710011854589952[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:57:12.998 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710011854589952[0;39m ==> Parameters: 4(Long)
2022-07-14 16:57:12.999 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710011854589952[0;39m <==      Total: 0
2022-07-14 16:57:12.999 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710011854589952[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:57:13.000 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710011854589952[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:57:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710020280946688[0;39m 生成今日电子书快照开始
2022-07-14 16:57:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710020280946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710020280946688[0;39m ==> Parameters: 
2022-07-14 16:57:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710020280946688[0;39m <==    Updates: 0
2022-07-14 16:57:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710020280946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:57:16.431 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202709898318974977[0;39m 连接关闭，token：f0lcNpRihA，session id：4！当前连接数：0
2022-07-14 16:57:17.053 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202709898318974976[0;39m 有新连接：token：7x5q0dBQAS，session id：5，当前连接数：1
2022-07-14 16:57:17.087 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710029013487616[0;39m ------------- 开始 -------------
2022-07-14 16:57:17.087 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710029013487616[0;39m 请求地址: http://127.0.0.1:8880/doc/all/4 GET
2022-07-14 16:57:17.087 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710029013487616[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:57:17.087 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710029013487616[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:17.088 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710029013487616[0;39m 请求参数: [4]
2022-07-14 16:57:17.089 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710029013487616[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:57:17.089 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710029013487616[0;39m ==> Parameters: 4(Long)
2022-07-14 16:57:17.090 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710029013487616[0;39m <==      Total: 0
2022-07-14 16:57:17.090 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710029013487616[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:57:17.091 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710029013487616[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:57:18.688 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710035728568320[0;39m ------------- 开始 -------------
2022-07-14 16:57:18.688 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710035728568320[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:57:18.688 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710035728568321[0;39m ------------- 开始 -------------
2022-07-14 16:57:18.688 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710035728568322[0;39m ------------- 开始 -------------
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710035728568320[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710035728568322[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710035728568321[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710035728568322[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710035728568320[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710035728568321[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710035728568322[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710035728568320[0;39m 请求参数: []
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710035728568321[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710035728568322[0;39m 请求参数: []
2022-07-14 16:57:18.689 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710035728568321[0;39m 请求参数: []
2022-07-14 16:57:18.690 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202710035728568320[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:57:18.690 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202710035728568322[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:57:18.690 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202710035728568320[0;39m ==> Parameters: 
2022-07-14 16:57:18.690 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202710035728568322[0;39m ==> Parameters: 
2022-07-14 16:57:18.690 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710035728568321[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:57:18.691 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710035728568321[0;39m ==> Parameters: 
2022-07-14 16:57:18.691 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202710035728568320[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:57:18.691 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202710035728568322[0;39m <==      Total: 0
2022-07-14 16:57:18.691 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202710035728568320[0;39m <==        Row: 2022-07-14, 104, 24, 104, 24
2022-07-14 16:57:18.692 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:57:18.692 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710035728568322[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:57:18.692 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710035728568322[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:57:18.692 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:57:18.692 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202710035728568320[0;39m <==      Total: 1
2022-07-14 16:57:18.692 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:57:18.692 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710035728568320[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":104,"viewIncrease":104,"voteCount":24,"voteIncrease":24}],"success":true}
2022-07-14 16:57:18.692 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:57:18.692 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710035728568320[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:57:18.693 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:57:18.693 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:57:18.693 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:57:18.693 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:57:18.694 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:57:18.694 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:57:18.694 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:57:18.695 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:57:18.695 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:57:18.695 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:57:18.695 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:57:18.695 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:57:18.696 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710035728568321[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:57:18.696 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710035728568321[0;39m <==      Total: 16
2022-07-14 16:57:18.696 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710035728568321[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:57:18.697 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710035728568321[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:57:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710041273438208[0;39m 生成今日电子书快照开始
2022-07-14 16:57:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710041273438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710041273438208[0;39m ==> Parameters: 
2022-07-14 16:57:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710041273438208[0;39m <==    Updates: 0
2022-07-14 16:57:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710041273438208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:57:22.253 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710050681262080[0;39m ------------- 开始 -------------
2022-07-14 16:57:22.253 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710050681262080[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/login POST
2022-07-14 16:57:22.254 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710050681262080[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.login
2022-07-14 16:57:22.254 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710050681262080[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:22.255 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710050681262080[0;39m 请求参数: [{"loginName":"test"}]
2022-07-14 16:57:22.260 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202710050681262080[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki WHERE ( login_name = ? )
2022-07-14 16:57:22.261 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202710050681262080[0;39m ==> Parameters: test(String)
2022-07-14 16:57:22.272 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202710050681262080[0;39m <==    Columns: id, login_name, name, password
2022-07-14 16:57:22.272 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202710050681262080[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 16:57:22.272 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202710050681262080[0;39m <==      Total: 1
2022-07-14 16:57:22.277 INFO  com.zs.wikibb.controller.UserwikiController       :83  
                [32m202710050681262080[0;39m 生成单点登录token，并放入redis中
2022-07-14 16:57:22.312 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710050681262080[0;39m 返回结果: {"content":{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"},"success":true}
2022-07-14 16:57:22.312 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710050681262080[0;39m ------------- 结束 耗时：59 ms -------------
2022-07-14 16:57:23.242 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202709906015522818[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 16:57:23.243 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202709906015522818[0;39m ------------- LoginInterceptor 结束 耗时：1 ms -------------
2022-07-14 16:57:23.247 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202710008448815104[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 16:57:23.247 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202710008448815104[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user_wiki/list
2022-07-14 16:57:23.247 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202710008448815104[0;39m 登录校验开始，token：202710050781925376
2022-07-14 16:57:23.286 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202710008448815104[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 16:57:23.296 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710055055921152[0;39m ------------- 开始 -------------
2022-07-14 16:57:23.296 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710055055921152[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/list GET
2022-07-14 16:57:23.297 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710055055921152[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.list
2022-07-14 16:57:23.297 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710055055921152[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:23.298 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710055055921152[0;39m 请求参数: [{"page":1,"size":10}]
2022-07-14 16:57:23.299 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202710055055921152[0;39m ==>  Preparing: SELECT count(0) FROM userwiki
2022-07-14 16:57:23.299 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202710055055921152[0;39m ==> Parameters: 
2022-07-14 16:57:23.300 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202710055055921152[0;39m <==    Columns: count(0)
2022-07-14 16:57:23.300 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202710055055921152[0;39m <==        Row: 3
2022-07-14 16:57:23.300 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202710055055921152[0;39m <==      Total: 1
2022-07-14 16:57:23.301 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202710055055921152[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki LIMIT ?
2022-07-14 16:57:23.301 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202710055055921152[0;39m ==> Parameters: 10(Integer)
2022-07-14 16:57:23.302 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202710055055921152[0;39m <==    Columns: id, login_name, name, password
2022-07-14 16:57:23.302 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202710055055921152[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 16:57:23.302 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202710055055921152[0;39m <==        Row: 2, zhangshuo, 张硕, 48d6e4c28cd6d6dbc85b94988c174851
2022-07-14 16:57:23.302 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202710055055921152[0;39m <==        Row: 3, zhangyishan, 张一山, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 16:57:23.303 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202710055055921152[0;39m <==      Total: 3
2022-07-14 16:57:23.303 INFO  com.zs.wikibb.service.UserwikiService             :49  
                [32m202710055055921152[0;39m 总行数：3
2022-07-14 16:57:23.303 INFO  com.zs.wikibb.service.UserwikiService             :50  
                [32m202710055055921152[0;39m 总页数：1
2022-07-14 16:57:23.309 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710055055921152[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":2,"loginName":"zhangshuo","name":"张硕"},{"id":3,"loginName":"zhangyishan","name":"张一山"}],"total":3},"success":true}
2022-07-14 16:57:23.309 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710055055921152[0;39m ------------- 结束 耗时：13 ms -------------
2022-07-14 16:57:23.311 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202710055055921152[0;39m ------------- LoginInterceptor 结束 耗时：64 ms -------------
2022-07-14 16:57:23.618 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710056406487040[0;39m ------------- 开始 -------------
2022-07-14 16:57:23.618 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710056406487040[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:57:23.619 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710056406487040[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:57:23.619 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710056406487040[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:23.619 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710056406487040[0;39m 请求参数: []
2022-07-14 16:57:23.619 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710056406487040[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:57:23.620 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710056406487040[0;39m ==> Parameters: 
2022-07-14 16:57:23.621 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:57:23.621 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:57:23.622 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:57:23.622 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:57:23.622 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:57:23.622 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:57:23.622 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:57:23.622 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:57:23.623 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:57:23.623 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:57:23.623 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:57:23.623 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:57:23.624 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:57:23.624 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:57:23.624 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:57:23.624 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:57:23.624 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710056406487040[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:57:23.624 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710056406487040[0;39m <==      Total: 16
2022-07-14 16:57:23.625 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710056406487040[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:57:23.625 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710056406487040[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:57:23.636 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710056481984512[0;39m ------------- 开始 -------------
2022-07-14 16:57:23.636 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710056481984512[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:57:23.636 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710056481984512[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:57:23.636 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710056481984512[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:23.636 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710056481984512[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 16:57:23.638 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710056481984512[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:57:23.639 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710056481984512[0;39m ==> Parameters: 
2022-07-14 16:57:23.640 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710056481984512[0;39m <==    Columns: count(0)
2022-07-14 16:57:23.640 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710056481984512[0;39m <==        Row: 6
2022-07-14 16:57:23.640 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710056481984512[0;39m <==      Total: 1
2022-07-14 16:57:23.641 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710056481984512[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 16:57:23.641 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710056481984512[0;39m ==> Parameters: 4(Integer)
2022-07-14 16:57:23.642 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710056481984512[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:57:23.642 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710056481984512[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 16:57:23.642 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710056481984512[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 16:57:23.642 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710056481984512[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2022-07-14 16:57:23.642 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710056481984512[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 0, 0, 0
2022-07-14 16:57:23.643 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710056481984512[0;39m <==      Total: 4
2022-07-14 16:57:23.643 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710056481984512[0;39m 总行数：6
2022-07-14 16:57:23.643 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710056481984512[0;39m 总页数：2
2022-07-14 16:57:23.643 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710056481984512[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 16:57:23.644 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710056481984512[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:57:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710062249152512[0;39m 生成今日电子书快照开始
2022-07-14 16:57:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710062249152512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710062249152512[0;39m ==> Parameters: 
2022-07-14 16:57:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710062249152512[0;39m <==    Updates: 0
2022-07-14 16:57:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710062249152512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:57:25.421 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710063968817152[0;39m ------------- 开始 -------------
2022-07-14 16:57:25.421 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710063968817152[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:57:25.421 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710063968817152[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:57:25.421 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710063968817152[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:25.421 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710063968817152[0;39m 请求参数: [{"page":2,"size":4}]
2022-07-14 16:57:25.422 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710063968817152[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:57:25.423 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710063968817152[0;39m ==> Parameters: 
2022-07-14 16:57:25.423 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710063968817152[0;39m <==    Columns: count(0)
2022-07-14 16:57:25.424 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710063968817152[0;39m <==        Row: 6
2022-07-14 16:57:25.424 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710063968817152[0;39m <==      Total: 1
2022-07-14 16:57:25.424 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710063968817152[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2022-07-14 16:57:25.425 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710063968817152[0;39m ==> Parameters: 4(Long), 4(Integer)
2022-07-14 16:57:25.425 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710063968817152[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:57:25.426 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710063968817152[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2022-07-14 16:57:25.426 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710063968817152[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 4, 1
2022-07-14 16:57:25.426 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710063968817152[0;39m <==      Total: 2
2022-07-14 16:57:25.427 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710063968817152[0;39m 总行数：6
2022-07-14 16:57:25.427 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710063968817152[0;39m 总页数：2
2022-07-14 16:57:25.427 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710063968817152[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":4,"voteCount":1}],"total":6},"success":true}
2022-07-14 16:57:25.427 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710063968817152[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:57:27.411 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710072315482112[0;39m ------------- 开始 -------------
2022-07-14 16:57:27.411 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710072315482112[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:57:27.411 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710072315482112[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:57:27.412 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710072315482112[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:27.412 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710072315482112[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 16:57:27.414 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710072315482112[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:57:27.414 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710072315482112[0;39m ==> Parameters: 
2022-07-14 16:57:27.415 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710072315482112[0;39m <==    Columns: count(0)
2022-07-14 16:57:27.415 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710072315482112[0;39m <==        Row: 6
2022-07-14 16:57:27.415 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710072315482112[0;39m <==      Total: 1
2022-07-14 16:57:27.416 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710072315482112[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 16:57:27.416 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710072315482112[0;39m ==> Parameters: 4(Integer)
2022-07-14 16:57:27.417 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710072315482112[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:57:27.418 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710072315482112[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 16:57:27.418 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710072315482112[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 16:57:27.418 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710072315482112[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2022-07-14 16:57:27.418 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710072315482112[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 0, 0, 0
2022-07-14 16:57:27.419 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710072315482112[0;39m <==      Total: 4
2022-07-14 16:57:27.419 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710072315482112[0;39m 总行数：6
2022-07-14 16:57:27.419 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710072315482112[0;39m 总页数：2
2022-07-14 16:57:27.420 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710072315482112[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 16:57:27.420 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710072315482112[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:57:29.104 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710079416438784[0;39m ------------- 开始 -------------
2022-07-14 16:57:29.104 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710079416438784[0;39m 请求地址: http://127.0.0.1:8880/doc/all/4 GET
2022-07-14 16:57:29.105 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710079416438784[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:57:29.105 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710079416438784[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:29.105 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710079416438784[0;39m 请求参数: [4]
2022-07-14 16:57:29.106 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710079416438784[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:57:29.106 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710079416438784[0;39m ==> Parameters: 4(Long)
2022-07-14 16:57:29.107 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710079416438784[0;39m <==      Total: 0
2022-07-14 16:57:29.108 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710079416438784[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:57:29.108 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710079416438784[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:57:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710083182923776[0;39m 生成今日电子书快照开始
2022-07-14 16:57:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710083182923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710083182923776[0;39m ==> Parameters: 
2022-07-14 16:57:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710083182923776[0;39m <==    Updates: 0
2022-07-14 16:57:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710083182923776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:57:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202710104167026688[0;39m 更新电子书下的文档数据开始
2022-07-14 16:57:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710104167026688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:57:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710104167026688[0;39m ==> Parameters: 
2022-07-14 16:57:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710104167026688[0;39m <==    Updates: 3
2022-07-14 16:57:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202710104167026688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:57:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710104175415296[0;39m 生成今日电子书快照开始
2022-07-14 16:57:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710104175415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710104175415296[0;39m ==> Parameters: 
2022-07-14 16:57:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710104175415296[0;39m <==    Updates: 0
2022-07-14 16:57:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710104175415296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:57:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710125146935296[0;39m 生成今日电子书快照开始
2022-07-14 16:57:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710125146935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710125146935296[0;39m ==> Parameters: 
2022-07-14 16:57:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710125146935296[0;39m <==    Updates: 0
2022-07-14 16:57:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710125146935296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:57:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710146114260992[0;39m 生成今日电子书快照开始
2022-07-14 16:57:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710146114260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710146114260992[0;39m ==> Parameters: 
2022-07-14 16:57:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710146114260992[0;39m <==    Updates: 0
2022-07-14 16:57:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710146114260992[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 16:57:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710167094169600[0;39m 生成今日电子书快照开始
2022-07-14 16:57:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710167094169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710167094169600[0;39m ==> Parameters: 
2022-07-14 16:57:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710167094169600[0;39m <==    Updates: 0
2022-07-14 16:57:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710167094169600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:57:51.319 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202710035728568321[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 16:57:51.319 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202710035728568321[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 16:57:51.319 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202710035728568321[0;39m 登录校验开始，token：202710050781925376
2022-07-14 16:57:51.355 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202710035728568321[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 16:57:51.361 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710172769062912[0;39m ------------- 开始 -------------
2022-07-14 16:57:51.361 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710172769062912[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 16:57:51.362 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710172769062912[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 16:57:51.362 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710172769062912[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:51.363 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710172769062912[0;39m 请求参数: [{"content":"<blockquote><p>MySQL 8.0</p></blockquote>","ebookId":4,"name":"mysql","parent":0,"sort":1}]
2022-07-14 16:57:51.373 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202710172769062912[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 16:57:51.373 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202710172769062912[0;39m ==> Parameters: 202710172811005952(Long), 4(Long), 0(Long), mysql(String), 1(Integer), 0(Integer), 0(Integer)
2022-07-14 16:57:51.374 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202710172769062912[0;39m <==    Updates: 1
2022-07-14 16:57:51.375 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202710172769062912[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 16:57:51.376 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202710172769062912[0;39m ==> Parameters: 202710172811005952(Long), <blockquote><p>MySQL 8.0</p></blockquote>(String)
2022-07-14 16:57:51.377 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202710172769062912[0;39m <==    Updates: 1
2022-07-14 16:57:51.452 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710172769062912[0;39m 返回结果: {"success":true}
2022-07-14 16:57:51.452 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710172769062912[0;39m ------------- 结束 耗时：91 ms -------------
2022-07-14 16:57:51.453 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202710172769062912[0;39m ------------- LoginInterceptor 结束 耗时：134 ms -------------
2022-07-14 16:57:51.460 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710173184299008[0;39m ------------- 开始 -------------
2022-07-14 16:57:51.460 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710173184299008[0;39m 请求地址: http://127.0.0.1:8880/doc/all/4 GET
2022-07-14 16:57:51.460 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710173184299008[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:57:51.461 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710173184299008[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:51.461 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710173184299008[0;39m 请求参数: [4]
2022-07-14 16:57:51.461 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710173184299008[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:57:51.462 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710173184299008[0;39m ==> Parameters: 4(Long)
2022-07-14 16:57:51.462 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710173184299008[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:57:51.463 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710173184299008[0;39m <==        Row: 202710172811005952, 4, 0, mysql, 1, 0, 0
2022-07-14 16:57:51.464 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710173184299008[0;39m <==      Total: 1
2022-07-14 16:57:51.464 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710173184299008[0;39m 返回结果: {"content":[{"ebookId":4,"id":202710172811005952,"name":"mysql","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 16:57:51.464 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710173184299008[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:57:53.140 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710180230729729[0;39m ------------- 开始 -------------
2022-07-14 16:57:53.140 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710180230729728[0;39m ------------- 开始 -------------
2022-07-14 16:57:53.140 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710180230729729[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:57:53.140 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710180230729728[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:57:53.140 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710180230729730[0;39m ------------- 开始 -------------
2022-07-14 16:57:53.140 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710180230729729[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:57:53.141 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710180230729729[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:53.140 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710180230729728[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:57:53.141 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710180230729729[0;39m 请求参数: []
2022-07-14 16:57:53.140 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710180230729730[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:57:53.141 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710180230729728[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:53.142 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710180230729730[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:57:53.142 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710180230729728[0;39m 请求参数: []
2022-07-14 16:57:53.142 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710180230729730[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:53.142 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202710180230729729[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:57:53.142 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710180230729730[0;39m 请求参数: []
2022-07-14 16:57:53.142 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202710180230729729[0;39m ==> Parameters: 
2022-07-14 16:57:53.143 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202710180230729728[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:57:53.143 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710180230729730[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:57:53.143 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202710180230729728[0;39m ==> Parameters: 
2022-07-14 16:57:53.143 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710180230729730[0;39m ==> Parameters: 
2022-07-14 16:57:53.143 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202710180230729729[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:57:53.144 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202710180230729729[0;39m <==        Row: 2022-07-14, 104, 24, 104, 24
2022-07-14 16:57:53.144 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202710180230729728[0;39m <==      Total: 0
2022-07-14 16:57:53.144 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:57:53.144 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202710180230729729[0;39m <==      Total: 1
2022-07-14 16:57:53.144 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710180230729728[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:57:53.144 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:57:53.145 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710180230729728[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:57:53.145 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710180230729729[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":104,"viewIncrease":104,"voteCount":24,"voteIncrease":24}],"success":true}
2022-07-14 16:57:53.145 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:57:53.145 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710180230729729[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:57:53.145 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:57:53.145 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:57:53.146 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:57:53.146 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:57:53.146 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:57:53.147 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:57:53.147 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:57:53.147 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:57:53.148 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:57:53.148 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:57:53.148 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:57:53.148 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:57:53.149 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:57:53.149 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710180230729730[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:57:53.149 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710180230729730[0;39m <==      Total: 16
2022-07-14 16:57:53.151 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710180230729730[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:57:53.151 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710180230729730[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 16:57:54.270 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710184970293248[0;39m ------------- 开始 -------------
2022-07-14 16:57:54.271 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710184970293248[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:57:54.271 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710184970293248[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:57:54.271 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710184970293248[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:54.271 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710184970293248[0;39m 请求参数: []
2022-07-14 16:57:54.272 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710184970293248[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:57:54.272 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710184970293248[0;39m ==> Parameters: 
2022-07-14 16:57:54.273 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:57:54.273 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:57:54.274 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:57:54.274 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:57:54.275 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:57:54.275 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:57:54.276 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:57:54.276 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:57:54.276 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:57:54.277 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:57:54.277 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:57:54.277 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:57:54.277 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:57:54.277 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:57:54.277 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:57:54.278 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:57:54.278 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710184970293248[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:57:54.278 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710184970293248[0;39m <==      Total: 16
2022-07-14 16:57:54.279 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710184970293248[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:57:54.279 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710184970293248[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:57:54.288 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710185041596416[0;39m ------------- 开始 -------------
2022-07-14 16:57:54.288 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710185041596416[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:57:54.288 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710185041596416[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:57:54.288 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710185041596416[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:54.288 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710185041596416[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 16:57:54.289 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710185041596416[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:57:54.290 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710185041596416[0;39m ==> Parameters: 
2022-07-14 16:57:54.290 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710185041596416[0;39m <==    Columns: count(0)
2022-07-14 16:57:54.291 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710185041596416[0;39m <==        Row: 6
2022-07-14 16:57:54.291 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710185041596416[0;39m <==      Total: 1
2022-07-14 16:57:54.292 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710185041596416[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 16:57:54.293 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710185041596416[0;39m ==> Parameters: 4(Integer)
2022-07-14 16:57:54.293 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710185041596416[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:57:54.293 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710185041596416[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 16:57:54.295 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710185041596416[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 16:57:54.295 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710185041596416[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2022-07-14 16:57:54.295 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710185041596416[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 0, 0, 0
2022-07-14 16:57:54.295 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710185041596416[0;39m <==      Total: 4
2022-07-14 16:57:54.296 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710185041596416[0;39m 总行数：6
2022-07-14 16:57:54.296 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710185041596416[0;39m 总页数：2
2022-07-14 16:57:54.298 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710185041596416[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 16:57:54.298 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710185041596416[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 16:57:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710188069883904[0;39m 生成今日电子书快照开始
2022-07-14 16:57:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710188069883904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:57:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710188069883904[0;39m ==> Parameters: 
2022-07-14 16:57:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710188069883904[0;39m <==    Updates: 0
2022-07-14 16:57:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710188069883904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:57:55.721 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710191056228352[0;39m ------------- 开始 -------------
2022-07-14 16:57:55.722 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710191056228352[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2022-07-14 16:57:55.722 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710191056228352[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:57:55.723 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710191056228352[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:55.723 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710191056228352[0;39m 请求参数: [1]
2022-07-14 16:57:55.724 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710191056228352[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:57:55.725 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710191056228352[0;39m ==> Parameters: 1(Long)
2022-07-14 16:57:55.726 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710191056228352[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:57:55.726 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710191056228352[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 33, 4
2022-07-14 16:57:55.727 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710191056228352[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 10, 3
2022-07-14 16:57:55.727 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710191056228352[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 7, 2
2022-07-14 16:57:55.727 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710191056228352[0;39m <==        Row: 6, 1, 5, 文档2.2.1, 1, 5, 2
2022-07-14 16:57:55.728 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710191056228352[0;39m <==        Row: 3, 1, 0, 文档2, 2, 4, 1
2022-07-14 16:57:55.728 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710191056228352[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 4, 1
2022-07-14 16:57:55.728 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710191056228352[0;39m <==      Total: 6
2022-07-14 16:57:55.730 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710191056228352[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":33,"voteCount":4},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":7,"voteCount":2},{"ebookId":1,"id":6,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":2},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":4,"voteCount":1}],"success":true}
2022-07-14 16:57:55.730 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710191056228352[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:57:59.399 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710206482878464[0;39m ------------- 开始 -------------
2022-07-14 16:57:59.399 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710206482878464[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:57:59.399 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710206482878464[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:57:59.399 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710206482878464[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:59.400 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710206482878464[0;39m 请求参数: []
2022-07-14 16:57:59.400 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710206482878464[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:57:59.401 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710206482878464[0;39m ==> Parameters: 
2022-07-14 16:57:59.401 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:57:59.402 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:57:59.402 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:57:59.402 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:57:59.402 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:57:59.402 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:57:59.403 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:57:59.403 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:57:59.403 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:57:59.403 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:57:59.403 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:57:59.404 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:57:59.404 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:57:59.404 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:57:59.405 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:57:59.405 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:57:59.405 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710206482878464[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:57:59.405 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710206482878464[0;39m <==      Total: 16
2022-07-14 16:57:59.406 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710206482878464[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:57:59.406 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710206482878464[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:57:59.417 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710206558375936[0;39m ------------- 开始 -------------
2022-07-14 16:57:59.417 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710206558375936[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:57:59.417 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710206558375936[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:57:59.418 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710206558375936[0;39m 远程地址: 127.0.0.1
2022-07-14 16:57:59.418 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710206558375936[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 16:57:59.419 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710206558375936[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:57:59.419 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710206558375936[0;39m ==> Parameters: 
2022-07-14 16:57:59.425 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710206558375936[0;39m <==    Columns: count(0)
2022-07-14 16:57:59.425 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710206558375936[0;39m <==        Row: 6
2022-07-14 16:57:59.426 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710206558375936[0;39m <==      Total: 1
2022-07-14 16:57:59.426 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710206558375936[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 16:57:59.427 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710206558375936[0;39m ==> Parameters: 4(Integer)
2022-07-14 16:57:59.427 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710206558375936[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:57:59.428 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710206558375936[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 16:57:59.428 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710206558375936[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 16:57:59.428 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710206558375936[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2022-07-14 16:57:59.429 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710206558375936[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 0, 0, 0
2022-07-14 16:57:59.429 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710206558375936[0;39m <==      Total: 4
2022-07-14 16:57:59.429 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710206558375936[0;39m 总行数：6
2022-07-14 16:57:59.429 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710206558375936[0;39m 总页数：2
2022-07-14 16:57:59.429 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710206558375936[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 16:57:59.430 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710206558375936[0;39m ------------- 结束 耗时：13 ms -------------
2022-07-14 16:58:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710209049792512[0;39m 生成今日电子书快照开始
2022-07-14 16:58:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710209049792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710209049792512[0;39m ==> Parameters: 
2022-07-14 16:58:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710209049792512[0;39m <==    Updates: 0
2022-07-14 16:58:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710209049792512[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 16:58:00.086 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710209364365312[0;39m ------------- 开始 -------------
2022-07-14 16:58:00.087 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710209364365312[0;39m 请求地址: http://127.0.0.1:8880/doc/all/2 GET
2022-07-14 16:58:00.087 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710209364365312[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:58:00.087 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710209364365312[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:00.087 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710209364365312[0;39m 请求参数: [2]
2022-07-14 16:58:00.088 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710209364365312[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:58:00.089 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710209364365312[0;39m ==> Parameters: 2(Long)
2022-07-14 16:58:00.090 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710209364365312[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:58:00.090 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710209364365312[0;39m <==        Row: 198979979210526720, 2, 0, test, 1, 24, 3
2022-07-14 16:58:00.091 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710209364365312[0;39m <==        Row: 200156194042679296, 2, 200153426007560192, test1, 1, 4, 2
2022-07-14 16:58:00.091 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710209364365312[0;39m <==        Row: 200605131799138304, 2, 0, test2, 1, 1, 1
2022-07-14 16:58:00.091 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710209364365312[0;39m <==        Row: 200605680900640769, 2, 0, test3, 1, 1, 1
2022-07-14 16:58:00.091 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710209364365312[0;39m <==        Row: 200153426007560192, 2, 0, test1, 2, 4, 1
2022-07-14 16:58:00.091 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710209364365312[0;39m <==        Row: 200610827236151296, 2, 0, test4, 2, 2, 1
2022-07-14 16:58:00.092 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710209364365312[0;39m <==        Row: 200613197034688512, 2, 0, TEST5, 2, 1, 1
2022-07-14 16:58:00.092 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710209364365312[0;39m <==      Total: 7
2022-07-14 16:58:00.092 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710209364365312[0;39m 返回结果: {"content":[{"ebookId":2,"id":198979979210526720,"name":"test","parent":0,"sort":1,"viewCount":24,"voteCount":3},{"ebookId":2,"id":200156194042679296,"name":"test1","parent":200153426007560192,"sort":1,"viewCount":4,"voteCount":2},{"ebookId":2,"id":200605131799138304,"name":"test2","parent":0,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":2,"id":200605680900640769,"name":"test3","parent":0,"sort":1,"viewCount":1,"voteCount":1},{"ebookId":2,"id":200153426007560192,"name":"test1","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":2,"id":200610827236151296,"name":"test4","parent":0,"sort":2,"viewCount":2,"voteCount":1},{"ebookId":2,"id":200613197034688512,"name":"TEST5","parent":0,"sort":2,"viewCount":1,"voteCount":1}],"success":true}
2022-07-14 16:58:00.093 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710209364365312[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:58:01.642 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710215890702336[0;39m ------------- 开始 -------------
2022-07-14 16:58:01.642 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710215890702336[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:58:01.642 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710215890702336[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:58:01.642 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710215890702336[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:01.643 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710215890702336[0;39m 请求参数: []
2022-07-14 16:58:01.643 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710215890702336[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:58:01.644 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710215890702336[0;39m ==> Parameters: 
2022-07-14 16:58:01.645 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:58:01.645 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:58:01.645 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:58:01.645 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:58:01.645 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:58:01.646 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:58:01.646 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:58:01.646 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:58:01.646 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:58:01.646 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:58:01.646 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:58:01.647 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:58:01.647 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:58:01.647 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:58:01.647 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:58:01.647 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:58:01.647 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710215890702336[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:58:01.648 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710215890702336[0;39m <==      Total: 16
2022-07-14 16:58:01.648 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710215890702336[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:58:01.649 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710215890702336[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:58:01.659 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710215962005504[0;39m ------------- 开始 -------------
2022-07-14 16:58:01.659 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710215962005504[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:58:01.659 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710215962005504[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:58:01.660 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710215962005504[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:01.660 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710215962005504[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 16:58:01.661 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710215962005504[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:58:01.661 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710215962005504[0;39m ==> Parameters: 
2022-07-14 16:58:01.662 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710215962005504[0;39m <==    Columns: count(0)
2022-07-14 16:58:01.662 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710215962005504[0;39m <==        Row: 6
2022-07-14 16:58:01.662 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710215962005504[0;39m <==      Total: 1
2022-07-14 16:58:01.662 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710215962005504[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 16:58:01.663 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710215962005504[0;39m ==> Parameters: 4(Integer)
2022-07-14 16:58:01.663 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710215962005504[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:58:01.663 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710215962005504[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 16:58:01.663 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710215962005504[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 16:58:01.664 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710215962005504[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2022-07-14 16:58:01.664 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710215962005504[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 0, 0, 0
2022-07-14 16:58:01.664 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710215962005504[0;39m <==      Total: 4
2022-07-14 16:58:01.664 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710215962005504[0;39m 总行数：6
2022-07-14 16:58:01.664 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710215962005504[0;39m 总页数：2
2022-07-14 16:58:01.665 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710215962005504[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":0,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 16:58:01.665 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710215962005504[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 16:58:02.531 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710219619438592[0;39m ------------- 开始 -------------
2022-07-14 16:58:02.531 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710219619438592[0;39m 请求地址: http://127.0.0.1:8880/doc/all/3 GET
2022-07-14 16:58:02.531 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710219619438592[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:58:02.532 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710219619438592[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:02.532 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710219619438592[0;39m 请求参数: [3]
2022-07-14 16:58:02.533 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710219619438592[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:58:02.533 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710219619438592[0;39m ==> Parameters: 3(Long)
2022-07-14 16:58:02.534 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710219619438592[0;39m <==      Total: 0
2022-07-14 16:58:02.534 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710219619438592[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:58:02.534 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710219619438592[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:58:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710230008729600[0;39m 生成今日电子书快照开始
2022-07-14 16:58:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710230008729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710230008729600[0;39m ==> Parameters: 
2022-07-14 16:58:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710230008729600[0;39m <==    Updates: 0
2022-07-14 16:58:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710230008729600[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 16:58:05.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202710230042284032[0;39m 更新电子书下的文档数据开始
2022-07-14 16:58:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710230042284032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:58:05.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710230042284032[0;39m ==> Parameters: 
2022-07-14 16:58:05.063 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710230042284032[0;39m <==    Updates: 4
2022-07-14 16:58:05.063 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202710230042284032[0;39m 更新电子书下的文档数据结束，耗时：46 毫秒
2022-07-14 16:58:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710250988638208[0;39m 生成今日电子书快照开始
2022-07-14 16:58:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710250988638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710250988638208[0;39m ==> Parameters: 
2022-07-14 16:58:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710250988638208[0;39m <==    Updates: 0
2022-07-14 16:58:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710250988638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:58:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710271926603776[0;39m 生成今日电子书快照开始
2022-07-14 16:58:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710271926603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710271926603776[0;39m ==> Parameters: 
2022-07-14 16:58:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710271926603776[0;39m <==    Updates: 0
2022-07-14 16:58:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710271926603776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:58:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710292919095296[0;39m 生成今日电子书快照开始
2022-07-14 16:58:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710292919095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710292919095296[0;39m ==> Parameters: 
2022-07-14 16:58:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710292919095296[0;39m <==    Updates: 0
2022-07-14 16:58:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710292919095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:58:21.948 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202710185041596416[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 16:58:21.949 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202710185041596416[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 16:58:21.949 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202710185041596416[0;39m 登录校验开始，token：202710050781925376
2022-07-14 16:58:21.982 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202710185041596416[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 16:58:21.983 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710301207040000[0;39m ------------- 开始 -------------
2022-07-14 16:58:21.983 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710301207040000[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 16:58:21.983 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710301207040000[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 16:58:21.983 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710301207040000[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:21.983 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710301207040000[0;39m 请求参数: [{"content":"<blockquote><p>人脸识别</p></blockquote>","ebookId":3,"name":"Python","parent":0,"sort":2}]
2022-07-14 16:58:21.984 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202710301207040000[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 16:58:21.985 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202710301207040000[0;39m ==> Parameters: 202710301211234304(Long), 3(Long), 0(Long), Python(String), 2(Integer), 0(Integer), 0(Integer)
2022-07-14 16:58:21.986 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202710301207040000[0;39m <==    Updates: 1
2022-07-14 16:58:21.987 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202710301207040000[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 16:58:21.987 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202710301207040000[0;39m ==> Parameters: 202710301211234304(Long), <blockquote><p>人脸识别</p></blockquote>(String)
2022-07-14 16:58:21.988 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202710301207040000[0;39m <==    Updates: 1
2022-07-14 16:58:22.010 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710301207040000[0;39m 返回结果: {"success":true}
2022-07-14 16:58:22.011 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710301207040000[0;39m ------------- 结束 耗时：28 ms -------------
2022-07-14 16:58:22.011 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202710301207040000[0;39m ------------- LoginInterceptor 结束 耗时：62 ms -------------
2022-07-14 16:58:22.018 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710301353840640[0;39m ------------- 开始 -------------
2022-07-14 16:58:22.018 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710301353840640[0;39m 请求地址: http://127.0.0.1:8880/doc/all/3 GET
2022-07-14 16:58:22.019 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710301353840640[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:58:22.019 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710301353840640[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:22.019 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710301353840640[0;39m 请求参数: [3]
2022-07-14 16:58:22.020 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710301353840640[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:58:22.021 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710301353840640[0;39m ==> Parameters: 3(Long)
2022-07-14 16:58:22.022 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710301353840640[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:58:22.022 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710301353840640[0;39m <==        Row: 202710301211234304, 3, 0, Python, 2, 0, 0
2022-07-14 16:58:22.023 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710301353840640[0;39m <==      Total: 1
2022-07-14 16:58:22.023 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710301353840640[0;39m 返回结果: {"content":[{"ebookId":3,"id":202710301211234304,"name":"Python","parent":0,"sort":2,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 16:58:22.023 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710301353840640[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:58:23.089 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710305845940224[0;39m ------------- 开始 -------------
2022-07-14 16:58:23.089 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710305845940224[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:58:23.090 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710305845940224[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:58:23.090 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710305845940224[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:23.090 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710305845940224[0;39m 请求参数: []
2022-07-14 16:58:23.090 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710305845940224[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:58:23.091 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710305845940224[0;39m ==> Parameters: 
2022-07-14 16:58:23.091 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:58:23.092 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:58:23.092 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:58:23.092 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:58:23.092 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:58:23.092 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:58:23.093 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:58:23.093 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:58:23.093 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:58:23.094 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:58:23.094 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:58:23.095 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:58:23.095 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:58:23.095 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:58:23.096 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:58:23.096 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:58:23.096 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710305845940224[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:58:23.096 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710305845940224[0;39m <==      Total: 16
2022-07-14 16:58:23.097 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710305845940224[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:58:23.098 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710305845940224[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:58:23.107 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710305921437696[0;39m ------------- 开始 -------------
2022-07-14 16:58:23.107 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710305921437696[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:58:23.107 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710305921437696[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:58:23.108 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710305921437696[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:23.108 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710305921437696[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 16:58:23.113 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710305921437696[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:58:23.113 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710305921437696[0;39m ==> Parameters: 
2022-07-14 16:58:23.114 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710305921437696[0;39m <==    Columns: count(0)
2022-07-14 16:58:23.115 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710305921437696[0;39m <==        Row: 6
2022-07-14 16:58:23.115 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710305921437696[0;39m <==      Total: 1
2022-07-14 16:58:23.116 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710305921437696[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 16:58:23.116 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710305921437696[0;39m ==> Parameters: 4(Integer)
2022-07-14 16:58:23.116 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710305921437696[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:58:23.117 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710305921437696[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 16:58:23.117 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710305921437696[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 16:58:23.117 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710305921437696[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2022-07-14 16:58:23.117 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710305921437696[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 16:58:23.118 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710305921437696[0;39m <==      Total: 4
2022-07-14 16:58:23.118 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710305921437696[0;39m 总行数：6
2022-07-14 16:58:23.118 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710305921437696[0;39m 总页数：2
2022-07-14 16:58:23.118 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710305921437696[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":0,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 16:58:23.118 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710305921437696[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 16:58:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710313915781120[0;39m 生成今日电子书快照开始
2022-07-14 16:58:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710313915781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710313915781120[0;39m ==> Parameters: 
2022-07-14 16:58:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710313915781120[0;39m <==    Updates: 0
2022-07-14 16:58:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710313915781120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:58:25.110 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710314322628608[0;39m ------------- 开始 -------------
2022-07-14 16:58:25.111 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710314322628608[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:58:25.111 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710314322628608[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:58:25.111 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710314322628608[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:25.111 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710314322628608[0;39m 请求参数: [{"page":2,"size":4}]
2022-07-14 16:58:25.113 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710314322628608[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:58:25.113 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710314322628608[0;39m ==> Parameters: 
2022-07-14 16:58:25.114 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710314322628608[0;39m <==    Columns: count(0)
2022-07-14 16:58:25.114 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710314322628608[0;39m <==        Row: 6
2022-07-14 16:58:25.114 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710314322628608[0;39m <==      Total: 1
2022-07-14 16:58:25.114 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710314322628608[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2022-07-14 16:58:25.115 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710314322628608[0;39m ==> Parameters: 4(Long), 4(Integer)
2022-07-14 16:58:25.115 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710314322628608[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:58:25.116 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710314322628608[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 0, 0, 0
2022-07-14 16:58:25.116 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710314322628608[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 4, 1
2022-07-14 16:58:25.116 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710314322628608[0;39m <==      Total: 2
2022-07-14 16:58:25.116 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710314322628608[0;39m 总行数：6
2022-07-14 16:58:25.117 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710314322628608[0;39m 总页数：2
2022-07-14 16:58:25.117 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710314322628608[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":0,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":4,"voteCount":1}],"total":6},"success":true}
2022-07-14 16:58:25.117 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710314322628608[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 16:58:26.029 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710318177193984[0;39m ------------- 开始 -------------
2022-07-14 16:58:26.029 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710318177193984[0;39m 请求地址: http://127.0.0.1:8880/doc/all/5 GET
2022-07-14 16:58:26.029 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710318177193984[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:58:26.029 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710318177193984[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:26.030 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710318177193984[0;39m 请求参数: [5]
2022-07-14 16:58:26.030 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710318177193984[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:58:26.031 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710318177193984[0;39m ==> Parameters: 5(Long)
2022-07-14 16:58:26.032 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710318177193984[0;39m <==      Total: 0
2022-07-14 16:58:26.032 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710318177193984[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:58:26.032 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710318177193984[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 16:58:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710334841163776[0;39m 生成今日电子书快照开始
2022-07-14 16:58:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710334841163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710334841163776[0;39m ==> Parameters: 
2022-07-14 16:58:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710334841163776[0;39m <==    Updates: 0
2022-07-14 16:58:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710334841163776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:58:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710355842043904[0;39m 生成今日电子书快照开始
2022-07-14 16:58:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710355842043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710355842043904[0;39m ==> Parameters: 
2022-07-14 16:58:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710355842043904[0;39m <==    Updates: 0
2022-07-14 16:58:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710355842043904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:58:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202710355858821120[0;39m 更新电子书下的文档数据开始
2022-07-14 16:58:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710355858821120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:58:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710355858821120[0;39m ==> Parameters: 
2022-07-14 16:58:35.033 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710355858821120[0;39m <==    Updates: 5
2022-07-14 16:58:35.033 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202710355858821120[0;39m 更新电子书下的文档数据结束，耗时：20 毫秒
2022-07-14 16:58:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710376813563904[0;39m 生成今日电子书快照开始
2022-07-14 16:58:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710376813563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710376813563904[0;39m ==> Parameters: 
2022-07-14 16:58:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710376813563904[0;39m <==    Updates: 0
2022-07-14 16:58:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710376813563904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:58:43.932 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202710215962005504[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 16:58:43.932 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202710215962005504[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 16:58:43.933 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202710215962005504[0;39m 登录校验开始，token：202710050781925376
2022-07-14 16:58:43.968 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202710215962005504[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 16:58:43.969 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710393423007744[0;39m ------------- 开始 -------------
2022-07-14 16:58:43.969 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710393423007744[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 16:58:43.970 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710393423007744[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 16:58:43.970 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710393423007744[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:43.970 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710393423007744[0;39m 请求参数: [{"content":"<blockquote><p>数据库<img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif\" alt=\"[[草泥马]]\"></p></blockquote>","ebookId":5,"name":"Oracle","parent":0,"sort":2}]
2022-07-14 16:58:43.971 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202710393423007744[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 16:58:43.971 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202710393423007744[0;39m ==> Parameters: 202710393431396352(Long), 5(Long), 0(Long), Oracle(String), 2(Integer), 0(Integer), 0(Integer)
2022-07-14 16:58:43.976 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202710393423007744[0;39m <==    Updates: 1
2022-07-14 16:58:43.977 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202710393423007744[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 16:58:43.977 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202710393423007744[0;39m ==> Parameters: 202710393431396352(Long), <blockquote><p>数据库<img class="eleImg" src="http://img.t.sinajs.cn/t35/style/images/common/face/ext/normal/7a/shenshou_thumb.gif" alt="[[草泥马]]"></p></blockquote>(String)
2022-07-14 16:58:43.978 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202710393423007744[0;39m <==    Updates: 1
2022-07-14 16:58:43.994 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710393423007744[0;39m 返回结果: {"success":true}
2022-07-14 16:58:43.994 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710393423007744[0;39m ------------- 结束 耗时：25 ms -------------
2022-07-14 16:58:43.995 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202710393423007744[0;39m ------------- LoginInterceptor 结束 耗时：63 ms -------------
2022-07-14 16:58:44.000 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710393553031168[0;39m ------------- 开始 -------------
2022-07-14 16:58:44.000 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710393553031168[0;39m 请求地址: http://127.0.0.1:8880/doc/all/5 GET
2022-07-14 16:58:44.000 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710393553031168[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 16:58:44.000 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710393553031168[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:44.000 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710393553031168[0;39m 请求参数: [5]
2022-07-14 16:58:44.001 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710393553031168[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 16:58:44.002 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710393553031168[0;39m ==> Parameters: 5(Long)
2022-07-14 16:58:44.002 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710393553031168[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 16:58:44.003 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202710393553031168[0;39m <==        Row: 202710393431396352, 5, 0, Oracle, 2, 0, 0
2022-07-14 16:58:44.003 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202710393553031168[0;39m <==      Total: 1
2022-07-14 16:58:44.003 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710393553031168[0;39m 返回结果: {"content":[{"ebookId":5,"id":202710393431396352,"name":"Oracle","parent":0,"sort":2,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 16:58:44.004 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710393553031168[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:58:44.728 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710396606484480[0;39m ------------- 开始 -------------
2022-07-14 16:58:44.728 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710396606484480[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:58:44.728 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710396606484480[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:58:44.728 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710396606484480[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:44.729 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710396606484480[0;39m 请求参数: []
2022-07-14 16:58:44.729 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710396606484480[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:58:44.730 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710396606484480[0;39m ==> Parameters: 
2022-07-14 16:58:44.730 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:58:44.731 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:58:44.731 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:58:44.731 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:58:44.732 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:58:44.732 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:58:44.732 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:58:44.732 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:58:44.732 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:58:44.733 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:58:44.733 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:58:44.733 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:58:44.733 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:58:44.733 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:58:44.734 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:58:44.734 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:58:44.734 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710396606484480[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:58:44.735 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710396606484480[0;39m <==      Total: 16
2022-07-14 16:58:44.736 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710396606484480[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:58:44.736 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710396606484480[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:58:44.746 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710396681981952[0;39m ------------- 开始 -------------
2022-07-14 16:58:44.747 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710396681981952[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 16:58:44.747 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710396681981952[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 16:58:44.747 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710396681981952[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:44.747 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710396681981952[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 16:58:44.748 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710396681981952[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 16:58:44.748 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710396681981952[0;39m ==> Parameters: 
2022-07-14 16:58:44.749 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710396681981952[0;39m <==    Columns: count(0)
2022-07-14 16:58:44.749 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202710396681981952[0;39m <==        Row: 6
2022-07-14 16:58:44.749 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202710396681981952[0;39m <==      Total: 1
2022-07-14 16:58:44.750 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710396681981952[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 16:58:44.750 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710396681981952[0;39m ==> Parameters: 4(Integer)
2022-07-14 16:58:44.751 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710396681981952[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 16:58:44.751 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710396681981952[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 16:58:44.752 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710396681981952[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 16:58:44.752 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710396681981952[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2022-07-14 16:58:44.752 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202710396681981952[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 16:58:44.753 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202710396681981952[0;39m <==      Total: 4
2022-07-14 16:58:44.753 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202710396681981952[0;39m 总行数：6
2022-07-14 16:58:44.753 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202710396681981952[0;39m 总页数：2
2022-07-14 16:58:44.754 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710396681981952[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 16:58:44.754 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710396681981952[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 16:58:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710397806055424[0;39m 生成今日电子书快照开始
2022-07-14 16:58:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710397806055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710397806055424[0;39m ==> Parameters: 
2022-07-14 16:58:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710397806055424[0;39m <==    Updates: 0
2022-07-14 16:58:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710397806055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:58:46.816 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710405364191234[0;39m ------------- 开始 -------------
2022-07-14 16:58:46.816 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710405364191233[0;39m ------------- 开始 -------------
2022-07-14 16:58:46.816 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202710405364191232[0;39m ------------- 开始 -------------
2022-07-14 16:58:46.816 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710405364191233[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 16:58:46.816 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710405364191234[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 16:58:46.816 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202710405364191232[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 16:58:46.817 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710405364191233[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 16:58:46.817 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710405364191234[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 16:58:46.817 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202710405364191232[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 16:58:46.817 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710405364191234[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:46.817 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710405364191233[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:46.817 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202710405364191232[0;39m 远程地址: 127.0.0.1
2022-07-14 16:58:46.817 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710405364191233[0;39m 请求参数: []
2022-07-14 16:58:46.817 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710405364191234[0;39m 请求参数: []
2022-07-14 16:58:46.817 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202710405364191232[0;39m 请求参数: []
2022-07-14 16:58:46.818 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202710405364191233[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:58:46.818 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202710405364191232[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 16:58:46.819 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202710405364191232[0;39m ==> Parameters: 
2022-07-14 16:58:46.819 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202710405364191233[0;39m ==> Parameters: 
2022-07-14 16:58:46.819 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710405364191234[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 16:58:46.819 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710405364191234[0;39m ==> Parameters: 
2022-07-14 16:58:46.820 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202710405364191232[0;39m <==      Total: 0
2022-07-14 16:58:46.820 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202710405364191233[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 16:58:46.820 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202710405364191233[0;39m <==        Row: 2022-07-14, 104, 24, 104, 24
2022-07-14 16:58:46.820 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710405364191232[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 16:58:46.820 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==    Columns: id, parent, name, sort
2022-07-14 16:58:46.820 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710405364191232[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 16:58:46.820 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 16:58:46.820 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202710405364191233[0;39m <==      Total: 1
2022-07-14 16:58:46.821 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710405364191233[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":104,"viewIncrease":104,"voteCount":24,"voteIncrease":24}],"success":true}
2022-07-14 16:58:46.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 16:58:46.821 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710405364191233[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 16:58:46.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 16:58:46.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 16:58:46.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 16:58:46.822 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 16:58:46.822 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 16:58:46.822 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 16:58:46.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 16:58:46.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 16:58:46.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 16:58:46.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 16:58:46.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 16:58:46.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 16:58:46.824 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 16:58:46.824 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202710405364191234[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 16:58:46.824 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202710405364191234[0;39m <==      Total: 16
2022-07-14 16:58:46.825 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202710405364191234[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 16:58:46.825 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202710405364191234[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 16:58:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710418777575424[0;39m 生成今日电子书快照开始
2022-07-14 16:58:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710418777575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710418777575424[0;39m ==> Parameters: 
2022-07-14 16:58:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710418777575424[0;39m <==    Updates: 0
2022-07-14 16:58:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710418777575424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:58:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710439744901120[0;39m 生成今日电子书快照开始
2022-07-14 16:58:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710439744901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:58:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710439744901120[0;39m ==> Parameters: 
2022-07-14 16:58:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710439744901120[0;39m <==    Updates: 0
2022-07-14 16:58:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710439744901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:59:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710460678672384[0;39m 生成今日电子书快照开始
2022-07-14 16:59:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710460678672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710460678672384[0;39m ==> Parameters: 
2022-07-14 16:59:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710460678672384[0;39m <==    Updates: 0
2022-07-14 16:59:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710460678672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:59:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710481675358208[0;39m 生成今日电子书快照开始
2022-07-14 16:59:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710481675358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710481675358208[0;39m ==> Parameters: 
2022-07-14 16:59:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710481675358208[0;39m <==    Updates: 0
2022-07-14 16:59:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710481675358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:59:05.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202710481683746816[0;39m 更新电子书下的文档数据开始
2022-07-14 16:59:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710481683746816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:59:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710481683746816[0;39m ==> Parameters: 
2022-07-14 16:59:05.108 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710481683746816[0;39m <==    Updates: 6
2022-07-14 16:59:05.109 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202710481683746816[0;39m 更新电子书下的文档数据结束，耗时：96 毫秒
2022-07-14 16:59:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710502659461120[0;39m 生成今日电子书快照开始
2022-07-14 16:59:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710502659461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710502659461120[0;39m ==> Parameters: 
2022-07-14 16:59:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710502659461120[0;39m <==    Updates: 0
2022-07-14 16:59:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710502659461120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:59:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710523630981120[0;39m 生成今日电子书快照开始
2022-07-14 16:59:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710523630981120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710523630981120[0;39m ==> Parameters: 
2022-07-14 16:59:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710523630981120[0;39m <==    Updates: 0
2022-07-14 16:59:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710523630981120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:59:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710544615084032[0;39m 生成今日电子书快照开始
2022-07-14 16:59:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710544615084032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710544615084032[0;39m ==> Parameters: 
2022-07-14 16:59:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710544615084032[0;39m <==    Updates: 0
2022-07-14 16:59:20.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710544615084032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:59:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710565561438208[0;39m 生成今日电子书快照开始
2022-07-14 16:59:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710565561438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710565561438208[0;39m ==> Parameters: 
2022-07-14 16:59:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710565561438208[0;39m <==    Updates: 0
2022-07-14 16:59:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710565561438208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:59:30.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710586549735424[0;39m 生成今日电子书快照开始
2022-07-14 16:59:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710586549735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710586549735424[0;39m ==> Parameters: 
2022-07-14 16:59:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710586549735424[0;39m <==    Updates: 0
2022-07-14 16:59:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710586549735424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 16:59:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202710607508672512[0;39m 更新电子书下的文档数据开始
2022-07-14 16:59:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710607508672512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 16:59:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710607508672512[0;39m ==> Parameters: 
2022-07-14 16:59:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710607508672512[0;39m <==    Updates: 6
2022-07-14 16:59:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202710607508672512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 16:59:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710607517061120[0;39m 生成今日电子书快照开始
2022-07-14 16:59:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710607517061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710607517061120[0;39m ==> Parameters: 
2022-07-14 16:59:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710607517061120[0;39m <==    Updates: 0
2022-07-14 16:59:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710607517061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:59:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710628471803904[0;39m 生成今日电子书快照开始
2022-07-14 16:59:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710628471803904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710628471803904[0;39m ==> Parameters: 
2022-07-14 16:59:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710628471803904[0;39m <==    Updates: 0
2022-07-14 16:59:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710628471803904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 16:59:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710649405575168[0;39m 生成今日电子书快照开始
2022-07-14 16:59:45.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710649405575168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:45.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710649405575168[0;39m ==> Parameters: 
2022-07-14 16:59:45.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710649405575168[0;39m <==    Updates: 0
2022-07-14 16:59:45.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710649405575168[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 16:59:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710670398066688[0;39m 生成今日电子书快照开始
2022-07-14 16:59:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710670398066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710670398066688[0;39m ==> Parameters: 
2022-07-14 16:59:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710670398066688[0;39m <==    Updates: 0
2022-07-14 16:59:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710670398066688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 16:59:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710691357003776[0;39m 生成今日电子书快照开始
2022-07-14 16:59:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710691357003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 16:59:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710691357003776[0;39m ==> Parameters: 
2022-07-14 16:59:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710691357003776[0;39m <==    Updates: 0
2022-07-14 16:59:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710691357003776[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 17:00:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710712366272512[0;39m 生成今日电子书快照开始
2022-07-14 17:00:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710712366272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710712366272512[0;39m ==> Parameters: 
2022-07-14 17:00:00.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710712366272512[0;39m <==    Updates: 0
2022-07-14 17:00:00.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710712366272512[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-14 17:00:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710733308432384[0;39m 生成今日电子书快照开始
2022-07-14 17:00:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710733308432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710733308432384[0;39m ==> Parameters: 
2022-07-14 17:00:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710733308432384[0;39m <==    Updates: 0
2022-07-14 17:00:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710733308432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:00:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202710733321015296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:00:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710733321015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:00:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710733321015296[0;39m ==> Parameters: 
2022-07-14 17:00:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710733321015296[0;39m <==    Updates: 6
2022-07-14 17:00:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202710733321015296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:00:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710754284146688[0;39m 生成今日电子书快照开始
2022-07-14 17:00:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710754284146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710754284146688[0;39m ==> Parameters: 
2022-07-14 17:00:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710754284146688[0;39m <==    Updates: 0
2022-07-14 17:00:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710754284146688[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 17:00:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710775238889472[0;39m 生成今日电子书快照开始
2022-07-14 17:00:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710775238889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710775238889472[0;39m ==> Parameters: 
2022-07-14 17:00:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710775238889472[0;39m <==    Updates: 0
2022-07-14 17:00:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710775238889472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:00:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710796273324032[0;39m 生成今日电子书快照开始
2022-07-14 17:00:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710796273324032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710796273324032[0;39m ==> Parameters: 
2022-07-14 17:00:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710796273324032[0;39m <==    Updates: 0
2022-07-14 17:00:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710796273324032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:00:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710817244844032[0;39m 生成今日电子书快照开始
2022-07-14 17:00:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710817244844032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:25.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710817244844032[0;39m ==> Parameters: 
2022-07-14 17:00:25.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710817244844032[0;39m <==    Updates: 0
2022-07-14 17:00:25.023 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710817244844032[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:00:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710838199586816[0;39m 生成今日电子书快照开始
2022-07-14 17:00:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710838199586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710838199586816[0;39m ==> Parameters: 
2022-07-14 17:00:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710838199586816[0;39m <==    Updates: 0
2022-07-14 17:00:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710838199586816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:00:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202710859145940992[0;39m 更新电子书下的文档数据开始
2022-07-14 17:00:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710859145940992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:00:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710859145940992[0;39m ==> Parameters: 
2022-07-14 17:00:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710859145940992[0;39m <==    Updates: 6
2022-07-14 17:00:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202710859145940992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:00:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710859154329600[0;39m 生成今日电子书快照开始
2022-07-14 17:00:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710859154329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710859154329600[0;39m ==> Parameters: 
2022-07-14 17:00:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710859154329600[0;39m <==    Updates: 0
2022-07-14 17:00:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710859154329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:00:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710880151015424[0;39m 生成今日电子书快照开始
2022-07-14 17:00:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710880151015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710880151015424[0;39m ==> Parameters: 
2022-07-14 17:00:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710880151015424[0;39m <==    Updates: 0
2022-07-14 17:00:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710880151015424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:00:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710901068009472[0;39m 生成今日电子书快照开始
2022-07-14 17:00:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710901068009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710901068009472[0;39m ==> Parameters: 
2022-07-14 17:00:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710901068009472[0;39m <==    Updates: 0
2022-07-14 17:00:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710901068009472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:00:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710922094055424[0;39m 生成今日电子书快照开始
2022-07-14 17:00:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710922094055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710922094055424[0;39m ==> Parameters: 
2022-07-14 17:00:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710922094055424[0;39m <==    Updates: 0
2022-07-14 17:00:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710922094055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:00:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710943015243776[0;39m 生成今日电子书快照开始
2022-07-14 17:00:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710943015243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:00:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710943015243776[0;39m ==> Parameters: 
2022-07-14 17:00:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710943015243776[0;39m <==    Updates: 0
2022-07-14 17:00:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710943015243776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:01:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710964016123904[0;39m 生成今日电子书快照开始
2022-07-14 17:01:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710964016123904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710964016123904[0;39m ==> Parameters: 
2022-07-14 17:01:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710964016123904[0;39m <==    Updates: 0
2022-07-14 17:01:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710964016123904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:01:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202710984991838208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:01:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710984991838208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:01:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710984991838208[0;39m ==> Parameters: 
2022-07-14 17:01:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202710984991838208[0;39m <==    Updates: 6
2022-07-14 17:01:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202710984991838208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:01:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202710985000226816[0;39m 生成今日电子书快照开始
2022-07-14 17:01:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710985000226816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710985000226816[0;39m ==> Parameters: 
2022-07-14 17:01:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202710985000226816[0;39m <==    Updates: 0
2022-07-14 17:01:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202710985000226816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:01:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711005925609472[0;39m 生成今日电子书快照开始
2022-07-14 17:01:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711005925609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711005925609472[0;39m ==> Parameters: 
2022-07-14 17:01:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711005925609472[0;39m <==    Updates: 0
2022-07-14 17:01:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711005925609472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:01:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711026913906688[0;39m 生成今日电子书快照开始
2022-07-14 17:01:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711026913906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711026913906688[0;39m ==> Parameters: 
2022-07-14 17:01:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711026913906688[0;39m <==    Updates: 0
2022-07-14 17:01:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711026913906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:01:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711047914786816[0;39m 生成今日电子书快照开始
2022-07-14 17:01:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711047914786816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711047914786816[0;39m ==> Parameters: 
2022-07-14 17:01:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711047914786816[0;39m <==    Updates: 0
2022-07-14 17:01:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711047914786816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:01:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711068873723904[0;39m 生成今日电子书快照开始
2022-07-14 17:01:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711068873723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711068873723904[0;39m ==> Parameters: 
2022-07-14 17:01:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711068873723904[0;39m <==    Updates: 0
2022-07-14 17:01:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711068873723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:01:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711089845243904[0;39m 生成今日电子书快照开始
2022-07-14 17:01:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711089845243904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711089845243904[0;39m ==> Parameters: 
2022-07-14 17:01:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711089845243904[0;39m <==    Updates: 0
2022-07-14 17:01:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711089845243904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:01:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202711110812569600[0;39m 更新电子书下的文档数据开始
2022-07-14 17:01:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711110812569600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:01:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711110812569600[0;39m ==> Parameters: 
2022-07-14 17:01:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711110812569600[0;39m <==    Updates: 6
2022-07-14 17:01:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202711110812569600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:01:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711110816763904[0;39m 生成今日电子书快照开始
2022-07-14 17:01:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711110816763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711110816763904[0;39m ==> Parameters: 
2022-07-14 17:01:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711110816763904[0;39m <==    Updates: 0
2022-07-14 17:01:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711110816763904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:01:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711131784089600[0;39m 生成今日电子书快照开始
2022-07-14 17:01:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711131784089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711131784089600[0;39m ==> Parameters: 
2022-07-14 17:01:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711131784089600[0;39m <==    Updates: 0
2022-07-14 17:01:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711131784089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:01:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711152747220992[0;39m 生成今日电子书快照开始
2022-07-14 17:01:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711152747220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711152747220992[0;39m ==> Parameters: 
2022-07-14 17:01:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711152747220992[0;39m <==    Updates: 0
2022-07-14 17:01:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711152747220992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:01:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711173710352384[0;39m 生成今日电子书快照开始
2022-07-14 17:01:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711173710352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711173710352384[0;39m ==> Parameters: 
2022-07-14 17:01:50.033 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711173710352384[0;39m <==    Updates: 0
2022-07-14 17:01:50.033 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711173710352384[0;39m 生成今日电子书快照结束，耗时：29 毫秒
2022-07-14 17:01:51.902 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202710393423007744[0;39m 连接关闭，token：7x5q0dBQAS，session id：5！当前连接数：0
2022-07-14 17:01:52.727 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202710393553031168[0;39m 有新连接：token：JKrHf8v3N6，session id：6，当前连接数：1
2022-07-14 17:01:52.810 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711185479569408[0;39m ------------- 开始 -------------
2022-07-14 17:01:52.810 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711185479569408[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:01:52.811 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711185479569408[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:01:52.811 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711185479569408[0;39m 远程地址: 127.0.0.1
2022-07-14 17:01:52.811 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711185479569408[0;39m 请求参数: []
2022-07-14 17:01:52.812 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711185479569408[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:01:52.812 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711185479569408[0;39m ==> Parameters: 
2022-07-14 17:01:52.813 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711185492152320[0;39m ------------- 开始 -------------
2022-07-14 17:01:52.814 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711185492152320[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:01:52.814 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711185496346624[0;39m ------------- 开始 -------------
2022-07-14 17:01:52.814 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711185492152320[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:01:52.814 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711185479569408[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:01:52.814 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711185496346624[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:01:52.814 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711185492152320[0;39m 远程地址: 127.0.0.1
2022-07-14 17:01:52.814 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711185479569408[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:01:52.814 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711185496346624[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:01:52.815 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711185492152320[0;39m 请求参数: []
2022-07-14 17:01:52.815 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711185496346624[0;39m 远程地址: 127.0.0.1
2022-07-14 17:01:52.815 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711185479569408[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:01:52.815 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711185492152320[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:01:52.815 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711185479569408[0;39m <==      Total: 2
2022-07-14 17:01:52.815 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711185496346624[0;39m 请求参数: []
2022-07-14 17:01:52.816 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711185479569408[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:01:52.816 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711185492152320[0;39m ==> Parameters: 
2022-07-14 17:01:52.816 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711185479569408[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:01:52.816 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711185496346624[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:01:52.817 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711185492152320[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:01:52.817 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711185496346624[0;39m ==> Parameters: 
2022-07-14 17:01:52.817 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711185492152320[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:01:52.818 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711185492152320[0;39m <==      Total: 1
2022-07-14 17:01:52.818 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:01:52.818 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711185492152320[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:01:52.818 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:01:52.819 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711185492152320[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:01:52.819 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:01:52.819 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:01:52.819 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:01:52.820 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:01:52.820 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:01:52.820 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:01:52.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:01:52.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:01:52.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:01:52.822 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:01:52.822 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:01:52.822 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:01:52.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:01:52.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:01:52.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711185496346624[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:01:52.824 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711185496346624[0;39m <==      Total: 16
2022-07-14 17:01:52.825 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711185496346624[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:01:52.825 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711185496346624[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 17:01:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711194677678080[0;39m 生成今日电子书快照开始
2022-07-14 17:01:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711194677678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:01:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711194677678080[0;39m ==> Parameters: 
2022-07-14 17:01:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711194677678080[0;39m <==    Updates: 0
2022-07-14 17:01:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711194677678080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:02:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711215674363904[0;39m 生成今日电子书快照开始
2022-07-14 17:02:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711215674363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711215674363904[0;39m ==> Parameters: 
2022-07-14 17:02:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711215674363904[0;39m <==    Updates: 0
2022-07-14 17:02:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711215674363904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:02:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711236612329472[0;39m 生成今日电子书快照开始
2022-07-14 17:02:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711236612329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711236612329472[0;39m ==> Parameters: 
2022-07-14 17:02:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711236612329472[0;39m <==    Updates: 0
2022-07-14 17:02:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711236612329472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:02:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202711236624912384[0;39m 更新电子书下的文档数据开始
2022-07-14 17:02:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711236624912384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:02:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711236624912384[0;39m ==> Parameters: 
2022-07-14 17:02:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711236624912384[0;39m <==    Updates: 6
2022-07-14 17:02:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202711236624912384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:02:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711257613209600[0;39m 生成今日电子书快照开始
2022-07-14 17:02:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711257613209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711257613209600[0;39m ==> Parameters: 
2022-07-14 17:02:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711257613209600[0;39m <==    Updates: 0
2022-07-14 17:02:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711257613209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:02:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711278559563776[0;39m 生成今日电子书快照开始
2022-07-14 17:02:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711278559563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711278559563776[0;39m ==> Parameters: 
2022-07-14 17:02:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711278559563776[0;39m <==    Updates: 0
2022-07-14 17:02:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711278559563776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:02:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711299547860992[0;39m 生成今日电子书快照开始
2022-07-14 17:02:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711299547860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711299547860992[0;39m ==> Parameters: 
2022-07-14 17:02:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711299547860992[0;39m <==    Updates: 0
2022-07-14 17:02:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711299547860992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:02:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711320536158208[0;39m 生成今日电子书快照开始
2022-07-14 17:02:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711320536158208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711320536158208[0;39m ==> Parameters: 
2022-07-14 17:02:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711320536158208[0;39m <==    Updates: 0
2022-07-14 17:02:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711320536158208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:02:27.115 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202710405364191233[0;39m 连接关闭，token：JKrHf8v3N6，session id：6！当前连接数：0
2022-07-14 17:02:27.738 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202710405364191234[0;39m 有新连接：token：TLFE8aUPWk，session id：7，当前连接数：1
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711332213100546[0;39m ------------- 开始 -------------
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711332213100545[0;39m ------------- 开始 -------------
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711332213100544[0;39m ------------- 开始 -------------
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711332213100546[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711332213100545[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711332213100544[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711332213100546[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711332213100545[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711332213100544[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:02:27.794 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711332213100546[0;39m 远程地址: 127.0.0.1
2022-07-14 17:02:27.795 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711332213100545[0;39m 远程地址: 127.0.0.1
2022-07-14 17:02:27.795 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711332213100544[0;39m 远程地址: 127.0.0.1
2022-07-14 17:02:27.795 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711332213100545[0;39m 请求参数: []
2022-07-14 17:02:27.795 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711332213100546[0;39m 请求参数: []
2022-07-14 17:02:27.795 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711332213100544[0;39m 请求参数: []
2022-07-14 17:02:27.795 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711332213100545[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:02:27.795 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711332213100546[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:02:27.795 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711332213100544[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:02:27.796 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711332213100546[0;39m ==> Parameters: 
2022-07-14 17:02:27.796 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711332213100545[0;39m ==> Parameters: 
2022-07-14 17:02:27.796 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711332213100544[0;39m ==> Parameters: 
2022-07-14 17:02:27.796 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711332213100545[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:02:27.796 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711332213100544[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:02:27.796 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:02:27.797 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711332213100545[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:02:27.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:02:27.797 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711332213100544[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:02:27.797 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711332213100545[0;39m <==      Total: 1
2022-07-14 17:02:27.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:02:27.797 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711332213100545[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:02:27.797 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711332213100544[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:02:27.797 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711332213100545[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:02:27.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:02:27.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:02:27.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:02:27.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:02:27.798 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711332213100544[0;39m <==      Total: 2
2022-07-14 17:02:27.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:02:27.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:02:27.799 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711332213100544[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:02:27.799 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711332213100544[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:02:27.799 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:02:27.799 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:02:27.799 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:02:27.800 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:02:27.800 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:02:27.800 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:02:27.801 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:02:27.801 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711332213100546[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:02:27.801 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711332213100546[0;39m <==      Total: 16
2022-07-14 17:02:27.802 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711332213100546[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:02:27.803 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711332213100546[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 17:02:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711341520261120[0;39m 生成今日电子书快照开始
2022-07-14 17:02:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711341520261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711341520261120[0;39m ==> Parameters: 
2022-07-14 17:02:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711341520261120[0;39m <==    Updates: 0
2022-07-14 17:02:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711341520261120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:02:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711362441449472[0;39m 生成今日电子书快照开始
2022-07-14 17:02:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711362441449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711362441449472[0;39m ==> Parameters: 
2022-07-14 17:02:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711362441449472[0;39m <==    Updates: 0
2022-07-14 17:02:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711362441449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:02:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202711362454032384[0;39m 更新电子书下的文档数据开始
2022-07-14 17:02:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711362454032384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:02:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711362454032384[0;39m ==> Parameters: 
2022-07-14 17:02:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711362454032384[0;39m <==    Updates: 6
2022-07-14 17:02:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202711362454032384[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2022-07-14 17:02:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711383438135296[0;39m 生成今日电子书快照开始
2022-07-14 17:02:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711383438135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711383438135296[0;39m ==> Parameters: 
2022-07-14 17:02:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711383438135296[0;39m <==    Updates: 0
2022-07-14 17:02:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711383438135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:02:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711404413849600[0;39m 生成今日电子书快照开始
2022-07-14 17:02:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711404413849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711404413849600[0;39m ==> Parameters: 
2022-07-14 17:02:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711404413849600[0;39m <==    Updates: 0
2022-07-14 17:02:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711404413849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:02:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711425406341120[0;39m 生成今日电子书快照开始
2022-07-14 17:02:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711425406341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711425406341120[0;39m ==> Parameters: 
2022-07-14 17:02:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711425406341120[0;39m <==    Updates: 0
2022-07-14 17:02:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711425406341120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:02:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711446331723776[0;39m 生成今日电子书快照开始
2022-07-14 17:02:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711446331723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:02:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711446331723776[0;39m ==> Parameters: 
2022-07-14 17:02:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711446331723776[0;39m <==    Updates: 0
2022-07-14 17:02:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711446331723776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:03:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711467357769728[0;39m 生成今日电子书快照开始
2022-07-14 17:03:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711467357769728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711467357769728[0;39m ==> Parameters: 
2022-07-14 17:03:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711467357769728[0;39m <==    Updates: 0
2022-07-14 17:03:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711467357769728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:03:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711488278958080[0;39m 生成今日电子书快照开始
2022-07-14 17:03:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711488278958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711488278958080[0;39m ==> Parameters: 
2022-07-14 17:03:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711488278958080[0;39m <==    Updates: 0
2022-07-14 17:03:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711488278958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:03:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202711488287346688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:03:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711488287346688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:03:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711488287346688[0;39m ==> Parameters: 
2022-07-14 17:03:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711488287346688[0;39m <==    Updates: 6
2022-07-14 17:03:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202711488287346688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:03:09.589 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711507514036224[0;39m ------------- 开始 -------------
2022-07-14 17:03:09.589 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711507514036224[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:03:09.590 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711507514036224[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:03:09.590 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711507514036224[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:09.590 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711507514036224[0;39m 请求参数: [{"categoryId2":101,"page":1,"size":1000}]
2022-07-14 17:03:09.592 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202711507514036224[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:03:09.592 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202711507514036224[0;39m ==> Parameters: 101(Long)
2022-07-14 17:03:09.594 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202711507514036224[0;39m <==    Columns: count(0)
2022-07-14 17:03:09.594 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202711507514036224[0;39m <==        Row: 1
2022-07-14 17:03:09.594 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202711507514036224[0;39m <==      Total: 1
2022-07-14 17:03:09.594 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202711507514036224[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 17:03:09.594 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202711507514036224[0;39m ==> Parameters: 101(Long), 1000(Integer)
2022-07-14 17:03:09.595 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202711507514036224[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:03:09.595 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202711507514036224[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 4, 1
2022-07-14 17:03:09.596 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202711507514036224[0;39m <==      Total: 1
2022-07-14 17:03:09.596 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202711507514036224[0;39m 总行数：1
2022-07-14 17:03:09.596 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202711507514036224[0;39m 总页数：1
2022-07-14 17:03:09.596 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711507514036224[0;39m 返回结果: {"content":{"list":[{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":4,"voteCount":1}],"total":1},"success":true}
2022-07-14 17:03:09.596 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711507514036224[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:03:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711509300809728[0;39m 生成今日电子书快照开始
2022-07-14 17:03:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711509300809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711509300809728[0;39m ==> Parameters: 
2022-07-14 17:03:10.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711509300809728[0;39m <==    Updates: 0
2022-07-14 17:03:10.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711509300809728[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:03:12.574 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711520034033664[0;39m ------------- 开始 -------------
2022-07-14 17:03:12.574 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711520034033664[0;39m 请求地址: http://127.0.0.1:8880/doc/all/6 GET
2022-07-14 17:03:12.575 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711520034033664[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:03:12.575 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711520034033664[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:12.575 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711520034033664[0;39m 请求参数: [6]
2022-07-14 17:03:12.576 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202711520034033664[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:03:12.577 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202711520034033664[0;39m ==> Parameters: 6(Long)
2022-07-14 17:03:12.577 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202711520034033664[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:03:12.578 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202711520034033664[0;39m <==        Row: 202703460804726784, 6, 0, Vue3, 1, 4, 1
2022-07-14 17:03:12.578 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202711520034033664[0;39m <==      Total: 1
2022-07-14 17:03:12.578 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711520034033664[0;39m 返回结果: {"content":[{"ebookId":6,"id":202703460804726784,"name":"Vue3","parent":0,"sort":1,"viewCount":4,"voteCount":1}],"success":true}
2022-07-14 17:03:12.579 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711520034033664[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:03:12.589 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711520096948224[0;39m ------------- 开始 -------------
2022-07-14 17:03:12.589 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711520096948224[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202703460804726784 GET
2022-07-14 17:03:12.590 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711520096948224[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:03:12.590 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711520096948224[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:12.590 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711520096948224[0;39m 请求参数: [202703460804726784]
2022-07-14 17:03:12.590 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202711520096948224[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:03:12.590 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202711520096948224[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 17:03:12.591 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202711520096948224[0;39m <==    Columns: id, content
2022-07-14 17:03:12.591 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202711520096948224[0;39m <==        Row: 202703460804726784, <<BLOB>>
2022-07-14 17:03:12.592 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202711520096948224[0;39m <==      Total: 1
2022-07-14 17:03:12.592 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202711520096948224[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:03:12.593 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202711520096948224[0;39m ==> Parameters: 202703460804726784(Long)
2022-07-14 17:03:12.683 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202711520096948224[0;39m <==    Updates: 1
2022-07-14 17:03:12.684 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711520096948224[0;39m 返回结果: {"content":"<blockquote><h1 id=\"8byqb\"><font face=\"仿宋\" size=\"6\">Vue3全家桶</font></h1></blockquote>","success":true}
2022-07-14 17:03:12.684 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711520096948224[0;39m ------------- 结束 耗时：95 ms -------------
2022-07-14 17:03:13.959 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711525843144704[0;39m ------------- 开始 -------------
2022-07-14 17:03:13.960 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711525843144704[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202703460804726784 GET
2022-07-14 17:03:13.960 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711525843144704[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:03:13.960 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711525843144704[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:13.960 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711525843144704[0;39m 请求参数: [202703460804726784]
2022-07-14 17:03:13.994 INFO  com.zs.wikibb.utils.RedisUtil                     :28  
                [32m202711525843144704[0;39m key已存在：DOC_VOTE_202703460804726784_127.0.0.1
2022-07-14 17:03:13.995 WARN  c.zs.wikibb.controller.ControllerExceptionHandler :45  
                [32m202711525843144704[0;39m 业务异常：您已点赞过
2022-07-14 17:03:13.996 WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver   :208 
                [32m202711525843144704[0;39m Resolved [com.zs.wikibb.exception.BusinessException: 您已点赞过]
2022-07-14 17:03:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711530230386688[0;39m 生成今日电子书快照开始
2022-07-14 17:03:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711530230386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711530230386688[0;39m ==> Parameters: 
2022-07-14 17:03:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711530230386688[0;39m <==    Updates: 0
2022-07-14 17:03:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711530230386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711534143672320[0;39m ------------- 开始 -------------
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711534143672322[0;39m ------------- 开始 -------------
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711534143672321[0;39m ------------- 开始 -------------
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711534143672320[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711534143672322[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711534143672320[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711534143672322[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711534143672321[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711534143672320[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711534143672322[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:15.939 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711534143672320[0;39m 请求参数: []
2022-07-14 17:03:15.938 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711534143672321[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:15.939 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711534143672322[0;39m 请求参数: []
2022-07-14 17:03:15.939 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711534143672321[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:15.939 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711534143672321[0;39m 请求参数: []
2022-07-14 17:03:15.939 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711534143672320[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:15.939 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711534143672322[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:15.939 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711534143672320[0;39m ==> Parameters: 
2022-07-14 17:03:15.939 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711534143672322[0;39m ==> Parameters: 
2022-07-14 17:03:15.939 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711534143672321[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:15.940 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711534143672321[0;39m ==> Parameters: 
2022-07-14 17:03:15.940 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:15.940 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711534143672320[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:15.940 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:15.940 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711534143672320[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:15.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:15.941 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711534143672321[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:15.941 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711534143672320[0;39m <==      Total: 1
2022-07-14 17:03:15.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:15.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:15.941 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711534143672321[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:15.941 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711534143672320[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:15.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:15.941 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711534143672320[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:03:15.941 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:15.941 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711534143672321[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:15.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:15.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:15.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:15.942 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711534143672321[0;39m <==      Total: 2
2022-07-14 17:03:15.942 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:15.943 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:15.943 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711534143672321[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:15.943 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:15.943 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711534143672321[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:03:15.943 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:15.943 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:15.944 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:15.944 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711534143672322[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:15.944 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711534143672322[0;39m <==      Total: 16
2022-07-14 17:03:15.945 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711534143672322[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:15.945 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711534143672322[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:03:17.157 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711332213100545[0;39m 连接关闭，token：TLFE8aUPWk，session id：7！当前连接数：0
2022-07-14 17:03:17.802 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711332213100544[0;39m 有新连接：token：ZlBivPLFM8，session id：8，当前连接数：1
2022-07-14 17:03:17.861 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711542209318912[0;39m ------------- 开始 -------------
2022-07-14 17:03:17.861 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711542209318912[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:17.861 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711542209318913[0;39m ------------- 开始 -------------
2022-07-14 17:03:17.861 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711542209318912[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:17.861 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711542209318913[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:17.861 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711542209318912[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:17.862 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711542213513216[0;39m ------------- 开始 -------------
2022-07-14 17:03:17.862 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711542209318913[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:17.862 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711542209318912[0;39m 请求参数: []
2022-07-14 17:03:17.862 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711542213513216[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:17.862 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711542209318913[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:17.862 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711542213513216[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:17.862 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711542209318913[0;39m 请求参数: []
2022-07-14 17:03:17.862 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711542213513216[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:17.862 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711542209318912[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:17.862 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711542213513216[0;39m 请求参数: []
2022-07-14 17:03:17.863 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711542209318913[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:17.863 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711542209318912[0;39m ==> Parameters: 
2022-07-14 17:03:17.863 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711542209318913[0;39m ==> Parameters: 
2022-07-14 17:03:17.863 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711542213513216[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:17.864 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711542213513216[0;39m ==> Parameters: 
2022-07-14 17:03:17.864 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711542209318912[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:17.864 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711542209318913[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:17.864 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711542209318912[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:17.864 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711542209318913[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:17.864 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:17.865 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:17.865 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711542209318913[0;39m <==      Total: 1
2022-07-14 17:03:17.865 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711542209318912[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:17.865 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:17.866 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711542209318913[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:17.866 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711542209318912[0;39m <==      Total: 2
2022-07-14 17:03:17.866 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711542209318913[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:03:17.866 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:17.866 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711542209318912[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:17.866 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:17.866 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711542209318912[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:03:17.866 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:17.867 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:17.867 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:17.867 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:17.867 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:17.868 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:17.868 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:17.869 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:17.869 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:17.869 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:17.869 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:17.869 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711542213513216[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:17.870 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711542213513216[0;39m <==      Total: 16
2022-07-14 17:03:17.870 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711542213513216[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:17.870 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711542213513216[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:03:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711551227072512[0;39m 生成今日电子书快照开始
2022-07-14 17:03:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711551227072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711551227072512[0;39m ==> Parameters: 
2022-07-14 17:03:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711551227072512[0;39m <==    Updates: 0
2022-07-14 17:03:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711551227072512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:03:21.520 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711520096948224[0;39m 连接关闭，token：ZlBivPLFM8，session id：8！当前连接数：0
2022-07-14 17:03:21.928 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711525843144704[0;39m 有新连接：token：viWbUaTP5O，session id：9，当前连接数：1
2022-07-14 17:03:21.985 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711559506628608[0;39m ------------- 开始 -------------
2022-07-14 17:03:21.985 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711559506628610[0;39m ------------- 开始 -------------
2022-07-14 17:03:21.985 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711559506628609[0;39m ------------- 开始 -------------
2022-07-14 17:03:21.985 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711559506628608[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711559506628609[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711559506628610[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711559506628608[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711559506628609[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711559506628610[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711559506628608[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711559506628609[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711559506628610[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711559506628608[0;39m 请求参数: []
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711559506628610[0;39m 请求参数: []
2022-07-14 17:03:21.986 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711559506628609[0;39m 请求参数: []
2022-07-14 17:03:21.987 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711559506628608[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:21.987 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711559506628610[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:21.987 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711559506628609[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:21.987 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711559506628608[0;39m ==> Parameters: 
2022-07-14 17:03:21.987 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711559506628610[0;39m ==> Parameters: 
2022-07-14 17:03:21.987 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711559506628609[0;39m ==> Parameters: 
2022-07-14 17:03:21.988 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711559506628608[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:21.988 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711559506628609[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:21.988 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:21.988 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711559506628608[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:21.988 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:21.988 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711559506628609[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:21.988 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:21.988 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711559506628608[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:21.988 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711559506628609[0;39m <==      Total: 1
2022-07-14 17:03:21.989 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:21.989 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711559506628608[0;39m <==      Total: 2
2022-07-14 17:03:21.989 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:21.989 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711559506628609[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:21.989 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711559506628608[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:21.989 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:21.989 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711559506628609[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:21.989 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711559506628608[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:21.989 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:21.989 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:21.990 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:21.990 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:21.990 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:21.990 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:21.991 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:21.991 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:21.991 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:21.991 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:21.992 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711559506628610[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:21.992 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711559506628610[0;39m <==      Total: 16
2022-07-14 17:03:21.993 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711559506628610[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:21.993 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711559506628610[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:03:24.116 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711332213100545[0;39m 连接关闭，token：viWbUaTP5O，session id：9！当前连接数：0
2022-07-14 17:03:24.465 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711332213100544[0;39m 有新连接：token：M9LQnrWPuv，session id：a，当前连接数：1
2022-07-14 17:03:24.504 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711570072080384[0;39m ------------- 开始 -------------
2022-07-14 17:03:24.504 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711570072080386[0;39m ------------- 开始 -------------
2022-07-14 17:03:24.504 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711570072080385[0;39m ------------- 开始 -------------
2022-07-14 17:03:24.504 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711570072080384[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:24.504 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711570072080386[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:24.504 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711570072080385[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:24.504 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711570072080384[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:24.504 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711570072080386[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:24.505 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711570072080385[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:24.505 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711570072080384[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:24.505 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711570072080386[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:24.505 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711570072080385[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:24.505 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711570072080384[0;39m 请求参数: []
2022-07-14 17:03:24.505 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711570072080386[0;39m 请求参数: []
2022-07-14 17:03:24.505 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711570072080385[0;39m 请求参数: []
2022-07-14 17:03:24.505 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711570072080386[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:24.505 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711570072080384[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:24.505 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711570072080385[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:24.506 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711570072080385[0;39m ==> Parameters: 
2022-07-14 17:03:24.506 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711570072080386[0;39m ==> Parameters: 
2022-07-14 17:03:24.506 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711570072080384[0;39m ==> Parameters: 
2022-07-14 17:03:24.507 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:24.507 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711570072080386[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:24.507 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711570072080385[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:24.507 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:24.507 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711570072080386[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:24.507 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711570072080385[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:24.507 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:24.508 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711570072080386[0;39m <==      Total: 1
2022-07-14 17:03:24.508 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:24.508 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711570072080385[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:24.508 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711570072080386[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:24.508 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:24.508 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711570072080386[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:24.508 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:24.508 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711570072080385[0;39m <==      Total: 2
2022-07-14 17:03:24.508 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:24.509 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711570072080385[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:24.509 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:24.509 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711570072080385[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:03:24.509 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:24.509 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:24.509 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:24.510 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:24.511 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:24.511 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:24.512 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:24.512 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:24.512 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711570072080384[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:24.513 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711570072080384[0;39m <==      Total: 16
2022-07-14 17:03:24.514 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711570072080384[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:24.514 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711570072080384[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 17:03:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711572181815296[0;39m 生成今日电子书快照开始
2022-07-14 17:03:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711572181815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711572181815296[0;39m ==> Parameters: 
2022-07-14 17:03:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711572181815296[0;39m <==    Updates: 0
2022-07-14 17:03:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711572181815296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:03:25.483 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711520096948224[0;39m 连接关闭，token：M9LQnrWPuv，session id：a！当前连接数：0
2022-07-14 17:03:25.652 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711525843144704[0;39m 有新连接：token：0lkvagYiwj，session id：b，当前连接数：1
2022-07-14 17:03:25.696 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711575071690752[0;39m ------------- 开始 -------------
2022-07-14 17:03:25.696 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711575071690752[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:25.696 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711575071690753[0;39m ------------- 开始 -------------
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711575071690752[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711575071690754[0;39m ------------- 开始 -------------
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711575071690753[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711575071690752[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711575071690754[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711575071690753[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711575071690752[0;39m 请求参数: []
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711575071690754[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711575071690753[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711575071690754[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711575071690753[0;39m 请求参数: []
2022-07-14 17:03:25.697 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711575071690754[0;39m 请求参数: []
2022-07-14 17:03:25.697 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711575071690752[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:25.698 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711575071690753[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:25.698 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711575071690754[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:25.698 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711575071690752[0;39m ==> Parameters: 
2022-07-14 17:03:25.698 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711575071690753[0;39m ==> Parameters: 
2022-07-14 17:03:25.698 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711575071690754[0;39m ==> Parameters: 
2022-07-14 17:03:25.699 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711575071690752[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:25.699 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711575071690753[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:25.699 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:25.699 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711575071690752[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:25.699 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:25.699 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711575071690753[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:25.699 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:25.699 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711575071690753[0;39m <==      Total: 1
2022-07-14 17:03:25.699 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711575071690752[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:25.700 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:25.700 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711575071690753[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:25.700 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711575071690752[0;39m <==      Total: 2
2022-07-14 17:03:25.700 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:25.700 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711575071690753[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:25.700 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711575071690752[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:25.700 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:25.700 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711575071690752[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:25.700 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:25.701 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:25.701 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:25.701 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:25.701 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:25.702 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:25.702 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:25.702 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:25.702 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:25.703 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:25.703 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711575071690754[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:25.703 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711575071690754[0;39m <==      Total: 16
2022-07-14 17:03:25.704 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711575071690754[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:25.704 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711575071690754[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:03:26.343 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711332213100545[0;39m 连接关闭，token：0lkvagYiwj，session id：b！当前连接数：0
2022-07-14 17:03:26.512 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711332213100544[0;39m 有新连接：token：Cxj7e7oB4Y，session id：c，当前连接数：1
2022-07-14 17:03:26.552 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711578662014977[0;39m ------------- 开始 -------------
2022-07-14 17:03:26.552 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711578662014976[0;39m ------------- 开始 -------------
2022-07-14 17:03:26.553 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711578662014976[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:26.553 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711578662014977[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:26.553 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711578662014976[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:26.553 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711578662014977[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:26.553 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711578662014976[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:26.553 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711578662014977[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:26.553 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711578662014976[0;39m 请求参数: []
2022-07-14 17:03:26.553 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711578662014977[0;39m 请求参数: []
2022-07-14 17:03:26.553 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711578666209280[0;39m ------------- 开始 -------------
2022-07-14 17:03:26.554 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711578666209280[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:26.554 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711578662014976[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:26.554 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711578662014977[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:26.554 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711578666209280[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:26.554 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711578666209280[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:26.554 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711578662014976[0;39m ==> Parameters: 
2022-07-14 17:03:26.554 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711578662014977[0;39m ==> Parameters: 
2022-07-14 17:03:26.555 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711578666209280[0;39m 请求参数: []
2022-07-14 17:03:26.555 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711578662014976[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:26.555 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711578662014977[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:26.555 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711578666209280[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:26.556 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711578662014977[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:26.556 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711578662014976[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:26.556 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711578666209280[0;39m ==> Parameters: 
2022-07-14 17:03:26.556 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711578662014976[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:26.556 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711578662014977[0;39m <==      Total: 1
2022-07-14 17:03:26.557 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711578662014976[0;39m <==      Total: 2
2022-07-14 17:03:26.557 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711578662014977[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:26.557 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711578662014976[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:26.557 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:26.557 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711578662014977[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:03:26.557 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711578662014976[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:03:26.557 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:26.557 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:26.558 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:26.558 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:26.558 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:26.559 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:26.559 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:26.559 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:26.560 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:26.560 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:26.560 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:26.560 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:26.561 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:26.561 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:26.561 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:26.561 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711578666209280[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:26.561 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711578666209280[0;39m <==      Total: 16
2022-07-14 17:03:26.562 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711578666209280[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:26.562 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711578666209280[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 17:03:27.075 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711520096948224[0;39m 连接关闭，token：Cxj7e7oB4Y，session id：c！当前连接数：0
2022-07-14 17:03:27.237 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711525843144704[0;39m 有新连接：token：oikzYZcVun，session id：d，当前连接数：1
2022-07-14 17:03:27.279 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711581711273984[0;39m ------------- 开始 -------------
2022-07-14 17:03:27.279 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711581711273985[0;39m ------------- 开始 -------------
2022-07-14 17:03:27.279 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711581711273986[0;39m ------------- 开始 -------------
2022-07-14 17:03:27.279 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711581711273984[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:27.279 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711581711273986[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:27.279 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711581711273985[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:27.280 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711581711273984[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:27.280 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711581711273986[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:27.280 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711581711273984[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:27.280 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711581711273985[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:27.280 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711581711273986[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:27.280 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711581711273984[0;39m 请求参数: []
2022-07-14 17:03:27.280 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711581711273985[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:27.280 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711581711273986[0;39m 请求参数: []
2022-07-14 17:03:27.280 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711581711273985[0;39m 请求参数: []
2022-07-14 17:03:27.280 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711581711273984[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:27.280 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711581711273986[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:27.280 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711581711273985[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:27.281 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711581711273984[0;39m ==> Parameters: 
2022-07-14 17:03:27.281 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711581711273986[0;39m ==> Parameters: 
2022-07-14 17:03:27.281 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711581711273985[0;39m ==> Parameters: 
2022-07-14 17:03:27.281 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:27.281 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711581711273984[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:27.282 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711581711273984[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:27.282 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:27.282 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711581711273985[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:27.282 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:27.282 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711581711273984[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:27.282 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711581711273985[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:27.282 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:27.282 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711581711273984[0;39m <==      Total: 2
2022-07-14 17:03:27.282 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:27.282 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711581711273985[0;39m <==      Total: 1
2022-07-14 17:03:27.283 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711581711273984[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:27.283 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711581711273984[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:27.283 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:27.283 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711581711273985[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:27.283 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:27.283 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711581711273985[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:27.283 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:27.283 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:27.284 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:27.284 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:27.284 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:27.284 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:27.284 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:27.285 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:27.285 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:27.285 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711581711273986[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:27.285 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711581711273986[0;39m <==      Total: 16
2022-07-14 17:03:27.286 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711581711273986[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:27.287 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711581711273986[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:03:27.792 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711332213100545[0;39m 连接关闭，token：oikzYZcVun，session id：d！当前连接数：0
2022-07-14 17:03:27.968 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711332213100544[0;39m 有新连接：token：LhJmYO34Yz，session id：e，当前连接数：1
2022-07-14 17:03:28.009 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711584773115904[0;39m ------------- 开始 -------------
2022-07-14 17:03:28.009 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711584773115904[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:28.009 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711584773115905[0;39m ------------- 开始 -------------
2022-07-14 17:03:28.009 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711584773115904[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:28.009 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711584773115904[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:28.009 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711584773115905[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:28.009 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711584773115905[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:28.010 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711584773115904[0;39m 请求参数: []
2022-07-14 17:03:28.010 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711584773115905[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:28.010 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711584773115905[0;39m 请求参数: []
2022-07-14 17:03:28.010 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711584777310208[0;39m ------------- 开始 -------------
2022-07-14 17:03:28.010 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711584777310208[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:28.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711584773115904[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:28.010 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711584773115905[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:28.010 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711584777310208[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:28.010 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711584773115905[0;39m ==> Parameters: 
2022-07-14 17:03:28.010 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711584777310208[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:28.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711584773115904[0;39m ==> Parameters: 
2022-07-14 17:03:28.011 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711584777310208[0;39m 请求参数: []
2022-07-14 17:03:28.011 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711584777310208[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:28.011 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711584773115904[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:28.011 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711584773115905[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:28.012 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711584777310208[0;39m ==> Parameters: 
2022-07-14 17:03:28.012 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711584773115905[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:28.012 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711584773115904[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:28.012 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711584773115905[0;39m <==      Total: 1
2022-07-14 17:03:28.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:28.012 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711584773115904[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:28.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:28.012 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711584773115905[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:28.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711584773115904[0;39m <==      Total: 2
2022-07-14 17:03:28.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:28.013 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711584773115905[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:28.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:28.013 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711584773115904[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:28.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:28.013 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711584773115904[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:28.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:28.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:28.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:28.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:28.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:28.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:28.015 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:28.015 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:28.015 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:28.015 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:28.016 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:28.016 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711584777310208[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:28.016 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711584777310208[0;39m <==      Total: 16
2022-07-14 17:03:28.017 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711584777310208[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:28.017 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711584777310208[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:03:28.503 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711520096948224[0;39m 连接关闭，token：LhJmYO34Yz，session id：e！当前连接数：0
2022-07-14 17:03:28.672 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711525843144704[0;39m 有新连接：token：kZXxRLc0Va，session id：f，当前连接数：1
2022-07-14 17:03:28.714 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711587730100225[0;39m ------------- 开始 -------------
2022-07-14 17:03:28.714 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711587730100224[0;39m ------------- 开始 -------------
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711587730100225[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711587730100224[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711587734294528[0;39m ------------- 开始 -------------
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711587730100225[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711587730100224[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711587734294528[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711587730100225[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711587730100224[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711587734294528[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711587730100224[0;39m 请求参数: []
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711587730100225[0;39m 请求参数: []
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711587734294528[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:28.715 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711587734294528[0;39m 请求参数: []
2022-07-14 17:03:28.716 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711587730100224[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:28.716 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711587730100225[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:28.716 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711587734294528[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:28.716 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711587730100224[0;39m ==> Parameters: 
2022-07-14 17:03:28.716 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711587734294528[0;39m ==> Parameters: 
2022-07-14 17:03:28.716 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711587730100225[0;39m ==> Parameters: 
2022-07-14 17:03:28.717 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711587730100225[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:28.717 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:28.717 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711587730100224[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:28.717 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711587730100225[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:28.717 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:28.717 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711587730100224[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:28.717 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711587730100225[0;39m <==      Total: 1
2022-07-14 17:03:28.717 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:28.718 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711587730100224[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:28.718 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:28.718 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711587730100225[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:28.718 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711587730100224[0;39m <==      Total: 2
2022-07-14 17:03:28.718 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711587730100225[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:28.718 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:28.718 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711587730100224[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:28.718 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:28.718 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711587730100224[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:28.718 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:28.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:28.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:28.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:28.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:28.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:28.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:28.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:28.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:28.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:28.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711587734294528[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:28.722 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711587734294528[0;39m <==      Total: 16
2022-07-14 17:03:28.723 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711587734294528[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:28.723 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711587734294528[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:03:29.418 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711332213100545[0;39m 连接关闭，token：kZXxRLc0Va，session id：f！当前连接数：0
2022-07-14 17:03:29.587 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711332213100544[0;39m 有新连接：token：xnaTudf7CZ，session id：10，当前连接数：1
2022-07-14 17:03:29.628 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711591563694080[0;39m ------------- 开始 -------------
2022-07-14 17:03:29.628 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711591563694081[0;39m ------------- 开始 -------------
2022-07-14 17:03:29.628 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711591563694080[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:29.628 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711591563694081[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:29.628 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711591563694080[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711591567888384[0;39m ------------- 开始 -------------
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711591563694081[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711591563694080[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711591567888384[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711591563694080[0;39m 请求参数: []
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711591567888384[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711591563694081[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711591567888384[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711591567888384[0;39m 请求参数: []
2022-07-14 17:03:29.629 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711591563694081[0;39m 请求参数: []
2022-07-14 17:03:29.630 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711591563694080[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:29.630 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711591563694081[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:29.630 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711591567888384[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:29.630 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711591563694080[0;39m ==> Parameters: 
2022-07-14 17:03:29.630 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711591563694081[0;39m ==> Parameters: 
2022-07-14 17:03:29.630 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711591567888384[0;39m ==> Parameters: 
2022-07-14 17:03:29.631 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711591563694081[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:29.631 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711591563694080[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:29.631 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:29.631 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:29.632 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711591563694080[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:29.632 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711591563694081[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:29.632 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:29.632 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711591563694081[0;39m <==      Total: 1
2022-07-14 17:03:29.632 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711591563694080[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:29.632 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:29.632 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711591563694081[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:29.632 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:29.632 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711591563694080[0;39m <==      Total: 2
2022-07-14 17:03:29.632 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711591563694081[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:29.633 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:29.633 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711591563694080[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:29.633 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711591563694080[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:03:29.633 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:29.633 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:29.633 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:29.634 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:29.634 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:29.634 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:29.634 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:29.635 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:29.635 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:29.635 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:29.635 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711591567888384[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:29.636 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711591567888384[0;39m <==      Total: 16
2022-07-14 17:03:29.636 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711591567888384[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:29.636 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711591567888384[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:03:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711593136558080[0;39m 生成今日电子书快照开始
2022-07-14 17:03:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711593136558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711593136558080[0;39m ==> Parameters: 
2022-07-14 17:03:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711593136558080[0;39m <==    Updates: 0
2022-07-14 17:03:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711593136558080[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-14 17:03:30.139 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711520096948224[0;39m 连接关闭，token：xnaTudf7CZ，session id：10！当前连接数：0
2022-07-14 17:03:30.310 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711525843144704[0;39m 有新连接：token：iJbJQZWtSs，session id：11，当前连接数：1
2022-07-14 17:03:30.350 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711594591981568[0;39m ------------- 开始 -------------
2022-07-14 17:03:30.350 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711594591981570[0;39m ------------- 开始 -------------
2022-07-14 17:03:30.350 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711594591981569[0;39m ------------- 开始 -------------
2022-07-14 17:03:30.350 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711594591981568[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:30.350 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711594591981569[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:30.350 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711594591981570[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:30.351 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711594591981569[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:30.351 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711594591981568[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:30.351 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711594591981570[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:30.351 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711594591981569[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:30.351 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711594591981568[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:30.351 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711594591981569[0;39m 请求参数: []
2022-07-14 17:03:30.351 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711594591981570[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:30.351 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711594591981568[0;39m 请求参数: []
2022-07-14 17:03:30.351 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711594591981570[0;39m 请求参数: []
2022-07-14 17:03:30.351 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711594591981570[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:30.352 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711594591981569[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:30.352 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711594591981568[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:30.352 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711594591981569[0;39m ==> Parameters: 
2022-07-14 17:03:30.352 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711594591981570[0;39m ==> Parameters: 
2022-07-14 17:03:30.352 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711594591981568[0;39m ==> Parameters: 
2022-07-14 17:03:30.353 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711594591981568[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:30.353 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711594591981570[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:30.353 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:30.353 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711594591981568[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:30.353 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:30.353 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711594591981570[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:30.353 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:30.353 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711594591981568[0;39m <==      Total: 1
2022-07-14 17:03:30.353 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711594591981570[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:30.354 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:30.354 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:30.354 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711594591981570[0;39m <==      Total: 2
2022-07-14 17:03:30.354 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711594591981568[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:30.354 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:30.354 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711594591981568[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:30.354 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711594591981570[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:30.354 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:30.354 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711594591981570[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:30.354 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:30.355 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:30.355 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:30.355 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:30.355 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:30.355 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:30.356 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:30.356 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:30.356 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:30.356 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711594591981569[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:30.357 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711594591981569[0;39m <==      Total: 16
2022-07-14 17:03:30.357 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711594591981569[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:30.357 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711594591981569[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:03:30.846 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711332213100545[0;39m 连接关闭，token：iJbJQZWtSs，session id：11！当前连接数：0
2022-07-14 17:03:31.014 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711332213100544[0;39m 有新连接：token：TA18uYgnfy，session id：12，当前连接数：1
2022-07-14 17:03:31.056 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711597553160193[0;39m ------------- 开始 -------------
2022-07-14 17:03:31.056 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711597553160192[0;39m ------------- 开始 -------------
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711597553160193[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711597557354496[0;39m ------------- 开始 -------------
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711597553160192[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711597553160193[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711597557354496[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711597553160192[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711597553160193[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711597553160192[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711597557354496[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711597553160193[0;39m 请求参数: []
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711597553160192[0;39m 请求参数: []
2022-07-14 17:03:31.057 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711597557354496[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:31.058 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711597557354496[0;39m 请求参数: []
2022-07-14 17:03:31.058 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711597553160193[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:31.058 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711597553160192[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:31.058 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711597557354496[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:31.059 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711597553160193[0;39m ==> Parameters: 
2022-07-14 17:03:31.059 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711597553160192[0;39m ==> Parameters: 
2022-07-14 17:03:31.059 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711597557354496[0;39m ==> Parameters: 
2022-07-14 17:03:31.059 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:31.059 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711597553160192[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:31.059 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711597553160193[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:31.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:31.060 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711597553160192[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:31.060 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711597553160193[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:31.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:31.060 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711597553160192[0;39m <==      Total: 1
2022-07-14 17:03:31.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:31.060 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711597553160192[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:31.060 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711597553160193[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:31.060 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711597553160192[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:31.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:31.061 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:31.061 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711597553160193[0;39m <==      Total: 2
2022-07-14 17:03:31.061 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:31.061 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711597553160193[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:31.061 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:31.061 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711597553160193[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:03:31.061 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:31.062 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:31.062 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:31.062 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:31.062 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:31.063 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:31.063 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:31.063 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:31.063 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711597557354496[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:31.063 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711597557354496[0;39m <==      Total: 16
2022-07-14 17:03:31.064 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711597557354496[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:31.064 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711597557354496[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:03:31.571 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711520096948224[0;39m 连接关闭，token：TA18uYgnfy，session id：12！当前连接数：0
2022-07-14 17:03:31.744 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711525843144704[0;39m 有新连接：token：GLQN2D8onQ，session id：13，当前连接数：1
2022-07-14 17:03:31.788 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711600623390720[0;39m ------------- 开始 -------------
2022-07-14 17:03:31.788 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711600623390721[0;39m ------------- 开始 -------------
2022-07-14 17:03:31.788 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711600623390721[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:31.788 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711600623390720[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:31.788 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711600623390721[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:31.788 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711600623390720[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:31.788 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711600623390722[0;39m ------------- 开始 -------------
2022-07-14 17:03:31.789 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711600623390721[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:31.789 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711600623390720[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:31.789 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711600623390722[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:31.789 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711600623390722[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:31.789 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711600623390720[0;39m 请求参数: []
2022-07-14 17:03:31.789 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711600623390721[0;39m 请求参数: []
2022-07-14 17:03:31.789 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711600623390722[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:31.789 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711600623390722[0;39m 请求参数: []
2022-07-14 17:03:31.790 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711600623390721[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:31.790 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711600623390720[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:31.790 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711600623390722[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:31.790 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711600623390720[0;39m ==> Parameters: 
2022-07-14 17:03:31.790 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711600623390721[0;39m ==> Parameters: 
2022-07-14 17:03:31.790 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711600623390722[0;39m ==> Parameters: 
2022-07-14 17:03:31.791 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:31.791 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711600623390721[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:31.791 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711600623390720[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:31.791 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:31.791 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711600623390720[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:31.791 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711600623390721[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:31.791 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:31.792 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:31.792 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711600623390720[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:31.792 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711600623390721[0;39m <==      Total: 1
2022-07-14 17:03:31.792 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:31.792 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711600623390720[0;39m <==      Total: 2
2022-07-14 17:03:31.792 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:31.792 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711600623390720[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:31.792 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711600623390721[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:31.792 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711600623390720[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:31.792 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:31.792 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711600623390721[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:31.792 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:31.793 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:31.793 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:31.793 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:31.793 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:31.794 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:31.794 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:31.794 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:31.794 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:31.794 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711600623390722[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:31.795 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711600623390722[0;39m <==      Total: 16
2022-07-14 17:03:31.795 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711600623390722[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:31.795 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711600623390722[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:03:32.303 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711332213100545[0;39m 连接关闭，token：GLQN2D8onQ，session id：13！当前连接数：0
2022-07-14 17:03:32.483 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711332213100544[0;39m 有新连接：token：vlJPWlp9mP，session id：14，当前连接数：1
2022-07-14 17:03:32.525 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711603714592769[0;39m ------------- 开始 -------------
2022-07-14 17:03:32.525 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711603714592768[0;39m ------------- 开始 -------------
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711603718787072[0;39m ------------- 开始 -------------
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711603714592769[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711603714592768[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711603718787072[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711603714592769[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711603714592768[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711603718787072[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711603714592769[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711603714592768[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711603718787072[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711603714592768[0;39m 请求参数: []
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711603714592769[0;39m 请求参数: []
2022-07-14 17:03:32.526 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711603718787072[0;39m 请求参数: []
2022-07-14 17:03:32.527 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711603714592768[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:32.527 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711603714592769[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:32.527 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711603718787072[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:32.527 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711603714592768[0;39m ==> Parameters: 
2022-07-14 17:03:32.527 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711603718787072[0;39m ==> Parameters: 
2022-07-14 17:03:32.527 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711603714592769[0;39m ==> Parameters: 
2022-07-14 17:03:32.528 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711603714592768[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:32.528 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:32.528 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711603714592769[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:32.528 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:32.528 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711603714592768[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:32.528 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711603714592769[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:32.528 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:32.529 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:32.529 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711603714592768[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:32.529 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711603714592769[0;39m <==      Total: 1
2022-07-14 17:03:32.529 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:32.529 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711603714592768[0;39m <==      Total: 2
2022-07-14 17:03:32.529 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:32.529 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711603714592769[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:32.529 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711603714592768[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:32.529 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:32.529 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711603714592769[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:32.529 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711603714592768[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:32.529 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:32.530 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:32.530 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:32.530 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:32.530 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:32.530 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:32.531 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:32.531 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:32.531 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:32.531 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711603718787072[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:32.532 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711603718787072[0;39m <==      Total: 16
2022-07-14 17:03:32.532 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711603718787072[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:32.532 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711603718787072[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:03:32.982 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711520096948224[0;39m 连接关闭，token：vlJPWlp9mP，session id：14！当前连接数：0
2022-07-14 17:03:33.165 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711525843144704[0;39m 有新连接：token：wkqDMXtZmb，session id：15，当前连接数：1
2022-07-14 17:03:33.208 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711606579302400[0;39m ------------- 开始 -------------
2022-07-14 17:03:33.208 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711606579302400[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:33.208 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711606579302401[0;39m ------------- 开始 -------------
2022-07-14 17:03:33.208 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711606579302400[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:33.208 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711606579302401[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711606583496704[0;39m ------------- 开始 -------------
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711606579302400[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711606579302401[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711606583496704[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711606579302400[0;39m 请求参数: []
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711606579302401[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711606583496704[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711606583496704[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711606579302401[0;39m 请求参数: []
2022-07-14 17:03:33.209 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711606583496704[0;39m 请求参数: []
2022-07-14 17:03:33.209 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711606579302400[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:33.210 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711606579302400[0;39m ==> Parameters: 
2022-07-14 17:03:33.210 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711606583496704[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:33.210 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711606579302401[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:33.210 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711606583496704[0;39m ==> Parameters: 
2022-07-14 17:03:33.210 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711606579302401[0;39m ==> Parameters: 
2022-07-14 17:03:33.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:33.211 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711606579302400[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:33.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:33.211 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711606579302401[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:33.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:33.211 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711606579302400[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:33.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:33.211 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711606579302401[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:33.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:33.212 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711606579302400[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:33.212 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711606579302401[0;39m <==      Total: 1
2022-07-14 17:03:33.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:33.212 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711606579302400[0;39m <==      Total: 2
2022-07-14 17:03:33.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:33.212 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711606579302401[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:33.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:33.212 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711606579302400[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:33.212 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711606579302401[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:33.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:33.212 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711606579302400[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:33.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:33.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:33.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:33.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:33.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:33.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:33.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:33.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711606583496704[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:33.215 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711606583496704[0;39m <==      Total: 16
2022-07-14 17:03:33.216 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711606583496704[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:33.216 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711606583496704[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:03:33.710 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711332213100545[0;39m 连接关闭，token：wkqDMXtZmb，session id：15！当前连接数：0
2022-07-14 17:03:33.884 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711332213100544[0;39m 有新连接：token：GPTUiWVWoG，session id：16，当前连接数：1
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711609599201281[0;39m ------------- 开始 -------------
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711609599201280[0;39m ------------- 开始 -------------
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711609599201281[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711609599201282[0;39m ------------- 开始 -------------
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711609599201280[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711609599201281[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711609599201282[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711609599201280[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711609599201281[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:33.928 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711609599201282[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:33.929 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711609599201280[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:33.929 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711609599201282[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:33.929 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711609599201281[0;39m 请求参数: []
2022-07-14 17:03:33.929 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711609599201280[0;39m 请求参数: []
2022-07-14 17:03:33.929 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711609599201282[0;39m 请求参数: []
2022-07-14 17:03:33.929 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711609599201281[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:33.929 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711609599201282[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:33.929 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711609599201280[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:33.930 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711609599201281[0;39m ==> Parameters: 
2022-07-14 17:03:33.930 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711609599201282[0;39m ==> Parameters: 
2022-07-14 17:03:33.930 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711609599201280[0;39m ==> Parameters: 
2022-07-14 17:03:33.930 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:33.930 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711609599201281[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:33.930 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711609599201280[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:33.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:33.931 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711609599201281[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:33.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:33.931 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711609599201280[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:33.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:33.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:33.931 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711609599201281[0;39m <==      Total: 1
2022-07-14 17:03:33.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:33.931 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711609599201280[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:33.931 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:33.932 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711609599201281[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:33.932 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711609599201280[0;39m <==      Total: 2
2022-07-14 17:03:33.932 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:33.932 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711609599201281[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:33.932 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:33.932 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711609599201280[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:33.932 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:33.932 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711609599201280[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:33.932 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:33.933 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:33.933 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:33.933 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:33.933 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:33.934 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:33.934 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711609599201282[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:33.934 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711609599201282[0;39m <==      Total: 16
2022-07-14 17:03:33.935 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711609599201282[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:33.935 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711609599201282[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:03:34.588 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711520096948224[0;39m 连接关闭，token：GPTUiWVWoG，session id：16！当前连接数：0
2022-07-14 17:03:34.777 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711525843144704[0;39m 有新连接：token：jBlTzAUg3G，session id：17，当前连接数：1
2022-07-14 17:03:34.817 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711613327937536[0;39m ------------- 开始 -------------
2022-07-14 17:03:34.817 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711613327937536[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:34.817 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711613327937538[0;39m ------------- 开始 -------------
2022-07-14 17:03:34.817 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711613327937536[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:34.817 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711613327937537[0;39m ------------- 开始 -------------
2022-07-14 17:03:34.817 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711613327937536[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:34.817 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711613327937538[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:34.818 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711613327937537[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:34.818 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711613327937537[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:34.818 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711613327937538[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:34.818 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711613327937536[0;39m 请求参数: []
2022-07-14 17:03:34.818 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711613327937537[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:34.818 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711613327937538[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:34.818 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711613327937537[0;39m 请求参数: []
2022-07-14 17:03:34.818 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711613327937538[0;39m 请求参数: []
2022-07-14 17:03:34.818 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711613327937536[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:34.818 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711613327937537[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:34.819 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711613327937538[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:34.819 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711613327937536[0;39m ==> Parameters: 
2022-07-14 17:03:34.819 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711613327937537[0;39m ==> Parameters: 
2022-07-14 17:03:34.819 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711613327937538[0;39m ==> Parameters: 
2022-07-14 17:03:34.820 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711613327937536[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:34.820 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:34.820 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711613327937538[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:34.820 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:34.820 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711613327937536[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:34.820 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711613327937538[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:34.820 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:34.820 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711613327937536[0;39m <==        Row: 2022-07-14, 104, 24, 11, 6
2022-07-14 17:03:34.820 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711613327937538[0;39m <==      Total: 1
2022-07-14 17:03:34.820 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:34.821 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711613327937536[0;39m <==      Total: 2
2022-07-14 17:03:34.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:34.821 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711613327937538[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:34.821 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711613327937536[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":104,"viewIncrease":11,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:34.821 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711613327937538[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:34.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:34.821 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711613327937536[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:34.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:34.821 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:34.822 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:34.822 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:34.822 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:34.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:34.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:34.823 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:34.824 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:34.824 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:34.824 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711613327937537[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:34.825 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711613327937537[0;39m <==      Total: 16
2022-07-14 17:03:34.825 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711613327937537[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:34.825 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711613327937537[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:03:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202711614137438208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:03:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711614137438208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:03:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711614137438208[0;39m ==> Parameters: 
2022-07-14 17:03:35.062 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711614137438208[0;39m <==    Updates: 6
2022-07-14 17:03:35.062 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202711614137438208[0;39m 更新电子书下的文档数据结束，耗时：51 毫秒
2022-07-14 17:03:35.063 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711614359736320[0;39m 生成今日电子书快照开始
2022-07-14 17:03:35.063 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711614359736320[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:35.063 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711614359736320[0;39m ==> Parameters: 
2022-07-14 17:03:35.090 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711614359736320[0;39m <==    Updates: 0
2022-07-14 17:03:35.091 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711614359736320[0;39m 生成今日电子书快照结束，耗时：28 毫秒
2022-07-14 17:03:35.304 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711332213100545[0;39m 连接关闭，token：jBlTzAUg3G，session id：17！当前连接数：0
2022-07-14 17:03:35.476 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711332213100544[0;39m 有新连接：token：ooXAEzvTmd，session id：18，当前连接数：1
2022-07-14 17:03:35.516 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711616259756032[0;39m ------------- 开始 -------------
2022-07-14 17:03:35.516 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711616259756032[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:03:35.516 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711616259756033[0;39m ------------- 开始 -------------
2022-07-14 17:03:35.516 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711616259756032[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:03:35.516 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711616259756034[0;39m ------------- 开始 -------------
2022-07-14 17:03:35.516 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711616259756033[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:03:35.516 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711616259756032[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:35.516 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711616259756033[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:03:35.516 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711616259756034[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:03:35.517 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711616259756033[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:35.517 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711616259756032[0;39m 请求参数: []
2022-07-14 17:03:35.517 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711616259756034[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:03:35.517 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711616259756033[0;39m 请求参数: []
2022-07-14 17:03:35.517 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711616259756034[0;39m 远程地址: 127.0.0.1
2022-07-14 17:03:35.517 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711616259756034[0;39m 请求参数: []
2022-07-14 17:03:35.517 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711616259756032[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:35.517 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711616259756033[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:03:35.517 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711616259756032[0;39m ==> Parameters: 
2022-07-14 17:03:35.517 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711616259756033[0;39m ==> Parameters: 
2022-07-14 17:03:35.518 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711616259756034[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:03:35.518 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711616259756034[0;39m ==> Parameters: 
2022-07-14 17:03:35.518 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711616259756032[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:03:35.518 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711616259756033[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:03:35.519 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711616259756032[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:03:35.519 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711616259756033[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:03:35.519 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:03:35.519 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:03:35.519 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711616259756033[0;39m <==      Total: 1
2022-07-14 17:03:35.519 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711616259756032[0;39m <==        Row: 2022-07-14, 105, 24, 12, 6
2022-07-14 17:03:35.519 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:03:35.519 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711616259756032[0;39m <==      Total: 2
2022-07-14 17:03:35.520 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711616259756033[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:03:35.520 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:03:35.520 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711616259756033[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:35.520 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711616259756032[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:03:35.520 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:03:35.520 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711616259756032[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:03:35.520 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:03:35.520 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:03:35.521 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:03:35.521 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:03:35.521 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:03:35.521 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:03:35.522 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:03:35.523 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:03:35.524 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:03:35.524 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:03:35.524 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:03:35.525 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711616259756034[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:03:35.525 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711616259756034[0;39m <==      Total: 16
2022-07-14 17:03:35.526 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711616259756034[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:03:35.526 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711616259756034[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 17:03:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711635117346816[0;39m 生成今日电子书快照开始
2022-07-14 17:03:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711635117346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711635117346816[0;39m ==> Parameters: 
2022-07-14 17:03:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711635117346816[0;39m <==    Updates: 0
2022-07-14 17:03:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711635117346816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:03:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711656059506688[0;39m 生成今日电子书快照开始
2022-07-14 17:03:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711656059506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711656059506688[0;39m ==> Parameters: 
2022-07-14 17:03:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711656059506688[0;39m <==    Updates: 0
2022-07-14 17:03:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711656059506688[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:03:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711677014249472[0;39m 生成今日电子书快照开始
2022-07-14 17:03:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711677014249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711677014249472[0;39m ==> Parameters: 
2022-07-14 17:03:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711677014249472[0;39m <==    Updates: 0
2022-07-14 17:03:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711677014249472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:03:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711697994158080[0;39m 生成今日电子书快照开始
2022-07-14 17:03:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711697994158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:03:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711697994158080[0;39m ==> Parameters: 
2022-07-14 17:03:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711697994158080[0;39m <==    Updates: 0
2022-07-14 17:03:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711697994158080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:04:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711718957289472[0;39m 生成今日电子书快照开始
2022-07-14 17:04:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711718957289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711718957289472[0;39m ==> Parameters: 
2022-07-14 17:04:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711718957289472[0;39m <==    Updates: 0
2022-07-14 17:04:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711718957289472[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:04:05.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202711739933003776[0;39m 更新电子书下的文档数据开始
2022-07-14 17:04:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711739933003776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:04:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711739933003776[0;39m ==> Parameters: 
2022-07-14 17:04:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711739933003776[0;39m <==    Updates: 6
2022-07-14 17:04:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202711739933003776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:04:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711739941392384[0;39m 生成今日电子书快照开始
2022-07-14 17:04:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711739941392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711739941392384[0;39m ==> Parameters: 
2022-07-14 17:04:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711739941392384[0;39m <==    Updates: 0
2022-07-14 17:04:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711739941392384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:04:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711760925495296[0;39m 生成今日电子书快照开始
2022-07-14 17:04:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711760925495296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711760925495296[0;39m ==> Parameters: 
2022-07-14 17:04:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711760925495296[0;39m <==    Updates: 0
2022-07-14 17:04:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711760925495296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:04:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711781876043776[0;39m 生成今日电子书快照开始
2022-07-14 17:04:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711781876043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711781876043776[0;39m ==> Parameters: 
2022-07-14 17:04:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711781876043776[0;39m <==    Updates: 0
2022-07-14 17:04:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711781876043776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:04:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711802864340992[0;39m 生成今日电子书快照开始
2022-07-14 17:04:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711802864340992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711802864340992[0;39m ==> Parameters: 
2022-07-14 17:04:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711802864340992[0;39m <==    Updates: 0
2022-07-14 17:04:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711802864340992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:04:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711823877804032[0;39m 生成今日电子书快照开始
2022-07-14 17:04:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711823877804032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:25.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711823877804032[0;39m ==> Parameters: 
2022-07-14 17:04:25.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711823877804032[0;39m <==    Updates: 0
2022-07-14 17:04:25.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711823877804032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:04:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711844786409472[0;39m 生成今日电子书快照开始
2022-07-14 17:04:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711844786409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711844786409472[0;39m ==> Parameters: 
2022-07-14 17:04:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711844786409472[0;39m <==    Updates: 0
2022-07-14 17:04:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711844786409472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:04:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202711865774706688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:04:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711865774706688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:04:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711865774706688[0;39m ==> Parameters: 
2022-07-14 17:04:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711865774706688[0;39m <==    Updates: 6
2022-07-14 17:04:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202711865774706688[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-14 17:04:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711865799872512[0;39m 生成今日电子书快照开始
2022-07-14 17:04:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711865799872512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711865799872512[0;39m ==> Parameters: 
2022-07-14 17:04:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711865799872512[0;39m <==    Updates: 0
2022-07-14 17:04:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711865799872512[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:04:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711886763003904[0;39m 生成今日电子书快照开始
2022-07-14 17:04:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711886763003904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711886763003904[0;39m ==> Parameters: 
2022-07-14 17:04:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711886763003904[0;39m <==    Updates: 0
2022-07-14 17:04:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711886763003904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:04:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711907730329600[0;39m 生成今日电子书快照开始
2022-07-14 17:04:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711907730329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711907730329600[0;39m ==> Parameters: 
2022-07-14 17:04:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711907730329600[0;39m <==    Updates: 0
2022-07-14 17:04:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711907730329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:04:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711928689266688[0;39m 生成今日电子书快照开始
2022-07-14 17:04:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711928689266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711928689266688[0;39m ==> Parameters: 
2022-07-14 17:04:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711928689266688[0;39m <==    Updates: 0
2022-07-14 17:04:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711928689266688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:04:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711949673369600[0;39m 生成今日电子书快照开始
2022-07-14 17:04:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711949673369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:04:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711949673369600[0;39m ==> Parameters: 
2022-07-14 17:04:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711949673369600[0;39m <==    Updates: 0
2022-07-14 17:04:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711949673369600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:04:58.410 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711613327937538[0;39m 连接关闭，token：ooXAEzvTmd，session id：18！当前连接数：0
2022-07-14 17:04:59.285 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711613327937537[0;39m 有新连接：token：BI4uUr24uV，session id：19，当前连接数：1
2022-07-14 17:04:59.347 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711967872454656[0;39m ------------- 开始 -------------
2022-07-14 17:04:59.348 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711967872454656[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:04:59.348 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711967872454656[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:04:59.348 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711967876648960[0;39m ------------- 开始 -------------
2022-07-14 17:04:59.348 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711967872454656[0;39m 远程地址: 127.0.0.1
2022-07-14 17:04:59.349 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711967876648960[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:04:59.349 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711967872454656[0;39m 请求参数: []
2022-07-14 17:04:59.349 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711967876648960[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:04:59.349 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202711967880843264[0;39m ------------- 开始 -------------
2022-07-14 17:04:59.349 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202711967880843264[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:04:59.349 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711967876648960[0;39m 远程地址: 127.0.0.1
2022-07-14 17:04:59.349 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202711967880843264[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:04:59.349 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711967872454656[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:04:59.349 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711967876648960[0;39m 请求参数: []
2022-07-14 17:04:59.350 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202711967880843264[0;39m 远程地址: 127.0.0.1
2022-07-14 17:04:59.350 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711967872454656[0;39m ==> Parameters: 
2022-07-14 17:04:59.350 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202711967880843264[0;39m 请求参数: []
2022-07-14 17:04:59.350 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711967876648960[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:04:59.350 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711967876648960[0;39m ==> Parameters: 
2022-07-14 17:04:59.351 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711967872454656[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:04:59.351 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711967872454656[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:04:59.352 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711967876648960[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:04:59.353 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202711967872454656[0;39m <==        Row: 2022-07-14, 105, 24, 12, 6
2022-07-14 17:04:59.351 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711967880843264[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:04:59.354 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202711967872454656[0;39m <==      Total: 2
2022-07-14 17:04:59.354 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711967880843264[0;39m ==> Parameters: 
2022-07-14 17:04:59.354 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202711967876648960[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:04:59.354 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711967872454656[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:04:59.354 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711967872454656[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:04:59.354 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202711967876648960[0;39m <==      Total: 1
2022-07-14 17:04:59.355 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711967876648960[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:04:59.355 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:04:59.355 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711967876648960[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:04:59.355 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:04:59.356 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:04:59.356 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:04:59.356 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:04:59.357 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:04:59.357 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:04:59.357 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:04:59.358 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:04:59.358 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:04:59.358 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:04:59.359 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:04:59.359 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:04:59.359 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:04:59.360 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:04:59.360 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:04:59.360 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202711967880843264[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:04:59.360 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202711967880843264[0;39m <==      Total: 16
2022-07-14 17:04:59.361 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202711967880843264[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:04:59.361 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202711967880843264[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-14 17:05:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711970670055424[0;39m 生成今日电子书快照开始
2022-07-14 17:05:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711970670055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711970670055424[0;39m ==> Parameters: 
2022-07-14 17:05:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711970670055424[0;39m <==    Updates: 0
2022-07-14 17:05:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711970670055424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:05:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202711991599632384[0;39m 生成今日电子书快照开始
2022-07-14 17:05:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711991599632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711991599632384[0;39m ==> Parameters: 
2022-07-14 17:05:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202711991599632384[0;39m <==    Updates: 0
2022-07-14 17:05:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202711991599632384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:05:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202711991608020992[0;39m 更新电子书下的文档数据开始
2022-07-14 17:05:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711991608020992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:05:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711991608020992[0;39m ==> Parameters: 
2022-07-14 17:05:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202711991608020992[0;39m <==    Updates: 6
2022-07-14 17:05:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202711991608020992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:05:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712012566958080[0;39m 生成今日电子书快照开始
2022-07-14 17:05:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712012566958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712012566958080[0;39m ==> Parameters: 
2022-07-14 17:05:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712012566958080[0;39m <==    Updates: 0
2022-07-14 17:05:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712012566958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:05:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712033534283776[0;39m 生成今日电子书快照开始
2022-07-14 17:05:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712033534283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712033534283776[0;39m ==> Parameters: 
2022-07-14 17:05:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712033534283776[0;39m <==    Updates: 0
2022-07-14 17:05:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712033534283776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:05:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712054560329728[0;39m 生成今日电子书快照开始
2022-07-14 17:05:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712054560329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712054560329728[0;39m ==> Parameters: 
2022-07-14 17:05:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712054560329728[0;39m <==    Updates: 0
2022-07-14 17:05:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712054560329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:05:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712075481518080[0;39m 生成今日电子书快照开始
2022-07-14 17:05:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712075481518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712075481518080[0;39m ==> Parameters: 
2022-07-14 17:05:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712075481518080[0;39m <==    Updates: 0
2022-07-14 17:05:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712075481518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:05:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712096478203904[0;39m 生成今日电子书快照开始
2022-07-14 17:05:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712096478203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712096478203904[0;39m ==> Parameters: 
2022-07-14 17:05:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712096478203904[0;39m <==    Updates: 0
2022-07-14 17:05:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712096478203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:05:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202712117424558080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:05:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712117424558080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:05:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712117424558080[0;39m ==> Parameters: 
2022-07-14 17:05:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712117424558080[0;39m <==    Updates: 6
2022-07-14 17:05:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202712117424558080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:05:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712117432946688[0;39m 生成今日电子书快照开始
2022-07-14 17:05:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712117432946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712117432946688[0;39m ==> Parameters: 
2022-07-14 17:05:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712117432946688[0;39m <==    Updates: 0
2022-07-14 17:05:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712117432946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:05:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712138446409728[0;39m 生成今日电子书快照开始
2022-07-14 17:05:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712138446409728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712138446409728[0;39m ==> Parameters: 
2022-07-14 17:05:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712138446409728[0;39m <==    Updates: 0
2022-07-14 17:05:40.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712138446409728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:05:40.846 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711616259756032[0;39m 连接关闭，token：BI4uUr24uV，session id：19！当前连接数：0
2022-07-14 17:05:42.284 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711616259756034[0;39m 有新连接：token：Kp1SR9jWCy，session id：1a，当前连接数：1
2022-07-14 17:05:42.493 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202712148839895040[0;39m ------------- 开始 -------------
2022-07-14 17:05:42.494 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202712148839895040[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:05:42.494 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202712148839895040[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:05:42.495 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202712148839895040[0;39m 远程地址: 127.0.0.1
2022-07-14 17:05:42.495 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202712148848283648[0;39m ------------- 开始 -------------
2022-07-14 17:05:42.495 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202712148839895040[0;39m 请求参数: []
2022-07-14 17:05:42.495 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202712148848283649[0;39m ------------- 开始 -------------
2022-07-14 17:05:42.495 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202712148848283648[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:05:42.495 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202712148848283649[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:05:42.495 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202712148848283648[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:05:42.495 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202712148848283649[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:05:42.496 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202712148848283648[0;39m 远程地址: 127.0.0.1
2022-07-14 17:05:42.496 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202712148848283649[0;39m 远程地址: 127.0.0.1
2022-07-14 17:05:42.496 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202712148839895040[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:05:42.496 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202712148848283648[0;39m 请求参数: []
2022-07-14 17:05:42.496 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202712148848283649[0;39m 请求参数: []
2022-07-14 17:05:42.496 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202712148839895040[0;39m ==> Parameters: 
2022-07-14 17:05:42.496 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202712148848283648[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:05:42.496 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202712148848283649[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:05:42.497 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202712148848283648[0;39m ==> Parameters: 
2022-07-14 17:05:42.497 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202712148848283649[0;39m ==> Parameters: 
2022-07-14 17:05:42.497 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202712148839895040[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:05:42.497 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202712148839895040[0;39m <==        Row: 2022-07-13, 93, 18, 96, 21
2022-07-14 17:05:42.498 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202712148848283648[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:05:42.498 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:05:42.498 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202712148848283648[0;39m <==        Row: 2022-07-13, 96, 21
2022-07-14 17:05:42.498 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:05:42.498 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202712148839895040[0;39m <==        Row: 2022-07-14, 105, 24, 12, 6
2022-07-14 17:05:42.498 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202712148848283648[0;39m <==      Total: 1
2022-07-14 17:05:42.498 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:05:42.498 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202712148839895040[0;39m <==      Total: 2
2022-07-14 17:05:42.499 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:05:42.499 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202712148848283648[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21}],"success":true}
2022-07-14 17:05:42.499 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202712148839895040[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":93,"viewIncrease":96,"voteCount":18,"voteIncrease":21},{"date":1657728000000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6}],"success":true}
2022-07-14 17:05:42.499 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202712148848283648[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:05:42.499 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:05:42.499 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202712148839895040[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:05:42.499 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:05:42.500 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:05:42.500 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:05:42.500 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:05:42.501 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:05:42.501 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:05:42.501 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:05:42.502 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:05:42.502 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:05:42.502 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:05:42.503 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:05:42.504 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202712148848283649[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:05:42.504 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202712148848283649[0;39m <==      Total: 16
2022-07-14 17:05:42.505 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202712148848283649[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:05:42.505 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202712148848283649[0;39m ------------- 结束 耗时：10 ms -------------
2022-07-14 17:05:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712159384375296[0;39m 生成今日电子书快照开始
2022-07-14 17:05:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712159384375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712159384375296[0;39m ==> Parameters: 
2022-07-14 17:05:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712159384375296[0;39m <==    Updates: 0
2022-07-14 17:05:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712159384375296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:05:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712180351700992[0;39m 生成今日电子书快照开始
2022-07-14 17:05:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712180351700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712180351700992[0;39m ==> Parameters: 
2022-07-14 17:05:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712180351700992[0;39m <==    Updates: 0
2022-07-14 17:05:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712180351700992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:05:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712201314832384[0;39m 生成今日电子书快照开始
2022-07-14 17:05:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712201314832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:05:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712201314832384[0;39m ==> Parameters: 
2022-07-14 17:05:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712201314832384[0;39m <==    Updates: 0
2022-07-14 17:05:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712201314832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:06:00.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712222282158080[0;39m 生成今日电子书快照开始
2022-07-14 17:06:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712222282158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712222282158080[0;39m ==> Parameters: 
2022-07-14 17:06:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712222282158080[0;39m <==    Updates: 0
2022-07-14 17:06:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712222282158080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:06:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712243253678080[0;39m 生成今日电子书快照开始
2022-07-14 17:06:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712243253678080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712243253678080[0;39m ==> Parameters: 
2022-07-14 17:06:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712243253678080[0;39m <==    Updates: 0
2022-07-14 17:06:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712243253678080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:06:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202712243266260992[0;39m 更新电子书下的文档数据开始
2022-07-14 17:06:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712243266260992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:06:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712243266260992[0;39m ==> Parameters: 
2022-07-14 17:06:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712243266260992[0;39m <==    Updates: 6
2022-07-14 17:06:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202712243266260992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:06:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712264250363904[0;39m 生成今日电子书快照开始
2022-07-14 17:06:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712264250363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712264250363904[0;39m ==> Parameters: 
2022-07-14 17:06:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712264250363904[0;39m <==    Updates: 0
2022-07-14 17:06:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712264250363904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:06:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712285230272512[0;39m 生成今日电子书快照开始
2022-07-14 17:06:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712285230272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712285230272512[0;39m ==> Parameters: 
2022-07-14 17:06:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712285230272512[0;39m <==    Updates: 0
2022-07-14 17:06:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712285230272512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:06:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712306159849472[0;39m 生成今日电子书快照开始
2022-07-14 17:06:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712306159849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712306159849472[0;39m ==> Parameters: 
2022-07-14 17:06:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712306159849472[0;39m <==    Updates: 0
2022-07-14 17:06:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712306159849472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:06:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712327177506816[0;39m 生成今日电子书快照开始
2022-07-14 17:06:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712327177506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712327177506816[0;39m ==> Parameters: 
2022-07-14 17:06:25.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712327177506816[0;39m <==    Updates: 0
2022-07-14 17:06:25.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712327177506816[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 17:06:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712348132249600[0;39m 生成今日电子书快照开始
2022-07-14 17:06:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712348132249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712348132249600[0;39m ==> Parameters: 
2022-07-14 17:06:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712348132249600[0;39m <==    Updates: 0
2022-07-14 17:06:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712348132249600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:06:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712369133129728[0;39m 生成今日电子书快照开始
2022-07-14 17:06:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712369133129728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712369133129728[0;39m ==> Parameters: 
2022-07-14 17:06:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712369133129728[0;39m <==    Updates: 0
2022-07-14 17:06:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712369133129728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:06:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202712369145712640[0;39m 更新电子书下的文档数据开始
2022-07-14 17:06:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712369145712640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:06:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712369145712640[0;39m ==> Parameters: 
2022-07-14 17:06:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712369145712640[0;39m <==    Updates: 6
2022-07-14 17:06:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202712369145712640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:06:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712390075289600[0;39m 生成今日电子书快照开始
2022-07-14 17:06:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712390075289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712390075289600[0;39m ==> Parameters: 
2022-07-14 17:06:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712390075289600[0;39m <==    Updates: 0
2022-07-14 17:06:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712390075289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:06:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712411030032384[0;39m 生成今日电子书快照开始
2022-07-14 17:06:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712411030032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712411030032384[0;39m ==> Parameters: 
2022-07-14 17:06:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712411030032384[0;39m <==    Updates: 0
2022-07-14 17:06:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712411030032384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:06:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712432022523904[0;39m 生成今日电子书快照开始
2022-07-14 17:06:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712432022523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712432022523904[0;39m ==> Parameters: 
2022-07-14 17:06:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712432022523904[0;39m <==    Updates: 0
2022-07-14 17:06:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712432022523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:06:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712453006626816[0;39m 生成今日电子书快照开始
2022-07-14 17:06:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712453006626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:06:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712453006626816[0;39m ==> Parameters: 
2022-07-14 17:06:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712453006626816[0;39m <==    Updates: 0
2022-07-14 17:06:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712453006626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:07:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712473969758208[0;39m 生成今日电子书快照开始
2022-07-14 17:07:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712473969758208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712473969758208[0;39m ==> Parameters: 
2022-07-14 17:07:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712473969758208[0;39m <==    Updates: 0
2022-07-14 17:07:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712473969758208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:07:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202712494903529472[0;39m 更新电子书下的文档数据开始
2022-07-14 17:07:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712494903529472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:07:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712494903529472[0;39m ==> Parameters: 
2022-07-14 17:07:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712494903529472[0;39m <==    Updates: 6
2022-07-14 17:07:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202712494903529472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:07:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712494911918080[0;39m 生成今日电子书快照开始
2022-07-14 17:07:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712494911918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712494911918080[0;39m ==> Parameters: 
2022-07-14 17:07:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712494911918080[0;39m <==    Updates: 0
2022-07-14 17:07:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712494911918080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:07:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712515891826688[0;39m 生成今日电子书快照开始
2022-07-14 17:07:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712515891826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712515891826688[0;39m ==> Parameters: 
2022-07-14 17:07:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712515891826688[0;39m <==    Updates: 0
2022-07-14 17:07:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712515891826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:07:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712536859152384[0;39m 生成今日电子书快照开始
2022-07-14 17:07:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712536859152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712536859152384[0;39m ==> Parameters: 
2022-07-14 17:07:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712536859152384[0;39m <==    Updates: 0
2022-07-14 17:07:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712536859152384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:07:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712557843255296[0;39m 生成今日电子书快照开始
2022-07-14 17:07:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712557843255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712557843255296[0;39m ==> Parameters: 
2022-07-14 17:07:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712557843255296[0;39m <==    Updates: 0
2022-07-14 17:07:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712557843255296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:07:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712578844135424[0;39m 生成今日电子书快照开始
2022-07-14 17:07:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712578844135424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712578844135424[0;39m ==> Parameters: 
2022-07-14 17:07:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712578844135424[0;39m <==    Updates: 0
2022-07-14 17:07:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712578844135424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:07:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712599803072512[0;39m 生成今日电子书快照开始
2022-07-14 17:07:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712599803072512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712599803072512[0;39m ==> Parameters: 
2022-07-14 17:07:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712599803072512[0;39m <==    Updates: 0
2022-07-14 17:07:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712599803072512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:07:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712620749426688[0;39m 生成今日电子书快照开始
2022-07-14 17:07:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712620749426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712620749426688[0;39m ==> Parameters: 
2022-07-14 17:07:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712620749426688[0;39m <==    Updates: 0
2022-07-14 17:07:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712620749426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:07:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202712620757815296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:07:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712620757815296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:07:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712620757815296[0;39m ==> Parameters: 
2022-07-14 17:07:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712620757815296[0;39m <==    Updates: 6
2022-07-14 17:07:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202712620757815296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:07:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712641741918208[0;39m 生成今日电子书快照开始
2022-07-14 17:07:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712641741918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712641741918208[0;39m ==> Parameters: 
2022-07-14 17:07:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712641741918208[0;39m <==    Updates: 0
2022-07-14 17:07:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712641741918208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:07:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712662692466688[0;39m 生成今日电子书快照开始
2022-07-14 17:07:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712662692466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712662692466688[0;39m ==> Parameters: 
2022-07-14 17:07:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712662692466688[0;39m <==    Updates: 0
2022-07-14 17:07:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712662692466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:07:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712683680763904[0;39m 生成今日电子书快照开始
2022-07-14 17:07:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712683680763904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712683680763904[0;39m ==> Parameters: 
2022-07-14 17:07:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712683680763904[0;39m <==    Updates: 0
2022-07-14 17:07:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712683680763904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:07:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712704631312384[0;39m 生成今日电子书快照开始
2022-07-14 17:07:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712704631312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:07:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712704631312384[0;39m ==> Parameters: 
2022-07-14 17:07:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712704631312384[0;39m <==    Updates: 0
2022-07-14 17:07:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712704631312384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:08:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712725615415296[0;39m 生成今日电子书快照开始
2022-07-14 17:08:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712725615415296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712725615415296[0;39m ==> Parameters: 
2022-07-14 17:08:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712725615415296[0;39m <==    Updates: 0
2022-07-14 17:08:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712725615415296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:08:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202712746599518208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:08:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712746599518208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:08:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712746599518208[0;39m ==> Parameters: 
2022-07-14 17:08:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712746599518208[0;39m <==    Updates: 6
2022-07-14 17:08:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202712746599518208[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-14 17:08:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712746612101120[0;39m 生成今日电子书快照开始
2022-07-14 17:08:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712746612101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712746612101120[0;39m ==> Parameters: 
2022-07-14 17:08:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712746612101120[0;39m <==    Updates: 0
2022-07-14 17:08:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712746612101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:08:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712767537483776[0;39m 生成今日电子书快照开始
2022-07-14 17:08:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712767537483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712767537483776[0;39m ==> Parameters: 
2022-07-14 17:08:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712767537483776[0;39m <==    Updates: 0
2022-07-14 17:08:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712767537483776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:08:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712788555141120[0;39m 生成今日电子书快照开始
2022-07-14 17:08:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712788555141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712788555141120[0;39m ==> Parameters: 
2022-07-14 17:08:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712788555141120[0;39m <==    Updates: 0
2022-07-14 17:08:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712788555141120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:08:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712809488912384[0;39m 生成今日电子书快照开始
2022-07-14 17:08:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712809488912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712809488912384[0;39m ==> Parameters: 
2022-07-14 17:08:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712809488912384[0;39m <==    Updates: 0
2022-07-14 17:08:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712809488912384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:08:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712830443655168[0;39m 生成今日电子书快照开始
2022-07-14 17:08:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712830443655168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712830443655168[0;39m ==> Parameters: 
2022-07-14 17:08:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712830443655168[0;39m <==    Updates: 0
2022-07-14 17:08:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712830443655168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:08:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712851461312512[0;39m 生成今日电子书快照开始
2022-07-14 17:08:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712851461312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712851461312512[0;39m ==> Parameters: 
2022-07-14 17:08:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712851461312512[0;39m <==    Updates: 0
2022-07-14 17:08:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712851461312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:08:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202712872432832512[0;39m 更新电子书下的文档数据开始
2022-07-14 17:08:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712872432832512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:08:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712872432832512[0;39m ==> Parameters: 
2022-07-14 17:08:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712872432832512[0;39m <==    Updates: 6
2022-07-14 17:08:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202712872432832512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:08:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712872441221120[0;39m 生成今日电子书快照开始
2022-07-14 17:08:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712872441221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712872441221120[0;39m ==> Parameters: 
2022-07-14 17:08:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712872441221120[0;39m <==    Updates: 0
2022-07-14 17:08:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712872441221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:08:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712893416935424[0;39m 生成今日电子书快照开始
2022-07-14 17:08:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712893416935424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712893416935424[0;39m ==> Parameters: 
2022-07-14 17:08:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712893416935424[0;39m <==    Updates: 0
2022-07-14 17:08:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712893416935424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:08:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712914363289600[0;39m 生成今日电子书快照开始
2022-07-14 17:08:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712914363289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712914363289600[0;39m ==> Parameters: 
2022-07-14 17:08:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712914363289600[0;39m <==    Updates: 0
2022-07-14 17:08:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712914363289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:08:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712935305449472[0;39m 生成今日电子书快照开始
2022-07-14 17:08:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712935305449472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712935305449472[0;39m ==> Parameters: 
2022-07-14 17:08:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712935305449472[0;39m <==    Updates: 0
2022-07-14 17:08:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712935305449472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:08:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712956318912512[0;39m 生成今日电子书快照开始
2022-07-14 17:08:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712956318912512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:08:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712956318912512[0;39m ==> Parameters: 
2022-07-14 17:08:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712956318912512[0;39m <==    Updates: 0
2022-07-14 17:08:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712956318912512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:09:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712977294626816[0;39m 生成今日电子书快照开始
2022-07-14 17:09:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712977294626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712977294626816[0;39m ==> Parameters: 
2022-07-14 17:09:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712977294626816[0;39m <==    Updates: 0
2022-07-14 17:09:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712977294626816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:09:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202712998266146816[0;39m 生成今日电子书快照开始
2022-07-14 17:09:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712998266146816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712998266146816[0;39m ==> Parameters: 
2022-07-14 17:09:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202712998266146816[0;39m <==    Updates: 0
2022-07-14 17:09:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202712998266146816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:09:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202712998278729728[0;39m 更新电子书下的文档数据开始
2022-07-14 17:09:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712998278729728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:09:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712998278729728[0;39m ==> Parameters: 
2022-07-14 17:09:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202712998278729728[0;39m <==    Updates: 6
2022-07-14 17:09:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202712998278729728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:09:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713019191529472[0;39m 生成今日电子书快照开始
2022-07-14 17:09:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713019191529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713019191529472[0;39m ==> Parameters: 
2022-07-14 17:09:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713019191529472[0;39m <==    Updates: 0
2022-07-14 17:09:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713019191529472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:09:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713040175632384[0;39m 生成今日电子书快照开始
2022-07-14 17:09:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713040175632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713040175632384[0;39m ==> Parameters: 
2022-07-14 17:09:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713040175632384[0;39m <==    Updates: 0
2022-07-14 17:09:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713040175632384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:09:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713061155540992[0;39m 生成今日电子书快照开始
2022-07-14 17:09:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713061155540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713061155540992[0;39m ==> Parameters: 
2022-07-14 17:09:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713061155540992[0;39m <==    Updates: 0
2022-07-14 17:09:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713061155540992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:09:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713082135449600[0;39m 生成今日电子书快照开始
2022-07-14 17:09:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713082135449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713082135449600[0;39m ==> Parameters: 
2022-07-14 17:09:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713082135449600[0;39m <==    Updates: 0
2022-07-14 17:09:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713082135449600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:09:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713103111163904[0;39m 生成今日电子书快照开始
2022-07-14 17:09:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713103111163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713103111163904[0;39m ==> Parameters: 
2022-07-14 17:09:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713103111163904[0;39m <==    Updates: 0
2022-07-14 17:09:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713103111163904[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:09:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713124095266816[0;39m 生成今日电子书快照开始
2022-07-14 17:09:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713124095266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713124095266816[0;39m ==> Parameters: 
2022-07-14 17:09:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713124095266816[0;39m <==    Updates: 0
2022-07-14 17:09:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713124095266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:09:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202713124103655424[0;39m 更新电子书下的文档数据开始
2022-07-14 17:09:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713124103655424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:09:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713124103655424[0;39m ==> Parameters: 
2022-07-14 17:09:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713124103655424[0;39m <==    Updates: 6
2022-07-14 17:09:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202713124103655424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:09:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713145050009600[0;39m 生成今日电子书快照开始
2022-07-14 17:09:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713145050009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713145050009600[0;39m ==> Parameters: 
2022-07-14 17:09:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713145050009600[0;39m <==    Updates: 0
2022-07-14 17:09:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713145050009600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:09:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713166025723904[0;39m 生成今日电子书快照开始
2022-07-14 17:09:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713166025723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713166025723904[0;39m ==> Parameters: 
2022-07-14 17:09:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713166025723904[0;39m <==    Updates: 0
2022-07-14 17:09:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713166025723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:09:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713186967883776[0;39m 生成今日电子书快照开始
2022-07-14 17:09:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713186967883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713186967883776[0;39m ==> Parameters: 
2022-07-14 17:09:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713186967883776[0;39m <==    Updates: 0
2022-07-14 17:09:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713186967883776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:09:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713207947792384[0;39m 生成今日电子书快照开始
2022-07-14 17:09:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713207947792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:09:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713207947792384[0;39m ==> Parameters: 
2022-07-14 17:09:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713207947792384[0;39m <==    Updates: 0
2022-07-14 17:09:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713207947792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:10:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713228957061120[0;39m 生成今日电子书快照开始
2022-07-14 17:10:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713228957061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713228957061120[0;39m ==> Parameters: 
2022-07-14 17:10:00.081 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713228957061120[0;39m <==    Updates: 6
2022-07-14 17:10:00.081 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713228957061120[0;39m 生成今日电子书快照结束，耗时：68 毫秒
2022-07-14 17:10:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202713249915998208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:10:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713249915998208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:10:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713249915998208[0;39m ==> Parameters: 
2022-07-14 17:10:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713249915998208[0;39m <==    Updates: 6
2022-07-14 17:10:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202713249915998208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:10:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713249924386816[0;39m 生成今日电子书快照开始
2022-07-14 17:10:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713249924386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713249924386816[0;39m ==> Parameters: 
2022-07-14 17:10:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713249924386816[0;39m <==    Updates: 0
2022-07-14 17:10:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713249924386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:10:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713270891712512[0;39m 生成今日电子书快照开始
2022-07-14 17:10:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713270891712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713270891712512[0;39m ==> Parameters: 
2022-07-14 17:10:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713270891712512[0;39m <==    Updates: 0
2022-07-14 17:10:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713270891712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:10:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713291854843904[0;39m 生成今日电子书快照开始
2022-07-14 17:10:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713291854843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713291854843904[0;39m ==> Parameters: 
2022-07-14 17:10:15.032 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713291854843904[0;39m <==    Updates: 0
2022-07-14 17:10:15.032 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713291854843904[0;39m 生成今日电子书快照结束，耗时：23 毫秒
2022-07-14 17:10:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713312813780992[0;39m 生成今日电子书快照开始
2022-07-14 17:10:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713312813780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713312813780992[0;39m ==> Parameters: 
2022-07-14 17:10:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713312813780992[0;39m <==    Updates: 0
2022-07-14 17:10:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713312813780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:10:20.648 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711967876648960[0;39m 连接关闭，token：Kp1SR9jWCy，session id：1a！当前连接数：0
2022-07-14 17:10:21.276 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711967880843264[0;39m 有新连接：token：wmWeZj4Tfv，session id：1b，当前连接数：1
2022-07-14 17:10:21.331 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713318367039488[0;39m ------------- 开始 -------------
2022-07-14 17:10:21.331 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713318367039488[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:10:21.331 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713318371233792[0;39m ------------- 开始 -------------
2022-07-14 17:10:21.331 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713318367039488[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:10:21.331 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713318371233792[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:10:21.331 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713318367039488[0;39m 远程地址: 127.0.0.1
2022-07-14 17:10:21.331 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713318371233792[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:10:21.332 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713318367039488[0;39m 请求参数: []
2022-07-14 17:10:21.332 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713318375428096[0;39m ------------- 开始 -------------
2022-07-14 17:10:21.332 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713318371233792[0;39m 远程地址: 127.0.0.1
2022-07-14 17:10:21.332 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713318375428096[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:10:21.332 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713318371233792[0;39m 请求参数: []
2022-07-14 17:10:21.332 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713318375428096[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:10:21.332 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713318375428096[0;39m 远程地址: 127.0.0.1
2022-07-14 17:10:21.332 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713318367039488[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:10:21.332 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713318375428096[0;39m 请求参数: []
2022-07-14 17:10:21.332 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713318371233792[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:10:21.332 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713318367039488[0;39m ==> Parameters: 
2022-07-14 17:10:21.333 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713318371233792[0;39m ==> Parameters: 
2022-07-14 17:10:21.333 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713318375428096[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:10:21.333 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713318375428096[0;39m ==> Parameters: 
2022-07-14 17:10:21.333 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713318371233792[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:10:21.333 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713318367039488[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:10:21.334 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713318371233792[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:10:21.334 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713318367039488[0;39m <==        Row: 2022-07-14, 105, 24, 105, 24
2022-07-14 17:10:21.334 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:10:21.334 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713318367039488[0;39m <==      Total: 1
2022-07-14 17:10:21.334 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:10:21.334 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713318371233792[0;39m <==        Row: 2022-07-12, 12, 6
2022-07-14 17:10:21.334 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713318371233792[0;39m <==      Total: 2
2022-07-14 17:10:21.334 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:10:21.334 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713318367039488[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":105,"viewIncrease":105,"voteCount":24,"voteIncrease":24}],"success":true}
2022-07-14 17:10:21.335 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713318371233792[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657555200000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:10:21.335 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713318367039488[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:10:21.335 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:10:21.335 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713318371233792[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:10:21.335 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:10:21.335 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:10:21.335 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:10:21.336 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:10:21.336 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:10:21.336 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:10:21.336 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:10:21.336 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:10:21.336 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:10:21.337 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:10:21.337 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:10:21.337 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:10:21.337 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713318375428096[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:10:21.338 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713318375428096[0;39m <==      Total: 16
2022-07-14 17:10:21.338 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713318375428096[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:10:21.338 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713318375428096[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:10:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713333764329472[0;39m 生成今日电子书快照开始
2022-07-14 17:10:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713333764329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713333764329472[0;39m ==> Parameters: 
2022-07-14 17:10:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713333764329472[0;39m <==    Updates: 0
2022-07-14 17:10:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713333764329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:10:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713354777792512[0;39m 生成今日电子书快照开始
2022-07-14 17:10:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713354777792512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713354777792512[0;39m ==> Parameters: 
2022-07-14 17:10:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713354777792512[0;39m <==    Updates: 0
2022-07-14 17:10:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713354777792512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:10:32.108 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202712148839895040[0;39m 连接关闭，token：wmWeZj4Tfv，session id：1b！当前连接数：0
2022-07-14 17:10:32.884 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202712148848283649[0;39m 有新连接：token：5llOGCtODl，session id：1c，当前连接数：1
2022-07-14 17:10:32.945 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713367083880449[0;39m ------------- 开始 -------------
2022-07-14 17:10:32.945 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713367083880448[0;39m ------------- 开始 -------------
2022-07-14 17:10:32.945 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713367083880448[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:10:32.945 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713367083880450[0;39m ------------- 开始 -------------
2022-07-14 17:10:32.945 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713367083880449[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713367083880448[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713367083880450[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713367083880449[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713367083880448[0;39m 远程地址: 127.0.0.1
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713367083880450[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713367083880449[0;39m 远程地址: 127.0.0.1
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713367083880450[0;39m 远程地址: 127.0.0.1
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713367083880448[0;39m 请求参数: []
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713367083880449[0;39m 请求参数: []
2022-07-14 17:10:32.946 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713367083880450[0;39m 请求参数: []
2022-07-14 17:10:32.947 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713367083880448[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:10:32.947 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713367083880449[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:10:32.947 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713367083880450[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:10:32.947 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713367083880449[0;39m ==> Parameters: 
2022-07-14 17:10:32.947 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713367083880448[0;39m ==> Parameters: 
2022-07-14 17:10:32.947 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713367083880450[0;39m ==> Parameters: 
2022-07-14 17:10:32.948 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:10:32.948 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713367083880448[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:10:32.948 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713367083880449[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:10:32.948 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:10:32.948 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713367083880448[0;39m <==        Row: 2022-07-14, 105, 24, 105, 24
2022-07-14 17:10:32.948 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713367083880449[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:10:32.949 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:10:32.949 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713367083880448[0;39m <==      Total: 1
2022-07-14 17:10:32.949 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713367083880449[0;39m <==        Row: 2022-07-12, 12, 6
2022-07-14 17:10:32.949 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:10:32.949 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713367083880449[0;39m <==      Total: 2
2022-07-14 17:10:32.949 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713367083880448[0;39m 返回结果: {"content":[{"date":1657728000000,"viewCount":105,"viewIncrease":105,"voteCount":24,"voteIncrease":24}],"success":true}
2022-07-14 17:10:32.949 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:10:32.949 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713367083880448[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:10:32.949 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713367083880449[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657555200000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:10:32.949 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:10:32.950 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713367083880449[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:10:32.950 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:10:32.950 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:10:32.950 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:10:32.950 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:10:32.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:10:32.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:10:32.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:10:32.951 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:10:32.952 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:10:32.952 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:10:32.952 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713367083880450[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:10:32.953 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713367083880450[0;39m <==      Total: 16
2022-07-14 17:10:32.953 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713367083880450[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:10:32.953 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713367083880450[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:10:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202713375745118208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:10:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713375745118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:10:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713375745118208[0;39m ==> Parameters: 
2022-07-14 17:10:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713375745118208[0;39m <==    Updates: 6
2022-07-14 17:10:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202713375745118208[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-14 17:10:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713375770284032[0;39m 生成今日电子书快照开始
2022-07-14 17:10:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713375770284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713375770284032[0;39m ==> Parameters: 
2022-07-14 17:10:35.022 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713375770284032[0;39m <==    Updates: 0
2022-07-14 17:10:35.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713375770284032[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:10:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713396699860992[0;39m 生成今日电子书快照开始
2022-07-14 17:10:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713396699860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713396699860992[0;39m ==> Parameters: 
2022-07-14 17:10:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713396699860992[0;39m <==    Updates: 0
2022-07-14 17:10:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713396699860992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:10:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713417696546816[0;39m 生成今日电子书快照开始
2022-07-14 17:10:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713417696546816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713417696546816[0;39m ==> Parameters: 
2022-07-14 17:10:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713417696546816[0;39m <==    Updates: 0
2022-07-14 17:10:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713417696546816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:10:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713438647095296[0;39m 生成今日电子书快照开始
2022-07-14 17:10:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713438647095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713438647095296[0;39m ==> Parameters: 
2022-07-14 17:10:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713438647095296[0;39m <==    Updates: 0
2022-07-14 17:10:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713438647095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:10:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713459652169728[0;39m 生成今日电子书快照开始
2022-07-14 17:10:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713459652169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:10:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713459652169728[0;39m ==> Parameters: 
2022-07-14 17:10:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713459652169728[0;39m <==    Updates: 0
2022-07-14 17:10:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713459652169728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:11:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713480590135296[0;39m 生成今日电子书快照开始
2022-07-14 17:11:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713480590135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713480590135296[0;39m ==> Parameters: 
2022-07-14 17:11:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713480590135296[0;39m <==    Updates: 0
2022-07-14 17:11:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713480590135296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:11:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202713501578432512[0;39m 更新电子书下的文档数据开始
2022-07-14 17:11:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713501578432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:11:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713501578432512[0;39m ==> Parameters: 
2022-07-14 17:11:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713501578432512[0;39m <==    Updates: 6
2022-07-14 17:11:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202713501578432512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:11:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713501586821120[0;39m 生成今日电子书快照开始
2022-07-14 17:11:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713501586821120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713501586821120[0;39m ==> Parameters: 
2022-07-14 17:11:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713501586821120[0;39m <==    Updates: 0
2022-07-14 17:11:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713501586821120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:11:08.769 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711967876648960[0;39m 连接关闭，token：5llOGCtODl，session id：1c！当前连接数：0
2022-07-14 17:11:09.545 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202711967880843264[0;39m 有新连接：token：UcqmriUJ6I，session id：1d，当前连接数：1
2022-07-14 17:11:09.622 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713520918368256[0;39m ------------- 开始 -------------
2022-07-14 17:11:09.622 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713520918368256[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:11:09.622 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713520918368257[0;39m ------------- 开始 -------------
2022-07-14 17:11:09.622 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713520918368256[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:11:09.623 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713520918368257[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:11:09.623 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713520918368256[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:09.623 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713520922562560[0;39m ------------- 开始 -------------
2022-07-14 17:11:09.623 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713520918368256[0;39m 请求参数: []
2022-07-14 17:11:09.623 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713520922562560[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:11:09.623 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713520918368257[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:11:09.623 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713520922562560[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:11:09.623 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713520918368257[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:09.623 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713520922562560[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:09.624 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713520918368257[0;39m 请求参数: []
2022-07-14 17:11:09.624 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713520918368256[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:11:09.624 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713520922562560[0;39m 请求参数: []
2022-07-14 17:11:09.624 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713520918368256[0;39m ==> Parameters: 
2022-07-14 17:11:09.624 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713520918368257[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:11:09.624 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713520922562560[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:11:09.625 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713520918368257[0;39m ==> Parameters: 
2022-07-14 17:11:09.625 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713520922562560[0;39m ==> Parameters: 
2022-07-14 17:11:09.625 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713520918368256[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:11:09.625 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:11:09.625 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713520918368257[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:11:09.625 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713520918368256[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:11:09.625 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:11:09.626 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713520918368257[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:11:09.626 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:11:09.626 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713520918368256[0;39m <==        Row: 2022-07-14, 105, 24, 105, 24
2022-07-14 17:11:09.626 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713520918368257[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:11:09.626 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:11:09.626 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713520918368256[0;39m <==      Total: 2
2022-07-14 17:11:09.626 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713520918368257[0;39m <==      Total: 2
2022-07-14 17:11:09.626 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:11:09.627 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713520918368256[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":105,"viewIncrease":105,"voteCount":24,"voteIncrease":24}],"success":true}
2022-07-14 17:11:09.627 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:11:09.627 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713520918368257[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:11:09.627 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713520918368256[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:11:09.627 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713520918368257[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:11:09.627 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:11:09.627 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:11:09.628 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:11:09.628 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:11:09.628 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:11:09.628 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:11:09.629 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:11:09.629 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:11:09.629 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:11:09.630 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:11:09.630 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713520922562560[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:11:09.630 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713520922562560[0;39m <==      Total: 16
2022-07-14 17:11:09.631 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713520922562560[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:11:09.631 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713520922562560[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:11:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713522516398080[0;39m 生成今日电子书快照开始
2022-07-14 17:11:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713522516398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713522516398080[0;39m ==> Parameters: 
2022-07-14 17:11:10.041 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713522516398080[0;39m <==    Updates: 0
2022-07-14 17:11:10.041 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713522516398080[0;39m 生成今日电子书快照结束，耗时：38 毫秒
2022-07-14 17:11:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713543529861120[0;39m 生成今日电子书快照开始
2022-07-14 17:11:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713543529861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713543529861120[0;39m ==> Parameters: 
2022-07-14 17:11:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713543529861120[0;39m <==    Updates: 0
2022-07-14 17:11:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713543529861120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:11:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713564459438080[0;39m 生成今日电子书快照开始
2022-07-14 17:11:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713564459438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713564459438080[0;39m ==> Parameters: 
2022-07-14 17:11:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713564459438080[0;39m <==    Updates: 0
2022-07-14 17:11:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713564459438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:11:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713585481289728[0;39m 生成今日电子书快照开始
2022-07-14 17:11:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713585481289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713585481289728[0;39m ==> Parameters: 
2022-07-14 17:11:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713585481289728[0;39m <==    Updates: 0
2022-07-14 17:11:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713585481289728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:11:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713606452809728[0;39m 生成今日电子书快照开始
2022-07-14 17:11:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713606452809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713606452809728[0;39m ==> Parameters: 
2022-07-14 17:11:30.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713606452809728[0;39m <==    Updates: 0
2022-07-14 17:11:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713606452809728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:11:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202713627365609472[0;39m 更新电子书下的文档数据开始
2022-07-14 17:11:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713627365609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:11:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713627365609472[0;39m ==> Parameters: 
2022-07-14 17:11:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713627365609472[0;39m <==    Updates: 6
2022-07-14 17:11:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202713627365609472[0;39m 更新电子书下的文档数据结束，耗时：9 毫秒
2022-07-14 17:11:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713627403358208[0;39m 生成今日电子书快照开始
2022-07-14 17:11:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713627403358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713627403358208[0;39m ==> Parameters: 
2022-07-14 17:11:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713627403358208[0;39m <==    Updates: 0
2022-07-14 17:11:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713627403358208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:11:38.910 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713643761143808[0;39m ------------- 开始 -------------
2022-07-14 17:11:38.910 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713643761143808[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:11:38.911 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713643761143808[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:11:38.911 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713643761143808[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:38.911 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713643761143808[0;39m 请求参数: [{"categoryId2":301,"page":1,"size":1000}]
2022-07-14 17:11:38.913 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713643761143808[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:11:38.914 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713643761143808[0;39m ==> Parameters: 301(Long)
2022-07-14 17:11:38.915 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713643761143808[0;39m <==    Columns: count(0)
2022-07-14 17:11:38.915 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713643761143808[0;39m <==        Row: 1
2022-07-14 17:11:38.915 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713643761143808[0;39m <==      Total: 1
2022-07-14 17:11:38.915 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713643761143808[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 17:11:38.915 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713643761143808[0;39m ==> Parameters: 301(Long), 1000(Integer)
2022-07-14 17:11:38.916 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713643761143808[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:11:38.916 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713643761143808[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2022-07-14 17:11:38.916 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713643761143808[0;39m <==      Total: 1
2022-07-14 17:11:38.917 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202713643761143808[0;39m 总行数：1
2022-07-14 17:11:38.917 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202713643761143808[0;39m 总页数：1
2022-07-14 17:11:38.917 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713643761143808[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":0,"voteCount":0}],"total":1},"success":true}
2022-07-14 17:11:38.917 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713643761143808[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:11:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713648366489600[0;39m 生成今日电子书快照开始
2022-07-14 17:11:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713648366489600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713648366489600[0;39m ==> Parameters: 
2022-07-14 17:11:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713648366489600[0;39m <==    Updates: 0
2022-07-14 17:11:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713648366489600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:11:40.079 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713648664285184[0;39m ------------- 开始 -------------
2022-07-14 17:11:40.079 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713648664285184[0;39m 请求地址: http://127.0.0.1:8880/doc/all/3 GET
2022-07-14 17:11:40.080 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713648664285184[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:11:40.080 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713648664285184[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:40.080 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713648664285184[0;39m 请求参数: [3]
2022-07-14 17:11:40.080 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202713648664285184[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:11:40.081 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202713648664285184[0;39m ==> Parameters: 3(Long)
2022-07-14 17:11:40.081 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202713648664285184[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:11:40.082 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202713648664285184[0;39m <==        Row: 202710301211234304, 3, 0, Python, 2, 0, 0
2022-07-14 17:11:40.082 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202713648664285184[0;39m <==      Total: 1
2022-07-14 17:11:40.082 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713648664285184[0;39m 返回结果: {"content":[{"ebookId":3,"id":202710301211234304,"name":"Python","parent":0,"sort":2,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:11:40.083 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713648664285184[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:11:40.093 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713648723005440[0;39m ------------- 开始 -------------
2022-07-14 17:11:40.094 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713648723005440[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202710301211234304 GET
2022-07-14 17:11:40.094 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713648723005440[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:11:40.094 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713648723005440[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:40.094 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713648723005440[0;39m 请求参数: [202710301211234304]
2022-07-14 17:11:40.095 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202713648723005440[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:11:40.095 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202713648723005440[0;39m ==> Parameters: 202710301211234304(Long)
2022-07-14 17:11:40.101 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202713648723005440[0;39m <==    Columns: id, content
2022-07-14 17:11:40.101 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202713648723005440[0;39m <==        Row: 202710301211234304, <<BLOB>>
2022-07-14 17:11:40.102 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202713648723005440[0;39m <==      Total: 1
2022-07-14 17:11:40.104 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202713648723005440[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:11:40.104 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202713648723005440[0;39m ==> Parameters: 202710301211234304(Long)
2022-07-14 17:11:40.190 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202713648723005440[0;39m <==    Updates: 1
2022-07-14 17:11:40.191 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713648723005440[0;39m 返回结果: {"content":"<blockquote><p>人脸识别</p></blockquote>","success":true}
2022-07-14 17:11:40.191 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713648723005440[0;39m ------------- 结束 耗时：98 ms -------------
2022-07-14 17:11:41.185 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713653303185408[0;39m ------------- 开始 -------------
2022-07-14 17:11:41.185 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713653303185408[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202710301211234304 GET
2022-07-14 17:11:41.186 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713653303185408[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:11:41.186 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713653303185408[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:41.186 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713653303185408[0;39m 请求参数: [202710301211234304]
2022-07-14 17:11:41.219 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202713653303185408[0;39m key不存在，放入：DOC_VOTE_202710301211234304_127.0.0.1，过期 86400 秒
2022-07-14 17:11:41.254 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202713653303185408[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:11:41.255 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202713653303185408[0;39m ==> Parameters: 202710301211234304(Long)
2022-07-14 17:11:41.279 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202713653303185408[0;39m <==    Updates: 1
2022-07-14 17:11:41.280 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202713653303185408[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:11:41.281 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202713653303185408[0;39m ==> Parameters: 202710301211234304(Long)
2022-07-14 17:11:41.282 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202713653303185408[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:11:41.283 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202713653303185408[0;39m <==        Row: 202710301211234304, 3, 0, Python, 2, 1, 1
2022-07-14 17:11:41.283 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202713653303185408[0;39m <==      Total: 1
2022-07-14 17:11:41.284 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713653303185408[0;39m 返回结果: {"success":true}
2022-07-14 17:11:41.284 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713653303185408[0;39m ------------- 结束 耗时：99 ms -------------
2022-07-14 17:11:41.285 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202713653303185408[0;39m 推送消息：UcqmriUJ6I，内容：【Python】被点赞
2022-07-14 17:11:42.419 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713658478956544[0;39m ------------- 开始 -------------
2022-07-14 17:11:42.420 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713658483150848[0;39m ------------- 开始 -------------
2022-07-14 17:11:42.420 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713658478956544[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:11:42.420 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713658483150848[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:11:42.420 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713658478956544[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:11:42.420 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713658483150848[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:11:42.420 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713658478956544[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:42.420 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713658483150848[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:42.420 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713658478956544[0;39m 请求参数: []
2022-07-14 17:11:42.421 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713658483150848[0;39m 请求参数: []
2022-07-14 17:11:42.421 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713658478956544[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:11:42.421 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713658483150848[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:11:42.421 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713658487345152[0;39m ------------- 开始 -------------
2022-07-14 17:11:42.421 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713658487345152[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:11:42.421 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713658483150848[0;39m ==> Parameters: 
2022-07-14 17:11:42.421 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713658478956544[0;39m ==> Parameters: 
2022-07-14 17:11:42.422 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713658487345152[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:11:42.422 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713658487345152[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:42.422 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713658487345152[0;39m 请求参数: []
2022-07-14 17:11:42.422 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713658478956544[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:11:42.422 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713658483150848[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:11:42.423 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713658487345152[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:11:42.423 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713658483150848[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:11:42.423 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713658478956544[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:11:42.423 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713658487345152[0;39m ==> Parameters: 
2022-07-14 17:11:42.423 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713658483150848[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:11:42.423 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713658478956544[0;39m <==        Row: 2022-07-14, 105, 24, 0, 0
2022-07-14 17:11:42.423 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713658483150848[0;39m <==      Total: 2
2022-07-14 17:11:42.424 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713658478956544[0;39m <==      Total: 2
2022-07-14 17:11:42.424 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713658483150848[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:11:42.424 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713658483150848[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:11:42.424 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713658478956544[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":105,"viewIncrease":0,"voteCount":24,"voteIncrease":0}],"success":true}
2022-07-14 17:11:42.424 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:11:42.424 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713658478956544[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:11:42.424 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:11:42.424 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:11:42.425 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:11:42.425 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:11:42.425 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:11:42.425 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:11:42.426 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:11:42.426 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:11:42.426 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:11:42.427 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:11:42.427 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:11:42.427 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:11:42.427 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:11:42.427 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:11:42.427 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:11:42.428 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713658487345152[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:11:42.428 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713658487345152[0;39m <==      Total: 16
2022-07-14 17:11:42.428 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713658487345152[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:11:42.428 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713658487345152[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:11:44.041 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202712148839895040[0;39m 连接关闭，token：UcqmriUJ6I，session id：1d！当前连接数：0
2022-07-14 17:11:44.665 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202713643761143808[0;39m 有新连接：token：oGyyNhzXuF，session id：1e，当前连接数：1
2022-07-14 17:11:44.721 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713668134244352[0;39m ------------- 开始 -------------
2022-07-14 17:11:44.722 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713668134244352[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:11:44.722 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713668134244352[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:11:44.722 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713668134244352[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:44.722 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713668138438656[0;39m ------------- 开始 -------------
2022-07-14 17:11:44.722 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713668138438657[0;39m ------------- 开始 -------------
2022-07-14 17:11:44.722 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713668134244352[0;39m 请求参数: []
2022-07-14 17:11:44.722 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713668138438656[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:11:44.722 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713668138438657[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:11:44.723 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713668138438656[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:11:44.723 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713668138438657[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:11:44.723 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713668134244352[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:11:44.723 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713668138438656[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:44.723 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713668138438657[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:44.723 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713668138438656[0;39m 请求参数: []
2022-07-14 17:11:44.723 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713668134244352[0;39m ==> Parameters: 
2022-07-14 17:11:44.723 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713668138438657[0;39m 请求参数: []
2022-07-14 17:11:44.723 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713668138438656[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:11:44.723 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713668138438657[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:11:44.724 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713668138438656[0;39m ==> Parameters: 
2022-07-14 17:11:44.724 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713668134244352[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:11:44.724 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713668138438657[0;39m ==> Parameters: 
2022-07-14 17:11:44.724 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713668134244352[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:11:44.724 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:11:44.724 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713668134244352[0;39m <==        Row: 2022-07-14, 105, 24, 0, 0
2022-07-14 17:11:44.724 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713668138438656[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:11:44.725 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:11:44.725 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713668134244352[0;39m <==      Total: 2
2022-07-14 17:11:44.725 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:11:44.725 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713668138438656[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:11:44.725 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713668134244352[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":105,"viewIncrease":0,"voteCount":24,"voteIncrease":0}],"success":true}
2022-07-14 17:11:44.725 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:11:44.725 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713668134244352[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:11:44.725 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:11:44.725 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713668138438656[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:11:44.725 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:11:44.725 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:11:44.725 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713668138438656[0;39m <==      Total: 2
2022-07-14 17:11:44.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:11:44.726 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713668138438656[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:11:44.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:11:44.726 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713668138438656[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:11:44.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:11:44.726 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:11:44.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:11:44.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:11:44.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:11:44.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:11:44.727 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:11:44.728 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713668138438657[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:11:44.728 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713668138438657[0;39m <==      Total: 16
2022-07-14 17:11:44.728 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713668138438657[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:11:44.728 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713668138438657[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:11:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713669308649472[0;39m 生成今日电子书快照开始
2022-07-14 17:11:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713669308649472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713669308649472[0;39m ==> Parameters: 
2022-07-14 17:11:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713669308649472[0;39m <==    Updates: 0
2022-07-14 17:11:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713669308649472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:11:47.212 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711967876648960[0;39m 连接关闭，token：oGyyNhzXuF，session id：1e！当前连接数：0
2022-07-14 17:11:47.624 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202713653303185408[0;39m 有新连接：token：Fil6e2XSyL，session id：1f，当前连接数：1
2022-07-14 17:11:47.679 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713680540995584[0;39m ------------- 开始 -------------
2022-07-14 17:11:47.679 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713680540995585[0;39m ------------- 开始 -------------
2022-07-14 17:11:47.679 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713680540995586[0;39m ------------- 开始 -------------
2022-07-14 17:11:47.679 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713680540995584[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:11:47.679 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713680540995585[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:11:47.679 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713680540995586[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:11:47.680 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713680540995584[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:11:47.680 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713680540995585[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:11:47.680 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713680540995586[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:11:47.680 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713680540995584[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:47.680 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713680540995586[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:47.680 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713680540995585[0;39m 远程地址: 127.0.0.1
2022-07-14 17:11:47.680 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713680540995584[0;39m 请求参数: []
2022-07-14 17:11:47.680 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713680540995586[0;39m 请求参数: []
2022-07-14 17:11:47.680 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713680540995585[0;39m 请求参数: []
2022-07-14 17:11:47.681 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713680540995584[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:11:47.681 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713680540995586[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:11:47.681 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713680540995585[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:11:47.681 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713680540995584[0;39m ==> Parameters: 
2022-07-14 17:11:47.681 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713680540995586[0;39m ==> Parameters: 
2022-07-14 17:11:47.681 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713680540995585[0;39m ==> Parameters: 
2022-07-14 17:11:47.682 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713680540995586[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:11:47.682 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713680540995584[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:11:47.682 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:11:47.682 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713680540995586[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:11:47.682 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713680540995584[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:11:47.682 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:11:47.682 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713680540995586[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:11:47.682 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:11:47.682 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713680540995584[0;39m <==        Row: 2022-07-14, 105, 24, 0, 0
2022-07-14 17:11:47.683 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713680540995586[0;39m <==      Total: 2
2022-07-14 17:11:47.683 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713680540995584[0;39m <==      Total: 2
2022-07-14 17:11:47.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:11:47.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:11:47.683 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713680540995586[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:11:47.683 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713680540995584[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":105,"viewIncrease":0,"voteCount":24,"voteIncrease":0}],"success":true}
2022-07-14 17:11:47.683 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713680540995586[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:11:47.683 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:11:47.683 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713680540995584[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:11:47.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:11:47.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:11:47.684 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:11:47.685 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:11:47.685 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:11:47.685 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:11:47.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:11:47.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:11:47.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:11:47.686 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:11:47.687 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713680540995585[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:11:47.687 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713680540995585[0;39m <==      Total: 16
2022-07-14 17:11:47.688 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713680540995585[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:11:47.688 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713680540995585[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 17:11:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713690326306816[0;39m 生成今日电子书快照开始
2022-07-14 17:11:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713690326306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713690326306816[0;39m ==> Parameters: 
2022-07-14 17:11:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713690326306816[0;39m <==    Updates: 0
2022-07-14 17:11:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713690326306816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:11:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713711297826816[0;39m 生成今日电子书快照开始
2022-07-14 17:11:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713711297826816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:11:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713711297826816[0;39m ==> Parameters: 
2022-07-14 17:11:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713711297826816[0;39m <==    Updates: 0
2022-07-14 17:11:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713711297826816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:11:59.271 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202712148839895040[0;39m 连接关闭，token：Fil6e2XSyL，session id：1f！当前连接数：0
2022-07-14 17:12:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713732281929728[0;39m 生成今日电子书快照开始
2022-07-14 17:12:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713732281929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713732281929728[0;39m ==> Parameters: 
2022-07-14 17:12:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713732281929728[0;39m <==    Updates: 0
2022-07-14 17:12:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713732281929728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:12:00.059 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202713643761143808[0;39m 有新连接：token：FloSduTZrF，session id：20，当前连接数：1
2022-07-14 17:12:00.116 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713732705554432[0;39m ------------- 开始 -------------
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713732705554434[0;39m ------------- 开始 -------------
2022-07-14 17:12:00.116 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713732705554433[0;39m ------------- 开始 -------------
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713732705554432[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713732705554434[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713732705554433[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713732705554432[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713732705554434[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713732705554433[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713732705554432[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713732705554434[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713732705554433[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713732705554432[0;39m 请求参数: []
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713732705554434[0;39m 请求参数: []
2022-07-14 17:12:00.117 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713732705554433[0;39m 请求参数: []
2022-07-14 17:12:00.118 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713732705554434[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:12:00.118 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713732705554433[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:12:00.118 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713732705554432[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:12:00.118 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713732705554434[0;39m ==> Parameters: 
2022-07-14 17:12:00.118 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713732705554433[0;39m ==> Parameters: 
2022-07-14 17:12:00.118 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713732705554432[0;39m ==> Parameters: 
2022-07-14 17:12:00.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:12:00.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:12:00.119 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713732705554433[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:12:00.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:12:00.119 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713732705554432[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:12:00.119 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713732705554433[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:12:00.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:12:00.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:12:00.119 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713732705554432[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:12:00.119 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713732705554433[0;39m <==        Row: 2022-07-14, 105, 24, 0, 0
2022-07-14 17:12:00.119 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:12:00.120 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713732705554433[0;39m <==      Total: 2
2022-07-14 17:12:00.120 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:12:00.120 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713732705554432[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:12:00.120 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713732705554433[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":105,"viewIncrease":0,"voteCount":24,"voteIncrease":0}],"success":true}
2022-07-14 17:12:00.120 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:12:00.120 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713732705554433[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:12:00.120 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713732705554432[0;39m <==      Total: 2
2022-07-14 17:12:00.120 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:12:00.120 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713732705554432[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:12:00.120 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:12:00.120 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713732705554432[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:12:00.121 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:12:00.121 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:12:00.121 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:12:00.121 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:12:00.121 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:12:00.122 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:12:00.122 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713732705554434[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:12:00.122 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713732705554434[0;39m <==      Total: 16
2022-07-14 17:12:00.123 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713732705554434[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:12:00.123 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713732705554434[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:12:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202713753203118080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:12:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713753203118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:12:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713753203118080[0;39m ==> Parameters: 
2022-07-14 17:12:05.105 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713753203118080[0;39m <==    Updates: 6
2022-07-14 17:12:05.105 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202713753203118080[0;39m 更新电子书下的文档数据结束，耗时：102 毫秒
2022-07-14 17:12:05.106 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713753635131392[0;39m 生成今日电子书快照开始
2022-07-14 17:12:05.106 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713753635131392[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:05.106 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713753635131392[0;39m ==> Parameters: 
2022-07-14 17:12:05.134 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713753635131392[0;39m <==    Updates: 0
2022-07-14 17:12:05.134 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713753635131392[0;39m 生成今日电子书快照结束，耗时：28 毫秒
2022-07-14 17:12:09.226 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202711967876648960[0;39m 连接关闭，token：FloSduTZrF，session id：20！当前连接数：0
2022-07-14 17:12:09.688 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202713653303185408[0;39m 有新连接：token：v5MNXFsZyw，session id：21，当前连接数：1
2022-07-14 17:12:09.769 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713773193170944[0;39m ------------- 开始 -------------
2022-07-14 17:12:09.769 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713773193170944[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:12:09.770 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713773193170944[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:12:09.770 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713773197365248[0;39m ------------- 开始 -------------
2022-07-14 17:12:09.770 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713773193170944[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:09.770 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713773197365248[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:12:09.770 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713773193170944[0;39m 请求参数: []
2022-07-14 17:12:09.770 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713773197365248[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:12:09.771 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713773197365248[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:09.771 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713773193170944[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:12:09.771 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713773197365248[0;39m 请求参数: []
2022-07-14 17:12:09.771 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713773201559552[0;39m ------------- 开始 -------------
2022-07-14 17:12:09.771 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713773201559552[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:12:09.771 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713773193170944[0;39m ==> Parameters: 
2022-07-14 17:12:09.771 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713773197365248[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:12:09.771 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713773201559552[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:12:09.772 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713773201559552[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:09.772 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713773197365248[0;39m ==> Parameters: 
2022-07-14 17:12:09.772 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713773201559552[0;39m 请求参数: []
2022-07-14 17:12:09.772 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713773193170944[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:12:09.772 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713773201559552[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:12:09.772 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713773197365248[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:12:09.772 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713773193170944[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:12:09.773 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713773197365248[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:12:09.773 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713773201559552[0;39m ==> Parameters: 
2022-07-14 17:12:09.773 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202713773193170944[0;39m <==        Row: 2022-07-14, 106, 25, 1, 1
2022-07-14 17:12:09.773 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202713773197365248[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:12:09.773 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202713773193170944[0;39m <==      Total: 2
2022-07-14 17:12:09.773 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202713773197365248[0;39m <==      Total: 2
2022-07-14 17:12:09.774 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713773193170944[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":106,"viewIncrease":1,"voteCount":25,"voteIncrease":1}],"success":true}
2022-07-14 17:12:09.774 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713773197365248[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:12:09.774 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:12:09.774 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713773193170944[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:12:09.774 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713773197365248[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:12:09.774 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:12:09.774 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:12:09.774 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:12:09.775 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:12:09.775 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:12:09.775 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:12:09.776 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:12:09.776 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:12:09.776 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:12:09.776 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:12:09.777 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:12:09.777 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:12:09.777 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:12:09.778 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:12:09.778 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:12:09.778 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713773201559552[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:12:09.779 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713773201559552[0;39m <==      Total: 16
2022-07-14 17:12:09.779 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713773201559552[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:12:09.780 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713773201559552[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 17:12:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713774195609600[0;39m 生成今日电子书快照开始
2022-07-14 17:12:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713774195609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713774195609600[0;39m ==> Parameters: 
2022-07-14 17:12:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713774195609600[0;39m <==    Updates: 0
2022-07-14 17:12:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713774195609600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:12:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713795154546688[0;39m 生成今日电子书快照开始
2022-07-14 17:12:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713795154546688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713795154546688[0;39m ==> Parameters: 
2022-07-14 17:12:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713795154546688[0;39m <==    Updates: 0
2022-07-14 17:12:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713795154546688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:12:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713816126066688[0;39m 生成今日电子书快照开始
2022-07-14 17:12:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713816126066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713816126066688[0;39m ==> Parameters: 
2022-07-14 17:12:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713816126066688[0;39m <==    Updates: 0
2022-07-14 17:12:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713816126066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:12:20.214 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713817002676224[0;39m ------------- 开始 -------------
2022-07-14 17:12:20.214 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713817002676224[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:12:20.214 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713817002676224[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:12:20.214 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713817002676224[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:20.214 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713817002676224[0;39m 请求参数: []
2022-07-14 17:12:20.215 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713817002676224[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:12:20.215 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713817002676224[0;39m ==> Parameters: 
2022-07-14 17:12:20.216 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:12:20.216 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:12:20.216 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:12:20.216 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:12:20.216 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:12:20.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:12:20.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:12:20.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:12:20.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:12:20.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:12:20.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:12:20.217 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:12:20.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:12:20.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:12:20.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:12:20.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:12:20.218 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713817002676224[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:12:20.218 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713817002676224[0;39m <==      Total: 16
2022-07-14 17:12:20.219 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713817002676224[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:12:20.219 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713817002676224[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:12:20.231 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713817073979392[0;39m ------------- 开始 -------------
2022-07-14 17:12:20.231 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713817073979392[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:12:20.231 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713817073979392[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:12:20.231 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713817073979392[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:20.231 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713817073979392[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:12:20.232 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713817073979392[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:12:20.233 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713817073979392[0;39m ==> Parameters: 
2022-07-14 17:12:20.233 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713817073979392[0;39m <==    Columns: count(0)
2022-07-14 17:12:20.233 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713817073979392[0;39m <==        Row: 6
2022-07-14 17:12:20.233 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713817073979392[0;39m <==      Total: 1
2022-07-14 17:12:20.234 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713817073979392[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:12:20.234 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713817073979392[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:12:20.234 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713817073979392[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:12:20.235 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713817073979392[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:12:20.235 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713817073979392[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:12:20.235 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713817073979392[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:12:20.235 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713817073979392[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:12:20.235 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713817073979392[0;39m <==      Total: 4
2022-07-14 17:12:20.236 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202713817073979392[0;39m 总行数：6
2022-07-14 17:12:20.236 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202713817073979392[0;39m 总页数：2
2022-07-14 17:12:20.236 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713817073979392[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 17:12:20.236 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713817073979392[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:12:24.330 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713834266431488[0;39m ------------- 开始 -------------
2022-07-14 17:12:24.330 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713834266431488[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:12:24.331 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713834266431488[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:12:24.331 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713834266431488[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:24.331 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713834266431488[0;39m 请求参数: [{"page":2,"size":4}]
2022-07-14 17:12:24.332 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713834266431488[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:12:24.332 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713834266431488[0;39m ==> Parameters: 
2022-07-14 17:12:24.333 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713834266431488[0;39m <==    Columns: count(0)
2022-07-14 17:12:24.333 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713834266431488[0;39m <==        Row: 6
2022-07-14 17:12:24.333 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713834266431488[0;39m <==      Total: 1
2022-07-14 17:12:24.334 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713834266431488[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2022-07-14 17:12:24.334 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713834266431488[0;39m ==> Parameters: 4(Long), 4(Integer)
2022-07-14 17:12:24.335 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713834266431488[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:12:24.335 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713834266431488[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2022-07-14 17:12:24.336 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713834266431488[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 5, 1
2022-07-14 17:12:24.336 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713834266431488[0;39m <==      Total: 2
2022-07-14 17:12:24.337 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202713834266431488[0;39m 总行数：6
2022-07-14 17:12:24.337 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202713834266431488[0;39m 总页数：2
2022-07-14 17:12:24.338 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713834266431488[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":5,"voteCount":1}],"total":6},"success":true}
2022-07-14 17:12:24.338 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713834266431488[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:12:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713837097586688[0;39m 生成今日电子书快照开始
2022-07-14 17:12:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713837097586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713837097586688[0;39m ==> Parameters: 
2022-07-14 17:12:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713837097586688[0;39m <==    Updates: 0
2022-07-14 17:12:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713837097586688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:12:26.287 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713842474684416[0;39m ------------- 开始 -------------
2022-07-14 17:12:26.287 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713842474684416[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:12:26.287 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713842474684416[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:12:26.287 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713842474684416[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:26.288 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713842474684416[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:12:26.289 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713842474684416[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:12:26.289 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713842474684416[0;39m ==> Parameters: 
2022-07-14 17:12:26.290 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713842474684416[0;39m <==    Columns: count(0)
2022-07-14 17:12:26.290 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713842474684416[0;39m <==        Row: 6
2022-07-14 17:12:26.290 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713842474684416[0;39m <==      Total: 1
2022-07-14 17:12:26.291 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713842474684416[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:12:26.291 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713842474684416[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:12:26.292 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713842474684416[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:12:26.292 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713842474684416[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:12:26.292 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713842474684416[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:12:26.292 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713842474684416[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:12:26.293 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713842474684416[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:12:26.293 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713842474684416[0;39m <==      Total: 4
2022-07-14 17:12:26.293 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202713842474684416[0;39m 总行数：6
2022-07-14 17:12:26.293 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202713842474684416[0;39m 总页数：2
2022-07-14 17:12:26.294 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713842474684416[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 17:12:26.294 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713842474684416[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:12:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713858069106688[0;39m 生成今日电子书快照开始
2022-07-14 17:12:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713858069106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713858069106688[0;39m ==> Parameters: 
2022-07-14 17:12:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713858069106688[0;39m <==    Updates: 0
2022-07-14 17:12:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713858069106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:12:32.277 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713867598565376[0;39m ------------- 开始 -------------
2022-07-14 17:12:32.277 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713867598565376[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2022-07-14 17:12:32.277 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713867598565376[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:12:32.278 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713867598565376[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:32.278 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713867598565376[0;39m 请求参数: [1]
2022-07-14 17:12:32.279 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202713867598565376[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:12:32.279 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202713867598565376[0;39m ==> Parameters: 1(Long)
2022-07-14 17:12:32.280 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202713867598565376[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:12:32.280 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202713867598565376[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 33, 4
2022-07-14 17:12:32.281 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202713867598565376[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 10, 3
2022-07-14 17:12:32.281 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202713867598565376[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 7, 2
2022-07-14 17:12:32.281 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202713867598565376[0;39m <==        Row: 6, 1, 5, 文档2.2.1, 1, 5, 2
2022-07-14 17:12:32.282 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202713867598565376[0;39m <==        Row: 3, 1, 0, 文档2, 2, 4, 1
2022-07-14 17:12:32.282 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202713867598565376[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 4, 1
2022-07-14 17:12:32.282 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202713867598565376[0;39m <==      Total: 6
2022-07-14 17:12:32.283 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713867598565376[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":33,"voteCount":4},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":7,"voteCount":2},{"ebookId":1,"id":6,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":2},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":4,"voteCount":1}],"success":true}
2022-07-14 17:12:32.283 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713867598565376[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:12:34.475 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202711967876648960[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:12:34.476 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202711967876648960[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user_wiki/list
2022-07-14 17:12:34.476 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202711967876648960[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:12:34.509 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202711967876648960[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:12:34.509 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713876960251904[0;39m ------------- 开始 -------------
2022-07-14 17:12:34.509 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713876960251904[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/list GET
2022-07-14 17:12:34.509 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713876960251904[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.list
2022-07-14 17:12:34.509 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713876960251904[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:34.509 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713876960251904[0;39m 请求参数: [{"page":1,"size":10}]
2022-07-14 17:12:34.510 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202713876960251904[0;39m ==>  Preparing: SELECT count(0) FROM userwiki
2022-07-14 17:12:34.511 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202713876960251904[0;39m ==> Parameters: 
2022-07-14 17:12:34.516 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202713876960251904[0;39m <==    Columns: count(0)
2022-07-14 17:12:34.517 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202713876960251904[0;39m <==        Row: 3
2022-07-14 17:12:34.517 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202713876960251904[0;39m <==      Total: 1
2022-07-14 17:12:34.517 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202713876960251904[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki LIMIT ?
2022-07-14 17:12:34.518 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202713876960251904[0;39m ==> Parameters: 10(Integer)
2022-07-14 17:12:34.521 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202713876960251904[0;39m <==    Columns: id, login_name, name, password
2022-07-14 17:12:34.521 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202713876960251904[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:12:34.522 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202713876960251904[0;39m <==        Row: 2, zhangshuo, 张硕, 48d6e4c28cd6d6dbc85b94988c174851
2022-07-14 17:12:34.522 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202713876960251904[0;39m <==        Row: 3, zhangyishan, 张一山, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:12:34.522 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202713876960251904[0;39m <==      Total: 3
2022-07-14 17:12:34.522 INFO  com.zs.wikibb.service.UserwikiService             :49  
                [32m202713876960251904[0;39m 总行数：3
2022-07-14 17:12:34.522 INFO  com.zs.wikibb.service.UserwikiService             :50  
                [32m202713876960251904[0;39m 总页数：1
2022-07-14 17:12:34.523 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713876960251904[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":2,"loginName":"zhangshuo","name":"张硕"},{"id":3,"loginName":"zhangyishan","name":"张一山"}],"total":3},"success":true}
2022-07-14 17:12:34.523 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713876960251904[0;39m ------------- 结束 耗时：14 ms -------------
2022-07-14 17:12:34.523 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202713876960251904[0;39m ------------- LoginInterceptor 结束 耗时：47 ms -------------
2022-07-14 17:12:35.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202713879069986816[0;39m 更新电子书下的文档数据开始
2022-07-14 17:12:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713879069986816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:12:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713879069986816[0;39m ==> Parameters: 
2022-07-14 17:12:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202713879069986816[0;39m <==    Updates: 6
2022-07-14 17:12:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202713879069986816[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:12:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713879078375424[0;39m 生成今日电子书快照开始
2022-07-14 17:12:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713879078375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713879078375424[0;39m ==> Parameters: 
2022-07-14 17:12:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713879078375424[0;39m <==    Updates: 0
2022-07-14 17:12:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713879078375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:12:35.980 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713883130073088[0;39m ------------- 开始 -------------
2022-07-14 17:12:35.980 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713883130073088[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:12:35.980 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713883130073088[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:12:35.981 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713883130073088[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:35.981 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713883130073088[0;39m 请求参数: []
2022-07-14 17:12:35.981 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713883130073088[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:12:35.981 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713883130073088[0;39m ==> Parameters: 
2022-07-14 17:12:35.982 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:12:35.982 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:12:35.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:12:35.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:12:35.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:12:35.983 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:12:35.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:12:35.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:12:35.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:12:35.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:12:35.984 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:12:35.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:12:35.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:12:35.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:12:35.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:12:35.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:12:35.985 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713883130073088[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:12:35.986 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713883130073088[0;39m <==      Total: 16
2022-07-14 17:12:35.986 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713883130073088[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:12:35.986 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713883130073088[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:12:35.994 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713883188793344[0;39m ------------- 开始 -------------
2022-07-14 17:12:35.994 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713883188793344[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:12:35.995 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713883188793344[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:12:35.995 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713883188793344[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:35.995 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713883188793344[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:12:35.996 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713883188793344[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:12:35.996 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713883188793344[0;39m ==> Parameters: 
2022-07-14 17:12:35.996 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713883188793344[0;39m <==    Columns: count(0)
2022-07-14 17:12:35.996 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202713883188793344[0;39m <==        Row: 6
2022-07-14 17:12:35.997 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202713883188793344[0;39m <==      Total: 1
2022-07-14 17:12:35.997 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713883188793344[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:12:35.997 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713883188793344[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:12:35.998 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713883188793344[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:12:35.998 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713883188793344[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:12:35.998 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713883188793344[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:12:35.998 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713883188793344[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:12:35.998 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202713883188793344[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:12:35.999 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202713883188793344[0;39m <==      Total: 4
2022-07-14 17:12:35.999 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202713883188793344[0;39m 总行数：6
2022-07-14 17:12:35.999 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202713883188793344[0;39m 总页数：2
2022-07-14 17:12:36.000 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713883188793344[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 17:12:36.000 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713883188793344[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:12:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713900037312512[0;39m 生成今日电子书快照开始
2022-07-14 17:12:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713900037312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713900037312512[0;39m ==> Parameters: 
2022-07-14 17:12:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713900037312512[0;39m <==    Updates: 0
2022-07-14 17:12:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713900037312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:12:40.888 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202713903715717120[0;39m ------------- 开始 -------------
2022-07-14 17:12:40.888 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202713903715717120[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:12:40.888 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202713903715717120[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:12:40.889 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202713903715717120[0;39m 远程地址: 127.0.0.1
2022-07-14 17:12:40.889 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202713903715717120[0;39m 请求参数: []
2022-07-14 17:12:40.889 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713903715717120[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:12:40.889 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713903715717120[0;39m ==> Parameters: 
2022-07-14 17:12:40.890 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:12:40.890 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:12:40.890 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:12:40.890 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:12:40.891 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:12:40.891 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:12:40.891 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:12:40.891 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 181311914796781568, 200, test2, 231
2022-07-14 17:12:40.891 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:12:40.891 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:12:40.892 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:12:40.892 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:12:40.892 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:12:40.892 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:12:40.892 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:12:40.892 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:12:40.892 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202713903715717120[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:12:40.893 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202713903715717120[0;39m <==      Total: 16
2022-07-14 17:12:40.893 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202713903715717120[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"test2","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:12:40.893 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202713903715717120[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:12:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713921008832512[0;39m 生成今日电子书快照开始
2022-07-14 17:12:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713921008832512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713921008832512[0;39m ==> Parameters: 
2022-07-14 17:12:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713921008832512[0;39m <==    Updates: 0
2022-07-14 17:12:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713921008832512[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:12:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713941950992384[0;39m 生成今日电子书快照开始
2022-07-14 17:12:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713941950992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713941950992384[0;39m ==> Parameters: 
2022-07-14 17:12:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713941950992384[0;39m <==    Updates: 0
2022-07-14 17:12:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713941950992384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:12:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713962909929472[0;39m 生成今日电子书快照开始
2022-07-14 17:12:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713962909929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:12:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713962909929472[0;39m ==> Parameters: 
2022-07-14 17:12:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713962909929472[0;39m <==    Updates: 0
2022-07-14 17:12:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713962909929472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202713983927586816[0;39m 生成今日电子书快照开始
2022-07-14 17:13:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713983927586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713983927586816[0;39m ==> Parameters: 
2022-07-14 17:13:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202713983927586816[0;39m <==    Updates: 0
2022-07-14 17:13:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202713983927586816[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:13:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714004903301120[0;39m 生成今日电子书快照开始
2022-07-14 17:13:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714004903301120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714004903301120[0;39m ==> Parameters: 
2022-07-14 17:13:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714004903301120[0;39m <==    Updates: 0
2022-07-14 17:13:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714004903301120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:05.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202714004911689728[0;39m 更新电子书下的文档数据开始
2022-07-14 17:13:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714004911689728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:13:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714004911689728[0;39m ==> Parameters: 
2022-07-14 17:13:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714004911689728[0;39m <==    Updates: 6
2022-07-14 17:13:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202714004911689728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:13:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714025853849600[0;39m 生成今日电子书快照开始
2022-07-14 17:13:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714025853849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714025853849600[0;39m ==> Parameters: 
2022-07-14 17:13:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714025853849600[0;39m <==    Updates: 0
2022-07-14 17:13:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714025853849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714046858924032[0;39m 生成今日电子书快照开始
2022-07-14 17:13:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714046858924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714046858924032[0;39m ==> Parameters: 
2022-07-14 17:13:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714046858924032[0;39m <==    Updates: 0
2022-07-14 17:13:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714046858924032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714067784306688[0;39m 生成今日电子书快照开始
2022-07-14 17:13:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714067784306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714067784306688[0;39m ==> Parameters: 
2022-07-14 17:13:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714067784306688[0;39m <==    Updates: 0
2022-07-14 17:13:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714067784306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714088760020992[0;39m 生成今日电子书快照开始
2022-07-14 17:13:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714088760020992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714088760020992[0;39m ==> Parameters: 
2022-07-14 17:13:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714088760020992[0;39m <==    Updates: 0
2022-07-14 17:13:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714088760020992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:28.166 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202713817073979392[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:13:28.166 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202713817073979392[0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2022-07-14 17:13:28.169 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202713834266431488[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:13:28.169 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202713834266431488[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/category/save
2022-07-14 17:13:28.169 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202713834266431488[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:13:28.203 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202713834266431488[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:13:28.206 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714102181793792[0;39m ------------- 开始 -------------
2022-07-14 17:13:28.207 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714102181793792[0;39m 请求地址: http://127.0.0.1:8880/category/save POST
2022-07-14 17:13:28.207 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714102181793792[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.save
2022-07-14 17:13:28.207 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714102181793792[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:28.208 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714102181793792[0;39m 请求参数: [{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231}]
2022-07-14 17:13:28.211 DEBUG c.z.w.mapper.CategoryMapper.updateByPrimaryKey    :137 
                [32m202714102181793792[0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2022-07-14 17:13:28.212 DEBUG c.z.w.mapper.CategoryMapper.updateByPrimaryKey    :137 
                [32m202714102181793792[0;39m ==> Parameters: 200(Long), SpringBoot+Vue3 前后端分离知识库系统(String), 231(Integer), 181311914796781568(Long)
2022-07-14 17:13:28.238 DEBUG c.z.w.mapper.CategoryMapper.updateByPrimaryKey    :137 
                [32m202714102181793792[0;39m <==    Updates: 1
2022-07-14 17:13:28.238 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714102181793792[0;39m 返回结果: {"success":true}
2022-07-14 17:13:28.238 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714102181793792[0;39m ------------- 结束 耗时：32 ms -------------
2022-07-14 17:13:28.238 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202714102181793792[0;39m ------------- LoginInterceptor 结束 耗时：69 ms -------------
2022-07-14 17:13:28.271 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714102454423552[0;39m ------------- 开始 -------------
2022-07-14 17:13:28.271 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714102454423552[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:13:28.272 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714102454423552[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:13:28.272 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714102454423552[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:28.272 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714102454423552[0;39m 请求参数: []
2022-07-14 17:13:28.272 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714102454423552[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:13:28.272 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714102454423552[0;39m ==> Parameters: 
2022-07-14 17:13:28.273 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:13:28.273 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:13:28.273 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:13:28.274 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:13:28.274 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:13:28.274 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:13:28.274 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:13:28.274 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:13:28.274 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:13:28.275 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:13:28.275 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:13:28.275 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:13:28.275 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:13:28.275 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:13:28.275 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:13:28.276 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:13:28.276 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714102454423552[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:13:28.276 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714102454423552[0;39m <==      Total: 16
2022-07-14 17:13:28.277 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714102454423552[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:13:28.277 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714102454423552[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:13:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714109760901120[0;39m 生成今日电子书快照开始
2022-07-14 17:13:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714109760901120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714109760901120[0;39m ==> Parameters: 
2022-07-14 17:13:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714109760901120[0;39m <==    Updates: 0
2022-07-14 17:13:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714109760901120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:30.120 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714110209691648[0;39m ------------- 开始 -------------
2022-07-14 17:13:30.120 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714110209691648[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:13:30.121 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714110209691648[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:13:30.121 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714110213885953[0;39m ------------- 开始 -------------
2022-07-14 17:13:30.121 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714110213885952[0;39m ------------- 开始 -------------
2022-07-14 17:13:30.121 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714110209691648[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:30.121 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714110213885953[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:13:30.121 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714110213885952[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:13:30.122 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714110209691648[0;39m 请求参数: []
2022-07-14 17:13:30.122 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714110213885953[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:13:30.122 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714110213885952[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:13:30.122 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714110213885953[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:30.122 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714110213885952[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:30.122 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714110213885953[0;39m 请求参数: []
2022-07-14 17:13:30.122 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202714110209691648[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:13:30.122 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714110213885952[0;39m 请求参数: []
2022-07-14 17:13:30.122 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202714110213885953[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:13:30.122 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202714110209691648[0;39m ==> Parameters: 
2022-07-14 17:13:30.122 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714110213885952[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:13:30.123 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202714110213885953[0;39m ==> Parameters: 
2022-07-14 17:13:30.123 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714110213885952[0;39m ==> Parameters: 
2022-07-14 17:13:30.123 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202714110209691648[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:13:30.123 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202714110213885953[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:13:30.123 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:13:30.123 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202714110209691648[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:13:30.124 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:13:30.124 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202714110213885953[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:13:30.124 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:13:30.124 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202714110213885953[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:13:30.124 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202714110209691648[0;39m <==        Row: 2022-07-14, 106, 25, 1, 1
2022-07-14 17:13:30.124 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:13:30.124 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202714110213885953[0;39m <==      Total: 2
2022-07-14 17:13:30.124 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202714110209691648[0;39m <==      Total: 2
2022-07-14 17:13:30.124 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:13:30.125 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714110213885953[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:13:30.125 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:13:30.125 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714110209691648[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":106,"viewIncrease":1,"voteCount":25,"voteIncrease":1}],"success":true}
2022-07-14 17:13:30.125 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714110213885953[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:13:30.125 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714110209691648[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:13:30.125 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:13:30.125 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:13:30.126 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:13:30.126 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:13:30.126 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:13:30.127 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:13:30.127 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:13:30.127 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:13:30.128 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:13:30.128 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:13:30.128 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714110213885952[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:13:30.128 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714110213885952[0;39m <==      Total: 16
2022-07-14 17:13:30.129 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714110213885952[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:13:30.129 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714110213885952[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:13:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714130690478080[0;39m 生成今日电子书快照开始
2022-07-14 17:13:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714130690478080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714130690478080[0;39m ==> Parameters: 
2022-07-14 17:13:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714130690478080[0;39m <==    Updates: 0
2022-07-14 17:13:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714130690478080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:35.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202714130698866688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:13:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714130698866688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:13:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714130698866688[0;39m ==> Parameters: 
2022-07-14 17:13:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714130698866688[0;39m <==    Updates: 6
2022-07-14 17:13:35.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202714130698866688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:13:35.121 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714131185405952[0;39m ------------- 开始 -------------
2022-07-14 17:13:35.121 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714131185405952[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:13:35.121 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714131185405952[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:13:35.121 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714131185405952[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:35.122 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714131185405952[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-14 17:13:35.123 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714131185405952[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:13:35.123 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714131185405952[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-14 17:13:35.124 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714131185405952[0;39m <==    Columns: count(0)
2022-07-14 17:13:35.124 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714131185405952[0;39m <==        Row: 0
2022-07-14 17:13:35.125 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714131185405952[0;39m <==      Total: 1
2022-07-14 17:13:35.125 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714131185405952[0;39m 总行数：0
2022-07-14 17:13:35.125 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714131185405952[0;39m 总页数：0
2022-07-14 17:13:35.125 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714131185405952[0;39m 返回结果: {"content":{"list":[],"total":0},"success":true}
2022-07-14 17:13:35.126 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714131185405952[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:13:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714151674580992[0;39m 生成今日电子书快照开始
2022-07-14 17:13:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714151674580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714151674580992[0;39m ==> Parameters: 
2022-07-14 17:13:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714151674580992[0;39m <==    Updates: 0
2022-07-14 17:13:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714151674580992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:40.057 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714151888490496[0;39m ------------- 开始 -------------
2022-07-14 17:13:40.057 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714151888490496[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:13:40.057 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714151888490496[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:13:40.057 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714151888490496[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:40.057 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714151888490496[0;39m 请求参数: []
2022-07-14 17:13:40.058 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714151888490496[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:13:40.058 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714151888490496[0;39m ==> Parameters: 
2022-07-14 17:13:40.059 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:13:40.059 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:13:40.059 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:13:40.059 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:13:40.059 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:13:40.059 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:13:40.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:13:40.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:13:40.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:13:40.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:13:40.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:13:40.060 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:13:40.061 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:13:40.061 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:13:40.061 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:13:40.061 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:13:40.061 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714151888490496[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:13:40.061 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714151888490496[0;39m <==      Total: 16
2022-07-14 17:13:40.062 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714151888490496[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:13:40.062 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714151888490496[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:13:40.073 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714151955599360[0;39m ------------- 开始 -------------
2022-07-14 17:13:40.073 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714151955599360[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:13:40.074 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714151955599360[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:13:40.074 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714151955599360[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:40.074 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714151955599360[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:13:40.075 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714151955599360[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:13:40.075 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714151955599360[0;39m ==> Parameters: 
2022-07-14 17:13:40.076 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714151955599360[0;39m <==    Columns: count(0)
2022-07-14 17:13:40.076 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714151955599360[0;39m <==        Row: 6
2022-07-14 17:13:40.076 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714151955599360[0;39m <==      Total: 1
2022-07-14 17:13:40.076 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714151955599360[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:13:40.076 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714151955599360[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:13:40.077 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714151955599360[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:13:40.077 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714151955599360[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:13:40.077 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714151955599360[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:13:40.077 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714151955599360[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:13:40.078 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714151955599360[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:13:40.078 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714151955599360[0;39m <==      Total: 4
2022-07-14 17:13:40.078 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714151955599360[0;39m 总行数：6
2022-07-14 17:13:40.078 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714151955599360[0;39m 总页数：2
2022-07-14 17:13:40.078 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714151955599360[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 17:13:40.079 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714151955599360[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:13:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714172633518080[0;39m 生成今日电子书快照开始
2022-07-14 17:13:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714172633518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714172633518080[0;39m ==> Parameters: 
2022-07-14 17:13:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714172633518080[0;39m <==    Updates: 0
2022-07-14 17:13:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714172633518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:13:46.777 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714180074213376[0;39m ------------- 开始 -------------
2022-07-14 17:13:46.777 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714180074213376[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:13:46.777 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714180074213376[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:13:46.777 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714180074213376[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:46.778 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714180074213376[0;39m 请求参数: [{"page":2,"size":4}]
2022-07-14 17:13:46.779 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714180074213376[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:13:46.779 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714180074213376[0;39m ==> Parameters: 
2022-07-14 17:13:46.780 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714180074213376[0;39m <==    Columns: count(0)
2022-07-14 17:13:46.780 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714180074213376[0;39m <==        Row: 6
2022-07-14 17:13:46.780 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714180074213376[0;39m <==      Total: 1
2022-07-14 17:13:46.780 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714180074213376[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2022-07-14 17:13:46.781 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714180074213376[0;39m ==> Parameters: 4(Long), 4(Integer)
2022-07-14 17:13:46.782 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714180074213376[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:13:46.782 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714180074213376[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2022-07-14 17:13:46.782 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714180074213376[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 5, 1
2022-07-14 17:13:46.782 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714180074213376[0;39m <==      Total: 2
2022-07-14 17:13:46.783 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714180074213376[0;39m 总行数：6
2022-07-14 17:13:46.783 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714180074213376[0;39m 总页数：2
2022-07-14 17:13:46.783 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714180074213376[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":5,"voteCount":1}],"total":6},"success":true}
2022-07-14 17:13:46.783 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714180074213376[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:13:48.840 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714188727062528[0;39m ------------- 开始 -------------
2022-07-14 17:13:48.840 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714188727062528[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:13:48.841 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714188727062528[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:13:48.841 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714188727062528[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:48.841 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714188727062528[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:13:48.843 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714188727062528[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:13:48.843 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714188727062528[0;39m ==> Parameters: 
2022-07-14 17:13:48.844 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714188727062528[0;39m <==    Columns: count(0)
2022-07-14 17:13:48.844 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714188727062528[0;39m <==        Row: 6
2022-07-14 17:13:48.844 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714188727062528[0;39m <==      Total: 1
2022-07-14 17:13:48.844 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714188727062528[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:13:48.845 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714188727062528[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:13:48.845 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714188727062528[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:13:48.846 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714188727062528[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:13:48.846 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714188727062528[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:13:48.846 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714188727062528[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:13:48.846 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714188727062528[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:13:48.847 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714188727062528[0;39m <==      Total: 4
2022-07-14 17:13:48.847 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714188727062528[0;39m 总行数：6
2022-07-14 17:13:48.847 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714188727062528[0;39m 总页数：2
2022-07-14 17:13:48.847 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714188727062528[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 17:13:48.847 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714188727062528[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:13:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714193638592512[0;39m 生成今日电子书快照开始
2022-07-14 17:13:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714193638592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714193638592512[0;39m ==> Parameters: 
2022-07-14 17:13:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714193638592512[0;39m <==    Updates: 0
2022-07-14 17:13:50.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714193638592512[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 17:13:52.126 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714102454423552[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:13:52.126 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714102454423552[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user_wiki/list
2022-07-14 17:13:52.126 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714102454423552[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:13:52.160 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714102454423552[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:13:52.160 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714202652151808[0;39m ------------- 开始 -------------
2022-07-14 17:13:52.160 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714202652151808[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/list GET
2022-07-14 17:13:52.161 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714202652151808[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.list
2022-07-14 17:13:52.161 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714202652151808[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:52.161 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714202652151808[0;39m 请求参数: [{"page":1,"size":10}]
2022-07-14 17:13:52.162 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202714202652151808[0;39m ==>  Preparing: SELECT count(0) FROM userwiki
2022-07-14 17:13:52.162 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202714202652151808[0;39m ==> Parameters: 
2022-07-14 17:13:52.162 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202714202652151808[0;39m <==    Columns: count(0)
2022-07-14 17:13:52.163 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202714202652151808[0;39m <==        Row: 3
2022-07-14 17:13:52.163 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202714202652151808[0;39m <==      Total: 1
2022-07-14 17:13:52.163 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202714202652151808[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki LIMIT ?
2022-07-14 17:13:52.163 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202714202652151808[0;39m ==> Parameters: 10(Integer)
2022-07-14 17:13:52.164 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714202652151808[0;39m <==    Columns: id, login_name, name, password
2022-07-14 17:13:52.164 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714202652151808[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:13:52.165 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714202652151808[0;39m <==        Row: 2, zhangshuo, 张硕, 48d6e4c28cd6d6dbc85b94988c174851
2022-07-14 17:13:52.165 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714202652151808[0;39m <==        Row: 3, zhangyishan, 张一山, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:13:52.165 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202714202652151808[0;39m <==      Total: 3
2022-07-14 17:13:52.166 INFO  com.zs.wikibb.service.UserwikiService             :49  
                [32m202714202652151808[0;39m 总行数：3
2022-07-14 17:13:52.166 INFO  com.zs.wikibb.service.UserwikiService             :50  
                [32m202714202652151808[0;39m 总页数：1
2022-07-14 17:13:52.167 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714202652151808[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":2,"loginName":"zhangshuo","name":"张硕"},{"id":3,"loginName":"zhangyishan","name":"张一山"}],"total":3},"success":true}
2022-07-14 17:13:52.167 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714202652151808[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:13:52.167 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202714202652151808[0;39m ------------- LoginInterceptor 结束 耗时：41 ms -------------
2022-07-14 17:13:53.563 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714208536760320[0;39m ------------- 开始 -------------
2022-07-14 17:13:53.563 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714208536760320[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:13:53.564 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714208536760320[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:13:53.564 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714208536760320[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:53.564 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714208536760320[0;39m 请求参数: []
2022-07-14 17:13:53.565 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714208536760320[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:13:53.566 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714208536760320[0;39m ==> Parameters: 
2022-07-14 17:13:53.566 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:13:53.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:13:53.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:13:53.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:13:53.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:13:53.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:13:53.568 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:13:53.568 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:13:53.568 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:13:53.568 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:13:53.568 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:13:53.568 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:13:53.569 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:13:53.569 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:13:53.569 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:13:53.569 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:13:53.569 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714208536760320[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:13:53.569 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714208536760320[0;39m <==      Total: 16
2022-07-14 17:13:53.570 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714208536760320[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:13:53.570 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714208536760320[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:13:53.580 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714208608063488[0;39m ------------- 开始 -------------
2022-07-14 17:13:53.580 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714208608063488[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:13:53.581 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714208608063488[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:13:53.581 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714208608063488[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:53.581 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714208608063488[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:13:53.583 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714208608063488[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:13:53.584 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714208608063488[0;39m ==> Parameters: 
2022-07-14 17:13:53.585 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714208608063488[0;39m <==    Columns: count(0)
2022-07-14 17:13:53.585 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714208608063488[0;39m <==        Row: 6
2022-07-14 17:13:53.585 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714208608063488[0;39m <==      Total: 1
2022-07-14 17:13:53.586 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714208608063488[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:13:53.586 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714208608063488[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:13:53.587 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714208608063488[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:13:53.587 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714208608063488[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:13:53.587 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714208608063488[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:13:53.587 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714208608063488[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:13:53.588 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714208608063488[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:13:53.588 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714208608063488[0;39m <==      Total: 4
2022-07-14 17:13:53.588 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714208608063488[0;39m 总行数：6
2022-07-14 17:13:53.588 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714208608063488[0;39m 总页数：2
2022-07-14 17:13:53.589 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714208608063488[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 17:13:53.589 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714208608063488[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 17:13:53.875 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714209845383168[0;39m ------------- 开始 -------------
2022-07-14 17:13:53.875 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714209845383168[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:13:53.876 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714209845383168[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:13:53.876 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714209845383168[0;39m 远程地址: 127.0.0.1
2022-07-14 17:13:53.876 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714209845383168[0;39m 请求参数: []
2022-07-14 17:13:53.876 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714209845383168[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:13:53.877 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714209845383168[0;39m ==> Parameters: 
2022-07-14 17:13:53.877 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:13:53.877 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:13:53.878 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:13:53.878 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:13:53.878 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:13:53.878 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:13:53.878 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:13:53.878 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:13:53.879 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:13:53.879 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:13:53.879 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:13:53.879 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:13:53.879 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:13:53.879 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:13:53.880 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:13:53.880 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:13:53.880 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714209845383168[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:13:53.880 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714209845383168[0;39m <==      Total: 16
2022-07-14 17:13:53.881 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714209845383168[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:13:53.881 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714209845383168[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:13:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714214605918208[0;39m 生成今日电子书快照开始
2022-07-14 17:13:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714214605918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:13:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714214605918208[0;39m ==> Parameters: 
2022-07-14 17:13:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714214605918208[0;39m <==    Updates: 0
2022-07-14 17:13:55.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714214605918208[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 17:14:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714235569049600[0;39m 生成今日电子书快照开始
2022-07-14 17:14:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714235569049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714235569049600[0;39m ==> Parameters: 
2022-07-14 17:14:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714235569049600[0;39m <==    Updates: 0
2022-07-14 17:14:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714235569049600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:14:01.099 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202713883188793344[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:14:01.099 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202713883188793344[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/category/save
2022-07-14 17:14:01.099 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202713883188793344[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:14:01.134 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202713883188793344[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:14:01.135 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714240296030208[0;39m ------------- 开始 -------------
2022-07-14 17:14:01.136 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714240296030208[0;39m 请求地址: http://127.0.0.1:8880/category/save POST
2022-07-14 17:14:01.136 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714240296030208[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.save
2022-07-14 17:14:01.136 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714240296030208[0;39m 远程地址: 127.0.0.1
2022-07-14 17:14:01.136 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714240296030208[0;39m 请求参数: [{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231}]
2022-07-14 17:14:01.137 DEBUG c.z.w.mapper.CategoryMapper.updateByPrimaryKey    :137 
                [32m202714240296030208[0;39m ==>  Preparing: update category set parent = ?, `name` = ?, sort = ? where id = ?
2022-07-14 17:14:01.137 DEBUG c.z.w.mapper.CategoryMapper.updateByPrimaryKey    :137 
                [32m202714240296030208[0;39m ==> Parameters: 200(Long), SpringBoot+Vue3 前后端分离知识库系统(String), 231(Integer), 181311914796781568(Long)
2022-07-14 17:14:01.138 DEBUG c.z.w.mapper.CategoryMapper.updateByPrimaryKey    :137 
                [32m202714240296030208[0;39m <==    Updates: 1
2022-07-14 17:14:01.138 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714240296030208[0;39m 返回结果: {"success":true}
2022-07-14 17:14:01.138 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714240296030208[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:14:01.138 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202714240296030208[0;39m ------------- LoginInterceptor 结束 耗时：39 ms -------------
2022-07-14 17:14:01.174 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714240459608064[0;39m ------------- 开始 -------------
2022-07-14 17:14:01.175 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714240459608064[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:14:01.175 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714240459608064[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:14:01.175 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714240459608064[0;39m 远程地址: 127.0.0.1
2022-07-14 17:14:01.175 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714240459608064[0;39m 请求参数: []
2022-07-14 17:14:01.176 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714240459608064[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:14:01.176 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714240459608064[0;39m ==> Parameters: 
2022-07-14 17:14:01.177 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:14:01.177 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:14:01.177 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:14:01.177 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:14:01.178 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:14:01.178 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:14:01.178 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:14:01.178 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:14:01.178 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:14:01.179 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:14:01.179 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:14:01.179 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:14:01.179 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:14:01.179 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:14:01.179 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:14:01.180 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:14:01.180 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714240459608064[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:14:01.180 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714240459608064[0;39m <==      Total: 16
2022-07-14 17:14:01.180 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714240459608064[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:14:01.181 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714240459608064[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:14:02.009 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714243961851904[0;39m ------------- 开始 -------------
2022-07-14 17:14:02.010 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714243961851904[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:14:02.010 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714243961851904[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:14:02.010 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714243961851904[0;39m 远程地址: 127.0.0.1
2022-07-14 17:14:02.010 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714243961851904[0;39m 请求参数: []
2022-07-14 17:14:02.011 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714243961851904[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:14:02.011 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714243961851904[0;39m ==> Parameters: 
2022-07-14 17:14:02.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:14:02.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:14:02.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:14:02.012 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:14:02.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:14:02.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:14:02.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:14:02.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:14:02.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:14:02.013 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:14:02.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:14:02.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:14:02.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:14:02.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:14:02.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:14:02.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:14:02.014 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714243961851904[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:14:02.015 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714243961851904[0;39m <==      Total: 16
2022-07-14 17:14:02.015 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714243961851904[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:14:02.015 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714243961851904[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:14:02.028 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714244041543680[0;39m ------------- 开始 -------------
2022-07-14 17:14:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714244041543680[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:14:02.029 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714244041543680[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:14:02.030 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714244041543680[0;39m 远程地址: 127.0.0.1
2022-07-14 17:14:02.030 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714244041543680[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:14:02.031 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714244041543680[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:14:02.031 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714244041543680[0;39m ==> Parameters: 
2022-07-14 17:14:02.031 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714244041543680[0;39m <==    Columns: count(0)
2022-07-14 17:14:02.032 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714244041543680[0;39m <==        Row: 6
2022-07-14 17:14:02.032 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714244041543680[0;39m <==      Total: 1
2022-07-14 17:14:02.032 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714244041543680[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:14:02.032 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714244041543680[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:14:02.033 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714244041543680[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:14:02.033 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714244041543680[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:14:02.033 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714244041543680[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:14:02.033 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714244041543680[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:14:02.033 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714244041543680[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:14:02.034 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714244041543680[0;39m <==      Total: 4
2022-07-14 17:14:02.034 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714244041543680[0;39m 总行数：6
2022-07-14 17:14:02.034 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714244041543680[0;39m 总页数：2
2022-07-14 17:14:02.034 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714244041543680[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":6},"success":true}
2022-07-14 17:14:02.034 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714244041543680[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:14:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202714256527986688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:14:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714256527986688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:14:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714256527986688[0;39m ==> Parameters: 
2022-07-14 17:14:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714256527986688[0;39m <==    Updates: 6
2022-07-14 17:14:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202714256527986688[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:14:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714256536375296[0;39m 生成今日电子书快照开始
2022-07-14 17:14:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714256536375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714256536375296[0;39m ==> Parameters: 
2022-07-14 17:14:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714256536375296[0;39m <==    Updates: 0
2022-07-14 17:14:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714256536375296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:14:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714277545644032[0;39m 生成今日电子书快照开始
2022-07-14 17:14:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714277545644032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714277545644032[0;39m ==> Parameters: 
2022-07-14 17:14:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714277545644032[0;39m <==    Updates: 0
2022-07-14 17:14:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714277545644032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:14:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714298496192512[0;39m 生成今日电子书快照开始
2022-07-14 17:14:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714298496192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714298496192512[0;39m ==> Parameters: 
2022-07-14 17:14:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714298496192512[0;39m <==    Updates: 0
2022-07-14 17:14:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714298496192512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:14:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714319480295424[0;39m 生成今日电子书快照开始
2022-07-14 17:14:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714319480295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714319480295424[0;39m ==> Parameters: 
2022-07-14 17:14:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714319480295424[0;39m <==    Updates: 0
2022-07-14 17:14:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714319480295424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:14:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714340439232512[0;39m 生成今日电子书快照开始
2022-07-14 17:14:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714340439232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714340439232512[0;39m ==> Parameters: 
2022-07-14 17:14:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714340439232512[0;39m <==    Updates: 0
2022-07-14 17:14:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714340439232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:14:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714361389780992[0;39m 生成今日电子书快照开始
2022-07-14 17:14:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714361389780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714361389780992[0;39m ==> Parameters: 
2022-07-14 17:14:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714361389780992[0;39m <==    Updates: 0
2022-07-14 17:14:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714361389780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:14:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202714382382272512[0;39m 更新电子书下的文档数据开始
2022-07-14 17:14:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714382382272512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:14:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714382382272512[0;39m ==> Parameters: 
2022-07-14 17:14:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714382382272512[0;39m <==    Updates: 6
2022-07-14 17:14:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202714382382272512[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:14:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714382390661120[0;39m 生成今日电子书快照开始
2022-07-14 17:14:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714382390661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714382390661120[0;39m ==> Parameters: 
2022-07-14 17:14:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714382390661120[0;39m <==    Updates: 0
2022-07-14 17:14:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714382390661120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:14:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714403324432384[0;39m 生成今日电子书快照开始
2022-07-14 17:14:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714403324432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714403324432384[0;39m ==> Parameters: 
2022-07-14 17:14:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714403324432384[0;39m <==    Updates: 0
2022-07-14 17:14:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714403324432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:14:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714424346284032[0;39m 生成今日电子书快照开始
2022-07-14 17:14:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714424346284032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714424346284032[0;39m ==> Parameters: 
2022-07-14 17:14:45.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714424346284032[0;39m <==    Updates: 0
2022-07-14 17:14:45.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714424346284032[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:14:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714445280055296[0;39m 生成今日电子书快照开始
2022-07-14 17:14:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714445280055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714445280055296[0;39m ==> Parameters: 
2022-07-14 17:14:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714445280055296[0;39m <==    Updates: 0
2022-07-14 17:14:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714445280055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:14:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714466234798080[0;39m 生成今日电子书快照开始
2022-07-14 17:14:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714466234798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:14:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714466234798080[0;39m ==> Parameters: 
2022-07-14 17:14:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714466234798080[0;39m <==    Updates: 0
2022-07-14 17:14:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714466234798080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:15:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714487210512384[0;39m 生成今日电子书快照开始
2022-07-14 17:15:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714487210512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714487210512384[0;39m ==> Parameters: 
2022-07-14 17:15:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714487210512384[0;39m <==    Updates: 0
2022-07-14 17:15:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714487210512384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:15:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202714508177838080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:15:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714508177838080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:15:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714508177838080[0;39m ==> Parameters: 
2022-07-14 17:15:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714508177838080[0;39m <==    Updates: 6
2022-07-14 17:15:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202714508177838080[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-14 17:15:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714508207198208[0;39m 生成今日电子书快照开始
2022-07-14 17:15:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714508207198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714508207198208[0;39m ==> Parameters: 
2022-07-14 17:15:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714508207198208[0;39m <==    Updates: 0
2022-07-14 17:15:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714508207198208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:15:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714529145163776[0;39m 生成今日电子书快照开始
2022-07-14 17:15:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714529145163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714529145163776[0;39m ==> Parameters: 
2022-07-14 17:15:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714529145163776[0;39m <==    Updates: 0
2022-07-14 17:15:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714529145163776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:15:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714550133460992[0;39m 生成今日电子书快照开始
2022-07-14 17:15:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714550133460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714550133460992[0;39m ==> Parameters: 
2022-07-14 17:15:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714550133460992[0;39m <==    Updates: 0
2022-07-14 17:15:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714550133460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:15:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714571109175296[0;39m 生成今日电子书快照开始
2022-07-14 17:15:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714571109175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714571109175296[0;39m ==> Parameters: 
2022-07-14 17:15:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714571109175296[0;39m <==    Updates: 0
2022-07-14 17:15:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714571109175296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:15:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714592068112384[0;39m 生成今日电子书快照开始
2022-07-14 17:15:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714592068112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714592068112384[0;39m ==> Parameters: 
2022-07-14 17:15:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714592068112384[0;39m <==    Updates: 0
2022-07-14 17:15:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202714592068112384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:15:27.021 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714208536760320[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:15:27.021 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202714208536760320[0;39m ------------- LoginInterceptor 结束 耗时：0 ms -------------
2022-07-14 17:15:27.023 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714208608063488[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:15:27.023 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714208608063488[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/ebook/save
2022-07-14 17:15:27.023 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714208608063488[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:15:27.056 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714208608063488[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:15:27.061 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714600695795712[0;39m ------------- 开始 -------------
2022-07-14 17:15:27.061 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714600695795712[0;39m 请求地址: http://127.0.0.1:8880/ebook/save POST
2022-07-14 17:15:27.061 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714600695795712[0;39m 类名方法: com.zs.wikibb.controller.EbookController.save
2022-07-14 17:15:27.061 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714600695795712[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:27.063 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714600695795712[0;39m 请求参数: [{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","name":"Wiki个人知识库"}]
2022-07-14 17:15:27.066 DEBUG com.zs.wikibb.mapper.EbookMapper.insert           :137 
                [32m202714600695795712[0;39m ==>  Preparing: insert into ebook (id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count ) values (?, ?, ?, ?, ?, ?, ?, ?, ? )
2022-07-14 17:15:27.066 DEBUG com.zs.wikibb.mapper.EbookMapper.insert           :137 
                [32m202714600695795712[0;39m ==> Parameters: 202714600712572928(Long), Wiki个人知识库(String), 200(Long), 181311914796781568(Long), 本文档讲述了知识库的开发过程以及遇到的问题！(String), /image/cover2.png(String), null, null, null
2022-07-14 17:15:27.129 DEBUG com.zs.wikibb.mapper.EbookMapper.insert           :137 
                [32m202714600695795712[0;39m <==    Updates: 1
2022-07-14 17:15:27.130 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714600695795712[0;39m 返回结果: {"success":true}
2022-07-14 17:15:27.130 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714600695795712[0;39m ------------- 结束 耗时：69 ms -------------
2022-07-14 17:15:27.131 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202714600695795712[0;39m ------------- LoginInterceptor 结束 耗时：108 ms -------------
2022-07-14 17:15:27.157 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714601098448896[0;39m ------------- 开始 -------------
2022-07-14 17:15:27.157 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714601098448896[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:15:27.157 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714601098448896[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:15:27.158 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714601098448896[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:27.158 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714601098448896[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:15:27.159 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714601098448896[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:15:27.159 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714601098448896[0;39m ==> Parameters: 
2022-07-14 17:15:27.160 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714601098448896[0;39m <==    Columns: count(0)
2022-07-14 17:15:27.160 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714601098448896[0;39m <==        Row: 7
2022-07-14 17:15:27.161 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714601098448896[0;39m <==      Total: 1
2022-07-14 17:15:27.161 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714601098448896[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:15:27.161 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714601098448896[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:15:27.162 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714601098448896[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:15:27.162 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714601098448896[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:15:27.162 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714601098448896[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:15:27.162 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714601098448896[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:15:27.163 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714601098448896[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:15:27.163 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714601098448896[0;39m <==      Total: 4
2022-07-14 17:15:27.163 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714601098448896[0;39m 总行数：7
2022-07-14 17:15:27.163 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714601098448896[0;39m 总页数：2
2022-07-14 17:15:27.164 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714601098448896[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":7},"success":true}
2022-07-14 17:15:27.164 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714601098448896[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:15:28.804 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714240296030208[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:15:28.804 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714240296030208[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user_wiki/list
2022-07-14 17:15:28.804 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714240296030208[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:15:28.837 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714240296030208[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:15:28.838 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714608149073920[0;39m ------------- 开始 -------------
2022-07-14 17:15:28.838 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714608149073920[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/list GET
2022-07-14 17:15:28.838 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714608149073920[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.list
2022-07-14 17:15:28.839 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714608149073920[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:28.839 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714608149073920[0;39m 请求参数: [{"page":1,"size":10}]
2022-07-14 17:15:28.840 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202714608149073920[0;39m ==>  Preparing: SELECT count(0) FROM userwiki
2022-07-14 17:15:28.840 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202714608149073920[0;39m ==> Parameters: 
2022-07-14 17:15:28.841 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202714608149073920[0;39m <==    Columns: count(0)
2022-07-14 17:15:28.841 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202714608149073920[0;39m <==        Row: 3
2022-07-14 17:15:28.841 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202714608149073920[0;39m <==      Total: 1
2022-07-14 17:15:28.842 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202714608149073920[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki LIMIT ?
2022-07-14 17:15:28.842 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202714608149073920[0;39m ==> Parameters: 10(Integer)
2022-07-14 17:15:28.843 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714608149073920[0;39m <==    Columns: id, login_name, name, password
2022-07-14 17:15:28.843 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714608149073920[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:15:28.843 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714608149073920[0;39m <==        Row: 2, zhangshuo, 张硕, 48d6e4c28cd6d6dbc85b94988c174851
2022-07-14 17:15:28.843 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714608149073920[0;39m <==        Row: 3, zhangyishan, 张一山, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:15:28.843 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202714608149073920[0;39m <==      Total: 3
2022-07-14 17:15:28.844 INFO  com.zs.wikibb.service.UserwikiService             :49  
                [32m202714608149073920[0;39m 总行数：3
2022-07-14 17:15:28.844 INFO  com.zs.wikibb.service.UserwikiService             :50  
                [32m202714608149073920[0;39m 总页数：1
2022-07-14 17:15:28.844 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714608149073920[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":2,"loginName":"zhangshuo","name":"张硕"},{"id":3,"loginName":"zhangyishan","name":"张一山"}],"total":3},"success":true}
2022-07-14 17:15:28.844 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714608149073920[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:15:28.844 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202714608149073920[0;39m ------------- LoginInterceptor 结束 耗时：40 ms -------------
2022-07-14 17:15:29.263 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714609931653120[0;39m ------------- 开始 -------------
2022-07-14 17:15:29.263 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714609931653120[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:15:29.263 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714609931653120[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:15:29.263 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714609931653120[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714609935847424[0;39m ------------- 开始 -------------
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714609931653120[0;39m 请求参数: []
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714609935847425[0;39m ------------- 开始 -------------
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714609935847424[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714609935847425[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714609935847424[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714609935847425[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:15:29.264 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202714609931653120[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714609935847424[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714609935847425[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714609935847424[0;39m 请求参数: []
2022-07-14 17:15:29.264 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714609935847425[0;39m 请求参数: []
2022-07-14 17:15:29.264 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202714609931653120[0;39m ==> Parameters: 
2022-07-14 17:15:29.265 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714609935847424[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:15:29.265 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202714609935847425[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:15:29.265 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714609935847424[0;39m ==> Parameters: 
2022-07-14 17:15:29.265 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202714609931653120[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:15:29.265 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202714609935847425[0;39m ==> Parameters: 
2022-07-14 17:15:29.265 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202714609931653120[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:15:29.266 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202714609931653120[0;39m <==        Row: 2022-07-14, 106, 25, 1, 1
2022-07-14 17:15:29.266 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202714609935847425[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:15:29.266 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:15:29.266 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202714609931653120[0;39m <==      Total: 2
2022-07-14 17:15:29.266 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202714609935847425[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:15:29.266 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:15:29.266 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714609931653120[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":106,"viewIncrease":1,"voteCount":25,"voteIncrease":1}],"success":true}
2022-07-14 17:15:29.266 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714609931653120[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:15:29.266 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202714609935847425[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:15:29.266 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:15:29.267 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202714609935847425[0;39m <==      Total: 2
2022-07-14 17:15:29.267 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:15:29.267 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714609935847425[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:15:29.267 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:15:29.267 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714609935847425[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:15:29.267 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:15:29.267 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:15:29.268 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:15:29.268 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:15:29.268 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:15:29.269 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:15:29.269 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:15:29.269 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:15:29.269 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:15:29.269 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:15:29.269 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:15:29.270 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714609935847424[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:15:29.270 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714609935847424[0;39m <==      Total: 16
2022-07-14 17:15:29.270 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714609935847424[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:15:29.271 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714609935847424[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:15:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714613073186816[0;39m 生成今日电子书快照开始
2022-07-14 17:15:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714613073186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714613073186816[0;39m ==> Parameters: 
2022-07-14 17:15:30.200 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714613073186816[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:15:32.664 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714624196481024[0;39m ------------- 开始 -------------
2022-07-14 17:15:32.664 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714624196481024[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:15:32.665 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714624196481024[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:15:32.665 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714624196481024[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:32.665 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714624196481024[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-14 17:15:32.666 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714624196481024[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:15:32.667 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714624196481024[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-14 17:15:32.667 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714624196481024[0;39m <==    Columns: count(0)
2022-07-14 17:15:32.667 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714624196481024[0;39m <==        Row: 1
2022-07-14 17:15:32.668 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714624196481024[0;39m <==      Total: 1
2022-07-14 17:15:32.668 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714624196481024[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 17:15:32.668 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714624196481024[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-14 17:15:32.669 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714624196481024[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:15:32.669 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714624196481024[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, null, null, null
2022-07-14 17:15:32.670 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714624196481024[0;39m <==      Total: 1
2022-07-14 17:15:32.670 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714624196481024[0;39m 总行数：1
2022-07-14 17:15:32.670 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714624196481024[0;39m 总页数：1
2022-07-14 17:15:32.670 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714624196481024[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","id":202714600712572928,"name":"Wiki个人知识库"}],"total":1},"success":true}
2022-07-14 17:15:32.670 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714624196481024[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:15:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202714634027929600[0;39m 更新电子书下的文档数据开始
2022-07-14 17:15:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714634027929600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:15:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714634027929600[0;39m ==> Parameters: 
2022-07-14 17:15:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714634027929600[0;39m <==    Updates: 6
2022-07-14 17:15:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202714634027929600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:15:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714634036318208[0;39m 生成今日电子书快照开始
2022-07-14 17:15:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714634036318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714634036318208[0;39m ==> Parameters: 
2022-07-14 17:15:35.012 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714634036318208[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:15:35.415 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714635735011328[0;39m ------------- 开始 -------------
2022-07-14 17:15:35.415 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714635735011328[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:15:35.416 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714635735011328[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:15:35.416 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714635735011328[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:35.416 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714635735011328[0;39m 请求参数: [202714600712572928]
2022-07-14 17:15:35.417 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714635735011328[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:15:35.418 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714635735011328[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:15:35.418 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714635735011328[0;39m <==      Total: 0
2022-07-14 17:15:35.419 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714635735011328[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 17:15:35.419 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714635735011328[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:15:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714654974283776[0;39m 生成今日电子书快照开始
2022-07-14 17:15:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714654974283776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714654974283776[0;39m ==> Parameters: 
2022-07-14 17:15:40.005 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714654974283776[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:15:42.224 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714664294027264[0;39m ------------- 开始 -------------
2022-07-14 17:15:42.224 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714664294027264[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:15:42.225 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714664294027264[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:15:42.225 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714664294027264[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:42.225 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714664294027264[0;39m 请求参数: []
2022-07-14 17:15:42.225 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714664294027264[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:15:42.226 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714664294027264[0;39m ==> Parameters: 
2022-07-14 17:15:42.226 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:15:42.227 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:15:42.227 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:15:42.227 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:15:42.227 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:15:42.227 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:15:42.227 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:15:42.228 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:15:42.228 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:15:42.228 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:15:42.228 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:15:42.228 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:15:42.228 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:15:42.229 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:15:42.229 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:15:42.229 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:15:42.229 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714664294027264[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:15:42.229 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714664294027264[0;39m <==      Total: 16
2022-07-14 17:15:42.230 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714664294027264[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:15:42.230 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714664294027264[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:15:42.240 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714664361136128[0;39m ------------- 开始 -------------
2022-07-14 17:15:42.240 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714664361136128[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:15:42.240 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714664361136128[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:15:42.240 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714664361136128[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:42.240 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714664361136128[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:15:42.241 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714664361136128[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:15:42.241 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714664361136128[0;39m ==> Parameters: 
2022-07-14 17:15:42.242 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714664361136128[0;39m <==    Columns: count(0)
2022-07-14 17:15:42.242 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714664361136128[0;39m <==        Row: 7
2022-07-14 17:15:42.242 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714664361136128[0;39m <==      Total: 1
2022-07-14 17:15:42.242 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714664361136128[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:15:42.242 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714664361136128[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:15:42.243 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714664361136128[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:15:42.243 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714664361136128[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:15:42.243 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714664361136128[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:15:42.243 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714664361136128[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:15:42.244 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714664361136128[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:15:42.244 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714664361136128[0;39m <==      Total: 4
2022-07-14 17:15:42.244 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714664361136128[0;39m 总行数：7
2022-07-14 17:15:42.244 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714664361136128[0;39m 总页数：2
2022-07-14 17:15:42.244 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714664361136128[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":7},"success":true}
2022-07-14 17:15:42.244 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714664361136128[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:15:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714675991941120[0;39m 生成今日电子书快照开始
2022-07-14 17:15:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714675991941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714675991941120[0;39m ==> Parameters: 
2022-07-14 17:15:45.015 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714675991941120[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:15:46.075 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714680446291968[0;39m ------------- 开始 -------------
2022-07-14 17:15:46.076 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714680446291968[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:15:46.076 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714680446291968[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:15:46.076 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714680446291968[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:46.076 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714680446291968[0;39m 请求参数: []
2022-07-14 17:15:46.076 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714680446291968[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:15:46.077 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714680446291968[0;39m ==> Parameters: 
2022-07-14 17:15:46.077 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:15:46.078 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:15:46.078 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:15:46.078 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:15:46.078 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:15:46.078 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:15:46.078 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:15:46.079 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:15:46.079 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:15:46.079 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:15:46.079 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:15:46.079 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:15:46.080 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:15:46.080 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:15:46.080 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:15:46.080 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:15:46.080 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714680446291968[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:15:46.080 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714680446291968[0;39m <==      Total: 16
2022-07-14 17:15:46.081 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714680446291968[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:15:46.081 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714680446291968[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:15:49.892 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714608149073920[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:15:49.892 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714608149073920[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user_wiki/list
2022-07-14 17:15:49.893 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714608149073920[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:15:49.926 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714608149073920[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:15:49.927 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714696602750976[0;39m ------------- 开始 -------------
2022-07-14 17:15:49.927 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714696602750976[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/list GET
2022-07-14 17:15:49.927 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714696602750976[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.list
2022-07-14 17:15:49.927 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714696602750976[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:49.928 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714696602750976[0;39m 请求参数: [{"page":1,"size":10}]
2022-07-14 17:15:49.929 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202714696602750976[0;39m ==>  Preparing: SELECT count(0) FROM userwiki
2022-07-14 17:15:49.929 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202714696602750976[0;39m ==> Parameters: 
2022-07-14 17:15:49.930 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202714696602750976[0;39m <==    Columns: count(0)
2022-07-14 17:15:49.930 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202714696602750976[0;39m <==        Row: 3
2022-07-14 17:15:49.931 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202714696602750976[0;39m <==      Total: 1
2022-07-14 17:15:49.931 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202714696602750976[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki LIMIT ?
2022-07-14 17:15:49.932 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202714696602750976[0;39m ==> Parameters: 10(Integer)
2022-07-14 17:15:49.933 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714696602750976[0;39m <==    Columns: id, login_name, name, password
2022-07-14 17:15:49.933 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714696602750976[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:15:49.933 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714696602750976[0;39m <==        Row: 2, zhangshuo, 张硕, 48d6e4c28cd6d6dbc85b94988c174851
2022-07-14 17:15:49.933 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202714696602750976[0;39m <==        Row: 3, zhangyishan, 张一山, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:15:49.934 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202714696602750976[0;39m <==      Total: 3
2022-07-14 17:15:49.935 INFO  com.zs.wikibb.service.UserwikiService             :49  
                [32m202714696602750976[0;39m 总行数：3
2022-07-14 17:15:49.935 INFO  com.zs.wikibb.service.UserwikiService             :50  
                [32m202714696602750976[0;39m 总页数：1
2022-07-14 17:15:49.935 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714696602750976[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":2,"loginName":"zhangshuo","name":"张硕"},{"id":3,"loginName":"zhangyishan","name":"张一山"}],"total":3},"success":true}
2022-07-14 17:15:49.935 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714696602750976[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:15:49.936 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202714696602750976[0;39m ------------- LoginInterceptor 结束 耗时：44 ms -------------
2022-07-14 17:15:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714696929906688[0;39m 生成今日电子书快照开始
2022-07-14 17:15:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714696929906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714696929906688[0;39m ==> Parameters: 
2022-07-14 17:15:50.006 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714696929906688[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:15:51.447 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714702978093056[0;39m ------------- 开始 -------------
2022-07-14 17:15:51.447 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714702978093056[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:15:51.447 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714702978093056[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:15:51.448 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714702978093056[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:51.448 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714702978093056[0;39m 请求参数: []
2022-07-14 17:15:51.449 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714702978093056[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:15:51.449 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714702978093056[0;39m ==> Parameters: 
2022-07-14 17:15:51.450 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:15:51.450 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:15:51.451 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:15:51.451 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:15:51.451 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:15:51.451 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:15:51.452 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:15:51.452 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:15:51.452 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:15:51.452 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:15:51.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:15:51.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:15:51.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:15:51.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:15:51.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:15:51.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:15:51.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202714702978093056[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:15:51.454 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202714702978093056[0;39m <==      Total: 16
2022-07-14 17:15:51.454 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714702978093056[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:15:51.454 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714702978093056[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:15:51.465 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714703053590528[0;39m ------------- 开始 -------------
2022-07-14 17:15:51.465 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714703053590528[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:15:51.466 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714703053590528[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:15:51.466 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714703053590528[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:51.466 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714703053590528[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:15:51.468 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714703053590528[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:15:51.468 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714703053590528[0;39m ==> Parameters: 
2022-07-14 17:15:51.469 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714703053590528[0;39m <==    Columns: count(0)
2022-07-14 17:15:51.469 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714703053590528[0;39m <==        Row: 7
2022-07-14 17:15:51.469 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714703053590528[0;39m <==      Total: 1
2022-07-14 17:15:51.469 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714703053590528[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:15:51.470 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714703053590528[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:15:51.470 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714703053590528[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:15:51.470 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714703053590528[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:15:51.470 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714703053590528[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:15:51.471 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714703053590528[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:15:51.471 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714703053590528[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:15:51.471 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714703053590528[0;39m <==      Total: 4
2022-07-14 17:15:51.471 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714703053590528[0;39m 总行数：7
2022-07-14 17:15:51.471 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714703053590528[0;39m 总页数：2
2022-07-14 17:15:51.472 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714703053590528[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":7},"success":true}
2022-07-14 17:15:51.472 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714703053590528[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:15:53.370 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714711043739648[0;39m ------------- 开始 -------------
2022-07-14 17:15:53.370 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714711043739648[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:15:53.371 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714711043739648[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:15:53.371 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714711043739648[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:53.371 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714711043739648[0;39m 请求参数: [{"page":2,"size":4}]
2022-07-14 17:15:53.372 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714711043739648[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:15:53.372 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714711043739648[0;39m ==> Parameters: 
2022-07-14 17:15:53.373 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714711043739648[0;39m <==    Columns: count(0)
2022-07-14 17:15:53.373 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202714711043739648[0;39m <==        Row: 7
2022-07-14 17:15:53.373 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202714711043739648[0;39m <==      Total: 1
2022-07-14 17:15:53.374 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714711043739648[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?, ?
2022-07-14 17:15:53.374 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714711043739648[0;39m ==> Parameters: 4(Long), 4(Integer)
2022-07-14 17:15:53.374 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714711043739648[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:15:53.375 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714711043739648[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2022-07-14 17:15:53.375 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714711043739648[0;39m <==        Row: 6, Vue CLI 入门教程, 100, 101, Vue CLI 用于快速搭建基于VUE的前端, /image/cover1.png, 1, 5, 1
2022-07-14 17:15:53.375 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202714711043739648[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, null, null, null
2022-07-14 17:15:53.375 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202714711043739648[0;39m <==      Total: 3
2022-07-14 17:15:53.376 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202714711043739648[0;39m 总行数：7
2022-07-14 17:15:53.376 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202714711043739648[0;39m 总页数：2
2022-07-14 17:15:53.376 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714711043739648[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0},{"category1Id":100,"category2Id":101,"cover":"/image/cover1.png","description":"Vue CLI 用于快速搭建基于VUE的前端","docCount":1,"id":6,"name":"Vue CLI 入门教程","viewCount":5,"voteCount":1},{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","id":202714600712572928,"name":"Wiki个人知识库"}],"total":7},"success":true}
2022-07-14 17:15:53.376 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714711043739648[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:15:54.941 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714717632991232[0;39m ------------- 开始 -------------
2022-07-14 17:15:54.942 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714717632991232[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:15:54.942 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714717632991232[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:15:54.942 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714717632991232[0;39m 远程地址: 127.0.0.1
2022-07-14 17:15:54.943 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714717632991232[0;39m 请求参数: [202714600712572928]
2022-07-14 17:15:54.943 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714717632991232[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:15:54.944 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714717632991232[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:15:54.945 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714717632991232[0;39m <==      Total: 0
2022-07-14 17:15:54.946 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714717632991232[0;39m 返回结果: {"content":[],"success":true}
2022-07-14 17:15:54.946 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714717632991232[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:15:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714717888843776[0;39m 生成今日电子书快照开始
2022-07-14 17:15:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714717888843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:15:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714717888843776[0;39m ==> Parameters: 
2022-07-14 17:15:55.003 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714717888843776[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714738906501120[0;39m 生成今日电子书快照开始
2022-07-14 17:16:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714738906501120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714738906501120[0;39m ==> Parameters: 
2022-07-14 17:16:00.016 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714738906501120[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:05.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202714759823495168[0;39m 更新电子书下的文档数据开始
2022-07-14 17:16:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714759823495168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:16:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714759823495168[0;39m ==> Parameters: 
2022-07-14 17:16:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714759823495168[0;39m <==    Updates: 6
2022-07-14 17:16:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202714759823495168[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:16:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714759836078080[0;39m 生成今日电子书快照开始
2022-07-14 17:16:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714759836078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714759836078080[0;39m ==> Parameters: 
2022-07-14 17:16:05.005 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714759836078080[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714780845346816[0;39m 生成今日电子书快照开始
2022-07-14 17:16:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714780845346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714780845346816[0;39m ==> Parameters: 
2022-07-14 17:16:10.014 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714780845346816[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714801791700992[0;39m 生成今日电子书快照开始
2022-07-14 17:16:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714801791700992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714801791700992[0;39m ==> Parameters: 
2022-07-14 17:16:15.008 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714801791700992[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714822759026688[0;39m 生成今日电子书快照开始
2022-07-14 17:16:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714822759026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714822759026688[0;39m ==> Parameters: 
2022-07-14 17:16:20.010 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714822759026688[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714843772489728[0;39m 生成今日电子书快照开始
2022-07-14 17:16:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714843772489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:25.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714843772489728[0;39m ==> Parameters: 
2022-07-14 17:16:25.025 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714843772489728[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714864710455296[0;39m 生成今日电子书快照开始
2022-07-14 17:16:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714864710455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714864710455296[0;39m ==> Parameters: 
2022-07-14 17:16:30.009 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714864710455296[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714885661003776[0;39m 生成今日电子书快照开始
2022-07-14 17:16:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714885661003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714885661003776[0;39m ==> Parameters: 
2022-07-14 17:16:35.003 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714885661003776[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202714885669392384[0;39m 更新电子书下的文档数据开始
2022-07-14 17:16:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714885669392384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:16:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714885669392384[0;39m ==> Parameters: 
2022-07-14 17:16:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202714885669392384[0;39m <==    Updates: 6
2022-07-14 17:16:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202714885669392384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:16:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714906674466816[0;39m 生成今日电子书快照开始
2022-07-14 17:16:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714906674466816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714906674466816[0;39m ==> Parameters: 
2022-07-14 17:16:40.013 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714906674466816[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:40.688 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714664294027264[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:16:40.688 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714664294027264[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:16:40.688 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714664294027264[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:16:40.721 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714664294027264[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:16:40.722 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714909652422656[0;39m ------------- 开始 -------------
2022-07-14 17:16:40.722 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714909652422656[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:16:40.722 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714909652422656[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:16:40.722 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714909652422656[0;39m 远程地址: 127.0.0.1
2022-07-14 17:16:40.723 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714909652422656[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"第一章 课程导学","parent":0,"sort":1}]
2022-07-14 17:16:40.723 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202714909652422656[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:16:40.724 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202714909652422656[0;39m ==> Parameters: 202714909656616960(Long), 202714600712572928(Long), 0(Long), 第一章 课程导学(String), 1(Integer), 0(Integer), 0(Integer)
2022-07-14 17:16:40.727 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202714909652422656[0;39m <==    Updates: 1
2022-07-14 17:16:40.728 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202714909652422656[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:16:40.728 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202714909652422656[0;39m ==> Parameters: 202714909656616960(Long), (String)
2022-07-14 17:16:40.729 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202714909652422656[0;39m <==    Updates: 1
2022-07-14 17:16:40.751 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714909652422656[0;39m 返回结果: {"success":true}
2022-07-14 17:16:40.751 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714909652422656[0;39m ------------- 结束 耗时：29 ms -------------
2022-07-14 17:16:40.752 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202714909652422656[0;39m ------------- LoginInterceptor 结束 耗时：64 ms -------------
2022-07-14 17:16:40.758 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714909803417600[0;39m ------------- 开始 -------------
2022-07-14 17:16:40.758 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714909803417600[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:16:40.759 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714909803417600[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:16:40.759 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714909803417600[0;39m 远程地址: 127.0.0.1
2022-07-14 17:16:40.759 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714909803417600[0;39m 请求参数: [202714600712572928]
2022-07-14 17:16:40.759 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714909803417600[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:16:40.760 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714909803417600[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:16:40.761 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202714909803417600[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:16:40.761 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202714909803417600[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 第一章 课程导学, 1, 0, 0
2022-07-14 17:16:40.761 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714909803417600[0;39m <==      Total: 1
2022-07-14 17:16:40.761 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714909803417600[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"第一章 课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:16:40.761 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714909803417600[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:16:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714927599849472[0;39m 生成今日电子书快照开始
2022-07-14 17:16:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714927599849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714927599849472[0;39m ==> Parameters: 
2022-07-14 17:16:45.003 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714927599849472[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:49.774 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714947619262464[0;39m ------------- 开始 -------------
2022-07-14 17:16:49.775 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714947619262464[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-14 17:16:49.775 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714947619262464[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:16:49.775 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714947619262464[0;39m 远程地址: 127.0.0.1
2022-07-14 17:16:49.775 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714947619262464[0;39m 请求参数: [202714909656616960]
2022-07-14 17:16:49.776 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202714947619262464[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:16:49.776 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202714947619262464[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:16:49.777 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202714947619262464[0;39m <==    Columns: id, content
2022-07-14 17:16:49.777 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202714947619262464[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-14 17:16:49.777 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202714947619262464[0;39m <==      Total: 1
2022-07-14 17:16:49.777 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202714947619262464[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:16:49.778 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202714947619262464[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:16:49.833 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202714947619262464[0;39m <==    Updates: 1
2022-07-14 17:16:49.834 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714947619262464[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:16:49.834 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714947619262464[0;39m ------------- 结束 耗时：60 ms -------------
2022-07-14 17:16:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714948630089728[0;39m 生成今日电子书快照开始
2022-07-14 17:16:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714948630089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714948630089728[0;39m ==> Parameters: 
2022-07-14 17:16:50.016 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714948630089728[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:16:54.145 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714702978093056[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:16:54.146 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714702978093056[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:16:54.146 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714702978093056[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:16:54.179 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714702978093056[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:16:54.180 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714966099365888[0;39m ------------- 开始 -------------
2022-07-14 17:16:54.180 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714966099365888[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:16:54.181 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714966099365888[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:16:54.181 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714966099365888[0;39m 远程地址: 127.0.0.1
2022-07-14 17:16:54.181 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714966099365888[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0}]
2022-07-14 17:16:54.182 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m202714966099365888[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-14 17:16:54.183 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m202714966099365888[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), 课程导学(String), 1(Integer), 0(Integer), 0(Integer), 202714909656616960(Long)
2022-07-14 17:16:54.185 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m202714966099365888[0;39m <==    Updates: 1
2022-07-14 17:16:54.185 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m202714966099365888[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-14 17:16:54.186 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m202714966099365888[0;39m ==> Parameters: (String), 202714909656616960(Long)
2022-07-14 17:16:54.187 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m202714966099365888[0;39m <==    Updates: 1
2022-07-14 17:16:54.219 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714966099365888[0;39m 返回结果: {"success":true}
2022-07-14 17:16:54.219 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714966099365888[0;39m ------------- 结束 耗时：39 ms -------------
2022-07-14 17:16:54.219 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202714966099365888[0;39m ------------- LoginInterceptor 结束 耗时：73 ms -------------
2022-07-14 17:16:54.225 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202714966288109568[0;39m ------------- 开始 -------------
2022-07-14 17:16:54.225 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202714966288109568[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:16:54.226 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202714966288109568[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:16:54.226 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202714966288109568[0;39m 远程地址: 127.0.0.1
2022-07-14 17:16:54.226 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202714966288109568[0;39m 请求参数: [202714600712572928]
2022-07-14 17:16:54.227 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714966288109568[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:16:54.227 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714966288109568[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:16:54.227 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202714966288109568[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:16:54.228 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202714966288109568[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:16:54.228 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202714966288109568[0;39m <==      Total: 1
2022-07-14 17:16:54.228 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202714966288109568[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:16:54.228 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202714966288109568[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:16:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714969576443904[0;39m 生成今日电子书快照开始
2022-07-14 17:16:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714969576443904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:16:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714969576443904[0;39m ==> Parameters: 
2022-07-14 17:16:55.011 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714969576443904[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:17:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202714990535380992[0;39m 生成今日电子书快照开始
2022-07-14 17:17:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714990535380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202714990535380992[0;39m ==> Parameters: 
2022-07-14 17:17:00.009 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202714990535380992[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:17:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715011485929472[0;39m 生成今日电子书快照开始
2022-07-14 17:17:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715011485929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715011485929472[0;39m ==> Parameters: 
2022-07-14 17:17:05.004 ERROR o.s.s.support.TaskUtils$LoggingErrorHandler       :95  
                [32m202715011485929472[0;39m Unexpected error occurred in scheduled task
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
### The error may exist in file [D:\wikibb\target\classes\mapper\EbookSnapshotMapperCust.xml]
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase)         select t1.id, curdate(), 0, 0, 0, 0         from ebook t1         where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate());          update ebook_snapshot t1,ebook t2         set t1.view_count=t2.view_count,             t1.vote_count=t2.vote_count         where t1.`date`=curdate()           and t1.ebook_id=t2.id;          update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot             where `date`=date_sub(curdate(), interval 1 day )) t2         on t1.ebook_id=t2.ebook_id             set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)),                 t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0)         where t1.`date`=curdate();
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
; Column 'view_count' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:88)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:440)
	at com.sun.proxy.$Proxy87.update(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:287)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:67)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy101.genSnapshot(Unknown Source)
	at com.zs.wikibb.service.EbookSnapshotService.genSnapshot(EbookSnapshotService.java:15)
	at com.zs.wikibb.job.EbookSnapshotJob.cron(EbookSnapshotJob.java:34)
	at sun.reflect.GeneratedMethodAccessor105.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'view_count' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:371)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at sun.reflect.GeneratedMethodAccessor82.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:59)
	at com.sun.proxy.$Proxy128.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at sun.reflect.GeneratedMethodAccessor102.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
	at com.sun.proxy.$Proxy126.update(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:426)
	... 21 common frames omitted
2022-07-14 17:17:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202715011498512384[0;39m 更新电子书下的文档数据开始
2022-07-14 17:17:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715011498512384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:17:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715011498512384[0;39m ==> Parameters: 
2022-07-14 17:17:05.074 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715011498512384[0;39m <==    Updates: 7
2022-07-14 17:17:05.074 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202715011498512384[0;39m 更新电子书下的文档数据结束，耗时：70 毫秒
2022-07-14 17:17:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715032478420992[0;39m 生成今日电子书快照开始
2022-07-14 17:17:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715032478420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715032478420992[0;39m ==> Parameters: 
2022-07-14 17:17:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715032478420992[0;39m <==    Updates: 0
2022-07-14 17:17:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715032478420992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:17:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715053449940992[0;39m 生成今日电子书快照开始
2022-07-14 17:17:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715053449940992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715053449940992[0;39m ==> Parameters: 
2022-07-14 17:17:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715053449940992[0;39m <==    Updates: 0
2022-07-14 17:17:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715053449940992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:17:18.876 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714711043739648[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:17:18.877 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714711043739648[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:17:18.877 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714711043739648[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:17:18.911 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714711043739648[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:17:18.912 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715069832892416[0;39m ------------- 开始 -------------
2022-07-14 17:17:18.912 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715069832892416[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:17:18.912 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715069832892416[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:17:18.913 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715069832892416[0;39m 远程地址: 127.0.0.1
2022-07-14 17:17:18.913 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715069832892416[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"Spring Boot项目搭建","parent":0,"sort":1}]
2022-07-14 17:17:18.914 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715069832892416[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:17:18.915 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715069832892416[0;39m ==> Parameters: 202715069841281024(Long), 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 1(Integer), 0(Integer), 0(Integer)
2022-07-14 17:17:18.920 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715069832892416[0;39m <==    Updates: 1
2022-07-14 17:17:18.920 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715069832892416[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:17:18.920 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715069832892416[0;39m ==> Parameters: 202715069841281024(Long), (String)
2022-07-14 17:17:18.921 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715069832892416[0;39m <==    Updates: 1
2022-07-14 17:17:18.949 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715069832892416[0;39m 返回结果: {"success":true}
2022-07-14 17:17:18.950 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715069832892416[0;39m ------------- 结束 耗时：38 ms -------------
2022-07-14 17:17:18.950 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715069832892416[0;39m ------------- LoginInterceptor 结束 耗时：73 ms -------------
2022-07-14 17:17:18.956 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715070017441792[0;39m ------------- 开始 -------------
2022-07-14 17:17:18.956 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715070017441792[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:17:18.956 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715070017441792[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:17:18.956 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715070017441792[0;39m 远程地址: 127.0.0.1
2022-07-14 17:17:18.956 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715070017441792[0;39m 请求参数: [202714600712572928]
2022-07-14 17:17:18.957 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715070017441792[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:17:18.957 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715070017441792[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:17:18.958 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715070017441792[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:17:18.958 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715070017441792[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:17:18.959 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715070017441792[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 1, 0, 0
2022-07-14 17:17:18.959 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715070017441792[0;39m <==      Total: 2
2022-07-14 17:17:18.959 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715070017441792[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:17:18.959 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715070017441792[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:17:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715074404683776[0;39m 生成今日电子书快照开始
2022-07-14 17:17:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715074404683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715074404683776[0;39m ==> Parameters: 
2022-07-14 17:17:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715074404683776[0;39m <==    Updates: 0
2022-07-14 17:17:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715074404683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:17:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715095413952512[0;39m 生成今日电子书快照开始
2022-07-14 17:17:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715095413952512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715095413952512[0;39m ==> Parameters: 
2022-07-14 17:17:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715095413952512[0;39m <==    Updates: 0
2022-07-14 17:17:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715095413952512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:17:25.695 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715098282856448[0;39m ------------- 开始 -------------
2022-07-14 17:17:25.695 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715098282856448[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-14 17:17:25.695 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715098282856448[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:17:25.696 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715098282856448[0;39m 远程地址: 127.0.0.1
2022-07-14 17:17:25.696 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715098282856448[0;39m 请求参数: [202715069841281024]
2022-07-14 17:17:25.696 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715098282856448[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:17:25.697 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715098282856448[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:17:25.697 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715098282856448[0;39m <==    Columns: id, content
2022-07-14 17:17:25.698 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715098282856448[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-14 17:17:25.698 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715098282856448[0;39m <==      Total: 1
2022-07-14 17:17:25.698 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715098282856448[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:17:25.698 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715098282856448[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:17:25.731 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715098282856448[0;39m <==    Updates: 1
2022-07-14 17:17:25.731 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715098282856448[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:17:25.731 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715098282856448[0;39m ------------- 结束 耗时：37 ms -------------
2022-07-14 17:17:27.520 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714909652422656[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:17:27.521 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714909652422656[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:17:27.521 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714909652422656[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:17:27.554 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714909652422656[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:17:27.555 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715106080067584[0;39m ------------- 开始 -------------
2022-07-14 17:17:27.555 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715106080067584[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:17:27.555 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715106080067584[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:17:27.555 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715106080067584[0;39m 远程地址: 127.0.0.1
2022-07-14 17:17:27.555 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715106080067584[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0}]
2022-07-14 17:17:27.556 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m202715106080067584[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-14 17:17:27.556 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m202715106080067584[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), Spring Boot项目搭建(String), 2(Integer), 0(Integer), 0(Integer), 202715069841281024(Long)
2022-07-14 17:17:27.563 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m202715106080067584[0;39m <==    Updates: 1
2022-07-14 17:17:27.563 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m202715106080067584[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-14 17:17:27.563 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m202715106080067584[0;39m ==> Parameters: (String), 202715069841281024(Long)
2022-07-14 17:17:27.564 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m202715106080067584[0;39m <==    Updates: 1
2022-07-14 17:17:27.589 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715106080067584[0;39m 返回结果: {"success":true}
2022-07-14 17:17:27.589 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715106080067584[0;39m ------------- 结束 耗时：35 ms -------------
2022-07-14 17:17:27.590 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715106080067584[0;39m ------------- LoginInterceptor 结束 耗时：69 ms -------------
2022-07-14 17:17:27.595 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715106252034048[0;39m ------------- 开始 -------------
2022-07-14 17:17:27.596 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715106252034048[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:17:27.596 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715106252034048[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:17:27.596 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715106252034048[0;39m 远程地址: 127.0.0.1
2022-07-14 17:17:27.596 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715106252034048[0;39m 请求参数: [202714600712572928]
2022-07-14 17:17:27.597 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715106252034048[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:17:27.597 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715106252034048[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:17:27.598 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715106252034048[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:17:27.598 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715106252034048[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:17:27.598 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715106252034048[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:17:27.598 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715106252034048[0;39m <==      Total: 2
2022-07-14 17:17:27.598 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715106252034048[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:17:27.599 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715106252034048[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:17:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715116372889600[0;39m 生成今日电子书快照开始
2022-07-14 17:17:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715116372889600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715116372889600[0;39m ==> Parameters: 
2022-07-14 17:17:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715116372889600[0;39m <==    Updates: 0
2022-07-14 17:17:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715116372889600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:17:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715137356992512[0;39m 生成今日电子书快照开始
2022-07-14 17:17:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715137356992512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715137356992512[0;39m ==> Parameters: 
2022-07-14 17:17:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715137356992512[0;39m <==    Updates: 0
2022-07-14 17:17:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715137356992512[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:17:35.019 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202715137390546944[0;39m 更新电子书下的文档数据开始
2022-07-14 17:17:35.020 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715137390546944[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:17:35.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715137390546944[0;39m ==> Parameters: 
2022-07-14 17:17:35.071 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715137390546944[0;39m <==    Updates: 7
2022-07-14 17:17:35.071 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202715137390546944[0;39m 更新电子书下的文档数据结束，耗时：52 毫秒
2022-07-14 17:17:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715158294958080[0;39m 生成今日电子书快照开始
2022-07-14 17:17:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715158294958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715158294958080[0;39m ==> Parameters: 
2022-07-14 17:17:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715158294958080[0;39m <==    Updates: 0
2022-07-14 17:17:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715158294958080[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:17:43.309 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714680446291968[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:17:43.309 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714680446291968[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:17:43.309 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714680446291968[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:17:43.343 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714680446291968[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:17:43.343 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715172303933440[0;39m ------------- 开始 -------------
2022-07-14 17:17:43.344 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715172303933440[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:17:43.344 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715172303933440[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:17:43.344 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715172303933440[0;39m 远程地址: 127.0.0.1
2022-07-14 17:17:43.344 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715172303933440[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"后端架构完善与接口开发","parent":0,"sort":3}]
2022-07-14 17:17:43.345 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715172303933440[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:17:43.345 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715172303933440[0;39m ==> Parameters: 202715172312322048(Long), 202714600712572928(Long), 0(Long), 后端架构完善与接口开发(String), 3(Integer), 0(Integer), 0(Integer)
2022-07-14 17:17:43.350 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715172303933440[0;39m <==    Updates: 1
2022-07-14 17:17:43.350 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715172303933440[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:17:43.351 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715172303933440[0;39m ==> Parameters: 202715172312322048(Long), (String)
2022-07-14 17:17:43.351 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715172303933440[0;39m <==    Updates: 1
2022-07-14 17:17:43.365 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715172303933440[0;39m 返回结果: {"success":true}
2022-07-14 17:17:43.365 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715172303933440[0;39m ------------- 结束 耗时：22 ms -------------
2022-07-14 17:17:43.365 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715172303933440[0;39m ------------- LoginInterceptor 结束 耗时：56 ms -------------
2022-07-14 17:17:43.370 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715172417179648[0;39m ------------- 开始 -------------
2022-07-14 17:17:43.371 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715172417179648[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:17:43.371 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715172417179648[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:17:43.371 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715172417179648[0;39m 远程地址: 127.0.0.1
2022-07-14 17:17:43.371 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715172417179648[0;39m 请求参数: [202714600712572928]
2022-07-14 17:17:43.372 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715172417179648[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:17:43.372 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715172417179648[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:17:43.373 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715172417179648[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:17:43.373 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715172417179648[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:17:43.373 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715172417179648[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:17:43.374 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715172417179648[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:17:43.374 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715172417179648[0;39m <==      Total: 3
2022-07-14 17:17:43.374 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715172417179648[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:17:43.374 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715172417179648[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:17:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715179316809728[0;39m 生成今日电子书快照开始
2022-07-14 17:17:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715179316809728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715179316809728[0;39m ==> Parameters: 
2022-07-14 17:17:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715179316809728[0;39m <==    Updates: 0
2022-07-14 17:17:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715179316809728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:17:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715200233803776[0;39m 生成今日电子书快照开始
2022-07-14 17:17:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715200233803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715200233803776[0;39m ==> Parameters: 
2022-07-14 17:17:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715200233803776[0;39m <==    Updates: 0
2022-07-14 17:17:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715200233803776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:17:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715221209518080[0;39m 生成今日电子书快照开始
2022-07-14 17:17:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715221209518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:17:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715221209518080[0;39m ==> Parameters: 
2022-07-14 17:17:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715221209518080[0;39m <==    Updates: 0
2022-07-14 17:17:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715221209518080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:18:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715242210398208[0;39m 生成今日电子书快照开始
2022-07-14 17:18:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715242210398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715242210398208[0;39m ==> Parameters: 
2022-07-14 17:18:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715242210398208[0;39m <==    Updates: 0
2022-07-14 17:18:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715242210398208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:18:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202715263160946688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:18:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715263160946688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:18:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715263160946688[0;39m ==> Parameters: 
2022-07-14 17:18:05.106 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715263160946688[0;39m <==    Updates: 7
2022-07-14 17:18:05.106 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202715263160946688[0;39m 更新电子书下的文档数据结束，耗时：101 毫秒
2022-07-14 17:18:05.106 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715263584571392[0;39m 生成今日电子书快照开始
2022-07-14 17:18:05.106 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715263584571392[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:05.107 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715263584571392[0;39m ==> Parameters: 
2022-07-14 17:18:05.108 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715263584571392[0;39m <==    Updates: 0
2022-07-14 17:18:05.108 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715263584571392[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:18:08.931 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714966099365888[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:18:08.932 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714966099365888[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:18:08.932 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714966099365888[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:18:08.964 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714966099365888[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:18:08.966 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715279774584832[0;39m ------------- 开始 -------------
2022-07-14 17:18:08.966 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715279774584832[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:18:08.966 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715279774584832[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:18:08.966 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715279774584832[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:08.966 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715279774584832[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4}]
2022-07-14 17:18:08.967 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715279774584832[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:18:08.968 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715279774584832[0;39m ==> Parameters: 202715279778779136(Long), 202714600712572928(Long), 0(Long), Vue 3+ Vue CLI 项目搭建(String), 4(Integer), 0(Integer), 0(Integer)
2022-07-14 17:18:08.969 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715279774584832[0;39m <==    Updates: 1
2022-07-14 17:18:08.969 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715279774584832[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:18:08.969 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715279774584832[0;39m ==> Parameters: 202715279778779136(Long), (String)
2022-07-14 17:18:08.970 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715279774584832[0;39m <==    Updates: 1
2022-07-14 17:18:08.977 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715279774584832[0;39m 返回结果: {"success":true}
2022-07-14 17:18:08.977 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715279774584832[0;39m ------------- 结束 耗时：11 ms -------------
2022-07-14 17:18:08.977 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715279774584832[0;39m ------------- LoginInterceptor 结束 耗时：45 ms -------------
2022-07-14 17:18:08.983 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715279845888000[0;39m ------------- 开始 -------------
2022-07-14 17:18:08.983 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715279845888000[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:18:08.983 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715279845888000[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:18:08.984 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715279845888000[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:08.984 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715279845888000[0;39m 请求参数: [202714600712572928]
2022-07-14 17:18:08.985 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715279845888000[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:18:08.985 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715279845888000[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:18:08.986 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715279845888000[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:18:08.986 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715279845888000[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:18:08.987 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715279845888000[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:18:08.987 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715279845888000[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:18:08.988 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715279845888000[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:18:08.988 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715279845888000[0;39m <==      Total: 4
2022-07-14 17:18:08.988 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715279845888000[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:18:08.989 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715279845888000[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:18:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715284124078080[0;39m 生成今日电子书快照开始
2022-07-14 17:18:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715284124078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715284124078080[0;39m ==> Parameters: 
2022-07-14 17:18:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715284124078080[0;39m <==    Updates: 0
2022-07-14 17:18:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715284124078080[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:18:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715305103986688[0;39m 生成今日电子书快照开始
2022-07-14 17:18:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715305103986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715305103986688[0;39m ==> Parameters: 
2022-07-14 17:18:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715305103986688[0;39m <==    Updates: 0
2022-07-14 17:18:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715305103986688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:18:19.045 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202715069832892416[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:18:19.046 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202715069832892416[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:18:19.046 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202715069832892416[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:18:19.079 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202715069832892416[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:18:19.080 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715322195775488[0;39m ------------- 开始 -------------
2022-07-14 17:18:19.080 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715322195775488[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:18:19.081 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715322195775488[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:18:19.081 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715322195775488[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:19.081 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715322195775488[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"点后端交互融合","parent":0,"sort":5}]
2022-07-14 17:18:19.082 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715322195775488[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:18:19.083 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715322195775488[0;39m ==> Parameters: 202715322204164096(Long), 202714600712572928(Long), 0(Long), 点后端交互融合(String), 5(Integer), 0(Integer), 0(Integer)
2022-07-14 17:18:19.088 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715322195775488[0;39m <==    Updates: 1
2022-07-14 17:18:19.089 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715322195775488[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:18:19.089 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715322195775488[0;39m ==> Parameters: 202715322204164096(Long), (String)
2022-07-14 17:18:19.090 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715322195775488[0;39m <==    Updates: 1
2022-07-14 17:18:19.168 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715322195775488[0;39m 返回结果: {"success":true}
2022-07-14 17:18:19.169 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715322195775488[0;39m ------------- 结束 耗时：89 ms -------------
2022-07-14 17:18:19.171 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715322195775488[0;39m ------------- LoginInterceptor 结束 耗时：125 ms -------------
2022-07-14 17:18:19.183 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715322627788800[0;39m ------------- 开始 -------------
2022-07-14 17:18:19.184 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715322627788800[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:18:19.184 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715322627788800[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:18:19.184 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715322627788800[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:19.184 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715322627788800[0;39m 请求参数: [202714600712572928]
2022-07-14 17:18:19.185 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715322627788800[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:18:19.186 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715322627788800[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:18:19.187 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715322627788800[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:18:19.187 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715322627788800[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:18:19.187 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715322627788800[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:18:19.187 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715322627788800[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:18:19.188 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715322627788800[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:18:19.188 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715322627788800[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 点后端交互融合, 5, 0, 0
2022-07-14 17:18:19.188 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715322627788800[0;39m <==      Total: 5
2022-07-14 17:18:19.189 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715322627788800[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"点后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:18:19.189 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715322627788800[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:18:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715326071312384[0;39m 生成今日电子书快照开始
2022-07-14 17:18:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715326071312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715326071312384[0;39m ==> Parameters: 
2022-07-14 17:18:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715326071312384[0;39m <==    Updates: 0
2022-07-14 17:18:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715326071312384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:18:20.599 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715328566923264[0;39m ------------- 开始 -------------
2022-07-14 17:18:20.600 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715328566923264[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715322204164096 GET
2022-07-14 17:18:20.600 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715328566923264[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:18:20.600 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715328566923264[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:20.600 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715328566923264[0;39m 请求参数: [202715322204164096]
2022-07-14 17:18:20.600 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715328566923264[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:18:20.601 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715328566923264[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-14 17:18:20.602 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715328566923264[0;39m <==    Columns: id, content
2022-07-14 17:18:20.602 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715328566923264[0;39m <==        Row: 202715322204164096, <<BLOB>>
2022-07-14 17:18:20.602 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715328566923264[0;39m <==      Total: 1
2022-07-14 17:18:20.602 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715328566923264[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:18:20.603 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715328566923264[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-14 17:18:20.632 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715328566923264[0;39m <==    Updates: 1
2022-07-14 17:18:20.633 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715328566923264[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:18:20.633 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715328566923264[0;39m ------------- 结束 耗时：34 ms -------------
2022-07-14 17:18:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715347076386816[0;39m 生成今日电子书快照开始
2022-07-14 17:18:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715347076386816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715347076386816[0;39m ==> Parameters: 
2022-07-14 17:18:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715347076386816[0;39m <==    Updates: 0
2022-07-14 17:18:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715347076386816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:18:26.698 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202715106080067584[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:18:26.698 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202715106080067584[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:18:26.698 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202715106080067584[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:18:26.731 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202715106080067584[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:18:26.732 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715354290589696[0;39m ------------- 开始 -------------
2022-07-14 17:18:26.733 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715354290589696[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:18:26.733 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715354290589696[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:18:26.733 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715354290589696[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:26.733 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715354290589696[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0}]
2022-07-14 17:18:26.734 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m202715354290589696[0;39m ==>  Preparing: update doc set ebook_id = ?, parent = ?, `name` = ?, sort = ?, view_count = ?, vote_count = ? where id = ?
2022-07-14 17:18:26.734 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m202715354290589696[0;39m ==> Parameters: 202714600712572928(Long), 0(Long), 前后端交互融合(String), 5(Integer), 0(Integer), 0(Integer), 202715322204164096(Long)
2022-07-14 17:18:26.739 DEBUG com.zs.wikibb.mapper.DocMapper.updateByPrimaryKey :137 
                [32m202715354290589696[0;39m <==    Updates: 1
2022-07-14 17:18:26.739 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m202715354290589696[0;39m ==>  Preparing: update content set content = ? where id = ?
2022-07-14 17:18:26.740 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m202715354290589696[0;39m ==> Parameters: (String), 202715322204164096(Long)
2022-07-14 17:18:26.740 DEBUG c.z.w.m.ContentMapper.updateByPrimaryKeyWithBLOBs :137 
                [32m202715354290589696[0;39m <==    Updates: 1
2022-07-14 17:18:26.773 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715354290589696[0;39m 返回结果: {"success":true}
2022-07-14 17:18:26.773 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715354290589696[0;39m ------------- 结束 耗时：41 ms -------------
2022-07-14 17:18:26.775 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715354290589696[0;39m ------------- LoginInterceptor 结束 耗时：77 ms -------------
2022-07-14 17:18:26.797 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715354559025152[0;39m ------------- 开始 -------------
2022-07-14 17:18:26.797 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715354559025152[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:18:26.797 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715354559025152[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:18:26.797 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715354559025152[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:26.797 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715354559025152[0;39m 请求参数: [202714600712572928]
2022-07-14 17:18:26.798 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715354559025152[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:18:26.798 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715354559025152[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:18:26.799 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715354559025152[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:18:26.799 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715354559025152[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:18:26.799 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715354559025152[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:18:26.800 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715354559025152[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:18:26.800 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715354559025152[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:18:26.800 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715354559025152[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:18:26.800 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715354559025152[0;39m <==      Total: 5
2022-07-14 17:18:26.800 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715354559025152[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:18:26.801 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715354559025152[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:18:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715368022740992[0;39m 生成今日电子书快照开始
2022-07-14 17:18:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715368022740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715368022740992[0;39m ==> Parameters: 
2022-07-14 17:18:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715368022740992[0;39m <==    Updates: 0
2022-07-14 17:18:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715368022740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:18:35.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715388969095168[0;39m 生成今日电子书快照开始
2022-07-14 17:18:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715388969095168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715388969095168[0;39m ==> Parameters: 
2022-07-14 17:18:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715388969095168[0;39m <==    Updates: 0
2022-07-14 17:18:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715388969095168[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:18:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202715388985872384[0;39m 更新电子书下的文档数据开始
2022-07-14 17:18:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715388985872384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:18:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715388985872384[0;39m ==> Parameters: 
2022-07-14 17:18:35.038 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715388985872384[0;39m <==    Updates: 7
2022-07-14 17:18:35.038 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202715388985872384[0;39m 更新电子书下的文档数据结束，耗时：34 毫秒
2022-07-14 17:18:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715409999335424[0;39m 生成今日电子书快照开始
2022-07-14 17:18:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715409999335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715409999335424[0;39m ==> Parameters: 
2022-07-14 17:18:40.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715409999335424[0;39m <==    Updates: 0
2022-07-14 17:18:40.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715409999335424[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 17:18:40.560 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202715172303933440[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:18:40.560 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202715172303933440[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:18:40.560 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202715172303933440[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:18:40.593 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202715172303933440[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:18:40.594 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715412432031744[0;39m ------------- 开始 -------------
2022-07-14 17:18:40.594 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715412432031744[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:18:40.594 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715412432031744[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:18:40.594 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715412432031744[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:40.594 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715412432031744[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"电子书管理功能开发","parent":0,"sort":6}]
2022-07-14 17:18:40.595 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715412432031744[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:18:40.595 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715412432031744[0;39m ==> Parameters: 202715412436226048(Long), 202714600712572928(Long), 0(Long), 电子书管理功能开发(String), 6(Integer), 0(Integer), 0(Integer)
2022-07-14 17:18:40.597 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715412432031744[0;39m <==    Updates: 1
2022-07-14 17:18:40.597 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715412432031744[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:18:40.597 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715412432031744[0;39m ==> Parameters: 202715412436226048(Long), (String)
2022-07-14 17:18:40.598 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715412432031744[0;39m <==    Updates: 1
2022-07-14 17:18:40.623 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715412432031744[0;39m 返回结果: {"success":true}
2022-07-14 17:18:40.623 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715412432031744[0;39m ------------- 结束 耗时：29 ms -------------
2022-07-14 17:18:40.624 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715412432031744[0;39m ------------- LoginInterceptor 结束 耗时：64 ms -------------
2022-07-14 17:18:40.632 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715412591415296[0;39m ------------- 开始 -------------
2022-07-14 17:18:40.632 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715412591415296[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:18:40.632 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715412591415296[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:18:40.632 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715412591415296[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:40.632 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715412591415296[0;39m 请求参数: [202714600712572928]
2022-07-14 17:18:40.633 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715412591415296[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:18:40.633 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715412591415296[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:18:40.634 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715412591415296[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:18:40.634 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715412591415296[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:18:40.635 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715412591415296[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:18:40.635 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715412591415296[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:18:40.635 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715412591415296[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:18:40.635 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715412591415296[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:18:40.635 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715412591415296[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 0, 0
2022-07-14 17:18:40.636 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715412591415296[0;39m <==      Total: 6
2022-07-14 17:18:40.636 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715412591415296[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:18:40.636 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715412591415296[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:18:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715430954078208[0;39m 生成今日电子书快照开始
2022-07-14 17:18:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715430954078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715430954078208[0;39m ==> Parameters: 
2022-07-14 17:18:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715430954078208[0;39m <==    Updates: 0
2022-07-14 17:18:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715430954078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:18:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715451938181120[0;39m 生成今日电子书快照开始
2022-07-14 17:18:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715451938181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715451938181120[0;39m ==> Parameters: 
2022-07-14 17:18:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715451938181120[0;39m <==    Updates: 0
2022-07-14 17:18:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715451938181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:18:53.388 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202715279774584832[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:18:53.388 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202715279774584832[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:18:53.388 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202715279774584832[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:18:53.422 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202715279774584832[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:18:53.423 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715466240757760[0;39m ------------- 开始 -------------
2022-07-14 17:18:53.424 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715466240757760[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:18:53.424 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715466240757760[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:18:53.424 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715466240757760[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:53.424 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715466240757760[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"分类管理功能开发","parent":0,"sort":7}]
2022-07-14 17:18:53.425 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715466240757760[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:18:53.425 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715466240757760[0;39m ==> Parameters: 202715466249146368(Long), 202714600712572928(Long), 0(Long), 分类管理功能开发(String), 7(Integer), 0(Integer), 0(Integer)
2022-07-14 17:18:53.426 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715466240757760[0;39m <==    Updates: 1
2022-07-14 17:18:53.426 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715466240757760[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:18:53.427 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715466240757760[0;39m ==> Parameters: 202715466249146368(Long), (String)
2022-07-14 17:18:53.427 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715466240757760[0;39m <==    Updates: 1
2022-07-14 17:18:53.521 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715466240757760[0;39m 返回结果: {"success":true}
2022-07-14 17:18:53.521 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715466240757760[0;39m ------------- 结束 耗时：98 ms -------------
2022-07-14 17:18:53.522 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715466240757760[0;39m ------------- LoginInterceptor 结束 耗时：134 ms -------------
2022-07-14 17:18:53.527 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715466676965376[0;39m ------------- 开始 -------------
2022-07-14 17:18:53.527 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715466676965376[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:18:53.527 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715466676965376[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:18:53.527 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715466676965376[0;39m 远程地址: 127.0.0.1
2022-07-14 17:18:53.527 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715466676965376[0;39m 请求参数: [202714600712572928]
2022-07-14 17:18:53.528 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715466676965376[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:18:53.528 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715466676965376[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:18:53.529 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715466676965376[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:18:53.529 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715466676965376[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:18:53.529 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715466676965376[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:18:53.530 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715466676965376[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:18:53.530 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715466676965376[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:18:53.530 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715466676965376[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:18:53.530 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715466676965376[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 0, 0
2022-07-14 17:18:53.531 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715466676965376[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 0, 0
2022-07-14 17:18:53.531 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715466676965376[0;39m <==      Total: 7
2022-07-14 17:18:53.532 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715466676965376[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:18:53.532 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715466676965376[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:18:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715472905506816[0;39m 生成今日电子书快照开始
2022-07-14 17:18:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715472905506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:18:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715472905506816[0;39m ==> Parameters: 
2022-07-14 17:18:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715472905506816[0;39m <==    Updates: 0
2022-07-14 17:18:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715472905506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:19:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715493889609728[0;39m 生成今日电子书快照开始
2022-07-14 17:19:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715493889609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715493889609728[0;39m ==> Parameters: 
2022-07-14 17:19:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715493889609728[0;39m <==    Updates: 0
2022-07-14 17:19:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715493889609728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:19:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715514814992384[0;39m 生成今日电子书快照开始
2022-07-14 17:19:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715514814992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715514814992384[0;39m ==> Parameters: 
2022-07-14 17:19:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715514814992384[0;39m <==    Updates: 0
2022-07-14 17:19:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715514814992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:19:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202715514823380992[0;39m 更新电子书下的文档数据开始
2022-07-14 17:19:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715514823380992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:19:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715514823380992[0;39m ==> Parameters: 
2022-07-14 17:19:05.030 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715514823380992[0;39m <==    Updates: 7
2022-07-14 17:19:05.031 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202715514823380992[0;39m 更新电子书下的文档数据结束，耗时：25 毫秒
2022-07-14 17:19:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715535807483904[0;39m 生成今日电子书快照开始
2022-07-14 17:19:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715535807483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715535807483904[0;39m ==> Parameters: 
2022-07-14 17:19:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715535807483904[0;39m <==    Updates: 0
2022-07-14 17:19:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715535807483904[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:19:10.337 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202715322195775488[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:19:10.338 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202715322195775488[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:19:10.338 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202715322195775488[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:19:10.371 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202715322195775488[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:19:10.372 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715537330016256[0;39m ------------- 开始 -------------
2022-07-14 17:19:10.372 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715537330016256[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:19:10.372 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715537330016256[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:19:10.372 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715537330016256[0;39m 远程地址: 127.0.0.1
2022-07-14 17:19:10.372 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715537330016256[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"文档管理功能开发","parent":0,"sort":8}]
2022-07-14 17:19:10.373 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715537330016256[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:19:10.373 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715537330016256[0;39m ==> Parameters: 202715537334210560(Long), 202714600712572928(Long), 0(Long), 文档管理功能开发(String), 8(Integer), 0(Integer), 0(Integer)
2022-07-14 17:19:10.378 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715537330016256[0;39m <==    Updates: 1
2022-07-14 17:19:10.378 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715537330016256[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:19:10.378 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715537330016256[0;39m ==> Parameters: 202715537334210560(Long), (String)
2022-07-14 17:19:10.379 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715537330016256[0;39m <==    Updates: 1
2022-07-14 17:19:10.405 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715537330016256[0;39m 返回结果: {"success":true}
2022-07-14 17:19:10.406 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715537330016256[0;39m ------------- 结束 耗时：34 ms -------------
2022-07-14 17:19:10.406 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715537330016256[0;39m ------------- LoginInterceptor 结束 耗时：68 ms -------------
2022-07-14 17:19:10.414 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715537506177024[0;39m ------------- 开始 -------------
2022-07-14 17:19:10.414 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715537506177024[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:19:10.414 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715537506177024[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:19:10.414 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715537506177024[0;39m 远程地址: 127.0.0.1
2022-07-14 17:19:10.414 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715537506177024[0;39m 请求参数: [202714600712572928]
2022-07-14 17:19:10.415 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715537506177024[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:19:10.415 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715537506177024[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:19:10.416 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715537506177024[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:19:10.416 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715537506177024[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:19:10.416 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715537506177024[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:19:10.416 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715537506177024[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:19:10.416 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715537506177024[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:19:10.417 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715537506177024[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:19:10.417 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715537506177024[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 0, 0
2022-07-14 17:19:10.417 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715537506177024[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 0, 0
2022-07-14 17:19:10.417 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715537506177024[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 0, 0
2022-07-14 17:19:10.417 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715537506177024[0;39m <==      Total: 8
2022-07-14 17:19:10.418 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715537506177024[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:19:10.418 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715537506177024[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:19:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715556762226688[0;39m 生成今日电子书快照开始
2022-07-14 17:19:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715556762226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715556762226688[0;39m ==> Parameters: 
2022-07-14 17:19:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715556762226688[0;39m <==    Updates: 0
2022-07-14 17:19:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715556762226688[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:19:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715577721163776[0;39m 生成今日电子书快照开始
2022-07-14 17:19:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715577721163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715577721163776[0;39m ==> Parameters: 
2022-07-14 17:19:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715577721163776[0;39m <==    Updates: 0
2022-07-14 17:19:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715577721163776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:19:21.242 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202714635735011328[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:19:21.243 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202714635735011328[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:19:21.243 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202714635735011328[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:19:21.279 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202714635735011328[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:19:21.280 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715583081484288[0;39m ------------- 开始 -------------
2022-07-14 17:19:21.281 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715583081484288[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:19:21.281 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715583081484288[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:19:21.281 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715583081484288[0;39m 远程地址: 127.0.0.1
2022-07-14 17:19:21.281 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715583081484288[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"用户管理功能开发","parent":0,"sort":9}]
2022-07-14 17:19:21.282 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715583081484288[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:19:21.283 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715583081484288[0;39m ==> Parameters: 202715583089872896(Long), 202714600712572928(Long), 0(Long), 用户管理功能开发(String), 9(Integer), 0(Integer), 0(Integer)
2022-07-14 17:19:21.284 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715583081484288[0;39m <==    Updates: 1
2022-07-14 17:19:21.286 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715583081484288[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:19:21.287 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715583081484288[0;39m ==> Parameters: 202715583089872896(Long), (String)
2022-07-14 17:19:21.288 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715583081484288[0;39m <==    Updates: 1
2022-07-14 17:19:21.386 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715583081484288[0;39m 返回结果: {"success":true}
2022-07-14 17:19:21.387 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715583081484288[0;39m ------------- 结束 耗时：107 ms -------------
2022-07-14 17:19:21.387 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715583081484288[0;39m ------------- LoginInterceptor 结束 耗时：145 ms -------------
2022-07-14 17:19:21.394 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715583559634944[0;39m ------------- 开始 -------------
2022-07-14 17:19:21.394 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715583559634944[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:19:21.394 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715583559634944[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:19:21.394 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715583559634944[0;39m 远程地址: 127.0.0.1
2022-07-14 17:19:21.394 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715583559634944[0;39m 请求参数: [202714600712572928]
2022-07-14 17:19:21.395 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715583559634944[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:19:21.395 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715583559634944[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:19:21.396 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:19:21.396 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:19:21.396 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:19:21.397 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:19:21.397 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:19:21.397 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:19:21.397 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 0, 0
2022-07-14 17:19:21.397 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 0, 0
2022-07-14 17:19:21.398 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 0, 0
2022-07-14 17:19:21.398 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715583559634944[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 0, 0
2022-07-14 17:19:21.398 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715583559634944[0;39m <==      Total: 9
2022-07-14 17:19:21.398 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715583559634944[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:19:21.399 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715583559634944[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:19:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715598743015424[0;39m 生成今日电子书快照开始
2022-07-14 17:19:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715598743015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715598743015424[0;39m ==> Parameters: 
2022-07-14 17:19:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715598743015424[0;39m <==    Updates: 0
2022-07-14 17:19:25.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715598743015424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:19:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715619689369600[0;39m 生成今日电子书快照开始
2022-07-14 17:19:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715619689369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715619689369600[0;39m ==> Parameters: 
2022-07-14 17:19:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715619689369600[0;39m <==    Updates: 0
2022-07-14 17:19:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715619689369600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:19:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202715640681861120[0;39m 更新电子书下的文档数据开始
2022-07-14 17:19:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715640681861120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:19:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715640681861120[0;39m ==> Parameters: 
2022-07-14 17:19:35.050 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715640681861120[0;39m <==    Updates: 7
2022-07-14 17:19:35.051 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202715640681861120[0;39m 更新电子书下的文档数据结束，耗时：38 毫秒
2022-07-14 17:19:35.051 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715640841244672[0;39m 生成今日电子书快照开始
2022-07-14 17:19:35.051 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715640841244672[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:35.052 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715640841244672[0;39m ==> Parameters: 
2022-07-14 17:19:35.053 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715640841244672[0;39m <==    Updates: 0
2022-07-14 17:19:35.053 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715640841244672[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:19:37.383 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202715354290589696[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:19:37.383 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202715354290589696[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:19:37.383 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202715354290589696[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:19:37.417 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202715354290589696[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:19:37.418 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715650769162240[0;39m ------------- 开始 -------------
2022-07-14 17:19:37.418 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715650769162240[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:19:37.418 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715650769162240[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:19:37.418 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715650769162240[0;39m 远程地址: 127.0.0.1
2022-07-14 17:19:37.419 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715650769162240[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"阅读量&点赞量","parent":0,"sort":10}]
2022-07-14 17:19:37.421 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715650769162240[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:19:37.422 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715650769162240[0;39m ==> Parameters: 202715650781745152(Long), 202714600712572928(Long), 0(Long), 阅读量&点赞量(String), 10(Integer), 0(Integer), 0(Integer)
2022-07-14 17:19:37.427 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715650769162240[0;39m <==    Updates: 1
2022-07-14 17:19:37.427 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715650769162240[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:19:37.428 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715650769162240[0;39m ==> Parameters: 202715650781745152(Long), (String)
2022-07-14 17:19:37.428 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715650769162240[0;39m <==    Updates: 1
2022-07-14 17:19:37.441 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715650769162240[0;39m 返回结果: {"success":true}
2022-07-14 17:19:37.441 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715650769162240[0;39m ------------- 结束 耗时：23 ms -------------
2022-07-14 17:19:37.442 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715650769162240[0;39m ------------- LoginInterceptor 结束 耗时：59 ms -------------
2022-07-14 17:19:37.448 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715650894991360[0;39m ------------- 开始 -------------
2022-07-14 17:19:37.449 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715650894991360[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:19:37.449 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715650894991360[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:19:37.449 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715650894991360[0;39m 远程地址: 127.0.0.1
2022-07-14 17:19:37.449 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715650894991360[0;39m 请求参数: [202714600712572928]
2022-07-14 17:19:37.450 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715650894991360[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:19:37.451 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715650894991360[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:19:37.452 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:19:37.453 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:19:37.453 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:19:37.453 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:19:37.454 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:19:37.454 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:19:37.454 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 0, 0
2022-07-14 17:19:37.454 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 0, 0
2022-07-14 17:19:37.454 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 0, 0
2022-07-14 17:19:37.454 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 0, 0
2022-07-14 17:19:37.455 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715650894991360[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 0, 0
2022-07-14 17:19:37.455 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715650894991360[0;39m <==      Total: 10
2022-07-14 17:19:37.455 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715650894991360[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:19:37.455 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715650894991360[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:19:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715661657575424[0;39m 生成今日电子书快照开始
2022-07-14 17:19:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715661657575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715661657575424[0;39m ==> Parameters: 
2022-07-14 17:19:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715661657575424[0;39m <==    Updates: 0
2022-07-14 17:19:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715661657575424[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:19:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715682587152384[0;39m 生成今日电子书快照开始
2022-07-14 17:19:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715682587152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715682587152384[0;39m ==> Parameters: 
2022-07-14 17:19:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715682587152384[0;39m <==    Updates: 0
2022-07-14 17:19:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715682587152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:19:47.479 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202715412432031744[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:19:47.479 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202715412432031744[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:19:47.480 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202715412432031744[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:19:47.513 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202715412432031744[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:19:47.514 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715693114855424[0;39m ------------- 开始 -------------
2022-07-14 17:19:47.514 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715693114855424[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:19:47.514 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715693114855424[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:19:47.514 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715693114855424[0;39m 远程地址: 127.0.0.1
2022-07-14 17:19:47.514 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715693114855424[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"知识库功能开发","parent":0,"sort":11}]
2022-07-14 17:19:47.515 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715693114855424[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:19:47.515 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715693114855424[0;39m ==> Parameters: 202715693119049728(Long), 202714600712572928(Long), 0(Long), 知识库功能开发(String), 11(Integer), 0(Integer), 0(Integer)
2022-07-14 17:19:47.520 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715693114855424[0;39m <==    Updates: 1
2022-07-14 17:19:47.520 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715693114855424[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:19:47.520 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715693114855424[0;39m ==> Parameters: 202715693119049728(Long), (String)
2022-07-14 17:19:47.521 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715693114855424[0;39m <==    Updates: 1
2022-07-14 17:19:47.555 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715693114855424[0;39m 返回结果: {"success":true}
2022-07-14 17:19:47.555 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715693114855424[0;39m ------------- 结束 耗时：41 ms -------------
2022-07-14 17:19:47.556 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715693114855424[0;39m ------------- LoginInterceptor 结束 耗时：77 ms -------------
2022-07-14 17:19:47.562 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715693316182016[0;39m ------------- 开始 -------------
2022-07-14 17:19:47.563 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715693316182016[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:19:47.563 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715693316182016[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:19:47.563 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715693316182016[0;39m 远程地址: 127.0.0.1
2022-07-14 17:19:47.563 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715693316182016[0;39m 请求参数: [202714600712572928]
2022-07-14 17:19:47.564 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715693316182016[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:19:47.564 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715693316182016[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:19:47.565 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:19:47.565 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:19:47.566 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:19:47.566 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:19:47.566 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:19:47.566 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:19:47.567 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 0, 0
2022-07-14 17:19:47.567 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 0, 0
2022-07-14 17:19:47.567 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 0, 0
2022-07-14 17:19:47.567 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 0, 0
2022-07-14 17:19:47.567 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 0, 0
2022-07-14 17:19:47.567 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715693316182016[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 0, 0
2022-07-14 17:19:47.568 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715693316182016[0;39m <==      Total: 11
2022-07-14 17:19:47.568 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715693316182016[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:19:47.568 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715693316182016[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:19:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715703588032512[0;39m 生成今日电子书快照开始
2022-07-14 17:19:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715703588032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715703588032512[0;39m ==> Parameters: 
2022-07-14 17:19:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715703588032512[0;39m <==    Updates: 0
2022-07-14 17:19:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715703588032512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:19:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715724567941120[0;39m 生成今日电子书快照开始
2022-07-14 17:19:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715724567941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:19:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715724567941120[0;39m ==> Parameters: 
2022-07-14 17:19:55.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715724567941120[0;39m <==    Updates: 0
2022-07-14 17:19:55.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715724567941120[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:20:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715745493323776[0;39m 生成今日电子书快照开始
2022-07-14 17:20:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715745493323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715745493323776[0;39m ==> Parameters: 
2022-07-14 17:20:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715745493323776[0;39m <==    Updates: 0
2022-07-14 17:20:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715745493323776[0;39m 生成今日电子书快照结束，耗时：8 毫秒
2022-07-14 17:20:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202715766502592512[0;39m 更新电子书下的文档数据开始
2022-07-14 17:20:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715766502592512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:20:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715766502592512[0;39m ==> Parameters: 
2022-07-14 17:20:05.065 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715766502592512[0;39m <==    Updates: 7
2022-07-14 17:20:05.066 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202715766502592512[0;39m 更新电子书下的文档数据结束，耗时：55 毫秒
2022-07-14 17:20:05.066 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715766733279232[0;39m 生成今日电子书快照开始
2022-07-14 17:20:05.066 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715766733279232[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:05.066 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715766733279232[0;39m ==> Parameters: 
2022-07-14 17:20:05.067 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715766733279232[0;39m <==    Updates: 0
2022-07-14 17:20:05.067 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715766733279232[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:20:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715787478306816[0;39m 生成今日电子书快照开始
2022-07-14 17:20:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715787478306816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715787478306816[0;39m ==> Parameters: 
2022-07-14 17:20:10.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715787478306816[0;39m <==    Updates: 0
2022-07-14 17:20:10.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715787478306816[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:20:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715808433049600[0;39m 生成今日电子书快照开始
2022-07-14 17:20:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715808433049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715808433049600[0;39m ==> Parameters: 
2022-07-14 17:20:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715808433049600[0;39m <==    Updates: 0
2022-07-14 17:20:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715808433049600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:20:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715829379403776[0;39m 生成今日电子书快照开始
2022-07-14 17:20:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715829379403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715829379403776[0;39m ==> Parameters: 
2022-07-14 17:20:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715829379403776[0;39m <==    Updates: 0
2022-07-14 17:20:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715829379403776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:20:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715850392866816[0;39m 生成今日电子书快照开始
2022-07-14 17:20:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715850392866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715850392866816[0;39m ==> Parameters: 
2022-07-14 17:20:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715850392866816[0;39m <==    Updates: 0
2022-07-14 17:20:25.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715850392866816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:20:28.016 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202715466240757760[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:20:28.016 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202715466240757760[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/doc/save
2022-07-14 17:20:28.016 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202715466240757760[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:20:28.050 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202715466240757760[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:20:28.050 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715863135162368[0;39m ------------- 开始 -------------
2022-07-14 17:20:28.051 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715863135162368[0;39m 请求地址: http://127.0.0.1:8880/doc/save POST
2022-07-14 17:20:28.051 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715863135162368[0;39m 类名方法: com.zs.wikibb.controller.DocController.save
2022-07-14 17:20:28.051 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715863135162368[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:28.051 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715863135162368[0;39m 请求参数: [{"content":"","ebookId":202714600712572928,"name":"项目部署发布","parent":0,"sort":12}]
2022-07-14 17:20:28.052 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715863135162368[0;39m ==>  Preparing: insert into doc (id, ebook_id, parent, `name`, sort, view_count, vote_count) values (?, ?, ?, ?, ?, ?, ?)
2022-07-14 17:20:28.052 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715863135162368[0;39m ==> Parameters: 202715863143550976(Long), 202714600712572928(Long), 0(Long), 项目部署发布(String), 12(Integer), 0(Integer), 0(Integer)
2022-07-14 17:20:28.054 DEBUG com.zs.wikibb.mapper.DocMapper.insert             :137 
                [32m202715863135162368[0;39m <==    Updates: 1
2022-07-14 17:20:28.054 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715863135162368[0;39m ==>  Preparing: insert into content (id, content) values (?, ?)
2022-07-14 17:20:28.055 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715863135162368[0;39m ==> Parameters: 202715863143550976(Long), (String)
2022-07-14 17:20:28.055 DEBUG com.zs.wikibb.mapper.ContentMapper.insert         :137 
                [32m202715863135162368[0;39m <==    Updates: 1
2022-07-14 17:20:28.119 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715863135162368[0;39m 返回结果: {"success":true}
2022-07-14 17:20:28.119 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715863135162368[0;39m ------------- 结束 耗时：69 ms -------------
2022-07-14 17:20:28.120 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202715863135162368[0;39m ------------- LoginInterceptor 结束 耗时：104 ms -------------
2022-07-14 17:20:28.126 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715863453929472[0;39m ------------- 开始 -------------
2022-07-14 17:20:28.127 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715863453929472[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:20:28.127 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715863453929472[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:20:28.127 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715863453929472[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:28.127 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715863453929472[0;39m 请求参数: [202714600712572928]
2022-07-14 17:20:28.128 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715863453929472[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:20:28.128 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715863453929472[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:20:28.130 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:20:28.130 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:20:28.131 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:20:28.131 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:20:28.131 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:20:28.131 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:20:28.132 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 0, 0
2022-07-14 17:20:28.132 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 0, 0
2022-07-14 17:20:28.132 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 0, 0
2022-07-14 17:20:28.132 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 0, 0
2022-07-14 17:20:28.133 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 0, 0
2022-07-14 17:20:28.133 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 0, 0
2022-07-14 17:20:28.133 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715863453929472[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 0, 0
2022-07-14 17:20:28.134 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715863453929472[0;39m <==      Total: 12
2022-07-14 17:20:28.135 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715863453929472[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:20:28.135 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715863453929472[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 17:20:29.249 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715868164132864[0;39m ------------- 开始 -------------
2022-07-14 17:20:29.249 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715868164132864[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715868164132864[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715868168327168[0;39m ------------- 开始 -------------
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715868164132864[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715868168327169[0;39m ------------- 开始 -------------
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715868168327168[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715868164132864[0;39m 请求参数: []
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715868168327169[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715868168327168[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715868168327169[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715868168327168[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715868168327169[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715868168327168[0;39m 请求参数: []
2022-07-14 17:20:29.250 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202715868164132864[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:20:29.250 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715868168327169[0;39m 请求参数: []
2022-07-14 17:20:29.251 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202715868168327168[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:20:29.251 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202715868164132864[0;39m ==> Parameters: 
2022-07-14 17:20:29.251 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202715868168327168[0;39m ==> Parameters: 
2022-07-14 17:20:29.251 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202715868168327169[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:20:29.251 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202715868164132864[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:20:29.251 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202715868168327169[0;39m ==> Parameters: 
2022-07-14 17:20:29.251 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202715868168327168[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:20:29.251 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202715868164132864[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:20:29.251 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202715868168327168[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:20:29.251 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:20:29.251 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202715868164132864[0;39m <==        Row: 2022-07-14, 106, 25, 1, 1
2022-07-14 17:20:29.251 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202715868168327168[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:20:29.252 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:20:29.252 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202715868164132864[0;39m <==      Total: 2
2022-07-14 17:20:29.252 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202715868168327168[0;39m <==      Total: 2
2022-07-14 17:20:29.252 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715868168327168[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:20:29.252 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:20:29.252 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715868164132864[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":106,"viewIncrease":1,"voteCount":25,"voteIncrease":1}],"success":true}
2022-07-14 17:20:29.252 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715868168327168[0;39m ------------- 结束 耗时：2 ms -------------
2022-07-14 17:20:29.252 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715868164132864[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:20:29.252 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:20:29.252 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:20:29.253 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:20:29.253 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:20:29.253 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:20:29.253 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:20:29.253 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:20:29.254 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:20:29.254 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:20:29.254 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:20:29.255 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:20:29.255 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:20:29.255 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:20:29.255 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715868168327169[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:20:29.255 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202715868168327169[0;39m <==      Total: 16
2022-07-14 17:20:29.256 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715868168327169[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:20:29.256 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715868168327169[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:20:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715871318249472[0;39m 生成今日电子书快照开始
2022-07-14 17:20:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715871318249472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715871318249472[0;39m ==> Parameters: 
2022-07-14 17:20:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715871318249472[0;39m <==    Updates: 0
2022-07-14 17:20:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715871318249472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:20:30.449 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715873197297664[0;39m ------------- 开始 -------------
2022-07-14 17:20:30.450 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715873197297664[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:20:30.450 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715873201491968[0;39m ------------- 开始 -------------
2022-07-14 17:20:30.450 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715873197297664[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:20:30.450 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715873201491968[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715873197297664[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715873201491968[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715873205686272[0;39m ------------- 开始 -------------
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715873197297664[0;39m 请求参数: []
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715873201491968[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715873205686272[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715873201491968[0;39m 请求参数: []
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715873205686272[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715873205686272[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:30.451 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202715873201491968[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:20:30.451 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202715873197297664[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:20:30.451 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715873205686272[0;39m 请求参数: []
2022-07-14 17:20:30.452 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202715873201491968[0;39m ==> Parameters: 
2022-07-14 17:20:30.452 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202715873197297664[0;39m ==> Parameters: 
2022-07-14 17:20:30.452 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202715873205686272[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:20:30.452 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202715873205686272[0;39m ==> Parameters: 
2022-07-14 17:20:30.452 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202715873201491968[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:20:30.452 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202715873197297664[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:20:30.453 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202715873201491968[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:20:30.453 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202715873197297664[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:20:30.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:20:30.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:20:30.453 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202715873201491968[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:20:30.453 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202715873197297664[0;39m <==        Row: 2022-07-14, 106, 25, 1, 1
2022-07-14 17:20:30.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:20:30.453 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202715873201491968[0;39m <==      Total: 2
2022-07-14 17:20:30.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:20:30.453 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202715873197297664[0;39m <==      Total: 2
2022-07-14 17:20:30.453 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:20:30.454 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715873201491968[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:20:30.454 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715873197297664[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":106,"viewIncrease":1,"voteCount":25,"voteIncrease":1}],"success":true}
2022-07-14 17:20:30.454 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:20:30.454 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715873201491968[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:20:30.454 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715873197297664[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:20:30.454 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:20:30.454 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:20:30.454 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:20:30.454 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:20:30.455 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:20:30.455 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:20:30.455 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:20:30.455 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:20:30.456 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:20:30.456 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:20:30.456 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202715873205686272[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:20:30.457 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202715873205686272[0;39m <==      Total: 16
2022-07-14 17:20:30.457 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715873205686272[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:20:30.457 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715873205686272[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:20:31.901 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715879287427072[0;39m ------------- 开始 -------------
2022-07-14 17:20:31.901 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715879287427072[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:20:31.902 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715879287427072[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:20:31.902 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715879287427072[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:31.902 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715879287427072[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-14 17:20:31.903 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202715879287427072[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:20:31.904 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202715879287427072[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-14 17:20:31.904 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202715879287427072[0;39m <==    Columns: count(0)
2022-07-14 17:20:31.905 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202715879287427072[0;39m <==        Row: 1
2022-07-14 17:20:31.905 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202715879287427072[0;39m <==      Total: 1
2022-07-14 17:20:31.905 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202715879287427072[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 17:20:31.906 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202715879287427072[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-14 17:20:31.906 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202715879287427072[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:20:31.907 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202715879287427072[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 11, 0, 0
2022-07-14 17:20:31.907 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202715879287427072[0;39m <==      Total: 1
2022-07-14 17:20:31.907 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202715879287427072[0;39m 总行数：1
2022-07-14 17:20:31.907 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202715879287427072[0;39m 总页数：1
2022-07-14 17:20:31.907 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715879287427072[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":11,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":0,"voteCount":0}],"total":1},"success":true}
2022-07-14 17:20:31.908 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715879287427072[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:20:32.757 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715882877751296[0;39m ------------- 开始 -------------
2022-07-14 17:20:32.758 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715882877751296[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:20:32.758 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715882877751296[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:20:32.758 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715882877751296[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:32.758 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715882877751296[0;39m 请求参数: [202714600712572928]
2022-07-14 17:20:32.759 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715882877751296[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:20:32.759 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715882877751296[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:20:32.760 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:20:32.760 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 0, 0
2022-07-14 17:20:32.761 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 0, 0
2022-07-14 17:20:32.761 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 0, 0
2022-07-14 17:20:32.762 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:20:32.762 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:20:32.762 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 0, 0
2022-07-14 17:20:32.762 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 0, 0
2022-07-14 17:20:32.763 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 0, 0
2022-07-14 17:20:32.763 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 0, 0
2022-07-14 17:20:32.763 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 0, 0
2022-07-14 17:20:32.764 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 0, 0
2022-07-14 17:20:32.764 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202715882877751296[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 0, 0
2022-07-14 17:20:32.764 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202715882877751296[0;39m <==      Total: 12
2022-07-14 17:20:32.765 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715882877751296[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:20:32.766 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715882877751296[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 17:20:32.813 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715883112632320[0;39m ------------- 开始 -------------
2022-07-14 17:20:32.813 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715883112632320[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-14 17:20:32.813 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715883112632320[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:20:32.813 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715883112632320[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:32.814 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715883112632320[0;39m 请求参数: [202714909656616960]
2022-07-14 17:20:32.814 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715883112632320[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:20:32.814 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715883112632320[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:20:32.815 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715883112632320[0;39m <==    Columns: id, content
2022-07-14 17:20:32.815 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715883112632320[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-14 17:20:32.816 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715883112632320[0;39m <==      Total: 1
2022-07-14 17:20:32.816 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715883112632320[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:20:32.816 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715883112632320[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:20:32.855 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715883112632320[0;39m <==    Updates: 1
2022-07-14 17:20:32.855 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715883112632320[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:20:32.855 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715883112632320[0;39m ------------- 结束 耗时：42 ms -------------
2022-07-14 17:20:34.625 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715890712711168[0;39m ------------- 开始 -------------
2022-07-14 17:20:34.625 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715890712711168[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-14 17:20:34.625 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715890712711168[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:20:34.625 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715890712711168[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:34.625 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715890712711168[0;39m 请求参数: [202715069841281024]
2022-07-14 17:20:34.626 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715890712711168[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:20:34.626 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715890712711168[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:20:34.627 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715890712711168[0;39m <==    Columns: id, content
2022-07-14 17:20:34.627 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715890712711168[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-14 17:20:34.627 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715890712711168[0;39m <==      Total: 1
2022-07-14 17:20:34.627 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715890712711168[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:20:34.627 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715890712711168[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:20:34.658 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715890712711168[0;39m <==    Updates: 1
2022-07-14 17:20:34.658 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715890712711168[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:20:34.658 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715890712711168[0;39m ------------- 结束 耗时：33 ms -------------
2022-07-14 17:20:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202715892319129600[0;39m 更新电子书下的文档数据开始
2022-07-14 17:20:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715892319129600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:20:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715892319129600[0;39m ==> Parameters: 
2022-07-14 17:20:35.032 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202715892319129600[0;39m <==    Updates: 7
2022-07-14 17:20:35.032 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202715892319129600[0;39m 更新电子书下的文档数据结束，耗时：24 毫秒
2022-07-14 17:20:35.032 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715892419792896[0;39m 生成今日电子书快照开始
2022-07-14 17:20:35.032 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715892419792896[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:35.033 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715892419792896[0;39m ==> Parameters: 
2022-07-14 17:20:35.061 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715892419792896[0;39m <==    Updates: 0
2022-07-14 17:20:35.061 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715892419792896[0;39m 生成今日电子书快照结束，耗时：29 毫秒
2022-07-14 17:20:35.166 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715892981829632[0;39m ------------- 开始 -------------
2022-07-14 17:20:35.166 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715892981829632[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715172312322048 GET
2022-07-14 17:20:35.167 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715892981829632[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:20:35.167 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715892981829632[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:35.167 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715892981829632[0;39m 请求参数: [202715172312322048]
2022-07-14 17:20:35.167 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715892981829632[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:20:35.168 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715892981829632[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:20:35.168 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715892981829632[0;39m <==    Columns: id, content
2022-07-14 17:20:35.168 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715892981829632[0;39m <==        Row: 202715172312322048, <<BLOB>>
2022-07-14 17:20:35.169 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715892981829632[0;39m <==      Total: 1
2022-07-14 17:20:35.169 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715892981829632[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:20:35.169 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715892981829632[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:20:35.186 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715892981829632[0;39m <==    Updates: 1
2022-07-14 17:20:35.187 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715892981829632[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:20:35.187 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715892981829632[0;39m ------------- 结束 耗时：21 ms -------------
2022-07-14 17:20:35.929 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202715896182083584[0;39m ------------- 开始 -------------
2022-07-14 17:20:35.929 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202715896182083584[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-14 17:20:35.929 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202715896182083584[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:20:35.929 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202715896182083584[0;39m 远程地址: 127.0.0.1
2022-07-14 17:20:35.929 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202715896182083584[0;39m 请求参数: [202714909656616960]
2022-07-14 17:20:35.930 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715896182083584[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:20:35.930 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715896182083584[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:20:35.931 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715896182083584[0;39m <==    Columns: id, content
2022-07-14 17:20:35.931 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202715896182083584[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-14 17:20:35.931 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202715896182083584[0;39m <==      Total: 1
2022-07-14 17:20:35.931 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715896182083584[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:20:35.932 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715896182083584[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:20:35.955 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202715896182083584[0;39m <==    Updates: 1
2022-07-14 17:20:35.955 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202715896182083584[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:20:35.955 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202715896182083584[0;39m ------------- 结束 耗时：26 ms -------------
2022-07-14 17:20:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715913320009728[0;39m 生成今日电子书快照开始
2022-07-14 17:20:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715913320009728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715913320009728[0;39m ==> Parameters: 
2022-07-14 17:20:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715913320009728[0;39m <==    Updates: 0
2022-07-14 17:20:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715913320009728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:20:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715934262169600[0;39m 生成今日电子书快照开始
2022-07-14 17:20:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715934262169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715934262169600[0;39m ==> Parameters: 
2022-07-14 17:20:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715934262169600[0;39m <==    Updates: 0
2022-07-14 17:20:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715934262169600[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-14 17:20:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715955258855424[0;39m 生成今日电子书快照开始
2022-07-14 17:20:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715955258855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715955258855424[0;39m ==> Parameters: 
2022-07-14 17:20:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715955258855424[0;39m <==    Updates: 0
2022-07-14 17:20:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715955258855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:20:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715976205209600[0;39m 生成今日电子书快照开始
2022-07-14 17:20:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715976205209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:20:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715976205209600[0;39m ==> Parameters: 
2022-07-14 17:20:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715976205209600[0;39m <==    Updates: 0
2022-07-14 17:20:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715976205209600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:21:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202715997206089728[0;39m 生成今日电子书快照开始
2022-07-14 17:21:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715997206089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715997206089728[0;39m ==> Parameters: 
2022-07-14 17:21:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202715997206089728[0;39m <==    Updates: 0
2022-07-14 17:21:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202715997206089728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:21:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716018127278080[0;39m 生成今日电子书快照开始
2022-07-14 17:21:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716018127278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716018127278080[0;39m ==> Parameters: 
2022-07-14 17:21:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716018127278080[0;39m <==    Updates: 0
2022-07-14 17:21:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716018127278080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:21:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202716018144055296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:21:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716018144055296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:21:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716018144055296[0;39m ==> Parameters: 
2022-07-14 17:21:05.107 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716018144055296[0;39m <==    Updates: 7
2022-07-14 17:21:05.107 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202716018144055296[0;39m 更新电子书下的文档数据结束，耗时：100 毫秒
2022-07-14 17:21:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716039140741120[0;39m 生成今日电子书快照开始
2022-07-14 17:21:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716039140741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716039140741120[0;39m ==> Parameters: 
2022-07-14 17:21:10.049 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716039140741120[0;39m <==    Updates: 0
2022-07-14 17:21:10.049 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716039140741120[0;39m 生成今日电子书快照结束，耗时：36 毫秒
2022-07-14 17:21:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716060116455424[0;39m 生成今日电子书快照开始
2022-07-14 17:21:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716060116455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716060116455424[0;39m ==> Parameters: 
2022-07-14 17:21:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716060116455424[0;39m <==    Updates: 0
2022-07-14 17:21:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716060116455424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:21:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716081050226688[0;39m 生成今日电子书快照开始
2022-07-14 17:21:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716081050226688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716081050226688[0;39m ==> Parameters: 
2022-07-14 17:21:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716081050226688[0;39m <==    Updates: 0
2022-07-14 17:21:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716081050226688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:21:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716102038523904[0;39m 生成今日电子书快照开始
2022-07-14 17:21:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716102038523904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716102038523904[0;39m ==> Parameters: 
2022-07-14 17:21:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716102038523904[0;39m <==    Updates: 0
2022-07-14 17:21:25.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716102038523904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:21:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716122989072384[0;39m 生成今日电子书快照开始
2022-07-14 17:21:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716122989072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716122989072384[0;39m ==> Parameters: 
2022-07-14 17:21:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716122989072384[0;39m <==    Updates: 0
2022-07-14 17:21:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716122989072384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:21:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716143952203776[0;39m 生成今日电子书快照开始
2022-07-14 17:21:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716143952203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716143952203776[0;39m ==> Parameters: 
2022-07-14 17:21:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716143952203776[0;39m <==    Updates: 0
2022-07-14 17:21:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716143952203776[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:21:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202716143981563904[0;39m 更新电子书下的文档数据开始
2022-07-14 17:21:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716143981563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:21:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716143981563904[0;39m ==> Parameters: 
2022-07-14 17:21:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716143981563904[0;39m <==    Updates: 7
2022-07-14 17:21:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202716143981563904[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-14 17:21:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716164974055424[0;39m 生成今日电子书快照开始
2022-07-14 17:21:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716164974055424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716164974055424[0;39m ==> Parameters: 
2022-07-14 17:21:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716164974055424[0;39m <==    Updates: 0
2022-07-14 17:21:40.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716164974055424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:21:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716185895243776[0;39m 生成今日电子书快照开始
2022-07-14 17:21:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716185895243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716185895243776[0;39m ==> Parameters: 
2022-07-14 17:21:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716185895243776[0;39m <==    Updates: 0
2022-07-14 17:21:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716185895243776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:21:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716206904512512[0;39m 生成今日电子书快照开始
2022-07-14 17:21:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716206904512512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716206904512512[0;39m ==> Parameters: 
2022-07-14 17:21:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716206904512512[0;39m <==    Updates: 0
2022-07-14 17:21:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716206904512512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:21:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716227834089472[0;39m 生成今日电子书快照开始
2022-07-14 17:21:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716227834089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:21:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716227834089472[0;39m ==> Parameters: 
2022-07-14 17:21:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716227834089472[0;39m <==    Updates: 0
2022-07-14 17:21:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716227834089472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:22:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716248809803776[0;39m 生成今日电子书快照开始
2022-07-14 17:22:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716248809803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716248809803776[0;39m ==> Parameters: 
2022-07-14 17:22:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716248809803776[0;39m <==    Updates: 0
2022-07-14 17:22:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716248809803776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:22:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716269810683904[0;39m 生成今日电子书快照开始
2022-07-14 17:22:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716269810683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716269810683904[0;39m ==> Parameters: 
2022-07-14 17:22:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716269810683904[0;39m <==    Updates: 0
2022-07-14 17:22:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716269810683904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:22:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202716269814878208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:22:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716269814878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:22:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716269814878208[0;39m ==> Parameters: 
2022-07-14 17:22:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716269814878208[0;39m <==    Updates: 7
2022-07-14 17:22:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202716269814878208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:22:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716290773815296[0;39m 生成今日电子书快照开始
2022-07-14 17:22:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716290773815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716290773815296[0;39m ==> Parameters: 
2022-07-14 17:22:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716290773815296[0;39m <==    Updates: 0
2022-07-14 17:22:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716290773815296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:22:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716311736946688[0;39m 生成今日电子书快照开始
2022-07-14 17:22:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716311736946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716311736946688[0;39m ==> Parameters: 
2022-07-14 17:22:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716311736946688[0;39m <==    Updates: 0
2022-07-14 17:22:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716311736946688[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:22:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716332695883776[0;39m 生成今日电子书快照开始
2022-07-14 17:22:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716332695883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716332695883776[0;39m ==> Parameters: 
2022-07-14 17:22:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716332695883776[0;39m <==    Updates: 0
2022-07-14 17:22:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716332695883776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:22:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716353700958208[0;39m 生成今日电子书快照开始
2022-07-14 17:22:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716353700958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716353700958208[0;39m ==> Parameters: 
2022-07-14 17:22:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716353700958208[0;39m <==    Updates: 0
2022-07-14 17:22:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716353700958208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:22:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716374693449728[0;39m 生成今日电子书快照开始
2022-07-14 17:22:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716374693449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716374693449728[0;39m ==> Parameters: 
2022-07-14 17:22:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716374693449728[0;39m <==    Updates: 0
2022-07-14 17:22:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716374693449728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:22:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202716395610443776[0;39m 更新电子书下的文档数据开始
2022-07-14 17:22:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716395610443776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:22:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716395610443776[0;39m ==> Parameters: 
2022-07-14 17:22:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716395610443776[0;39m <==    Updates: 7
2022-07-14 17:22:35.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202716395610443776[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:22:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716395614638080[0;39m 生成今日电子书快照开始
2022-07-14 17:22:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716395614638080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716395614638080[0;39m ==> Parameters: 
2022-07-14 17:22:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716395614638080[0;39m <==    Updates: 0
2022-07-14 17:22:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716395614638080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:22:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716416590352384[0;39m 生成今日电子书快照开始
2022-07-14 17:22:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716416590352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716416590352384[0;39m ==> Parameters: 
2022-07-14 17:22:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716416590352384[0;39m <==    Updates: 0
2022-07-14 17:22:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716416590352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:22:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716437591232512[0;39m 生成今日电子书快照开始
2022-07-14 17:22:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716437591232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716437591232512[0;39m ==> Parameters: 
2022-07-14 17:22:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716437591232512[0;39m <==    Updates: 0
2022-07-14 17:22:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716437591232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:22:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716458562752512[0;39m 生成今日电子书快照开始
2022-07-14 17:22:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716458562752512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716458562752512[0;39m ==> Parameters: 
2022-07-14 17:22:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716458562752512[0;39m <==    Updates: 0
2022-07-14 17:22:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716458562752512[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:22:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716479496523776[0;39m 生成今日电子书快照开始
2022-07-14 17:22:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716479496523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:22:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716479496523776[0;39m ==> Parameters: 
2022-07-14 17:22:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716479496523776[0;39m <==    Updates: 0
2022-07-14 17:22:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716479496523776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:23:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716500484820992[0;39m 生成今日电子书快照开始
2022-07-14 17:23:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716500484820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716500484820992[0;39m ==> Parameters: 
2022-07-14 17:23:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716500484820992[0;39m <==    Updates: 0
2022-07-14 17:23:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716500484820992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:23:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716521439563776[0;39m 生成今日电子书快照开始
2022-07-14 17:23:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716521439563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716521439563776[0;39m ==> Parameters: 
2022-07-14 17:23:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716521439563776[0;39m <==    Updates: 0
2022-07-14 17:23:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716521439563776[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:23:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202716521473118208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:23:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716521473118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:23:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716521473118208[0;39m ==> Parameters: 
2022-07-14 17:23:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716521473118208[0;39m <==    Updates: 7
2022-07-14 17:23:05.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202716521473118208[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-14 17:23:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716542465609728[0;39m 生成今日电子书快照开始
2022-07-14 17:23:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716542465609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716542465609728[0;39m ==> Parameters: 
2022-07-14 17:23:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716542465609728[0;39m <==    Updates: 0
2022-07-14 17:23:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716542465609728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:23:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716563386798080[0;39m 生成今日电子书快照开始
2022-07-14 17:23:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716563386798080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716563386798080[0;39m ==> Parameters: 
2022-07-14 17:23:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716563386798080[0;39m <==    Updates: 0
2022-07-14 17:23:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716563386798080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:23:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716584379289600[0;39m 生成今日电子书快照开始
2022-07-14 17:23:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716584379289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716584379289600[0;39m ==> Parameters: 
2022-07-14 17:23:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716584379289600[0;39m <==    Updates: 0
2022-07-14 17:23:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716584379289600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:23:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716605342420992[0;39m 生成今日电子书快照开始
2022-07-14 17:23:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716605342420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716605342420992[0;39m ==> Parameters: 
2022-07-14 17:23:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716605342420992[0;39m <==    Updates: 0
2022-07-14 17:23:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716605342420992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:23:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716626292969472[0;39m 生成今日电子书快照开始
2022-07-14 17:23:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716626292969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716626292969472[0;39m ==> Parameters: 
2022-07-14 17:23:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716626292969472[0;39m <==    Updates: 0
2022-07-14 17:23:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716626292969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:23:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716647298043904[0;39m 生成今日电子书快照开始
2022-07-14 17:23:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716647298043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716647298043904[0;39m ==> Parameters: 
2022-07-14 17:23:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716647298043904[0;39m <==    Updates: 0
2022-07-14 17:23:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716647298043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:23:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202716647306432512[0;39m 更新电子书下的文档数据开始
2022-07-14 17:23:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716647306432512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:23:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716647306432512[0;39m ==> Parameters: 
2022-07-14 17:23:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716647306432512[0;39m <==    Updates: 7
2022-07-14 17:23:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202716647306432512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:23:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716668236009472[0;39m 生成今日电子书快照开始
2022-07-14 17:23:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716668236009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716668236009472[0;39m ==> Parameters: 
2022-07-14 17:23:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716668236009472[0;39m <==    Updates: 0
2022-07-14 17:23:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716668236009472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:23:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716689232695296[0;39m 生成今日电子书快照开始
2022-07-14 17:23:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716689232695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716689232695296[0;39m ==> Parameters: 
2022-07-14 17:23:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716689232695296[0;39m <==    Updates: 0
2022-07-14 17:23:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716689232695296[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:23:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716710195826688[0;39m 生成今日电子书快照开始
2022-07-14 17:23:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716710195826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716710195826688[0;39m ==> Parameters: 
2022-07-14 17:23:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716710195826688[0;39m <==    Updates: 0
2022-07-14 17:23:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716710195826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:23:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716731163152384[0;39m 生成今日电子书快照开始
2022-07-14 17:23:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716731163152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:23:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716731163152384[0;39m ==> Parameters: 
2022-07-14 17:23:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716731163152384[0;39m <==    Updates: 0
2022-07-14 17:23:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716731163152384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:24:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716752134672384[0;39m 生成今日电子书快照开始
2022-07-14 17:24:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716752134672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716752134672384[0;39m ==> Parameters: 
2022-07-14 17:24:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716752134672384[0;39m <==    Updates: 0
2022-07-14 17:24:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716752134672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:24:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202716773106192384[0;39m 更新电子书下的文档数据开始
2022-07-14 17:24:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716773106192384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:24:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716773106192384[0;39m ==> Parameters: 
2022-07-14 17:24:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716773106192384[0;39m <==    Updates: 7
2022-07-14 17:24:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202716773106192384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:24:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716773110386688[0;39m 生成今日电子书快照开始
2022-07-14 17:24:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716773110386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716773110386688[0;39m ==> Parameters: 
2022-07-14 17:24:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716773110386688[0;39m <==    Updates: 0
2022-07-14 17:24:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716773110386688[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-14 17:24:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716794086100992[0;39m 生成今日电子书快照开始
2022-07-14 17:24:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716794086100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716794086100992[0;39m ==> Parameters: 
2022-07-14 17:24:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716794086100992[0;39m <==    Updates: 0
2022-07-14 17:24:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716794086100992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:24:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716815066009600[0;39m 生成今日电子书快照开始
2022-07-14 17:24:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716815066009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716815066009600[0;39m ==> Parameters: 
2022-07-14 17:24:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716815066009600[0;39m <==    Updates: 0
2022-07-14 17:24:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716815066009600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:24:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716836024946688[0;39m 生成今日电子书快照开始
2022-07-14 17:24:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716836024946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716836024946688[0;39m ==> Parameters: 
2022-07-14 17:24:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716836024946688[0;39m <==    Updates: 0
2022-07-14 17:24:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716836024946688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:24:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716856992272384[0;39m 生成今日电子书快照开始
2022-07-14 17:24:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716856992272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716856992272384[0;39m ==> Parameters: 
2022-07-14 17:24:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716856992272384[0;39m <==    Updates: 0
2022-07-14 17:24:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716856992272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:24:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716877988958208[0;39m 生成今日电子书快照开始
2022-07-14 17:24:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716877988958208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716877988958208[0;39m ==> Parameters: 
2022-07-14 17:24:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716877988958208[0;39m <==    Updates: 0
2022-07-14 17:24:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716877988958208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:24:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202716898922729472[0;39m 更新电子书下的文档数据开始
2022-07-14 17:24:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716898922729472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:24:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716898922729472[0;39m ==> Parameters: 
2022-07-14 17:24:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202716898922729472[0;39m <==    Updates: 7
2022-07-14 17:24:35.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202716898922729472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:24:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716898926923776[0;39m 生成今日电子书快照开始
2022-07-14 17:24:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716898926923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716898926923776[0;39m ==> Parameters: 
2022-07-14 17:24:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716898926923776[0;39m <==    Updates: 0
2022-07-14 17:24:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716898926923776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:24:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716919906832384[0;39m 生成今日电子书快照开始
2022-07-14 17:24:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716919906832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716919906832384[0;39m ==> Parameters: 
2022-07-14 17:24:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716919906832384[0;39m <==    Updates: 0
2022-07-14 17:24:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716919906832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:24:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716940920295424[0;39m 生成今日电子书快照开始
2022-07-14 17:24:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716940920295424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716940920295424[0;39m ==> Parameters: 
2022-07-14 17:24:45.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716940920295424[0;39m <==    Updates: 0
2022-07-14 17:24:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716940920295424[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:24:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716961879232512[0;39m 生成今日电子书快照开始
2022-07-14 17:24:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716961879232512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716961879232512[0;39m ==> Parameters: 
2022-07-14 17:24:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716961879232512[0;39m <==    Updates: 0
2022-07-14 17:24:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716961879232512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:24:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202716982833975296[0;39m 生成今日电子书快照开始
2022-07-14 17:24:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716982833975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:24:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716982833975296[0;39m ==> Parameters: 
2022-07-14 17:24:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202716982833975296[0;39m <==    Updates: 0
2022-07-14 17:24:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202716982833975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:25:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717003818078208[0;39m 生成今日电子书快照开始
2022-07-14 17:25:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717003818078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717003818078208[0;39m ==> Parameters: 
2022-07-14 17:25:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717003818078208[0;39m <==    Updates: 0
2022-07-14 17:25:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717003818078208[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:25:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717024756043776[0;39m 生成今日电子书快照开始
2022-07-14 17:25:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717024756043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717024756043776[0;39m ==> Parameters: 
2022-07-14 17:25:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717024756043776[0;39m <==    Updates: 0
2022-07-14 17:25:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717024756043776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:25:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202717024768626688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:25:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717024768626688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:25:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717024768626688[0;39m ==> Parameters: 
2022-07-14 17:25:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717024768626688[0;39m <==    Updates: 7
2022-07-14 17:25:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202717024768626688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:25:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717045769506816[0;39m 生成今日电子书快照开始
2022-07-14 17:25:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717045769506816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717045769506816[0;39m ==> Parameters: 
2022-07-14 17:25:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717045769506816[0;39m <==    Updates: 0
2022-07-14 17:25:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717045769506816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:25:15.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717066690695168[0;39m 生成今日电子书快照开始
2022-07-14 17:25:15.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717066690695168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:15.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717066690695168[0;39m ==> Parameters: 
2022-07-14 17:25:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717066690695168[0;39m <==    Updates: 0
2022-07-14 17:25:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717066690695168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:25:20.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717087666409472[0;39m 生成今日电子书快照开始
2022-07-14 17:25:20.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717087666409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717087666409472[0;39m ==> Parameters: 
2022-07-14 17:25:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717087666409472[0;39m <==    Updates: 0
2022-07-14 17:25:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717087666409472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:25:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717108667289600[0;39m 生成今日电子书快照开始
2022-07-14 17:25:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717108667289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717108667289600[0;39m ==> Parameters: 
2022-07-14 17:25:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717108667289600[0;39m <==    Updates: 0
2022-07-14 17:25:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717108667289600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:25:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717129622032384[0;39m 生成今日电子书快照开始
2022-07-14 17:25:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717129622032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717129622032384[0;39m ==> Parameters: 
2022-07-14 17:25:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717129622032384[0;39m <==    Updates: 0
2022-07-14 17:25:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717129622032384[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:25:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202717150631301120[0;39m 更新电子书下的文档数据开始
2022-07-14 17:25:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717150631301120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:25:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717150631301120[0;39m ==> Parameters: 
2022-07-14 17:25:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717150631301120[0;39m <==    Updates: 7
2022-07-14 17:25:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202717150631301120[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:25:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717150639689728[0;39m 生成今日电子书快照开始
2022-07-14 17:25:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717150639689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717150639689728[0;39m ==> Parameters: 
2022-07-14 17:25:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717150639689728[0;39m <==    Updates: 0
2022-07-14 17:25:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717150639689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:25:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717171581849600[0;39m 生成今日电子书快照开始
2022-07-14 17:25:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717171581849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717171581849600[0;39m ==> Parameters: 
2022-07-14 17:25:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717171581849600[0;39m <==    Updates: 0
2022-07-14 17:25:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717171581849600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:25:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717192553369600[0;39m 生成今日电子书快照开始
2022-07-14 17:25:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717192553369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717192553369600[0;39m ==> Parameters: 
2022-07-14 17:25:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717192553369600[0;39m <==    Updates: 0
2022-07-14 17:25:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717192553369600[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:25:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717213503918080[0;39m 生成今日电子书快照开始
2022-07-14 17:25:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717213503918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717213503918080[0;39m ==> Parameters: 
2022-07-14 17:25:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717213503918080[0;39m <==    Updates: 0
2022-07-14 17:25:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717213503918080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:25:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717234483826688[0;39m 生成今日电子书快照开始
2022-07-14 17:25:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717234483826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:25:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717234483826688[0;39m ==> Parameters: 
2022-07-14 17:25:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717234483826688[0;39m <==    Updates: 0
2022-07-14 17:25:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717234483826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:26:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717255467929600[0;39m 生成今日电子书快照开始
2022-07-14 17:26:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717255467929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717255467929600[0;39m ==> Parameters: 
2022-07-14 17:26:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717255467929600[0;39m <==    Updates: 0
2022-07-14 17:26:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717255467929600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:26:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717276426866688[0;39m 生成今日电子书快照开始
2022-07-14 17:26:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717276426866688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717276426866688[0;39m ==> Parameters: 
2022-07-14 17:26:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717276426866688[0;39m <==    Updates: 0
2022-07-14 17:26:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717276426866688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:26:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202717276435255296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:26:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717276435255296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:26:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717276435255296[0;39m ==> Parameters: 
2022-07-14 17:26:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717276435255296[0;39m <==    Updates: 7
2022-07-14 17:26:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202717276435255296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:26:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717297394192384[0;39m 生成今日电子书快照开始
2022-07-14 17:26:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717297394192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717297394192384[0;39m ==> Parameters: 
2022-07-14 17:26:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717297394192384[0;39m <==    Updates: 0
2022-07-14 17:26:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717297394192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:26:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717318357323776[0;39m 生成今日电子书快照开始
2022-07-14 17:26:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717318357323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717318357323776[0;39m ==> Parameters: 
2022-07-14 17:26:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717318357323776[0;39m <==    Updates: 0
2022-07-14 17:26:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717318357323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:26:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717339366592512[0;39m 生成今日电子书快照开始
2022-07-14 17:26:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717339366592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717339366592512[0;39m ==> Parameters: 
2022-07-14 17:26:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717339366592512[0;39m <==    Updates: 0
2022-07-14 17:26:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717339366592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:26:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717360333918208[0;39m 生成今日电子书快照开始
2022-07-14 17:26:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717360333918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717360333918208[0;39m ==> Parameters: 
2022-07-14 17:26:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717360333918208[0;39m <==    Updates: 0
2022-07-14 17:26:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717360333918208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:26:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717381271883776[0;39m 生成今日电子书快照开始
2022-07-14 17:26:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717381271883776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717381271883776[0;39m ==> Parameters: 
2022-07-14 17:26:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717381271883776[0;39m <==    Updates: 0
2022-07-14 17:26:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717381271883776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:26:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717402293735424[0;39m 生成今日电子书快照开始
2022-07-14 17:26:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717402293735424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717402293735424[0;39m ==> Parameters: 
2022-07-14 17:26:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717402293735424[0;39m <==    Updates: 0
2022-07-14 17:26:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717402293735424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:26:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202717402302124032[0;39m 更新电子书下的文档数据开始
2022-07-14 17:26:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717402302124032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:26:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717402302124032[0;39m ==> Parameters: 
2022-07-14 17:26:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717402302124032[0;39m <==    Updates: 7
2022-07-14 17:26:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202717402302124032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:26:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717423223312384[0;39m 生成今日电子书快照开始
2022-07-14 17:26:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717423223312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717423223312384[0;39m ==> Parameters: 
2022-07-14 17:26:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717423223312384[0;39m <==    Updates: 0
2022-07-14 17:26:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717423223312384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:26:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717444245164032[0;39m 生成今日电子书快照开始
2022-07-14 17:26:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717444245164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717444245164032[0;39m ==> Parameters: 
2022-07-14 17:26:45.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717444245164032[0;39m <==    Updates: 0
2022-07-14 17:26:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717444245164032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:26:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717465162158080[0;39m 生成今日电子书快照开始
2022-07-14 17:26:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717465162158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717465162158080[0;39m ==> Parameters: 
2022-07-14 17:26:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717465162158080[0;39m <==    Updates: 0
2022-07-14 17:26:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717465162158080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:26:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717486175621120[0;39m 生成今日电子书快照开始
2022-07-14 17:26:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717486175621120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:26:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717486175621120[0;39m ==> Parameters: 
2022-07-14 17:26:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717486175621120[0;39m <==    Updates: 0
2022-07-14 17:26:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717486175621120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:27:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717507121975296[0;39m 生成今日电子书快照开始
2022-07-14 17:27:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717507121975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717507121975296[0;39m ==> Parameters: 
2022-07-14 17:27:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717507121975296[0;39m <==    Updates: 0
2022-07-14 17:27:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717507121975296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:27:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717528072523776[0;39m 生成今日电子书快照开始
2022-07-14 17:27:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717528072523776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717528072523776[0;39m ==> Parameters: 
2022-07-14 17:27:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717528072523776[0;39m <==    Updates: 0
2022-07-14 17:27:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717528072523776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:27:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202717528085106688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:27:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717528085106688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:27:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717528085106688[0;39m ==> Parameters: 
2022-07-14 17:27:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717528085106688[0;39m <==    Updates: 7
2022-07-14 17:27:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202717528085106688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:27:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717549094375424[0;39m 生成今日电子书快照开始
2022-07-14 17:27:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717549094375424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717549094375424[0;39m ==> Parameters: 
2022-07-14 17:27:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717549094375424[0;39m <==    Updates: 0
2022-07-14 17:27:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717549094375424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:27:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717570044923904[0;39m 生成今日电子书快照开始
2022-07-14 17:27:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717570044923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717570044923904[0;39m ==> Parameters: 
2022-07-14 17:27:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717570044923904[0;39m <==    Updates: 0
2022-07-14 17:27:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717570044923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:27:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717590999666688[0;39m 生成今日电子书快照开始
2022-07-14 17:27:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717590999666688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717590999666688[0;39m ==> Parameters: 
2022-07-14 17:27:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717590999666688[0;39m <==    Updates: 0
2022-07-14 17:27:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717590999666688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:27:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717611975380992[0;39m 生成今日电子书快照开始
2022-07-14 17:27:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717611975380992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717611975380992[0;39m ==> Parameters: 
2022-07-14 17:27:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717611975380992[0;39m <==    Updates: 0
2022-07-14 17:27:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717611975380992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:27:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717632959483904[0;39m 生成今日电子书快照开始
2022-07-14 17:27:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717632959483904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717632959483904[0;39m ==> Parameters: 
2022-07-14 17:27:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717632959483904[0;39m <==    Updates: 0
2022-07-14 17:27:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717632959483904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:27:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202717653926809600[0;39m 更新电子书下的文档数据开始
2022-07-14 17:27:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717653926809600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:27:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717653926809600[0;39m ==> Parameters: 
2022-07-14 17:27:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717653926809600[0;39m <==    Updates: 7
2022-07-14 17:27:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202717653926809600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:27:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717653935198208[0;39m 生成今日电子书快照开始
2022-07-14 17:27:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717653935198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717653935198208[0;39m ==> Parameters: 
2022-07-14 17:27:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717653935198208[0;39m <==    Updates: 0
2022-07-14 17:27:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717653935198208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:27:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717674906718208[0;39m 生成今日电子书快照开始
2022-07-14 17:27:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717674906718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717674906718208[0;39m ==> Parameters: 
2022-07-14 17:27:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717674906718208[0;39m <==    Updates: 0
2022-07-14 17:27:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717674906718208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:27:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717695840489472[0;39m 生成今日电子书快照开始
2022-07-14 17:27:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717695840489472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717695840489472[0;39m ==> Parameters: 
2022-07-14 17:27:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717695840489472[0;39m <==    Updates: 0
2022-07-14 17:27:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717695840489472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:27:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717716828786688[0;39m 生成今日电子书快照开始
2022-07-14 17:27:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717716828786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717716828786688[0;39m ==> Parameters: 
2022-07-14 17:27:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717716828786688[0;39m <==    Updates: 0
2022-07-14 17:27:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717716828786688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:27:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717737800306688[0;39m 生成今日电子书快照开始
2022-07-14 17:27:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717737800306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:27:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717737800306688[0;39m ==> Parameters: 
2022-07-14 17:27:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717737800306688[0;39m <==    Updates: 0
2022-07-14 17:27:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717737800306688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:28:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717758759243776[0;39m 生成今日电子书快照开始
2022-07-14 17:28:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717758759243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717758759243776[0;39m ==> Parameters: 
2022-07-14 17:28:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717758759243776[0;39m <==    Updates: 0
2022-07-14 17:28:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717758759243776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:28:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717779734958080[0;39m 生成今日电子书快照开始
2022-07-14 17:28:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717779734958080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717779734958080[0;39m ==> Parameters: 
2022-07-14 17:28:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717779734958080[0;39m <==    Updates: 0
2022-07-14 17:28:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717779734958080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:28:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202717779743346688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:28:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717779743346688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:28:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717779743346688[0;39m ==> Parameters: 
2022-07-14 17:28:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717779743346688[0;39m <==    Updates: 7
2022-07-14 17:28:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202717779743346688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:28:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717800723255296[0;39m 生成今日电子书快照开始
2022-07-14 17:28:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717800723255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717800723255296[0;39m ==> Parameters: 
2022-07-14 17:28:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717800723255296[0;39m <==    Updates: 0
2022-07-14 17:28:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717800723255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:28:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717821686386688[0;39m 生成今日电子书快照开始
2022-07-14 17:28:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717821686386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717821686386688[0;39m ==> Parameters: 
2022-07-14 17:28:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717821686386688[0;39m <==    Updates: 0
2022-07-14 17:28:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717821686386688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:28:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717842699849728[0;39m 生成今日电子书快照开始
2022-07-14 17:28:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717842699849728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717842699849728[0;39m ==> Parameters: 
2022-07-14 17:28:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717842699849728[0;39m <==    Updates: 0
2022-07-14 17:28:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717842699849728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:28:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717863650398208[0;39m 生成今日电子书快照开始
2022-07-14 17:28:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717863650398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717863650398208[0;39m ==> Parameters: 
2022-07-14 17:28:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717863650398208[0;39m <==    Updates: 0
2022-07-14 17:28:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717863650398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:28:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717884600946688[0;39m 生成今日电子书快照开始
2022-07-14 17:28:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717884600946688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717884600946688[0;39m ==> Parameters: 
2022-07-14 17:28:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717884600946688[0;39m <==    Updates: 0
2022-07-14 17:28:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717884600946688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:28:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202717905559883776[0;39m 更新电子书下的文档数据开始
2022-07-14 17:28:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717905559883776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:28:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717905559883776[0;39m ==> Parameters: 
2022-07-14 17:28:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202717905559883776[0;39m <==    Updates: 7
2022-07-14 17:28:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202717905559883776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:28:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717905568272384[0;39m 生成今日电子书快照开始
2022-07-14 17:28:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717905568272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717905568272384[0;39m ==> Parameters: 
2022-07-14 17:28:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717905568272384[0;39m <==    Updates: 0
2022-07-14 17:28:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717905568272384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:28:40.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717926523015168[0;39m 生成今日电子书快照开始
2022-07-14 17:28:40.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717926523015168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717926523015168[0;39m ==> Parameters: 
2022-07-14 17:28:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717926523015168[0;39m <==    Updates: 0
2022-07-14 17:28:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717926523015168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:28:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717947502923776[0;39m 生成今日电子书快照开始
2022-07-14 17:28:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717947502923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717947502923776[0;39m ==> Parameters: 
2022-07-14 17:28:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717947502923776[0;39m <==    Updates: 0
2022-07-14 17:28:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717947502923776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:28:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717968499609600[0;39m 生成今日电子书快照开始
2022-07-14 17:28:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717968499609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717968499609600[0;39m ==> Parameters: 
2022-07-14 17:28:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717968499609600[0;39m <==    Updates: 0
2022-07-14 17:28:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717968499609600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:28:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202717989487906816[0;39m 生成今日电子书快照开始
2022-07-14 17:28:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717989487906816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:28:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717989487906816[0;39m ==> Parameters: 
2022-07-14 17:28:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202717989487906816[0;39m <==    Updates: 0
2022-07-14 17:28:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202717989487906816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:29:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718010434260992[0;39m 生成今日电子书快照开始
2022-07-14 17:29:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718010434260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718010434260992[0;39m ==> Parameters: 
2022-07-14 17:29:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718010434260992[0;39m <==    Updates: 0
2022-07-14 17:29:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718010434260992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:29:05.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202718031380615168[0;39m 更新电子书下的文档数据开始
2022-07-14 17:29:05.000 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718031380615168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:29:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718031380615168[0;39m ==> Parameters: 
2022-07-14 17:29:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718031380615168[0;39m <==    Updates: 7
2022-07-14 17:29:05.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202718031380615168[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:29:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718031389003776[0;39m 生成今日电子书快照开始
2022-07-14 17:29:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718031389003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718031389003776[0;39m ==> Parameters: 
2022-07-14 17:29:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718031389003776[0;39m <==    Updates: 0
2022-07-14 17:29:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718031389003776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:29:10.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718052352135168[0;39m 生成今日电子书快照开始
2022-07-14 17:29:10.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718052352135168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718052352135168[0;39m ==> Parameters: 
2022-07-14 17:29:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718052352135168[0;39m <==    Updates: 0
2022-07-14 17:29:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718052352135168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:29:15.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718073327849472[0;39m 生成今日电子书快照开始
2022-07-14 17:29:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718073327849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718073327849472[0;39m ==> Parameters: 
2022-07-14 17:29:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718073327849472[0;39m <==    Updates: 0
2022-07-14 17:29:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718073327849472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:29:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718094341312512[0;39m 生成今日电子书快照开始
2022-07-14 17:29:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718094341312512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718094341312512[0;39m ==> Parameters: 
2022-07-14 17:29:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718094341312512[0;39m <==    Updates: 0
2022-07-14 17:29:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718094341312512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:29:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718115270889472[0;39m 生成今日电子书快照开始
2022-07-14 17:29:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718115270889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718115270889472[0;39m ==> Parameters: 
2022-07-14 17:29:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718115270889472[0;39m <==    Updates: 0
2022-07-14 17:29:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718115270889472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:29:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718136292741120[0;39m 生成今日电子书快照开始
2022-07-14 17:29:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718136292741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718136292741120[0;39m ==> Parameters: 
2022-07-14 17:29:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718136292741120[0;39m <==    Updates: 0
2022-07-14 17:29:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718136292741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:29:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202718157234900992[0;39m 更新电子书下的文档数据开始
2022-07-14 17:29:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718157234900992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:29:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718157234900992[0;39m ==> Parameters: 
2022-07-14 17:29:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718157234900992[0;39m <==    Updates: 7
2022-07-14 17:29:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202718157234900992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:29:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718157243289600[0;39m 生成今日电子书快照开始
2022-07-14 17:29:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718157243289600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718157243289600[0;39m ==> Parameters: 
2022-07-14 17:29:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718157243289600[0;39m <==    Updates: 0
2022-07-14 17:29:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718157243289600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:29:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718178193838080[0;39m 生成今日电子书快照开始
2022-07-14 17:29:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718178193838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718178193838080[0;39m ==> Parameters: 
2022-07-14 17:29:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718178193838080[0;39m <==    Updates: 0
2022-07-14 17:29:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718178193838080[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:29:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718199161163776[0;39m 生成今日电子书快照开始
2022-07-14 17:29:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718199161163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718199161163776[0;39m ==> Parameters: 
2022-07-14 17:29:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718199161163776[0;39m <==    Updates: 0
2022-07-14 17:29:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718199161163776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:29:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718220136878080[0;39m 生成今日电子书快照开始
2022-07-14 17:29:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718220136878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718220136878080[0;39m ==> Parameters: 
2022-07-14 17:29:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718220136878080[0;39m <==    Updates: 0
2022-07-14 17:29:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718220136878080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:29:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718241133563904[0;39m 生成今日电子书快照开始
2022-07-14 17:29:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718241133563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:29:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718241133563904[0;39m ==> Parameters: 
2022-07-14 17:29:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718241133563904[0;39m <==    Updates: 0
2022-07-14 17:29:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718241133563904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:30:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718262071529472[0;39m 生成今日电子书快照开始
2022-07-14 17:30:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718262071529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718262071529472[0;39m ==> Parameters: 
2022-07-14 17:30:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718262071529472[0;39m <==    Updates: 0
2022-07-14 17:30:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718262071529472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:30:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202718283068215296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:30:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718283068215296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:30:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718283068215296[0;39m ==> Parameters: 
2022-07-14 17:30:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718283068215296[0;39m <==    Updates: 7
2022-07-14 17:30:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202718283068215296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:30:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718283072409600[0;39m 生成今日电子书快照开始
2022-07-14 17:30:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718283072409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718283072409600[0;39m ==> Parameters: 
2022-07-14 17:30:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718283072409600[0;39m <==    Updates: 0
2022-07-14 17:30:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718283072409600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:30:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718304073289728[0;39m 生成今日电子书快照开始
2022-07-14 17:30:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718304073289728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:10.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718304073289728[0;39m ==> Parameters: 
2022-07-14 17:30:10.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718304073289728[0;39m <==    Updates: 0
2022-07-14 17:30:10.022 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718304073289728[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:30:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718325049004032[0;39m 生成今日电子书快照开始
2022-07-14 17:30:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718325049004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718325049004032[0;39m ==> Parameters: 
2022-07-14 17:30:15.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718325049004032[0;39m <==    Updates: 0
2022-07-14 17:30:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718325049004032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:30:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718345970192384[0;39m 生成今日电子书快照开始
2022-07-14 17:30:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718345970192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718345970192384[0;39m ==> Parameters: 
2022-07-14 17:30:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718345970192384[0;39m <==    Updates: 0
2022-07-14 17:30:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718345970192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:30:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718366929129472[0;39m 生成今日电子书快照开始
2022-07-14 17:30:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718366929129472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718366929129472[0;39m ==> Parameters: 
2022-07-14 17:30:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718366929129472[0;39m <==    Updates: 0
2022-07-14 17:30:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718366929129472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:30:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718387913232384[0;39m 生成今日电子书快照开始
2022-07-14 17:30:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718387913232384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718387913232384[0;39m ==> Parameters: 
2022-07-14 17:30:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718387913232384[0;39m <==    Updates: 0
2022-07-14 17:30:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718387913232384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:30:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718408905723904[0;39m 生成今日电子书快照开始
2022-07-14 17:30:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718408905723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718408905723904[0;39m ==> Parameters: 
2022-07-14 17:30:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718408905723904[0;39m <==    Updates: 0
2022-07-14 17:30:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718408905723904[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:30:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202718408926695424[0;39m 更新电子书下的文档数据开始
2022-07-14 17:30:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718408926695424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:30:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718408926695424[0;39m ==> Parameters: 
2022-07-14 17:30:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718408926695424[0;39m <==    Updates: 7
2022-07-14 17:30:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202718408926695424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:30:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718429856272384[0;39m 生成今日电子书快照开始
2022-07-14 17:30:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718429856272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718429856272384[0;39m ==> Parameters: 
2022-07-14 17:30:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718429856272384[0;39m <==    Updates: 0
2022-07-14 17:30:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718429856272384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:30:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718450840375296[0;39m 生成今日电子书快照开始
2022-07-14 17:30:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718450840375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718450840375296[0;39m ==> Parameters: 
2022-07-14 17:30:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718450840375296[0;39m <==    Updates: 0
2022-07-14 17:30:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718450840375296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:30:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718471837061120[0;39m 生成今日电子书快照开始
2022-07-14 17:30:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718471837061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718471837061120[0;39m ==> Parameters: 
2022-07-14 17:30:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718471837061120[0;39m <==    Updates: 0
2022-07-14 17:30:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718471837061120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:30:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718492800192512[0;39m 生成今日电子书快照开始
2022-07-14 17:30:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718492800192512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:30:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718492800192512[0;39m ==> Parameters: 
2022-07-14 17:30:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718492800192512[0;39m <==    Updates: 0
2022-07-14 17:30:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718492800192512[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:31:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718513788489728[0;39m 生成今日电子书快照开始
2022-07-14 17:31:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718513788489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718513788489728[0;39m ==> Parameters: 
2022-07-14 17:31:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718513788489728[0;39m <==    Updates: 0
2022-07-14 17:31:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718513788489728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:31:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718534726455296[0;39m 生成今日电子书快照开始
2022-07-14 17:31:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718534726455296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718534726455296[0;39m ==> Parameters: 
2022-07-14 17:31:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718534726455296[0;39m <==    Updates: 0
2022-07-14 17:31:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718534726455296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:31:05.012 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202718534747426816[0;39m 更新电子书下的文档数据开始
2022-07-14 17:31:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718534747426816[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:31:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718534747426816[0;39m ==> Parameters: 
2022-07-14 17:31:05.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718534747426816[0;39m <==    Updates: 7
2022-07-14 17:31:05.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202718534747426816[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:31:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718555677003776[0;39m 生成今日电子书快照开始
2022-07-14 17:31:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718555677003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718555677003776[0;39m ==> Parameters: 
2022-07-14 17:31:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718555677003776[0;39m <==    Updates: 0
2022-07-14 17:31:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718555677003776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:31:12.149 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718564682174465[0;39m ------------- 开始 -------------
2022-07-14 17:31:12.149 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718564682174464[0;39m ------------- 开始 -------------
2022-07-14 17:31:12.150 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718564682174465[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:31:12.150 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718564682174464[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:31:12.150 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718564682174465[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:31:12.150 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718564682174465[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:12.150 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718564682174464[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:31:12.150 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718564682174465[0;39m 请求参数: []
2022-07-14 17:31:12.150 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718564682174464[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:12.151 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718564682174464[0;39m 请求参数: []
2022-07-14 17:31:12.151 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202718564682174465[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:31:12.152 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202718564682174464[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:31:12.152 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718564694757376[0;39m ------------- 开始 -------------
2022-07-14 17:31:12.152 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202718564682174465[0;39m ==> Parameters: 
2022-07-14 17:31:12.152 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202718564682174464[0;39m ==> Parameters: 
2022-07-14 17:31:12.152 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718564694757376[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:31:12.153 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718564694757376[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:31:12.153 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718564694757376[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:12.153 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202718564682174465[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:31:12.153 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718564694757376[0;39m 请求参数: []
2022-07-14 17:31:12.153 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202718564682174464[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:31:12.153 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202718564682174465[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:31:12.154 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202718564682174464[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:31:12.155 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718564694757376[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:31:12.155 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202718564682174465[0;39m <==        Row: 2022-07-14, 110, 25, 5, 1
2022-07-14 17:31:12.155 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718564694757376[0;39m ==> Parameters: 
2022-07-14 17:31:12.155 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202718564682174465[0;39m <==      Total: 2
2022-07-14 17:31:12.155 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202718564682174464[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:31:12.156 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202718564682174464[0;39m <==      Total: 2
2022-07-14 17:31:12.156 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718564682174465[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":110,"viewIncrease":5,"voteCount":25,"voteIncrease":1}],"success":true}
2022-07-14 17:31:12.156 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718564682174464[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:31:12.156 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:31:12.156 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718564682174464[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:31:12.156 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718564682174465[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:31:12.156 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:31:12.156 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:31:12.157 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:31:12.157 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:31:12.157 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:31:12.157 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:31:12.158 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:31:12.158 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:31:12.158 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:31:12.159 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:31:12.159 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:31:12.159 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:31:12.159 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:31:12.160 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:31:12.160 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:31:12.160 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718564694757376[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:31:12.160 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718564694757376[0;39m <==      Total: 16
2022-07-14 17:31:12.161 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718564694757376[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:31:12.161 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718564694757376[0;39m ------------- 结束 耗时：9 ms -------------
2022-07-14 17:31:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718576707244032[0;39m 生成今日电子书快照开始
2022-07-14 17:31:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718576707244032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718576707244032[0;39m ==> Parameters: 
2022-07-14 17:31:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718576707244032[0;39m <==    Updates: 0
2022-07-14 17:31:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718576707244032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:31:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718597620043776[0;39m 生成今日电子书快照开始
2022-07-14 17:31:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718597620043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718597620043776[0;39m ==> Parameters: 
2022-07-14 17:31:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718597620043776[0;39m <==    Updates: 0
2022-07-14 17:31:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718597620043776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:31:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718618595758080[0;39m 生成今日电子书快照开始
2022-07-14 17:31:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718618595758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718618595758080[0;39m ==> Parameters: 
2022-07-14 17:31:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718618595758080[0;39m <==    Updates: 0
2022-07-14 17:31:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718618595758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:31:25.354 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718620067958784[0;39m ------------- 开始 -------------
2022-07-14 17:31:25.354 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718620067958784[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:31:25.355 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718620067958784[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:31:25.355 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718620067958784[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:25.355 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718620067958784[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-14 17:31:25.356 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202718620067958784[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:31:25.357 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202718620067958784[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-14 17:31:25.358 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202718620067958784[0;39m <==    Columns: count(0)
2022-07-14 17:31:25.358 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202718620067958784[0;39m <==        Row: 1
2022-07-14 17:31:25.358 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202718620067958784[0;39m <==      Total: 1
2022-07-14 17:31:25.358 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202718620067958784[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 17:31:25.358 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202718620067958784[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-14 17:31:25.359 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202718620067958784[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:31:25.359 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202718620067958784[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 12, 4, 0
2022-07-14 17:31:25.360 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202718620067958784[0;39m <==      Total: 1
2022-07-14 17:31:25.360 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202718620067958784[0;39m 总行数：1
2022-07-14 17:31:25.360 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202718620067958784[0;39m 总页数：1
2022-07-14 17:31:25.360 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718620067958784[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":12,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":4,"voteCount":0}],"total":1},"success":true}
2022-07-14 17:31:25.361 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718620067958784[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:31:26.639 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718625457639424[0;39m ------------- 开始 -------------
2022-07-14 17:31:26.640 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718625457639424[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:31:26.640 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718625457639424[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:31:26.640 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718625457639424[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:26.640 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718625457639424[0;39m 请求参数: [202714600712572928]
2022-07-14 17:31:26.641 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202718625457639424[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:31:26.641 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202718625457639424[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:31:26.642 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:31:26.642 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 2, 0
2022-07-14 17:31:26.642 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 1, 0
2022-07-14 17:31:26.643 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 1, 0
2022-07-14 17:31:26.643 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 0, 0
2022-07-14 17:31:26.643 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 0, 0
2022-07-14 17:31:26.643 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 0, 0
2022-07-14 17:31:26.643 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 0, 0
2022-07-14 17:31:26.644 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 0, 0
2022-07-14 17:31:26.644 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 0, 0
2022-07-14 17:31:26.644 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 0, 0
2022-07-14 17:31:26.644 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 0, 0
2022-07-14 17:31:26.645 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202718625457639424[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 0, 0
2022-07-14 17:31:26.645 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202718625457639424[0;39m <==      Total: 12
2022-07-14 17:31:26.646 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718625457639424[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":2,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":0,"voteCount":0},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:31:26.646 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718625457639424[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:31:26.658 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718625537331200[0;39m ------------- 开始 -------------
2022-07-14 17:31:26.659 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718625537331200[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-14 17:31:26.659 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718625537331200[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:26.659 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718625537331200[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:26.660 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718625537331200[0;39m 请求参数: [202714909656616960]
2022-07-14 17:31:26.660 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718625537331200[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:26.661 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718625537331200[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:31:26.662 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718625537331200[0;39m <==    Columns: id, content
2022-07-14 17:31:26.662 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718625537331200[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-14 17:31:26.663 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718625537331200[0;39m <==      Total: 1
2022-07-14 17:31:26.663 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718625537331200[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:26.664 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718625537331200[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:31:26.713 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718625537331200[0;39m <==    Updates: 1
2022-07-14 17:31:26.713 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718625537331200[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:26.713 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718625537331200[0;39m ------------- 结束 耗时：55 ms -------------
2022-07-14 17:31:27.683 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718629836492800[0;39m ------------- 开始 -------------
2022-07-14 17:31:27.683 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718629836492800[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-14 17:31:27.684 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718629836492800[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:27.684 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718629836492800[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:27.684 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718629836492800[0;39m 请求参数: [202715069841281024]
2022-07-14 17:31:27.684 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718629836492800[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:27.685 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718629836492800[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:31:27.685 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718629836492800[0;39m <==    Columns: id, content
2022-07-14 17:31:27.685 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718629836492800[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-14 17:31:27.685 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718629836492800[0;39m <==      Total: 1
2022-07-14 17:31:27.686 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718629836492800[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:27.686 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718629836492800[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:31:27.704 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718629836492800[0;39m <==    Updates: 1
2022-07-14 17:31:27.704 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718629836492800[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:27.704 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718629836492800[0;39m ------------- 结束 耗时：21 ms -------------
2022-07-14 17:31:28.306 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718632449544192[0;39m ------------- 开始 -------------
2022-07-14 17:31:28.306 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718632449544192[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715172312322048 GET
2022-07-14 17:31:28.306 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718632449544192[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:28.306 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718632449544192[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:28.306 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718632449544192[0;39m 请求参数: [202715172312322048]
2022-07-14 17:31:28.307 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718632449544192[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:28.307 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718632449544192[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:31:28.307 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718632449544192[0;39m <==    Columns: id, content
2022-07-14 17:31:28.308 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718632449544192[0;39m <==        Row: 202715172312322048, <<BLOB>>
2022-07-14 17:31:28.308 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718632449544192[0;39m <==      Total: 1
2022-07-14 17:31:28.308 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718632449544192[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:28.308 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718632449544192[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:31:28.323 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718632449544192[0;39m <==    Updates: 1
2022-07-14 17:31:28.323 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718632449544192[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:28.323 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718632449544192[0;39m ------------- 结束 耗时：17 ms -------------
2022-07-14 17:31:29.738 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718638455787520[0;39m ------------- 开始 -------------
2022-07-14 17:31:29.738 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718638455787520[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715279778779136 GET
2022-07-14 17:31:29.738 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718638455787520[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:29.739 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718638455787520[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:29.739 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718638455787520[0;39m 请求参数: [202715279778779136]
2022-07-14 17:31:29.739 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718638455787520[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:29.739 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718638455787520[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:31:29.742 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718638455787520[0;39m <==    Columns: id, content
2022-07-14 17:31:29.743 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718638455787520[0;39m <==        Row: 202715279778779136, <<BLOB>>
2022-07-14 17:31:29.743 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718638455787520[0;39m <==      Total: 1
2022-07-14 17:31:29.743 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718638455787520[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:29.743 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718638455787520[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:31:29.758 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718638455787520[0;39m <==    Updates: 1
2022-07-14 17:31:29.759 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718638455787520[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:29.759 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718638455787520[0;39m ------------- 结束 耗时：21 ms -------------
2022-07-14 17:31:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718639558889472[0;39m 生成今日电子书快照开始
2022-07-14 17:31:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718639558889472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718639558889472[0;39m ==> Parameters: 
2022-07-14 17:31:30.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718639558889472[0;39m <==    Updates: 0
2022-07-14 17:31:30.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718639558889472[0;39m 生成今日电子书快照结束，耗时：20 毫秒
2022-07-14 17:31:30.137 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718640129314816[0;39m ------------- 开始 -------------
2022-07-14 17:31:30.137 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718640129314816[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715322204164096 GET
2022-07-14 17:31:30.137 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718640129314816[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:30.137 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718640129314816[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:30.137 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718640129314816[0;39m 请求参数: [202715322204164096]
2022-07-14 17:31:30.138 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718640129314816[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:30.138 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718640129314816[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-14 17:31:30.139 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718640129314816[0;39m <==    Columns: id, content
2022-07-14 17:31:30.139 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718640129314816[0;39m <==        Row: 202715322204164096, <<BLOB>>
2022-07-14 17:31:30.140 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718640129314816[0;39m <==      Total: 1
2022-07-14 17:31:30.140 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718640129314816[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:30.140 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718640129314816[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-14 17:31:30.148 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718640129314816[0;39m <==    Updates: 1
2022-07-14 17:31:30.148 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718640129314816[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:30.149 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718640129314816[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-14 17:31:30.535 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718641798647808[0;39m ------------- 开始 -------------
2022-07-14 17:31:30.535 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718641798647808[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715412436226048 GET
2022-07-14 17:31:30.535 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718641798647808[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:30.535 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718641798647808[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:30.535 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718641798647808[0;39m 请求参数: [202715412436226048]
2022-07-14 17:31:30.536 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718641798647808[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:30.536 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718641798647808[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-14 17:31:30.537 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718641798647808[0;39m <==    Columns: id, content
2022-07-14 17:31:30.537 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718641798647808[0;39m <==        Row: 202715412436226048, <<BLOB>>
2022-07-14 17:31:30.537 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718641798647808[0;39m <==      Total: 1
2022-07-14 17:31:30.537 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718641798647808[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:30.538 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718641798647808[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-14 17:31:30.553 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718641798647808[0;39m <==    Updates: 1
2022-07-14 17:31:30.553 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718641798647808[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:30.553 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718641798647808[0;39m ------------- 结束 耗时：18 ms -------------
2022-07-14 17:31:30.929 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718643451203584[0;39m ------------- 开始 -------------
2022-07-14 17:31:30.929 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718643451203584[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715466249146368 GET
2022-07-14 17:31:30.929 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718643451203584[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:30.929 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718643451203584[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:30.929 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718643451203584[0;39m 请求参数: [202715466249146368]
2022-07-14 17:31:30.930 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718643451203584[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:30.930 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718643451203584[0;39m ==> Parameters: 202715466249146368(Long)
2022-07-14 17:31:30.931 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718643451203584[0;39m <==    Columns: id, content
2022-07-14 17:31:30.931 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718643451203584[0;39m <==        Row: 202715466249146368, <<BLOB>>
2022-07-14 17:31:30.931 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718643451203584[0;39m <==      Total: 1
2022-07-14 17:31:30.931 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718643451203584[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:30.931 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718643451203584[0;39m ==> Parameters: 202715466249146368(Long)
2022-07-14 17:31:30.949 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718643451203584[0;39m <==    Updates: 1
2022-07-14 17:31:30.949 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718643451203584[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:30.949 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718643451203584[0;39m ------------- 结束 耗时：20 ms -------------
2022-07-14 17:31:31.452 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718645644824576[0;39m ------------- 开始 -------------
2022-07-14 17:31:31.452 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718645644824576[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715537334210560 GET
2022-07-14 17:31:31.452 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718645644824576[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:31.453 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718645644824576[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:31.453 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718645644824576[0;39m 请求参数: [202715537334210560]
2022-07-14 17:31:31.453 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718645644824576[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:31.453 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718645644824576[0;39m ==> Parameters: 202715537334210560(Long)
2022-07-14 17:31:31.454 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718645644824576[0;39m <==    Columns: id, content
2022-07-14 17:31:31.454 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718645644824576[0;39m <==        Row: 202715537334210560, <<BLOB>>
2022-07-14 17:31:31.454 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718645644824576[0;39m <==      Total: 1
2022-07-14 17:31:31.454 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718645644824576[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:31.455 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718645644824576[0;39m ==> Parameters: 202715537334210560(Long)
2022-07-14 17:31:31.477 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718645644824576[0;39m <==    Updates: 1
2022-07-14 17:31:31.478 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718645644824576[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:31.478 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718645644824576[0;39m ------------- 结束 耗时：26 ms -------------
2022-07-14 17:31:31.833 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718647242854400[0;39m ------------- 开始 -------------
2022-07-14 17:31:31.833 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718647242854400[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715583089872896 GET
2022-07-14 17:31:31.834 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718647242854400[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:31.834 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718647242854400[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:31.834 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718647242854400[0;39m 请求参数: [202715583089872896]
2022-07-14 17:31:31.834 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718647242854400[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:31.834 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718647242854400[0;39m ==> Parameters: 202715583089872896(Long)
2022-07-14 17:31:31.835 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718647242854400[0;39m <==    Columns: id, content
2022-07-14 17:31:31.835 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718647242854400[0;39m <==        Row: 202715583089872896, <<BLOB>>
2022-07-14 17:31:31.835 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718647242854400[0;39m <==      Total: 1
2022-07-14 17:31:31.835 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718647242854400[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:31.836 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718647242854400[0;39m ==> Parameters: 202715583089872896(Long)
2022-07-14 17:31:31.851 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718647242854400[0;39m <==    Updates: 1
2022-07-14 17:31:31.851 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718647242854400[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:31.851 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718647242854400[0;39m ------------- 结束 耗时：18 ms -------------
2022-07-14 17:31:34.331 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718657720225792[0;39m ------------- 开始 -------------
2022-07-14 17:31:34.331 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718657720225792[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715650781745152 GET
2022-07-14 17:31:34.331 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718657720225792[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:34.331 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718657720225792[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:34.332 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718657720225792[0;39m 请求参数: [202715650781745152]
2022-07-14 17:31:34.332 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718657720225792[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:34.332 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718657720225792[0;39m ==> Parameters: 202715650781745152(Long)
2022-07-14 17:31:34.333 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718657720225792[0;39m <==    Columns: id, content
2022-07-14 17:31:34.333 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718657720225792[0;39m <==        Row: 202715650781745152, <<BLOB>>
2022-07-14 17:31:34.333 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718657720225792[0;39m <==      Total: 1
2022-07-14 17:31:34.333 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718657720225792[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:34.334 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718657720225792[0;39m ==> Parameters: 202715650781745152(Long)
2022-07-14 17:31:34.361 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718657720225792[0;39m <==    Updates: 1
2022-07-14 17:31:34.362 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718657720225792[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:34.362 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718657720225792[0;39m ------------- 结束 耗时：31 ms -------------
2022-07-14 17:31:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202718660563963904[0;39m 更新电子书下的文档数据开始
2022-07-14 17:31:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718660563963904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:31:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718660563963904[0;39m ==> Parameters: 
2022-07-14 17:31:35.035 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718660563963904[0;39m <==    Updates: 7
2022-07-14 17:31:35.035 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202718660563963904[0;39m 更新电子书下的文档数据结束，耗时：26 毫秒
2022-07-14 17:31:35.035 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718660673015808[0;39m 生成今日电子书快照开始
2022-07-14 17:31:35.035 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718660673015808[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:35.035 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718660673015808[0;39m ==> Parameters: 
2022-07-14 17:31:35.063 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718660673015808[0;39m <==    Updates: 0
2022-07-14 17:31:35.063 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718660673015808[0;39m 生成今日电子书快照结束，耗时：28 毫秒
2022-07-14 17:31:35.190 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718661323132928[0;39m ------------- 开始 -------------
2022-07-14 17:31:35.190 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718661323132928[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715693119049728 GET
2022-07-14 17:31:35.190 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718661323132928[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:35.190 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718661323132928[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:35.190 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718661323132928[0;39m 请求参数: [202715693119049728]
2022-07-14 17:31:35.191 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718661323132928[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:35.191 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718661323132928[0;39m ==> Parameters: 202715693119049728(Long)
2022-07-14 17:31:35.191 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718661323132928[0;39m <==    Columns: id, content
2022-07-14 17:31:35.192 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718661323132928[0;39m <==        Row: 202715693119049728, <<BLOB>>
2022-07-14 17:31:35.192 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718661323132928[0;39m <==      Total: 1
2022-07-14 17:31:35.192 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718661323132928[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:35.192 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718661323132928[0;39m ==> Parameters: 202715693119049728(Long)
2022-07-14 17:31:35.222 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718661323132928[0;39m <==    Updates: 1
2022-07-14 17:31:35.222 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718661323132928[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:35.222 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718661323132928[0;39m ------------- 结束 耗时：32 ms -------------
2022-07-14 17:31:36.508 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718666851225600[0;39m ------------- 开始 -------------
2022-07-14 17:31:36.508 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718666851225600[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715863143550976 GET
2022-07-14 17:31:36.508 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718666851225600[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:36.509 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718666851225600[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:36.509 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718666851225600[0;39m 请求参数: [202715863143550976]
2022-07-14 17:31:36.509 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718666851225600[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:36.510 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718666851225600[0;39m ==> Parameters: 202715863143550976(Long)
2022-07-14 17:31:36.510 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718666851225600[0;39m <==    Columns: id, content
2022-07-14 17:31:36.511 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718666851225600[0;39m <==        Row: 202715863143550976, <<BLOB>>
2022-07-14 17:31:36.511 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718666851225600[0;39m <==      Total: 1
2022-07-14 17:31:36.511 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718666851225600[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:36.512 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718666851225600[0;39m ==> Parameters: 202715863143550976(Long)
2022-07-14 17:31:36.534 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718666851225600[0;39m <==    Updates: 1
2022-07-14 17:31:36.534 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718666851225600[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:36.535 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718666851225600[0;39m ------------- 结束 耗时：27 ms -------------
2022-07-14 17:31:36.976 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718668814159872[0;39m ------------- 开始 -------------
2022-07-14 17:31:36.977 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718668814159872[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715279778779136 GET
2022-07-14 17:31:36.977 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718668814159872[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:31:36.977 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718668814159872[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:36.977 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718668814159872[0;39m 请求参数: [202715279778779136]
2022-07-14 17:31:36.978 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718668814159872[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:31:36.978 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718668814159872[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:31:36.978 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718668814159872[0;39m <==    Columns: id, content
2022-07-14 17:31:36.979 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202718668814159872[0;39m <==        Row: 202715279778779136, <<BLOB>>
2022-07-14 17:31:36.979 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202718668814159872[0;39m <==      Total: 1
2022-07-14 17:31:36.979 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718668814159872[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:31:36.979 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718668814159872[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:31:36.999 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202718668814159872[0;39m <==    Updates: 1
2022-07-14 17:31:36.999 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718668814159872[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:31:36.999 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718668814159872[0;39m ------------- 结束 耗时：23 ms -------------
2022-07-14 17:31:38.513 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202718645644824576[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:31:38.514 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202718645644824576[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user_wiki/list
2022-07-14 17:31:38.514 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202718645644824576[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:31:38.547 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202718645644824576[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:31:38.548 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718675407605760[0;39m ------------- 开始 -------------
2022-07-14 17:31:38.548 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718675407605760[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/list GET
2022-07-14 17:31:38.548 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718675407605760[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.list
2022-07-14 17:31:38.548 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718675407605760[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:38.548 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718675407605760[0;39m 请求参数: [{"page":1,"size":10}]
2022-07-14 17:31:38.549 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202718675407605760[0;39m ==>  Preparing: SELECT count(0) FROM userwiki
2022-07-14 17:31:38.549 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202718675407605760[0;39m ==> Parameters: 
2022-07-14 17:31:38.557 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202718675407605760[0;39m <==    Columns: count(0)
2022-07-14 17:31:38.558 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202718675407605760[0;39m <==        Row: 3
2022-07-14 17:31:38.558 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202718675407605760[0;39m <==      Total: 1
2022-07-14 17:31:38.558 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202718675407605760[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki LIMIT ?
2022-07-14 17:31:38.558 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202718675407605760[0;39m ==> Parameters: 10(Integer)
2022-07-14 17:31:38.561 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202718675407605760[0;39m <==    Columns: id, login_name, name, password
2022-07-14 17:31:38.561 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202718675407605760[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:31:38.561 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202718675407605760[0;39m <==        Row: 2, zhangshuo, 张硕, 48d6e4c28cd6d6dbc85b94988c174851
2022-07-14 17:31:38.561 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202718675407605760[0;39m <==        Row: 3, zhangyishan, 张一山, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:31:38.562 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202718675407605760[0;39m <==      Total: 3
2022-07-14 17:31:38.562 INFO  com.zs.wikibb.service.UserwikiService             :49  
                [32m202718675407605760[0;39m 总行数：3
2022-07-14 17:31:38.562 INFO  com.zs.wikibb.service.UserwikiService             :50  
                [32m202718675407605760[0;39m 总页数：1
2022-07-14 17:31:38.563 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718675407605760[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":2,"loginName":"zhangshuo","name":"张硕"},{"id":3,"loginName":"zhangyishan","name":"张一山"}],"total":3},"success":true}
2022-07-14 17:31:38.563 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718675407605760[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-14 17:31:38.564 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202718675407605760[0;39m ------------- LoginInterceptor 结束 耗时：50 ms -------------
2022-07-14 17:31:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718681510318080[0;39m 生成今日电子书快照开始
2022-07-14 17:31:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718681510318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718681510318080[0;39m ==> Parameters: 
2022-07-14 17:31:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718681510318080[0;39m <==    Updates: 0
2022-07-14 17:31:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718681510318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:31:43.707 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718697046020096[0;39m ------------- 开始 -------------
2022-07-14 17:31:43.707 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718697046020096[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:31:43.707 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718697046020096[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:31:43.708 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718697046020096[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:43.708 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718697046020096[0;39m 请求参数: []
2022-07-14 17:31:43.708 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718697046020096[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:31:43.709 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718697046020096[0;39m ==> Parameters: 
2022-07-14 17:31:43.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:31:43.719 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:31:43.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:31:43.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:31:43.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:31:43.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:31:43.720 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:31:43.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:31:43.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:31:43.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:31:43.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:31:43.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:31:43.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:31:43.721 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:31:43.722 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:31:43.722 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:31:43.722 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718697046020096[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:31:43.722 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718697046020096[0;39m <==      Total: 16
2022-07-14 17:31:43.723 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718697046020096[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:31:43.723 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718697046020096[0;39m ------------- 结束 耗时：16 ms -------------
2022-07-14 17:31:43.732 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718697150877696[0;39m ------------- 开始 -------------
2022-07-14 17:31:43.732 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718697150877696[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:31:43.732 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718697150877696[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:31:43.732 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718697150877696[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:43.732 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718697150877696[0;39m 请求参数: [{"page":1,"size":4}]
2022-07-14 17:31:43.733 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202718697150877696[0;39m ==>  Preparing: SELECT count(0) FROM ebook
2022-07-14 17:31:43.733 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202718697150877696[0;39m ==> Parameters: 
2022-07-14 17:31:43.734 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202718697150877696[0;39m <==    Columns: count(0)
2022-07-14 17:31:43.734 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202718697150877696[0;39m <==        Row: 7
2022-07-14 17:31:43.734 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202718697150877696[0;39m <==      Total: 1
2022-07-14 17:31:43.734 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202718697150877696[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook LIMIT ?
2022-07-14 17:31:43.734 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202718697150877696[0;39m ==> Parameters: 4(Integer)
2022-07-14 17:31:43.735 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202718697150877696[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:31:43.735 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202718697150877696[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:31:43.736 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202718697150877696[0;39m <==        Row: 2, Vue 入门教程, 100, 503, 零基础入门 Vue 开发，企业级应用开发最佳首选框架, /image/cover2.png, 7, 37, 10
2022-07-14 17:31:43.736 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202718697150877696[0;39m <==        Row: 3, Python 入门教程, 200, 301, 零基础入门 Python 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 1, 1
2022-07-14 17:31:43.736 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202718697150877696[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:31:43.736 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202718697150877696[0;39m <==      Total: 4
2022-07-14 17:31:43.736 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202718697150877696[0;39m 总行数：7
2022-07-14 17:31:43.737 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202718697150877696[0;39m 总页数：2
2022-07-14 17:31:43.737 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718697150877696[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13},{"category1Id":100,"category2Id":503,"cover":"/image/cover2.png","description":"零基础入门 Vue 开发，企业级应用开发最佳首选框架","docCount":7,"id":2,"name":"Vue 入门教程","viewCount":37,"voteCount":10},{"category1Id":200,"category2Id":301,"cover":"/image/cover1.png","description":"零基础入门 Python 开发，企业级应用开发最佳首选框架","docCount":1,"id":3,"name":"Python 入门教程","viewCount":1,"voteCount":1},{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0}],"total":7},"success":true}
2022-07-14 17:31:43.737 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718697150877696[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:31:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718702511198208[0;39m 生成今日电子书快照开始
2022-07-14 17:31:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718702511198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718702511198208[0;39m ==> Parameters: 
2022-07-14 17:31:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718702511198208[0;39m <==    Updates: 0
2022-07-14 17:31:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718702511198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:31:47.562 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718713215062016[0;39m ------------- 开始 -------------
2022-07-14 17:31:47.562 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718713215062016[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:31:47.563 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718713215062016[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:31:47.563 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718713215062016[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:47.563 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718713215062016[0;39m 请求参数: []
2022-07-14 17:31:47.563 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718713215062016[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:31:47.564 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718713215062016[0;39m ==> Parameters: 
2022-07-14 17:31:47.565 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:31:47.565 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:31:47.565 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:31:47.565 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:31:47.566 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:31:47.566 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:31:47.566 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:31:47.566 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:31:47.566 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:31:47.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:31:47.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:31:47.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:31:47.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:31:47.567 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:31:47.568 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:31:47.568 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:31:47.568 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718713215062016[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:31:47.568 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718713215062016[0;39m <==      Total: 16
2022-07-14 17:31:47.569 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718713215062016[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:31:47.569 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718713215062016[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:31:49.211 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718720127275008[0;39m ------------- 开始 -------------
2022-07-14 17:31:49.211 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718720127275008[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:31:49.211 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718720127275008[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:31:49.211 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718720127275008[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:49.211 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718720127275008[0;39m 请求参数: []
2022-07-14 17:31:49.212 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718720127275008[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:31:49.212 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718720127275008[0;39m ==> Parameters: 
2022-07-14 17:31:49.212 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718720135663617[0;39m ------------- 开始 -------------
2022-07-14 17:31:49.212 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202718720135663616[0;39m ------------- 开始 -------------
2022-07-14 17:31:49.212 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718720135663617[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:31:49.212 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202718720135663616[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:31:49.212 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718720135663617[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:31:49.212 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202718720135663616[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:31:49.212 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718720135663617[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:49.212 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202718720135663616[0;39m 远程地址: 127.0.0.1
2022-07-14 17:31:49.213 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718720135663617[0;39m 请求参数: []
2022-07-14 17:31:49.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:31:49.213 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202718720135663616[0;39m 请求参数: []
2022-07-14 17:31:49.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:31:49.213 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202718720135663617[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:31:49.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:31:49.213 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202718720135663616[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:31:49.213 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202718720135663617[0;39m ==> Parameters: 
2022-07-14 17:31:49.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:31:49.213 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202718720135663616[0;39m ==> Parameters: 
2022-07-14 17:31:49.213 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:31:49.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:31:49.214 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202718720135663617[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:31:49.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:31:49.214 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202718720135663616[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:31:49.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:31:49.214 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202718720135663617[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:31:49.214 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202718720135663616[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:31:49.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:31:49.214 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:31:49.214 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202718720135663617[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:31:49.215 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202718720135663616[0;39m <==        Row: 2022-07-14, 120, 25, 15, 1
2022-07-14 17:31:49.215 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:31:49.215 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:31:49.215 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202718720135663616[0;39m <==      Total: 2
2022-07-14 17:31:49.215 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202718720135663617[0;39m <==      Total: 2
2022-07-14 17:31:49.215 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:31:49.215 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718720135663616[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":120,"viewIncrease":15,"voteCount":25,"voteIncrease":1}],"success":true}
2022-07-14 17:31:49.215 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:31:49.215 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718720135663617[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:31:49.215 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718720135663616[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:31:49.215 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:31:49.215 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718720135663617[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:31:49.216 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:31:49.216 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202718720127275008[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:31:49.216 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202718720127275008[0;39m <==      Total: 16
2022-07-14 17:31:49.216 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202718720127275008[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:31:49.217 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202718720127275008[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:31:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718723444969472[0;39m 生成今日电子书快照开始
2022-07-14 17:31:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718723444969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718723444969472[0;39m ==> Parameters: 
2022-07-14 17:31:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718723444969472[0;39m <==    Updates: 0
2022-07-14 17:31:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718723444969472[0;39m 生成今日电子书快照结束，耗时：10 毫秒
2022-07-14 17:31:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718744454238208[0;39m 生成今日电子书快照开始
2022-07-14 17:31:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718744454238208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:31:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718744454238208[0;39m ==> Parameters: 
2022-07-14 17:31:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718744454238208[0;39m <==    Updates: 0
2022-07-14 17:31:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718744454238208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:32:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718765421563904[0;39m 生成今日电子书快照开始
2022-07-14 17:32:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718765421563904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718765421563904[0;39m ==> Parameters: 
2022-07-14 17:32:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718765421563904[0;39m <==    Updates: 0
2022-07-14 17:32:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718765421563904[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:32:05.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718786359529472[0;39m 生成今日电子书快照开始
2022-07-14 17:32:05.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718786359529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718786359529472[0;39m ==> Parameters: 
2022-07-14 17:32:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718786359529472[0;39m <==    Updates: 0
2022-07-14 17:32:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718786359529472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:32:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202718786367918080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:32:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718786367918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:32:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718786367918080[0;39m ==> Parameters: 
2022-07-14 17:32:05.072 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718786367918080[0;39m <==    Updates: 7
2022-07-14 17:32:05.072 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202718786367918080[0;39m 更新电子书下的文档数据结束，耗时：69 毫秒
2022-07-14 17:32:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718807385575424[0;39m 生成今日电子书快照开始
2022-07-14 17:32:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718807385575424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718807385575424[0;39m ==> Parameters: 
2022-07-14 17:32:10.065 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718807385575424[0;39m <==    Updates: 0
2022-07-14 17:32:10.066 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718807385575424[0;39m 生成今日电子书快照结束，耗时：52 毫秒
2022-07-14 17:32:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718828331929600[0;39m 生成今日电子书快照开始
2022-07-14 17:32:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718828331929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718828331929600[0;39m ==> Parameters: 
2022-07-14 17:32:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718828331929600[0;39m <==    Updates: 0
2022-07-14 17:32:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718828331929600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:32:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718849299255296[0;39m 生成今日电子书快照开始
2022-07-14 17:32:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718849299255296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718849299255296[0;39m ==> Parameters: 
2022-07-14 17:32:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718849299255296[0;39m <==    Updates: 0
2022-07-14 17:32:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718849299255296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:32:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718870304329728[0;39m 生成今日电子书快照开始
2022-07-14 17:32:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718870304329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:25.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718870304329728[0;39m ==> Parameters: 
2022-07-14 17:32:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718870304329728[0;39m <==    Updates: 0
2022-07-14 17:32:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718870304329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:32:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718891233906688[0;39m 生成今日电子书快照开始
2022-07-14 17:32:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718891233906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718891233906688[0;39m ==> Parameters: 
2022-07-14 17:32:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718891233906688[0;39m <==    Updates: 0
2022-07-14 17:32:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718891233906688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:32:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718912209620992[0;39m 生成今日电子书快照开始
2022-07-14 17:32:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718912209620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718912209620992[0;39m ==> Parameters: 
2022-07-14 17:32:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718912209620992[0;39m <==    Updates: 0
2022-07-14 17:32:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718912209620992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:32:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202718912222203904[0;39m 更新电子书下的文档数据开始
2022-07-14 17:32:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718912222203904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:32:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718912222203904[0;39m ==> Parameters: 
2022-07-14 17:32:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202718912222203904[0;39m <==    Updates: 7
2022-07-14 17:32:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202718912222203904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:32:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718933168558080[0;39m 生成今日电子书快照开始
2022-07-14 17:32:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718933168558080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718933168558080[0;39m ==> Parameters: 
2022-07-14 17:32:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718933168558080[0;39m <==    Updates: 0
2022-07-14 17:32:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718933168558080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:32:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718954152660992[0;39m 生成今日电子书快照开始
2022-07-14 17:32:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718954152660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718954152660992[0;39m ==> Parameters: 
2022-07-14 17:32:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718954152660992[0;39m <==    Updates: 0
2022-07-14 17:32:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718954152660992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:32:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718975132569600[0;39m 生成今日电子书快照开始
2022-07-14 17:32:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718975132569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718975132569600[0;39m ==> Parameters: 
2022-07-14 17:32:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718975132569600[0;39m <==    Updates: 0
2022-07-14 17:32:50.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718975132569600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:32:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202718996104089600[0;39m 生成今日电子书快照开始
2022-07-14 17:32:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718996104089600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:32:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718996104089600[0;39m ==> Parameters: 
2022-07-14 17:32:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202718996104089600[0;39m <==    Updates: 0
2022-07-14 17:32:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202718996104089600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:33:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719017050443776[0;39m 生成今日电子书快照开始
2022-07-14 17:33:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719017050443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719017050443776[0;39m ==> Parameters: 
2022-07-14 17:33:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719017050443776[0;39m <==    Updates: 0
2022-07-14 17:33:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719017050443776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:33:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719038030352384[0;39m 生成今日电子书快照开始
2022-07-14 17:33:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719038030352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719038030352384[0;39m ==> Parameters: 
2022-07-14 17:33:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719038030352384[0;39m <==    Updates: 0
2022-07-14 17:33:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719038030352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:33:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202719038038740992[0;39m 更新电子书下的文档数据开始
2022-07-14 17:33:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719038038740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:33:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719038038740992[0;39m ==> Parameters: 
2022-07-14 17:33:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719038038740992[0;39m <==    Updates: 7
2022-07-14 17:33:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202719038038740992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:33:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719059001872384[0;39m 生成今日电子书快照开始
2022-07-14 17:33:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719059001872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719059001872384[0;39m ==> Parameters: 
2022-07-14 17:33:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719059001872384[0;39m <==    Updates: 0
2022-07-14 17:33:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719059001872384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:33:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719079998558208[0;39m 生成今日电子书快照开始
2022-07-14 17:33:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719079998558208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719079998558208[0;39m ==> Parameters: 
2022-07-14 17:33:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719079998558208[0;39m <==    Updates: 0
2022-07-14 17:33:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719079998558208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:33:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719100970078208[0;39m 生成今日电子书快照开始
2022-07-14 17:33:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719100970078208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719100970078208[0;39m ==> Parameters: 
2022-07-14 17:33:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719100970078208[0;39m <==    Updates: 0
2022-07-14 17:33:20.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719100970078208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:33:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719121954181120[0;39m 生成今日电子书快照开始
2022-07-14 17:33:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719121954181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719121954181120[0;39m ==> Parameters: 
2022-07-14 17:33:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719121954181120[0;39m <==    Updates: 0
2022-07-14 17:33:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719121954181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:33:30.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719142871175168[0;39m 生成今日电子书快照开始
2022-07-14 17:33:30.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719142871175168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719142871175168[0;39m ==> Parameters: 
2022-07-14 17:33:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719142871175168[0;39m <==    Updates: 0
2022-07-14 17:33:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719142871175168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:33:35.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202719163909804032[0;39m 更新电子书下的文档数据开始
2022-07-14 17:33:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719163909804032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:33:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719163909804032[0;39m ==> Parameters: 
2022-07-14 17:33:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719163909804032[0;39m <==    Updates: 7
2022-07-14 17:33:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202719163909804032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:33:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719163913998336[0;39m 生成今日电子书快照开始
2022-07-14 17:33:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719163913998336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719163913998336[0;39m ==> Parameters: 
2022-07-14 17:33:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719163913998336[0;39m <==    Updates: 0
2022-07-14 17:33:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719163913998336[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:33:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719184868741120[0;39m 生成今日电子书快照开始
2022-07-14 17:33:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719184868741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719184868741120[0;39m ==> Parameters: 
2022-07-14 17:33:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719184868741120[0;39m <==    Updates: 0
2022-07-14 17:33:40.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719184868741120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:33:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719205806706688[0;39m 生成今日电子书快照开始
2022-07-14 17:33:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719205806706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719205806706688[0;39m ==> Parameters: 
2022-07-14 17:33:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719205806706688[0;39m <==    Updates: 0
2022-07-14 17:33:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719205806706688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:33:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719226807586816[0;39m 生成今日电子书快照开始
2022-07-14 17:33:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719226807586816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719226807586816[0;39m ==> Parameters: 
2022-07-14 17:33:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719226807586816[0;39m <==    Updates: 0
2022-07-14 17:33:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719226807586816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:33:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719247745552384[0;39m 生成今日电子书快照开始
2022-07-14 17:33:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719247745552384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:33:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719247745552384[0;39m ==> Parameters: 
2022-07-14 17:33:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719247745552384[0;39m <==    Updates: 0
2022-07-14 17:33:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719247745552384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:34:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719268733849600[0;39m 生成今日电子书快照开始
2022-07-14 17:34:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719268733849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719268733849600[0;39m ==> Parameters: 
2022-07-14 17:34:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719268733849600[0;39m <==    Updates: 0
2022-07-14 17:34:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719268733849600[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:34:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719289684398080[0;39m 生成今日电子书快照开始
2022-07-14 17:34:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719289684398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719289684398080[0;39m ==> Parameters: 
2022-07-14 17:34:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719289684398080[0;39m <==    Updates: 0
2022-07-14 17:34:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719289684398080[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:34:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202719289709563904[0;39m 更新电子书下的文档数据开始
2022-07-14 17:34:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719289709563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:34:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719289709563904[0;39m ==> Parameters: 
2022-07-14 17:34:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719289709563904[0;39m <==    Updates: 7
2022-07-14 17:34:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202719289709563904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:34:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719310693666816[0;39m 生成今日电子书快照开始
2022-07-14 17:34:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719310693666816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719310693666816[0;39m ==> Parameters: 
2022-07-14 17:34:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719310693666816[0;39m <==    Updates: 0
2022-07-14 17:34:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719310693666816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:34:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719331665186816[0;39m 生成今日电子书快照开始
2022-07-14 17:34:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719331665186816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719331665186816[0;39m ==> Parameters: 
2022-07-14 17:34:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719331665186816[0;39m <==    Updates: 0
2022-07-14 17:34:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719331665186816[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:34:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719352611540992[0;39m 生成今日电子书快照开始
2022-07-14 17:34:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719352611540992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719352611540992[0;39m ==> Parameters: 
2022-07-14 17:34:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719352611540992[0;39m <==    Updates: 0
2022-07-14 17:34:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719352611540992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:34:20.072 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719352888365056[0;39m ------------- 开始 -------------
2022-07-14 17:34:20.072 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719352888365056[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:34:20.072 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719352888365056[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:34:20.073 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719352888365056[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:20.073 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719352888365056[0;39m 请求参数: [{"categoryId2":401,"page":1,"size":1000}]
2022-07-14 17:34:20.074 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719352888365056[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:34:20.074 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719352888365056[0;39m ==> Parameters: 401(Long)
2022-07-14 17:34:20.084 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202719352888365056[0;39m <==    Columns: count(0)
2022-07-14 17:34:20.084 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202719352888365056[0;39m <==        Row: 2
2022-07-14 17:34:20.084 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719352888365056[0;39m <==      Total: 1
2022-07-14 17:34:20.085 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719352888365056[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 17:34:20.085 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719352888365056[0;39m ==> Parameters: 401(Long), 1000(Integer)
2022-07-14 17:34:20.085 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202719352888365056[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:34:20.086 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202719352888365056[0;39m <==        Row: 4, Mysql 入门教程, 400, 401, 零基础入门 Mysql 开发，企业级应用开发最佳首选框架, /image/cover2.png, 1, 0, 0
2022-07-14 17:34:20.086 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202719352888365056[0;39m <==        Row: 5, Oracle入门教程, 400, 401, 零基础入门 Oracle 开发，企业级应用开发最佳首选框架, /image/cover1.png, 1, 0, 0
2022-07-14 17:34:20.086 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719352888365056[0;39m <==      Total: 2
2022-07-14 17:34:20.086 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202719352888365056[0;39m 总行数：2
2022-07-14 17:34:20.086 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202719352888365056[0;39m 总页数：1
2022-07-14 17:34:20.087 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719352888365056[0;39m 返回结果: {"content":{"list":[{"category1Id":400,"category2Id":401,"cover":"/image/cover2.png","description":"零基础入门 Mysql 开发，企业级应用开发最佳首选框架","docCount":1,"id":4,"name":"Mysql 入门教程","viewCount":0,"voteCount":0},{"category1Id":400,"category2Id":401,"cover":"/image/cover1.png","description":"零基础入门 Oracle 开发，企业级应用开发最佳首选框架","docCount":1,"id":5,"name":"Oracle入门教程","viewCount":0,"voteCount":0}],"total":2},"success":true}
2022-07-14 17:34:20.087 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719352888365056[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-14 17:34:24.748 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719372500930560[0;39m ------------- 开始 -------------
2022-07-14 17:34:24.748 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719372500930560[0;39m 请求地址: http://127.0.0.1:8880/doc/all/4 GET
2022-07-14 17:34:24.748 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719372500930560[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:34:24.749 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719372500930560[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:24.749 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719372500930560[0;39m 请求参数: [4]
2022-07-14 17:34:24.749 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719372500930560[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:34:24.750 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719372500930560[0;39m ==> Parameters: 4(Long)
2022-07-14 17:34:24.750 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719372500930560[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:34:24.751 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719372500930560[0;39m <==        Row: 202710172811005952, 4, 0, mysql, 1, 0, 0
2022-07-14 17:34:24.751 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719372500930560[0;39m <==      Total: 1
2022-07-14 17:34:24.751 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719372500930560[0;39m 返回结果: {"content":[{"ebookId":4,"id":202710172811005952,"name":"mysql","parent":0,"sort":1,"viewCount":0,"voteCount":0}],"success":true}
2022-07-14 17:34:24.751 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719372500930560[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:34:24.759 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719372547067904[0;39m ------------- 开始 -------------
2022-07-14 17:34:24.759 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719372547067904[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202710172811005952 GET
2022-07-14 17:34:24.759 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719372547067904[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:34:24.759 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719372547067904[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:24.759 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719372547067904[0;39m 请求参数: [202710172811005952]
2022-07-14 17:34:24.760 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719372547067904[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:34:24.760 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719372547067904[0;39m ==> Parameters: 202710172811005952(Long)
2022-07-14 17:34:24.760 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719372547067904[0;39m <==    Columns: id, content
2022-07-14 17:34:24.761 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719372547067904[0;39m <==        Row: 202710172811005952, <<BLOB>>
2022-07-14 17:34:24.761 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719372547067904[0;39m <==      Total: 1
2022-07-14 17:34:24.761 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719372547067904[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:34:24.761 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719372547067904[0;39m ==> Parameters: 202710172811005952(Long)
2022-07-14 17:34:24.852 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719372547067904[0;39m <==    Updates: 1
2022-07-14 17:34:24.852 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719372547067904[0;39m 返回结果: {"content":"<blockquote><p>MySQL 8.0</p></blockquote>","success":true}
2022-07-14 17:34:24.852 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719372547067904[0;39m ------------- 结束 耗时：93 ms -------------
2022-07-14 17:34:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719373612421120[0;39m 生成今日电子书快照开始
2022-07-14 17:34:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719373612421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719373612421120[0;39m ==> Parameters: 
2022-07-14 17:34:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719373612421120[0;39m <==    Updates: 0
2022-07-14 17:34:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719373612421120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:34:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719394567163904[0;39m 生成今日电子书快照开始
2022-07-14 17:34:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719394567163904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719394567163904[0;39m ==> Parameters: 
2022-07-14 17:34:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719394567163904[0;39m <==    Updates: 0
2022-07-14 17:34:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719394567163904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:34:34.465 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :32  
                [32m202718720135663617[0;39m ------------- LoginInterceptor 开始 -------------
2022-07-14 17:34:34.466 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :43  
                [32m202718720135663617[0;39m 接口登录拦截：，path：http://127.0.0.1:8880/user_wiki/list
2022-07-14 17:34:34.466 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :47  
                [32m202718720135663617[0;39m 登录校验开始，token：202710050781925376
2022-07-14 17:34:34.501 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :59  
                [32m202718720135663617[0;39m 已登录：{"id":1,"loginName":"test","name":"测试","token":"202710050781925376"}
2022-07-14 17:34:34.502 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719413412171776[0;39m ------------- 开始 -------------
2022-07-14 17:34:34.502 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719413412171776[0;39m 请求地址: http://127.0.0.1:8880/user_wiki/list GET
2022-07-14 17:34:34.503 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719413412171776[0;39m 类名方法: com.zs.wikibb.controller.UserwikiController.list
2022-07-14 17:34:34.503 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719413412171776[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:34.503 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719413412171776[0;39m 请求参数: [{"page":1,"size":10}]
2022-07-14 17:34:34.504 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202719413412171776[0;39m ==>  Preparing: SELECT count(0) FROM userwiki
2022-07-14 17:34:34.505 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202719413412171776[0;39m ==> Parameters: 
2022-07-14 17:34:34.505 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202719413412171776[0;39m <==    Columns: count(0)
2022-07-14 17:34:34.506 TRACE c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :143 
                [32m202719413412171776[0;39m <==        Row: 3
2022-07-14 17:34:34.506 DEBUG c.z.w.mapper.UserwikiMapper.selectByExample_COUNT :137 
                [32m202719413412171776[0;39m <==      Total: 1
2022-07-14 17:34:34.506 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202719413412171776[0;39m ==>  Preparing: select id, login_name, `name`, `password` from userwiki LIMIT ?
2022-07-14 17:34:34.507 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202719413412171776[0;39m ==> Parameters: 10(Integer)
2022-07-14 17:34:34.508 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202719413412171776[0;39m <==    Columns: id, login_name, name, password
2022-07-14 17:34:34.508 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202719413412171776[0;39m <==        Row: 1, test, 测试, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:34:34.508 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202719413412171776[0;39m <==        Row: 2, zhangshuo, 张硕, 48d6e4c28cd6d6dbc85b94988c174851
2022-07-14 17:34:34.508 TRACE c.zs.wikibb.mapper.UserwikiMapper.selectByExample :143 
                [32m202719413412171776[0;39m <==        Row: 3, zhangyishan, 张一山, e70e2222a9d67c4f2eae107533359aa4
2022-07-14 17:34:34.509 DEBUG c.zs.wikibb.mapper.UserwikiMapper.selectByExample :137 
                [32m202719413412171776[0;39m <==      Total: 3
2022-07-14 17:34:34.509 INFO  com.zs.wikibb.service.UserwikiService             :49  
                [32m202719413412171776[0;39m 总行数：3
2022-07-14 17:34:34.509 INFO  com.zs.wikibb.service.UserwikiService             :50  
                [32m202719413412171776[0;39m 总页数：1
2022-07-14 17:34:34.510 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719413412171776[0;39m 返回结果: {"content":{"list":[{"id":1,"loginName":"test","name":"测试"},{"id":2,"loginName":"zhangshuo","name":"张硕"},{"id":3,"loginName":"zhangyishan","name":"张一山"}],"total":3},"success":true}
2022-07-14 17:34:34.510 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719413412171776[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:34:34.510 INFO  com.zs.wikibb.interceptor.LoginInterceptor        :68  
                [32m202719413412171776[0;39m ------------- LoginInterceptor 结束 耗时：44 ms -------------
2022-07-14 17:34:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719415517712384[0;39m 生成今日电子书快照开始
2022-07-14 17:34:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719415517712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719415517712384[0;39m ==> Parameters: 
2022-07-14 17:34:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719415517712384[0;39m <==    Updates: 0
2022-07-14 17:34:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719415517712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:34:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202719415526100992[0;39m 更新电子书下的文档数据开始
2022-07-14 17:34:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719415526100992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:34:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719415526100992[0;39m ==> Parameters: 
2022-07-14 17:34:35.055 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719415526100992[0;39m <==    Updates: 7
2022-07-14 17:34:35.055 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202719415526100992[0;39m 更新电子书下的文档数据结束，耗时：49 毫秒
2022-07-14 17:34:35.546 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719417791025152[0;39m ------------- 开始 -------------
2022-07-14 17:34:35.546 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719417791025152[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:34:35.546 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719417791025153[0;39m ------------- 开始 -------------
2022-07-14 17:34:35.546 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719417791025152[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:34:35.546 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719417791025153[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:34:35.546 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719417791025152[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:35.547 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719417791025152[0;39m 请求参数: []
2022-07-14 17:34:35.547 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719417791025153[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:34:35.547 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719417795219456[0;39m ------------- 开始 -------------
2022-07-14 17:34:35.547 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719417791025153[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:35.547 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719417795219456[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:34:35.547 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719417791025153[0;39m 请求参数: []
2022-07-14 17:34:35.547 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719417795219456[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:34:35.547 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719417791025152[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:34:35.547 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719417795219456[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:35.547 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719417795219456[0;39m 请求参数: []
2022-07-14 17:34:35.547 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719417791025152[0;39m ==> Parameters: 
2022-07-14 17:34:35.547 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719417791025153[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:34:35.548 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719417791025153[0;39m ==> Parameters: 
2022-07-14 17:34:35.548 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719417795219456[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:34:35.548 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719417795219456[0;39m ==> Parameters: 
2022-07-14 17:34:35.548 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719417791025152[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:34:35.548 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719417791025153[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:34:35.549 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719417791025152[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:34:35.549 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:34:35.549 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719417791025153[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:34:35.549 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719417791025152[0;39m <==        Row: 2022-07-14, 123, 25, 18, 1
2022-07-14 17:34:35.549 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:34:35.549 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719417791025152[0;39m <==      Total: 2
2022-07-14 17:34:35.549 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719417791025153[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:34:35.549 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:34:35.549 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719417791025152[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":123,"viewIncrease":18,"voteCount":25,"voteIncrease":1}],"success":true}
2022-07-14 17:34:35.549 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719417791025153[0;39m <==      Total: 2
2022-07-14 17:34:35.549 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719417791025152[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:34:35.549 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719417791025153[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:34:35.549 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:34:35.550 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719417791025153[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:34:35.550 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:34:35.550 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:34:35.550 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:34:35.550 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:34:35.551 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:34:35.551 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:34:35.551 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:34:35.551 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:34:35.552 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:34:35.552 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:34:35.552 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:34:35.552 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:34:35.552 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719417795219456[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:34:35.553 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719417795219456[0;39m <==      Total: 16
2022-07-14 17:34:35.553 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719417795219456[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:34:35.553 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719417795219456[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:34:38.746 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719431212797952[0;39m ------------- 开始 -------------
2022-07-14 17:34:38.746 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719431212797952[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:34:38.746 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719431212797952[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:34:38.746 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719431212797952[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:38.747 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719431212797952[0;39m 请求参数: [{"categoryId2":201,"page":1,"size":1000}]
2022-07-14 17:34:38.748 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719431212797952[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:34:38.748 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719431212797952[0;39m ==> Parameters: 201(Long)
2022-07-14 17:34:38.749 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202719431212797952[0;39m <==    Columns: count(0)
2022-07-14 17:34:38.749 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202719431212797952[0;39m <==        Row: 1
2022-07-14 17:34:38.749 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719431212797952[0;39m <==      Total: 1
2022-07-14 17:34:38.749 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719431212797952[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 17:34:38.750 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719431212797952[0;39m ==> Parameters: 201(Long), 1000(Integer)
2022-07-14 17:34:38.750 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202719431212797952[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:34:38.750 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202719431212797952[0;39m <==        Row: 1, Spring Boot 入门教程, 200, 201, 零基础入门 Java 开发，企业级应用开发最佳首选框架, /image/cover1.png, 6, 63, 13
2022-07-14 17:34:38.751 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719431212797952[0;39m <==      Total: 1
2022-07-14 17:34:38.751 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202719431212797952[0;39m 总行数：1
2022-07-14 17:34:38.751 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202719431212797952[0;39m 总页数：1
2022-07-14 17:34:38.751 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719431212797952[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":201,"cover":"/image/cover1.png","description":"零基础入门 Java 开发，企业级应用开发最佳首选框架","docCount":6,"id":1,"name":"Spring Boot 入门教程","viewCount":63,"voteCount":13}],"total":1},"success":true}
2022-07-14 17:34:38.752 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719431212797952[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:34:39.744 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719435398713344[0;39m ------------- 开始 -------------
2022-07-14 17:34:39.745 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719435398713344[0;39m 请求地址: http://127.0.0.1:8880/doc/all/1 GET
2022-07-14 17:34:39.745 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719435398713344[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:34:39.745 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719435398713344[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:39.745 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719435398713344[0;39m 请求参数: [1]
2022-07-14 17:34:39.746 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719435398713344[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:34:39.747 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719435398713344[0;39m ==> Parameters: 1(Long)
2022-07-14 17:34:39.747 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719435398713344[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:34:39.748 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719435398713344[0;39m <==        Row: 1, 1, 0, Ant Design Of Vue, 1, 33, 4
2022-07-14 17:34:39.748 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719435398713344[0;39m <==        Row: 2, 1, 1, 文档1.1, 1, 10, 3
2022-07-14 17:34:39.748 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719435398713344[0;39m <==        Row: 4, 1, 3, 文档2.1, 1, 7, 2
2022-07-14 17:34:39.748 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719435398713344[0;39m <==        Row: 6, 1, 5, 文档2.2.1, 1, 5, 2
2022-07-14 17:34:39.748 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719435398713344[0;39m <==        Row: 3, 1, 0, 文档2, 2, 4, 1
2022-07-14 17:34:39.749 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719435398713344[0;39m <==        Row: 5, 1, 3, 文档2.2, 2, 4, 1
2022-07-14 17:34:39.749 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719435398713344[0;39m <==      Total: 6
2022-07-14 17:34:39.749 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719435398713344[0;39m 返回结果: {"content":[{"ebookId":1,"id":1,"name":"Ant Design Of Vue","parent":0,"sort":1,"viewCount":33,"voteCount":4},{"ebookId":1,"id":2,"name":"文档1.1","parent":1,"sort":1,"viewCount":10,"voteCount":3},{"ebookId":1,"id":4,"name":"文档2.1","parent":3,"sort":1,"viewCount":7,"voteCount":2},{"ebookId":1,"id":6,"name":"文档2.2.1","parent":5,"sort":1,"viewCount":5,"voteCount":2},{"ebookId":1,"id":3,"name":"文档2","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":1,"id":5,"name":"文档2.2","parent":3,"sort":2,"viewCount":4,"voteCount":1}],"success":true}
2022-07-14 17:34:39.749 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719435398713344[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:34:39.760 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719435465822208[0;39m ------------- 开始 -------------
2022-07-14 17:34:39.760 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719435465822208[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/1 GET
2022-07-14 17:34:39.760 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719435465822208[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:34:39.760 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719435465822208[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:39.760 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719435465822208[0;39m 请求参数: [1]
2022-07-14 17:34:39.761 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719435465822208[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:34:39.761 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719435465822208[0;39m ==> Parameters: 1(Long)
2022-07-14 17:34:39.762 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719435465822208[0;39m <==    Columns: id, content
2022-07-14 17:34:39.762 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719435465822208[0;39m <==        Row: 1, <<BLOB>>
2022-07-14 17:34:39.762 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719435465822208[0;39m <==      Total: 1
2022-07-14 17:34:39.762 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719435465822208[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:34:39.763 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719435465822208[0;39m ==> Parameters: 1(Long)
2022-07-14 17:34:39.784 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719435465822208[0;39m <==    Updates: 1
2022-07-14 17:34:39.784 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719435465822208[0;39m 返回结果: {"content":"<blockquote><h1 id=\"japt6\"><font face=\"仿宋\" color=\"#7b5ba1\"><b><u>33332222</u></b></font></h1><p><font face=\"仿宋\" color=\"#c24f4a\"><b style=\"background-color: rgb(139, 170, 74);\">2022.7.4</b></font></p><img class=\"eleImg\" src=\"http://img.t.sinajs.cn/t4/appstyle/expression/ext/normal/40/pcmoren_tian_org.png\" alt=\"[[舔屏]]\"><div><font face=\"仿宋\" color=\"#7b5ba1\"><b></b></font></div></blockquote>","success":true}
2022-07-14 17:34:39.784 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719435465822208[0;39m ------------- 结束 耗时：24 ms -------------
2022-07-14 17:34:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719436506009600[0;39m 生成今日电子书快照开始
2022-07-14 17:34:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719436506009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719436506009600[0;39m ==> Parameters: 
2022-07-14 17:34:40.074 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719436506009600[0;39m <==    Updates: 0
2022-07-14 17:34:40.075 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719436506009600[0;39m 生成今日电子书快照结束，耗时：67 毫秒
2022-07-14 17:34:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719457448169472[0;39m 生成今日电子书快照开始
2022-07-14 17:34:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719457448169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719457448169472[0;39m ==> Parameters: 
2022-07-14 17:34:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719457448169472[0;39m <==    Updates: 0
2022-07-14 17:34:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719457448169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:34:45.729 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719460501622784[0;39m ------------- 开始 -------------
2022-07-14 17:34:45.730 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719460501622784[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/2 GET
2022-07-14 17:34:45.730 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719460501622784[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:34:45.730 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719460501622784[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:45.730 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719460501622784[0;39m 请求参数: [2]
2022-07-14 17:34:45.731 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719460501622784[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:34:45.731 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719460501622784[0;39m ==> Parameters: 2(Long)
2022-07-14 17:34:45.731 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719460501622784[0;39m <==      Total: 0
2022-07-14 17:34:45.732 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719460501622784[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:34:45.732 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719460501622784[0;39m ==> Parameters: 2(Long)
2022-07-14 17:34:45.750 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719460501622784[0;39m <==    Updates: 1
2022-07-14 17:34:45.750 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719460501622784[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:34:45.750 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719460501622784[0;39m ------------- 结束 耗时：21 ms -------------
2022-07-14 17:34:47.293 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719467061514240[0;39m ------------- 开始 -------------
2022-07-14 17:34:47.293 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719467061514240[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/3 GET
2022-07-14 17:34:47.293 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719467061514240[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:34:47.293 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719467061514240[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:47.293 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719467061514240[0;39m 请求参数: [3]
2022-07-14 17:34:47.294 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719467061514240[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:34:47.294 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719467061514240[0;39m ==> Parameters: 3(Long)
2022-07-14 17:34:47.294 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719467061514240[0;39m <==      Total: 0
2022-07-14 17:34:47.295 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719467061514240[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:34:47.295 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719467061514240[0;39m ==> Parameters: 3(Long)
2022-07-14 17:34:47.310 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719467061514240[0;39m <==    Updates: 1
2022-07-14 17:34:47.310 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719467061514240[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:34:47.310 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719467061514240[0;39m ------------- 结束 耗时：17 ms -------------
2022-07-14 17:34:47.736 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719468919590912[0;39m ------------- 开始 -------------
2022-07-14 17:34:47.736 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719468919590912[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/4 GET
2022-07-14 17:34:47.736 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719468919590912[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:34:47.737 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719468919590912[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:47.737 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719468919590912[0;39m 请求参数: [4]
2022-07-14 17:34:47.737 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719468919590912[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:34:47.737 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719468919590912[0;39m ==> Parameters: 4(Long)
2022-07-14 17:34:47.738 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719468919590912[0;39m <==      Total: 0
2022-07-14 17:34:47.738 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719468919590912[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:34:47.738 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719468919590912[0;39m ==> Parameters: 4(Long)
2022-07-14 17:34:47.767 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719468919590912[0;39m <==    Updates: 1
2022-07-14 17:34:47.767 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719468919590912[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:34:47.767 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719468919590912[0;39m ------------- 结束 耗时：31 ms -------------
2022-07-14 17:34:48.154 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719470672809984[0;39m ------------- 开始 -------------
2022-07-14 17:34:48.155 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719470672809984[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/5 GET
2022-07-14 17:34:48.155 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719470672809984[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:34:48.155 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719470672809984[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:48.155 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719470672809984[0;39m 请求参数: [5]
2022-07-14 17:34:48.155 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719470672809984[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:34:48.155 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719470672809984[0;39m ==> Parameters: 5(Long)
2022-07-14 17:34:48.156 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719470672809984[0;39m <==      Total: 0
2022-07-14 17:34:48.156 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719470672809984[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:34:48.156 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719470672809984[0;39m ==> Parameters: 5(Long)
2022-07-14 17:34:48.172 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719470672809984[0;39m <==    Updates: 1
2022-07-14 17:34:48.173 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719470672809984[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:34:48.173 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719470672809984[0;39m ------------- 结束 耗时：19 ms -------------
2022-07-14 17:34:48.537 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719472279228416[0;39m ------------- 开始 -------------
2022-07-14 17:34:48.537 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719472279228416[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/6 GET
2022-07-14 17:34:48.537 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719472279228416[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:34:48.537 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719472279228416[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:48.537 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719472279228416[0;39m 请求参数: [6]
2022-07-14 17:34:48.538 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719472279228416[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:34:48.538 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719472279228416[0;39m ==> Parameters: 6(Long)
2022-07-14 17:34:48.539 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719472279228416[0;39m <==      Total: 0
2022-07-14 17:34:48.539 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719472279228416[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:34:48.539 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719472279228416[0;39m ==> Parameters: 6(Long)
2022-07-14 17:34:48.560 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719472279228416[0;39m <==    Updates: 1
2022-07-14 17:34:48.560 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719472279228416[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:34:48.560 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719472279228416[0;39m ------------- 结束 耗时：23 ms -------------
2022-07-14 17:34:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719478419689472[0;39m 生成今日电子书快照开始
2022-07-14 17:34:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719478419689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719478419689472[0;39m ==> Parameters: 
2022-07-14 17:34:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719478419689472[0;39m <==    Updates: 0
2022-07-14 17:34:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719478419689472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:34:51.689 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719485499674624[0;39m ------------- 开始 -------------
2022-07-14 17:34:51.689 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719485499674625[0;39m ------------- 开始 -------------
2022-07-14 17:34:51.689 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719485499674626[0;39m ------------- 开始 -------------
2022-07-14 17:34:51.689 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719485499674624[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:34:51.689 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719485499674625[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:34:51.689 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719485499674626[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:34:51.689 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719485499674624[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:34:51.690 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719485499674625[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:34:51.690 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719485499674626[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:34:51.690 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719485499674624[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:51.690 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719485499674625[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:51.690 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719485499674626[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:51.690 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719485499674624[0;39m 请求参数: []
2022-07-14 17:34:51.690 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719485499674626[0;39m 请求参数: []
2022-07-14 17:34:51.690 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719485499674625[0;39m 请求参数: []
2022-07-14 17:34:51.690 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719485499674624[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:34:51.690 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719485499674625[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:34:51.690 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719485499674626[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:34:51.691 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719485499674624[0;39m ==> Parameters: 
2022-07-14 17:34:51.692 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719485499674626[0;39m ==> Parameters: 
2022-07-14 17:34:51.691 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719485499674625[0;39m ==> Parameters: 
2022-07-14 17:34:51.692 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:34:51.692 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719485499674624[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:34:51.692 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719485499674625[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:34:51.692 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:34:51.692 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719485499674624[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:34:51.693 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719485499674625[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:34:51.693 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:34:51.693 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719485499674625[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:34:51.693 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719485499674624[0;39m <==        Row: 2022-07-14, 124, 25, 19, 1
2022-07-14 17:34:51.693 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:34:51.693 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719485499674625[0;39m <==      Total: 2
2022-07-14 17:34:51.693 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719485499674624[0;39m <==      Total: 2
2022-07-14 17:34:51.693 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:34:51.693 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719485499674625[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:34:51.693 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719485499674624[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":124,"viewIncrease":19,"voteCount":25,"voteIncrease":1}],"success":true}
2022-07-14 17:34:51.693 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719485499674625[0;39m ------------- 结束 耗时：4 ms -------------
2022-07-14 17:34:51.693 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:34:51.694 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719485499674624[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:34:51.694 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:34:51.694 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:34:51.694 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:34:51.694 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:34:51.695 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:34:51.696 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:34:51.696 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:34:51.696 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:34:51.696 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:34:51.696 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:34:51.696 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719485499674626[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:34:51.697 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719485499674626[0;39m <==      Total: 16
2022-07-14 17:34:51.697 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719485499674626[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:34:51.697 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719485499674626[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:34:54.284 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719496383893504[0;39m ------------- 开始 -------------
2022-07-14 17:34:54.284 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719496383893504[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:34:54.284 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719496383893504[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:34:54.284 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719496383893504[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:54.285 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719496383893504[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-14 17:34:54.286 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719496383893504[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:34:54.287 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719496383893504[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-14 17:34:54.287 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202719496383893504[0;39m <==    Columns: count(0)
2022-07-14 17:34:54.288 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202719496383893504[0;39m <==        Row: 1
2022-07-14 17:34:54.288 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719496383893504[0;39m <==      Total: 1
2022-07-14 17:34:54.288 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719496383893504[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 17:34:54.288 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719496383893504[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-14 17:34:54.289 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202719496383893504[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:34:54.290 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202719496383893504[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 12, 17, 0
2022-07-14 17:34:54.290 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719496383893504[0;39m <==      Total: 1
2022-07-14 17:34:54.291 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202719496383893504[0;39m 总行数：1
2022-07-14 17:34:54.291 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202719496383893504[0;39m 总页数：1
2022-07-14 17:34:54.291 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719496383893504[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":12,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":17,"voteCount":0}],"total":1},"success":true}
2022-07-14 17:34:54.291 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719496383893504[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:34:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719499391209472[0;39m 生成今日电子书快照开始
2022-07-14 17:34:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719499391209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:34:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719499391209472[0;39m ==> Parameters: 
2022-07-14 17:34:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719499391209472[0;39m <==    Updates: 0
2022-07-14 17:34:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719499391209472[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-14 17:34:55.849 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719502947979264[0;39m ------------- 开始 -------------
2022-07-14 17:34:55.850 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719502947979264[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:34:55.850 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719502947979264[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:34:55.850 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719502947979264[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:55.850 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719502947979264[0;39m 请求参数: [202714600712572928]
2022-07-14 17:34:55.851 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719502947979264[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:34:55.851 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719502947979264[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:34:55.852 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:34:55.852 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 3, 0
2022-07-14 17:34:55.852 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 2, 0
2022-07-14 17:34:55.852 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 2, 0
2022-07-14 17:34:55.853 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 2, 0
2022-07-14 17:34:55.853 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 1, 0
2022-07-14 17:34:55.854 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 1, 0
2022-07-14 17:34:55.854 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 1, 0
2022-07-14 17:34:55.855 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 1, 0
2022-07-14 17:34:55.855 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 1, 0
2022-07-14 17:34:55.855 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 1, 0
2022-07-14 17:34:55.856 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 1, 0
2022-07-14 17:34:55.856 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719502947979264[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 1, 0
2022-07-14 17:34:55.856 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719502947979264[0;39m <==      Total: 12
2022-07-14 17:34:55.857 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719502947979264[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":3,"voteCount":0},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":2,"voteCount":0},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":2,"voteCount":0},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":2,"voteCount":0},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":1,"voteCount":0},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":1,"voteCount":0}],"success":true}
2022-07-14 17:34:55.857 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719502947979264[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:34:55.870 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719503036059648[0;39m ------------- 开始 -------------
2022-07-14 17:34:55.870 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719503036059648[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-14 17:34:55.870 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719503036059648[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:34:55.871 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719503036059648[0;39m 远程地址: 127.0.0.1
2022-07-14 17:34:55.871 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719503036059648[0;39m 请求参数: [202714909656616960]
2022-07-14 17:34:55.871 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719503036059648[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:34:55.871 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719503036059648[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:34:55.872 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719503036059648[0;39m <==    Columns: id, content
2022-07-14 17:34:55.872 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719503036059648[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-14 17:34:55.873 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719503036059648[0;39m <==      Total: 1
2022-07-14 17:34:55.873 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719503036059648[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:34:55.873 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719503036059648[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:34:55.894 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719503036059648[0;39m <==    Updates: 1
2022-07-14 17:34:55.894 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719503036059648[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:34:55.894 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719503036059648[0;39m ------------- 结束 耗时：24 ms -------------
2022-07-14 17:35:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719520362729472[0;39m 生成今日电子书快照开始
2022-07-14 17:35:00.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719520362729472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719520362729472[0;39m ==> Parameters: 
2022-07-14 17:35:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719520362729472[0;39m <==    Updates: 0
2022-07-14 17:35:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719520362729472[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:35:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719541338443776[0;39m 生成今日电子书快照开始
2022-07-14 17:35:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719541338443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719541338443776[0;39m ==> Parameters: 
2022-07-14 17:35:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719541338443776[0;39m <==    Updates: 0
2022-07-14 17:35:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719541338443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:35:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202719541346832384[0;39m 更新电子书下的文档数据开始
2022-07-14 17:35:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719541346832384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:35:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719541346832384[0;39m ==> Parameters: 
2022-07-14 17:35:05.069 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719541346832384[0;39m <==    Updates: 7
2022-07-14 17:35:05.070 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202719541346832384[0;39m 更新电子书下的文档数据结束，耗时：66 毫秒
2022-07-14 17:35:09.408 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719559818547200[0;39m ------------- 开始 -------------
2022-07-14 17:35:09.409 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719559818547200[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-14 17:35:09.409 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719559818547200[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:09.409 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719559818547200[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:09.409 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719559818547200[0;39m 请求参数: [202715069841281024]
2022-07-14 17:35:09.409 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719559818547200[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:09.410 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719559818547200[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:35:09.410 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719559818547200[0;39m <==    Columns: id, content
2022-07-14 17:35:09.410 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719559818547200[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-14 17:35:09.411 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719559818547200[0;39m <==      Total: 1
2022-07-14 17:35:09.411 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719559818547200[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:09.411 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719559818547200[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:35:09.427 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719559818547200[0;39m <==    Updates: 1
2022-07-14 17:35:09.427 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719559818547200[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:09.427 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719559818547200[0;39m ------------- 结束 耗时：19 ms -------------
2022-07-14 17:35:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719562305769472[0;39m 生成今日电子书快照开始
2022-07-14 17:35:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719562305769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719562305769472[0;39m ==> Parameters: 
2022-07-14 17:35:10.012 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719562351906816[0;39m ------------- 开始 -------------
2022-07-14 17:35:10.013 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719562351906816[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715172312322048 GET
2022-07-14 17:35:10.013 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719562351906816[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:10.013 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719562351906816[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:10.013 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719562351906816[0;39m 请求参数: [202715172312322048]
2022-07-14 17:35:10.013 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719562351906816[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:10.014 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719562351906816[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:35:10.014 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719562351906816[0;39m <==    Columns: id, content
2022-07-14 17:35:10.014 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719562351906816[0;39m <==        Row: 202715172312322048, <<BLOB>>
2022-07-14 17:35:10.015 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719562351906816[0;39m <==      Total: 1
2022-07-14 17:35:10.015 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719562351906816[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:10.015 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719562351906816[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:35:10.027 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719562351906816[0;39m <==    Updates: 1
2022-07-14 17:35:10.027 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719562351906816[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:10.027 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719562351906816[0;39m ------------- 结束 耗时：15 ms -------------
2022-07-14 17:35:10.038 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719562305769472[0;39m <==    Updates: 0
2022-07-14 17:35:10.038 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719562305769472[0;39m 生成今日电子书快照结束，耗时：37 毫秒
2022-07-14 17:35:10.760 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719565485051904[0;39m ------------- 开始 -------------
2022-07-14 17:35:10.760 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719565485051904[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715279778779136 GET
2022-07-14 17:35:10.760 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719565485051904[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:10.760 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719565485051904[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:10.760 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719565485051904[0;39m 请求参数: [202715279778779136]
2022-07-14 17:35:10.761 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719565485051904[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:10.761 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719565485051904[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:35:10.761 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719565485051904[0;39m <==    Columns: id, content
2022-07-14 17:35:10.762 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719565485051904[0;39m <==        Row: 202715279778779136, <<BLOB>>
2022-07-14 17:35:10.762 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719565485051904[0;39m <==      Total: 1
2022-07-14 17:35:10.762 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719565485051904[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:10.762 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719565485051904[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:35:10.774 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719565485051904[0;39m <==    Updates: 1
2022-07-14 17:35:10.774 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719565485051904[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:10.775 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719565485051904[0;39m ------------- 结束 耗时：16 ms -------------
2022-07-14 17:35:11.349 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719567959691264[0;39m ------------- 开始 -------------
2022-07-14 17:35:11.349 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719567959691264[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-14 17:35:11.349 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719567959691264[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:11.350 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719567959691264[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:11.350 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719567959691264[0;39m 请求参数: [202715069841281024]
2022-07-14 17:35:11.350 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719567959691264[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:11.350 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719567959691264[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:35:11.351 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719567959691264[0;39m <==    Columns: id, content
2022-07-14 17:35:11.351 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719567959691264[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-14 17:35:11.351 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719567959691264[0;39m <==      Total: 1
2022-07-14 17:35:11.352 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719567959691264[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:11.352 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719567959691264[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:35:11.367 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719567959691264[0;39m <==    Updates: 1
2022-07-14 17:35:11.367 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719567959691264[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:11.367 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719567959691264[0;39m ------------- 结束 耗时：18 ms -------------
2022-07-14 17:35:12.046 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719570883121152[0;39m ------------- 开始 -------------
2022-07-14 17:35:12.046 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719570883121152[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715069841281024 GET
2022-07-14 17:35:12.046 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719570883121152[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:12.046 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719570883121152[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:12.046 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719570883121152[0;39m 请求参数: [202715069841281024]
2022-07-14 17:35:12.081 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719570883121152[0;39m key不存在，放入：DOC_VOTE_202715069841281024_127.0.0.1，过期 86400 秒
2022-07-14 17:35:12.116 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719570883121152[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:12.116 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719570883121152[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:35:12.130 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719570883121152[0;39m <==    Updates: 1
2022-07-14 17:35:12.130 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719570883121152[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:12.130 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719570883121152[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:35:12.131 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719570883121152[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:12.131 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719570883121152[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 4, 1
2022-07-14 17:35:12.131 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719570883121152[0;39m <==      Total: 1
2022-07-14 17:35:12.132 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719570883121152[0;39m 返回结果: {"success":true}
2022-07-14 17:35:12.132 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719570883121152[0;39m ------------- 结束 耗时：86 ms -------------
2022-07-14 17:35:12.132 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719570883121152[0;39m 推送消息：v5MNXFsZyw，内容：【Spring Boot项目搭建】被点赞
2022-07-14 17:35:13.855 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719578470617088[0;39m ------------- 开始 -------------
2022-07-14 17:35:13.855 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719578470617088[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715172312322048 GET
2022-07-14 17:35:13.855 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719578470617088[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:13.856 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719578470617088[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:13.856 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719578470617088[0;39m 请求参数: [202715172312322048]
2022-07-14 17:35:13.856 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719578470617088[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:13.857 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719578470617088[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:35:13.857 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719578470617088[0;39m <==    Columns: id, content
2022-07-14 17:35:13.857 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719578470617088[0;39m <==        Row: 202715172312322048, <<BLOB>>
2022-07-14 17:35:13.858 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719578470617088[0;39m <==      Total: 1
2022-07-14 17:35:13.858 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719578470617088[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:13.858 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719578470617088[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:35:13.877 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719578470617088[0;39m <==    Updates: 1
2022-07-14 17:35:13.877 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719578470617088[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:13.877 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719578470617088[0;39m ------------- 结束 耗时：22 ms -------------
2022-07-14 17:35:14.635 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719581742174208[0;39m ------------- 开始 -------------
2022-07-14 17:35:14.635 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719581742174208[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715172312322048 GET
2022-07-14 17:35:14.635 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719581742174208[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:14.635 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719581742174208[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:14.635 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719581742174208[0;39m 请求参数: [202715172312322048]
2022-07-14 17:35:14.669 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719581742174208[0;39m key不存在，放入：DOC_VOTE_202715172312322048_127.0.0.1，过期 86400 秒
2022-07-14 17:35:14.702 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719581742174208[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:14.703 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719581742174208[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:35:14.717 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719581742174208[0;39m <==    Updates: 1
2022-07-14 17:35:14.717 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719581742174208[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:14.717 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719581742174208[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:35:14.717 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719581742174208[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:14.717 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719581742174208[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 4, 1
2022-07-14 17:35:14.717 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719581742174208[0;39m <==      Total: 1
2022-07-14 17:35:14.718 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719581742174208[0;39m 返回结果: {"success":true}
2022-07-14 17:35:14.718 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719581742174208[0;39m ------------- 结束 耗时：83 ms -------------
2022-07-14 17:35:14.719 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719581742174208[0;39m 推送消息：v5MNXFsZyw，内容：【后端架构完善与接口开发】被点赞
2022-07-14 17:35:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719583310843904[0;39m 生成今日电子书快照开始
2022-07-14 17:35:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719583310843904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719583310843904[0;39m ==> Parameters: 
2022-07-14 17:35:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719583310843904[0;39m <==    Updates: 0
2022-07-14 17:35:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719583310843904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:35:15.494 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719585345081344[0;39m ------------- 开始 -------------
2022-07-14 17:35:15.494 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719585345081344[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715279778779136 GET
2022-07-14 17:35:15.494 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719585345081344[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:15.495 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719585345081344[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:15.495 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719585345081344[0;39m 请求参数: [202715279778779136]
2022-07-14 17:35:15.495 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719585345081344[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:15.496 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719585345081344[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:35:15.496 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719585345081344[0;39m <==    Columns: id, content
2022-07-14 17:35:15.497 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719585345081344[0;39m <==        Row: 202715279778779136, <<BLOB>>
2022-07-14 17:35:15.497 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719585345081344[0;39m <==      Total: 1
2022-07-14 17:35:15.498 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719585345081344[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:15.498 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719585345081344[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:35:15.521 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719585345081344[0;39m <==    Updates: 1
2022-07-14 17:35:15.521 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719585345081344[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:15.522 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719585345081344[0;39m ------------- 结束 耗时：28 ms -------------
2022-07-14 17:35:16.250 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719588515975168[0;39m ------------- 开始 -------------
2022-07-14 17:35:16.250 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719588515975168[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715279778779136 GET
2022-07-14 17:35:16.250 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719588515975168[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:16.250 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719588515975168[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:16.250 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719588515975168[0;39m 请求参数: [202715279778779136]
2022-07-14 17:35:16.286 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719588515975168[0;39m key不存在，放入：DOC_VOTE_202715279778779136_127.0.0.1，过期 86400 秒
2022-07-14 17:35:16.324 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719588515975168[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:16.324 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719588515975168[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:35:16.347 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719588515975168[0;39m <==    Updates: 1
2022-07-14 17:35:16.348 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719588515975168[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:16.348 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719588515975168[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:35:16.349 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719588515975168[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:16.349 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719588515975168[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 4, 1
2022-07-14 17:35:16.349 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719588515975168[0;39m <==      Total: 1
2022-07-14 17:35:16.349 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719588515975168[0;39m 返回结果: {"success":true}
2022-07-14 17:35:16.350 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719588515975168[0;39m ------------- 结束 耗时：100 ms -------------
2022-07-14 17:35:16.350 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719588515975168[0;39m 推送消息：v5MNXFsZyw，内容：【Vue 3+ Vue CLI 项目搭建】被点赞
2022-07-14 17:35:17.367 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719593201012736[0;39m ------------- 开始 -------------
2022-07-14 17:35:17.367 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719593201012736[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-14 17:35:17.368 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719593201012736[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:17.368 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719593201012736[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:17.368 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719593201012736[0;39m 请求参数: [202714909656616960]
2022-07-14 17:35:17.368 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719593201012736[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:17.369 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719593201012736[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:35:17.369 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719593201012736[0;39m <==    Columns: id, content
2022-07-14 17:35:17.369 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719593201012736[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-14 17:35:17.370 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719593201012736[0;39m <==      Total: 1
2022-07-14 17:35:17.370 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719593201012736[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:17.370 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719593201012736[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:35:17.393 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719593201012736[0;39m <==    Updates: 1
2022-07-14 17:35:17.393 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719593201012736[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:17.394 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719593201012736[0;39m ------------- 结束 耗时：27 ms -------------
2022-07-14 17:35:18.112 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719596325769216[0;39m ------------- 开始 -------------
2022-07-14 17:35:18.113 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719596325769216[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202714909656616960 GET
2022-07-14 17:35:18.113 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719596325769216[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:18.113 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719596325769216[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:18.113 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719596325769216[0;39m 请求参数: [202714909656616960]
2022-07-14 17:35:18.147 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719596325769216[0;39m key不存在，放入：DOC_VOTE_202714909656616960_127.0.0.1，过期 86400 秒
2022-07-14 17:35:18.182 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719596325769216[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:18.182 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719596325769216[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:35:18.208 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719596325769216[0;39m <==    Updates: 1
2022-07-14 17:35:18.209 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719596325769216[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:18.209 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719596325769216[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:35:18.211 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719596325769216[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:18.212 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719596325769216[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 5, 1
2022-07-14 17:35:18.213 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719596325769216[0;39m <==      Total: 1
2022-07-14 17:35:18.214 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719596325769216[0;39m 返回结果: {"success":true}
2022-07-14 17:35:18.214 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719596325769216[0;39m ------------- 结束 耗时：102 ms -------------
2022-07-14 17:35:18.215 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719596325769216[0;39m 推送消息：v5MNXFsZyw，内容：【课程导学】被点赞
2022-07-14 17:35:19.133 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719600608153600[0;39m ------------- 开始 -------------
2022-07-14 17:35:19.134 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719600608153600[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715322204164096 GET
2022-07-14 17:35:19.134 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719600608153600[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:19.134 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719600608153600[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:19.135 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719600608153600[0;39m 请求参数: [202715322204164096]
2022-07-14 17:35:19.135 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719600608153600[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:19.135 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719600608153600[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-14 17:35:19.136 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719600608153600[0;39m <==    Columns: id, content
2022-07-14 17:35:19.136 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719600608153600[0;39m <==        Row: 202715322204164096, <<BLOB>>
2022-07-14 17:35:19.136 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719600608153600[0;39m <==      Total: 1
2022-07-14 17:35:19.137 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719600608153600[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:19.137 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719600608153600[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-14 17:35:19.164 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719600608153600[0;39m <==    Updates: 1
2022-07-14 17:35:19.164 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719600608153600[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:19.164 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719600608153600[0;39m ------------- 结束 耗时：31 ms -------------
2022-07-14 17:35:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719604278169600[0;39m 生成今日电子书快照开始
2022-07-14 17:35:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719604278169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719604278169600[0;39m ==> Parameters: 
2022-07-14 17:35:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719604278169600[0;39m <==    Updates: 0
2022-07-14 17:35:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719604278169600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:35:20.272 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719605385465856[0;39m ------------- 开始 -------------
2022-07-14 17:35:20.273 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719605385465856[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715322204164096 GET
2022-07-14 17:35:20.273 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719605385465856[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:20.273 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719605385465856[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:20.273 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719605385465856[0;39m 请求参数: [202715322204164096]
2022-07-14 17:35:20.307 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719605385465856[0;39m key不存在，放入：DOC_VOTE_202715322204164096_127.0.0.1，过期 86400 秒
2022-07-14 17:35:20.342 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719605385465856[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:20.343 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719605385465856[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-14 17:35:20.359 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719605385465856[0;39m <==    Updates: 1
2022-07-14 17:35:20.359 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719605385465856[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:20.360 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719605385465856[0;39m ==> Parameters: 202715322204164096(Long)
2022-07-14 17:35:20.360 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719605385465856[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:20.360 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719605385465856[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-14 17:35:20.361 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719605385465856[0;39m <==      Total: 1
2022-07-14 17:35:20.361 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719605385465856[0;39m 返回结果: {"success":true}
2022-07-14 17:35:20.361 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719605385465856[0;39m ------------- 结束 耗时：89 ms -------------
2022-07-14 17:35:20.361 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719605385465856[0;39m 推送消息：v5MNXFsZyw，内容：【前后端交互融合】被点赞
2022-07-14 17:35:21.056 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719608673800192[0;39m ------------- 开始 -------------
2022-07-14 17:35:21.056 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719608673800192[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715412436226048 GET
2022-07-14 17:35:21.056 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719608673800192[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:21.056 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719608673800192[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:21.056 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719608673800192[0;39m 请求参数: [202715412436226048]
2022-07-14 17:35:21.057 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719608673800192[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:21.057 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719608673800192[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-14 17:35:21.057 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719608673800192[0;39m <==    Columns: id, content
2022-07-14 17:35:21.057 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719608673800192[0;39m <==        Row: 202715412436226048, <<BLOB>>
2022-07-14 17:35:21.058 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719608673800192[0;39m <==      Total: 1
2022-07-14 17:35:21.058 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719608673800192[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:21.058 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719608673800192[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-14 17:35:21.075 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719608673800192[0;39m <==    Updates: 1
2022-07-14 17:35:21.075 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719608673800192[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:21.075 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719608673800192[0;39m ------------- 结束 耗时：19 ms -------------
2022-07-14 17:35:21.765 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719611647561728[0;39m ------------- 开始 -------------
2022-07-14 17:35:21.765 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719611647561728[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715412436226048 GET
2022-07-14 17:35:21.765 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719611647561728[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:21.765 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719611647561728[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:21.765 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719611647561728[0;39m 请求参数: [202715412436226048]
2022-07-14 17:35:21.800 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719611647561728[0;39m key不存在，放入：DOC_VOTE_202715412436226048_127.0.0.1，过期 86400 秒
2022-07-14 17:35:21.833 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719611647561728[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:21.833 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719611647561728[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-14 17:35:21.854 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719611647561728[0;39m <==    Updates: 1
2022-07-14 17:35:21.854 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719611647561728[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:21.855 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719611647561728[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-14 17:35:21.855 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719611647561728[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:21.855 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719611647561728[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 2, 1
2022-07-14 17:35:21.856 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719611647561728[0;39m <==      Total: 1
2022-07-14 17:35:21.856 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719611647561728[0;39m 返回结果: {"success":true}
2022-07-14 17:35:21.856 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719611647561728[0;39m ------------- 结束 耗时：91 ms -------------
2022-07-14 17:35:21.856 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719611647561728[0;39m 推送消息：v5MNXFsZyw，内容：【电子书管理功能开发】被点赞
2022-07-14 17:35:22.607 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719615179165696[0;39m ------------- 开始 -------------
2022-07-14 17:35:22.607 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719615179165696[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715466249146368 GET
2022-07-14 17:35:22.607 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719615179165696[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:22.607 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719615179165696[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:22.607 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719615179165696[0;39m 请求参数: [202715466249146368]
2022-07-14 17:35:22.608 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719615179165696[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:22.608 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719615179165696[0;39m ==> Parameters: 202715466249146368(Long)
2022-07-14 17:35:22.611 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719615179165696[0;39m <==    Columns: id, content
2022-07-14 17:35:22.611 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719615179165696[0;39m <==        Row: 202715466249146368, <<BLOB>>
2022-07-14 17:35:22.612 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719615179165696[0;39m <==      Total: 1
2022-07-14 17:35:22.612 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719615179165696[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:22.612 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719615179165696[0;39m ==> Parameters: 202715466249146368(Long)
2022-07-14 17:35:22.677 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719615179165696[0;39m <==    Updates: 1
2022-07-14 17:35:22.677 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719615179165696[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:22.677 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719615179165696[0;39m ------------- 结束 耗时：70 ms -------------
2022-07-14 17:35:23.382 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719618429751296[0;39m ------------- 开始 -------------
2022-07-14 17:35:23.383 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719618429751296[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715466249146368 GET
2022-07-14 17:35:23.383 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719618429751296[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:23.383 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719618429751296[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:23.383 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719618429751296[0;39m 请求参数: [202715466249146368]
2022-07-14 17:35:23.417 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719618429751296[0;39m key不存在，放入：DOC_VOTE_202715466249146368_127.0.0.1，过期 86400 秒
2022-07-14 17:35:23.450 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719618429751296[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:23.451 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719618429751296[0;39m ==> Parameters: 202715466249146368(Long)
2022-07-14 17:35:23.465 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719618429751296[0;39m <==    Updates: 1
2022-07-14 17:35:23.466 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719618429751296[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:23.466 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719618429751296[0;39m ==> Parameters: 202715466249146368(Long)
2022-07-14 17:35:23.466 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719618429751296[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:23.466 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719618429751296[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-14 17:35:23.467 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719618429751296[0;39m <==      Total: 1
2022-07-14 17:35:23.467 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719618429751296[0;39m 返回结果: {"success":true}
2022-07-14 17:35:23.467 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719618429751296[0;39m ------------- 结束 耗时：85 ms -------------
2022-07-14 17:35:23.467 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719618429751296[0;39m 推送消息：v5MNXFsZyw，内容：【分类管理功能开发】被点赞
2022-07-14 17:35:24.319 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719622359814144[0;39m ------------- 开始 -------------
2022-07-14 17:35:24.319 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719622359814144[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715537334210560 GET
2022-07-14 17:35:24.319 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719622359814144[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:24.319 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719622359814144[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:24.319 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719622359814144[0;39m 请求参数: [202715537334210560]
2022-07-14 17:35:24.320 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719622359814144[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:24.320 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719622359814144[0;39m ==> Parameters: 202715537334210560(Long)
2022-07-14 17:35:24.321 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719622359814144[0;39m <==    Columns: id, content
2022-07-14 17:35:24.321 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719622359814144[0;39m <==        Row: 202715537334210560, <<BLOB>>
2022-07-14 17:35:24.321 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719622359814144[0;39m <==      Total: 1
2022-07-14 17:35:24.321 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719622359814144[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:24.321 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719622359814144[0;39m ==> Parameters: 202715537334210560(Long)
2022-07-14 17:35:24.331 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719622359814144[0;39m <==    Updates: 1
2022-07-14 17:35:24.331 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719622359814144[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:24.331 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719622359814144[0;39m ------------- 结束 耗时：12 ms -------------
2022-07-14 17:35:24.960 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719625048363008[0;39m ------------- 开始 -------------
2022-07-14 17:35:24.960 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719625048363008[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715537334210560 GET
2022-07-14 17:35:24.960 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719625048363008[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:24.960 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719625048363008[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:24.960 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719625048363008[0;39m 请求参数: [202715537334210560]
2022-07-14 17:35:24.994 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719625048363008[0;39m key不存在，放入：DOC_VOTE_202715537334210560_127.0.0.1，过期 86400 秒
2022-07-14 17:35:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719625270661120[0;39m 生成今日电子书快照开始
2022-07-14 17:35:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719625270661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719625270661120[0;39m ==> Parameters: 
2022-07-14 17:35:25.027 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719625270661120[0;39m <==    Updates: 0
2022-07-14 17:35:25.027 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719625270661120[0;39m 生成今日电子书快照结束，耗时：14 毫秒
2022-07-14 17:35:25.028 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719625048363008[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:25.029 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719625048363008[0;39m ==> Parameters: 202715537334210560(Long)
2022-07-14 17:35:25.049 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719625048363008[0;39m <==    Updates: 1
2022-07-14 17:35:25.049 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719625048363008[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:25.049 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719625048363008[0;39m ==> Parameters: 202715537334210560(Long)
2022-07-14 17:35:25.050 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719625048363008[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:25.050 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719625048363008[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-14 17:35:25.050 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719625048363008[0;39m <==      Total: 1
2022-07-14 17:35:25.051 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719625048363008[0;39m 返回结果: {"success":true}
2022-07-14 17:35:25.051 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719625048363008[0;39m ------------- 结束 耗时：91 ms -------------
2022-07-14 17:35:25.051 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719625048363008[0;39m 推送消息：v5MNXFsZyw，内容：【文档管理功能开发】被点赞
2022-07-14 17:35:25.869 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719628860985344[0;39m ------------- 开始 -------------
2022-07-14 17:35:25.869 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719628860985344[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715583089872896 GET
2022-07-14 17:35:25.869 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719628860985344[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:25.870 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719628860985344[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:25.870 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719628860985344[0;39m 请求参数: [202715583089872896]
2022-07-14 17:35:25.870 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719628860985344[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:25.871 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719628860985344[0;39m ==> Parameters: 202715583089872896(Long)
2022-07-14 17:35:25.872 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719628860985344[0;39m <==    Columns: id, content
2022-07-14 17:35:25.872 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719628860985344[0;39m <==        Row: 202715583089872896, <<BLOB>>
2022-07-14 17:35:25.872 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719628860985344[0;39m <==      Total: 1
2022-07-14 17:35:25.873 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719628860985344[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:25.873 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719628860985344[0;39m ==> Parameters: 202715583089872896(Long)
2022-07-14 17:35:25.895 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719628860985344[0;39m <==    Updates: 1
2022-07-14 17:35:25.895 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719628860985344[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:25.896 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719628860985344[0;39m ------------- 结束 耗时：27 ms -------------
2022-07-14 17:35:26.568 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719631792803840[0;39m ------------- 开始 -------------
2022-07-14 17:35:26.568 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719631792803840[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715583089872896 GET
2022-07-14 17:35:26.569 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719631792803840[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:26.569 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719631792803840[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:26.569 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719631792803840[0;39m 请求参数: [202715583089872896]
2022-07-14 17:35:26.602 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719631792803840[0;39m key不存在，放入：DOC_VOTE_202715583089872896_127.0.0.1，过期 86400 秒
2022-07-14 17:35:26.637 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719631792803840[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:26.638 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719631792803840[0;39m ==> Parameters: 202715583089872896(Long)
2022-07-14 17:35:26.661 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719631792803840[0;39m <==    Updates: 1
2022-07-14 17:35:26.661 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719631792803840[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:26.661 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719631792803840[0;39m ==> Parameters: 202715583089872896(Long)
2022-07-14 17:35:26.661 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719631792803840[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:26.663 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719631792803840[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-14 17:35:26.663 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719631792803840[0;39m <==      Total: 1
2022-07-14 17:35:26.663 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719631792803840[0;39m 返回结果: {"success":true}
2022-07-14 17:35:26.663 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719631792803840[0;39m ------------- 结束 耗时：95 ms -------------
2022-07-14 17:35:26.663 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719631792803840[0;39m 推送消息：v5MNXFsZyw，内容：【用户管理功能开发】被点赞
2022-07-14 17:35:27.541 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719635873861632[0;39m ------------- 开始 -------------
2022-07-14 17:35:27.541 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719635873861632[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715650781745152 GET
2022-07-14 17:35:27.542 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719635873861632[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:27.542 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719635873861632[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:27.543 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719635873861632[0;39m 请求参数: [202715650781745152]
2022-07-14 17:35:27.543 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719635873861632[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:27.543 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719635873861632[0;39m ==> Parameters: 202715650781745152(Long)
2022-07-14 17:35:27.544 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719635873861632[0;39m <==    Columns: id, content
2022-07-14 17:35:27.544 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719635873861632[0;39m <==        Row: 202715650781745152, <<BLOB>>
2022-07-14 17:35:27.545 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719635873861632[0;39m <==      Total: 1
2022-07-14 17:35:27.545 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719635873861632[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:27.545 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719635873861632[0;39m ==> Parameters: 202715650781745152(Long)
2022-07-14 17:35:27.563 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719635873861632[0;39m <==    Updates: 1
2022-07-14 17:35:27.564 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719635873861632[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:27.564 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719635873861632[0;39m ------------- 结束 耗时：23 ms -------------
2022-07-14 17:35:28.232 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719638772125696[0;39m ------------- 开始 -------------
2022-07-14 17:35:28.233 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719638772125696[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715650781745152 GET
2022-07-14 17:35:28.233 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719638772125696[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:28.233 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719638772125696[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:28.233 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719638772125696[0;39m 请求参数: [202715650781745152]
2022-07-14 17:35:28.266 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719638772125696[0;39m key不存在，放入：DOC_VOTE_202715650781745152_127.0.0.1，过期 86400 秒
2022-07-14 17:35:28.299 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719638772125696[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:28.300 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719638772125696[0;39m ==> Parameters: 202715650781745152(Long)
2022-07-14 17:35:28.316 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719638772125696[0;39m <==    Updates: 1
2022-07-14 17:35:28.316 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719638772125696[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:28.317 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719638772125696[0;39m ==> Parameters: 202715650781745152(Long)
2022-07-14 17:35:28.317 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719638772125696[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:28.317 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719638772125696[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-14 17:35:28.318 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719638772125696[0;39m <==      Total: 1
2022-07-14 17:35:28.318 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719638772125696[0;39m 返回结果: {"success":true}
2022-07-14 17:35:28.318 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719638772125696[0;39m ------------- 结束 耗时：86 ms -------------
2022-07-14 17:35:28.318 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719638772125696[0;39m 推送消息：v5MNXFsZyw，内容：【阅读量&点赞量】被点赞
2022-07-14 17:35:29.065 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719642265980928[0;39m ------------- 开始 -------------
2022-07-14 17:35:29.065 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719642265980928[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715693119049728 GET
2022-07-14 17:35:29.065 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719642265980928[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:29.065 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719642265980928[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:29.066 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719642265980928[0;39m 请求参数: [202715693119049728]
2022-07-14 17:35:29.066 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719642265980928[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:29.066 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719642265980928[0;39m ==> Parameters: 202715693119049728(Long)
2022-07-14 17:35:29.067 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719642265980928[0;39m <==    Columns: id, content
2022-07-14 17:35:29.067 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719642265980928[0;39m <==        Row: 202715693119049728, <<BLOB>>
2022-07-14 17:35:29.067 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719642265980928[0;39m <==      Total: 1
2022-07-14 17:35:29.067 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719642265980928[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:29.068 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719642265980928[0;39m ==> Parameters: 202715693119049728(Long)
2022-07-14 17:35:29.085 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719642265980928[0;39m <==    Updates: 1
2022-07-14 17:35:29.086 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719642265980928[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:29.086 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719642265980928[0;39m ------------- 结束 耗时：21 ms -------------
2022-07-14 17:35:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719646225403904[0;39m 生成今日电子书快照开始
2022-07-14 17:35:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719646225403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719646225403904[0;39m ==> Parameters: 
2022-07-14 17:35:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719646225403904[0;39m <==    Updates: 0
2022-07-14 17:35:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719646225403904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:35:30.014 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719646246375424[0;39m ------------- 开始 -------------
2022-07-14 17:35:30.014 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719646246375424[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715693119049728 GET
2022-07-14 17:35:30.014 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719646246375424[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:30.014 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719646246375424[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:30.014 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719646246375424[0;39m 请求参数: [202715693119049728]
2022-07-14 17:35:30.048 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719646246375424[0;39m key不存在，放入：DOC_VOTE_202715693119049728_127.0.0.1，过期 86400 秒
2022-07-14 17:35:30.083 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719646246375424[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:30.083 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719646246375424[0;39m ==> Parameters: 202715693119049728(Long)
2022-07-14 17:35:30.107 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719646246375424[0;39m <==    Updates: 1
2022-07-14 17:35:30.108 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719646246375424[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:30.108 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719646246375424[0;39m ==> Parameters: 202715693119049728(Long)
2022-07-14 17:35:30.108 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719646246375424[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:30.109 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719646246375424[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-14 17:35:30.109 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719646246375424[0;39m <==      Total: 1
2022-07-14 17:35:30.109 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719646246375424[0;39m 返回结果: {"success":true}
2022-07-14 17:35:30.109 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719646246375424[0;39m 推送消息：v5MNXFsZyw，内容：【知识库功能开发】被点赞
2022-07-14 17:35:30.109 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719646246375424[0;39m ------------- 结束 耗时：95 ms -------------
2022-07-14 17:35:30.999 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719650377764864[0;39m ------------- 开始 -------------
2022-07-14 17:35:30.999 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719650377764864[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715863143550976 GET
2022-07-14 17:35:30.999 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719650377764864[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:30.999 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719650377764864[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:30.999 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719650377764864[0;39m 请求参数: [202715863143550976]
2022-07-14 17:35:31.000 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719650377764864[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:31.000 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719650377764864[0;39m ==> Parameters: 202715863143550976(Long)
2022-07-14 17:35:31.000 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719650377764864[0;39m <==    Columns: id, content
2022-07-14 17:35:31.001 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719650377764864[0;39m <==        Row: 202715863143550976, <<BLOB>>
2022-07-14 17:35:31.001 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719650377764864[0;39m <==      Total: 1
2022-07-14 17:35:31.001 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719650377764864[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:31.001 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719650377764864[0;39m ==> Parameters: 202715863143550976(Long)
2022-07-14 17:35:31.021 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719650377764864[0;39m <==    Updates: 1
2022-07-14 17:35:31.022 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719650377764864[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:31.022 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719650377764864[0;39m ------------- 结束 耗时：23 ms -------------
2022-07-14 17:35:31.722 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719653410246656[0;39m ------------- 开始 -------------
2022-07-14 17:35:31.722 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719653410246656[0;39m 请求地址: http://127.0.0.1:8880/doc/vote/202715863143550976 GET
2022-07-14 17:35:31.722 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719653410246656[0;39m 类名方法: com.zs.wikibb.controller.DocController.vote
2022-07-14 17:35:31.722 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719653410246656[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:31.723 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719653410246656[0;39m 请求参数: [202715863143550976]
2022-07-14 17:35:31.756 INFO  com.zs.wikibb.utils.RedisUtil                     :31  
                [32m202719653410246656[0;39m key不存在，放入：DOC_VOTE_202715863143550976_127.0.0.1，过期 86400 秒
2022-07-14 17:35:31.792 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719653410246656[0;39m ==>  Preparing: update doc set vote_count=vote_count+1 where id=?
2022-07-14 17:35:31.792 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719653410246656[0;39m ==> Parameters: 202715863143550976(Long)
2022-07-14 17:35:31.813 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseVoteCount:137 
                [32m202719653410246656[0;39m <==    Updates: 1
2022-07-14 17:35:31.813 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719653410246656[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc where id = ?
2022-07-14 17:35:31.814 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719653410246656[0;39m ==> Parameters: 202715863143550976(Long)
2022-07-14 17:35:31.814 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719653410246656[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:31.814 TRACE com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :143 
                [32m202719653410246656[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-14 17:35:31.815 DEBUG com.zs.wikibb.mapper.DocMapper.selectByPrimaryKey :137 
                [32m202719653410246656[0;39m <==      Total: 1
2022-07-14 17:35:31.815 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719653410246656[0;39m 返回结果: {"success":true}
2022-07-14 17:35:31.815 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719653410246656[0;39m ------------- 结束 耗时：93 ms -------------
2022-07-14 17:35:31.815 INFO  com.zs.wikibb.websocket.WebSocketServer           :71  
                [32m202719653410246656[0;39m 推送消息：v5MNXFsZyw，内容：【项目部署发布】被点赞
2022-07-14 17:35:33.553 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202719631792803840[0;39m 连接关闭，token：v5MNXFsZyw，session id：21！当前连接数：0
2022-07-14 17:35:34.199 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202719635873861632[0;39m 有新连接：token：eTbd6hUDa4，session id：22，当前连接数：1
2022-07-14 17:35:34.236 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719663954726912[0;39m ------------- 开始 -------------
2022-07-14 17:35:34.236 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719663954726912[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:35:34.236 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719663954726912[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:35:34.236 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719663954726912[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:34.236 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719663954726912[0;39m 请求参数: [202714600712572928]
2022-07-14 17:35:34.237 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719663954726912[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:35:34.237 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719663954726912[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:35:34.238 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:34.239 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 5, 1
2022-07-14 17:35:34.239 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 4, 1
2022-07-14 17:35:34.240 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 4, 1
2022-07-14 17:35:34.241 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 4, 1
2022-07-14 17:35:34.241 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-14 17:35:34.241 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 2, 1
2022-07-14 17:35:34.241 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-14 17:35:34.241 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-14 17:35:34.242 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-14 17:35:34.242 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-14 17:35:34.242 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-14 17:35:34.242 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719663954726912[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-14 17:35:34.242 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719663954726912[0;39m <==      Total: 12
2022-07-14 17:35:34.243 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719663954726912[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":5,"voteCount":1},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":4,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":4,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-14 17:35:34.243 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719663954726912[0;39m ------------- 结束 耗时：7 ms -------------
2022-07-14 17:35:34.281 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719664143470592[0;39m ------------- 开始 -------------
2022-07-14 17:35:34.282 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719664143470592[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-14 17:35:34.282 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719664143470592[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:34.282 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719664143470592[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:34.282 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719664143470592[0;39m 请求参数: [202714909656616960]
2022-07-14 17:35:34.283 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719664143470592[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:34.283 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719664143470592[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:35:34.284 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719664143470592[0;39m <==    Columns: id, content
2022-07-14 17:35:34.285 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719664143470592[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-14 17:35:34.285 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719664143470592[0;39m <==      Total: 1
2022-07-14 17:35:34.286 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719664143470592[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:34.286 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719664143470592[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:35:34.331 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719664143470592[0;39m <==    Updates: 1
2022-07-14 17:35:34.331 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719664143470592[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:34.332 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719664143470592[0;39m ------------- 结束 耗时：51 ms -------------
2022-07-14 17:35:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202719667188535296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:35:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719667188535296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:35:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719667188535296[0;39m ==> Parameters: 
2022-07-14 17:35:35.028 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719667188535296[0;39m <==    Updates: 7
2022-07-14 17:35:35.029 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202719667188535296[0;39m 更新电子书下的文档数据结束，耗时：22 毫秒
2022-07-14 17:35:35.029 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719667280809984[0;39m 生成今日电子书快照开始
2022-07-14 17:35:35.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719667280809984[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:35.029 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719667280809984[0;39m ==> Parameters: 
2022-07-14 17:35:35.061 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719667280809984[0;39m <==    Updates: 0
2022-07-14 17:35:35.061 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719667280809984[0;39m 生成今日电子书快照结束，耗时：32 毫秒
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719670481063937[0;39m ------------- 开始 -------------
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719670481063936[0;39m ------------- 开始 -------------
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719670485258240[0;39m ------------- 开始 -------------
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719670481063937[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719670481063936[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719670485258240[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719670481063937[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719670481063936[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719670485258240[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719670481063937[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719670481063936[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:35.793 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719670485258240[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:35.794 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719670481063937[0;39m 请求参数: []
2022-07-14 17:35:35.794 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719670481063936[0;39m 请求参数: []
2022-07-14 17:35:35.794 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719670485258240[0;39m 请求参数: []
2022-07-14 17:35:35.794 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719670481063937[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:35:35.794 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719670481063936[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:35:35.794 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719670485258240[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:35:35.794 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719670481063937[0;39m ==> Parameters: 
2022-07-14 17:35:35.794 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719670481063936[0;39m ==> Parameters: 
2022-07-14 17:35:35.794 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719670485258240[0;39m ==> Parameters: 
2022-07-14 17:35:35.795 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719670481063936[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:35:35.795 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719670481063937[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:35:35.796 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719670481063937[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:35:35.796 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719670481063936[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:35:35.796 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:35:35.796 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:35:35.796 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719670481063937[0;39m <==        Row: 2022-07-14, 147, 37, 42, 13
2022-07-14 17:35:35.796 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719670481063936[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:35:35.796 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:35:35.796 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719670481063937[0;39m <==      Total: 2
2022-07-14 17:35:35.796 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719670481063936[0;39m <==      Total: 2
2022-07-14 17:35:35.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:35:35.797 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719670481063936[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:35:35.797 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719670481063937[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":147,"viewIncrease":42,"voteCount":37,"voteIncrease":13}],"success":true}
2022-07-14 17:35:35.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:35:35.797 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719670481063936[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:35:35.797 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719670481063937[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:35:35.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:35:35.797 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:35:35.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:35:35.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:35:35.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:35:35.798 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:35:35.799 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:35:35.799 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:35:35.799 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:35:35.800 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:35:35.800 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:35:35.800 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719670485258240[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:35:35.800 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719670485258240[0;39m <==      Total: 16
2022-07-14 17:35:35.801 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719670485258240[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:35:35.801 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719670485258240[0;39m ------------- 结束 耗时：8 ms -------------
2022-07-14 17:35:37.730 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m202719650377764864[0;39m 连接关闭，token：eTbd6hUDa4，session id：22！当前连接数：0
2022-07-14 17:35:38.149 INFO  com.zs.wikibb.websocket.WebSocketServer           :32  
                [32m202719628860985344[0;39m 有新连接：token：eEJfcnFdNq，session id：23，当前连接数：1
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719680610308096[0;39m ------------- 开始 -------------
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719680610308097[0;39m ------------- 开始 -------------
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719680610308096[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-30-statistic GET
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719680610308097[0;39m 请求地址: http://127.0.0.1:8880/ebook-snapshot/get-statistic GET
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719680610308098[0;39m ------------- 开始 -------------
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719680610308096[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.get30Statistic
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719680610308097[0;39m 类名方法: com.zs.wikibb.controller.EbookSnapshotController.getStatistic
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719680610308098[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719680610308096[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719680610308097[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719680610308098[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719680610308096[0;39m 请求参数: []
2022-07-14 17:35:38.207 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719680610308097[0;39m 请求参数: []
2022-07-14 17:35:38.208 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719680610308098[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:38.208 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719680610308098[0;39m 请求参数: []
2022-07-14 17:35:38.208 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719680610308097[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_count) as viewCount, sum(t1.vote_count) as voteCount, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` >= date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:35:38.208 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719680610308096[0;39m ==>  Preparing: select t1.`date` as `date`, sum(t1.view_increase) as viewIncrease, sum(t1.vote_increase) as voteIncrease from ebook_snapshot t1 where t1.`date` between date_sub(curdate(), interval 30 day) and date_sub(curdate(), interval 1 day) group by t1.`date` order by t1.`date` asc;
2022-07-14 17:35:38.208 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719680610308096[0;39m ==> Parameters: 
2022-07-14 17:35:38.208 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719680610308098[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:35:38.208 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719680610308097[0;39m ==> Parameters: 
2022-07-14 17:35:38.208 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719680610308098[0;39m ==> Parameters: 
2022-07-14 17:35:38.209 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719680610308096[0;39m <==    Columns: date, viewIncrease, voteIncrease
2022-07-14 17:35:38.209 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719680610308097[0;39m <==    Columns: date, viewCount, voteCount, viewIncrease, voteIncrease
2022-07-14 17:35:38.209 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:35:38.209 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:35:38.209 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719680610308096[0;39m <==        Row: 2022-07-11, 96, 21
2022-07-14 17:35:38.209 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719680610308097[0;39m <==        Row: 2022-07-13, 105, 24, 12, 6
2022-07-14 17:35:38.209 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:35:38.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:35:38.210 TRACE c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :143 
                [32m202719680610308096[0;39m <==        Row: 2022-07-13, 12, 6
2022-07-14 17:35:38.210 TRACE c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :143 
                [32m202719680610308097[0;39m <==        Row: 2022-07-14, 147, 37, 42, 13
2022-07-14 17:35:38.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:35:38.210 DEBUG c.z.w.m.EbookSnapshotMapperCust.get30Statistic    :137 
                [32m202719680610308096[0;39m <==      Total: 2
2022-07-14 17:35:38.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:35:38.210 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.getStatistic :137 
                [32m202719680610308097[0;39m <==      Total: 2
2022-07-14 17:35:38.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:35:38.210 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719680610308096[0;39m 返回结果: {"content":[{"date":1657468800000,"viewCount":0,"viewIncrease":96,"voteCount":0,"voteIncrease":21},{"date":1657641600000,"viewCount":0,"viewIncrease":12,"voteCount":0,"voteIncrease":6}],"success":true}
2022-07-14 17:35:38.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:35:38.210 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719680610308097[0;39m 返回结果: {"content":[{"date":1657641600000,"viewCount":105,"viewIncrease":12,"voteCount":24,"voteIncrease":6},{"date":1657728000000,"viewCount":147,"viewIncrease":42,"voteCount":37,"voteIncrease":13}],"success":true}
2022-07-14 17:35:38.210 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719680610308096[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:35:38.210 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:35:38.210 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719680610308097[0;39m ------------- 结束 耗时：3 ms -------------
2022-07-14 17:35:38.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:35:38.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:35:38.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:35:38.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:35:38.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:35:38.211 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:35:38.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:35:38.212 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202719680610308098[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:35:38.212 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202719680610308098[0;39m <==      Total: 16
2022-07-14 17:35:38.213 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719680610308098[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:35:38.213 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719680610308098[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:35:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719688155860992[0;39m 生成今日电子书快照开始
2022-07-14 17:35:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719688155860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719688155860992[0;39m ==> Parameters: 
2022-07-14 17:35:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719688155860992[0;39m <==    Updates: 0
2022-07-14 17:35:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719688155860992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:35:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719709118992384[0;39m 生成今日电子书快照开始
2022-07-14 17:35:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719709118992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719709118992384[0;39m ==> Parameters: 
2022-07-14 17:35:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719709118992384[0;39m <==    Updates: 0
2022-07-14 17:35:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719709118992384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:35:47.970 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719721559298048[0;39m ------------- 开始 -------------
2022-07-14 17:35:47.970 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719721559298048[0;39m 请求地址: http://127.0.0.1:8880/ebook/list GET
2022-07-14 17:35:47.970 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719721559298048[0;39m 类名方法: com.zs.wikibb.controller.EbookController.list
2022-07-14 17:35:47.970 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719721559298048[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:47.971 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719721559298048[0;39m 请求参数: [{"categoryId2":181311914796781568,"page":1,"size":1000}]
2022-07-14 17:35:47.972 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719721559298048[0;39m ==>  Preparing: SELECT count(0) FROM ebook WHERE (category2_id = ?)
2022-07-14 17:35:47.972 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719721559298048[0;39m ==> Parameters: 181311914796781568(Long)
2022-07-14 17:35:47.973 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202719721559298048[0;39m <==    Columns: count(0)
2022-07-14 17:35:47.973 TRACE c.z.w.mapper.EbookMapper.selectByExample_COUNT    :143 
                [32m202719721559298048[0;39m <==        Row: 1
2022-07-14 17:35:47.973 DEBUG c.z.w.mapper.EbookMapper.selectByExample_COUNT    :137 
                [32m202719721559298048[0;39m <==      Total: 1
2022-07-14 17:35:47.973 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719721559298048[0;39m ==>  Preparing: select id, `name`, category1_id, category2_id, description, cover, doc_count, view_count, vote_count from ebook WHERE ( category2_id = ? ) LIMIT ?
2022-07-14 17:35:47.974 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719721559298048[0;39m ==> Parameters: 181311914796781568(Long), 1000(Integer)
2022-07-14 17:35:47.974 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202719721559298048[0;39m <==    Columns: id, name, category1_id, category2_id, description, cover, doc_count, view_count, vote_count
2022-07-14 17:35:47.974 TRACE com.zs.wikibb.mapper.EbookMapper.selectByExample  :143 
                [32m202719721559298048[0;39m <==        Row: 202714600712572928, Wiki个人知识库, 200, 181311914796781568, 本文档讲述了知识库的开发过程以及遇到的问题！, /image/cover2.png, 12, 34, 12
2022-07-14 17:35:47.975 DEBUG com.zs.wikibb.mapper.EbookMapper.selectByExample  :137 
                [32m202719721559298048[0;39m <==      Total: 1
2022-07-14 17:35:47.975 INFO  com.zs.wikibb.service.EbookService                :44  
                [32m202719721559298048[0;39m 总行数：1
2022-07-14 17:35:47.975 INFO  com.zs.wikibb.service.EbookService                :45  
                [32m202719721559298048[0;39m 总页数：1
2022-07-14 17:35:47.975 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719721559298048[0;39m 返回结果: {"content":{"list":[{"category1Id":200,"category2Id":181311914796781568,"cover":"/image/cover2.png","description":"本文档讲述了知识库的开发过程以及遇到的问题！","docCount":12,"id":202714600712572928,"name":"Wiki个人知识库","viewCount":34,"voteCount":12}],"total":1},"success":true}
2022-07-14 17:35:47.975 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719721559298048[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:35:49.163 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719726563102720[0;39m ------------- 开始 -------------
2022-07-14 17:35:49.163 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719726563102720[0;39m 请求地址: http://127.0.0.1:8880/doc/all/202714600712572928 GET
2022-07-14 17:35:49.163 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719726563102720[0;39m 类名方法: com.zs.wikibb.controller.DocController.all
2022-07-14 17:35:49.163 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719726563102720[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:49.164 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719726563102720[0;39m 请求参数: [202714600712572928]
2022-07-14 17:35:49.164 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719726563102720[0;39m ==>  Preparing: select id, ebook_id, parent, `name`, sort, view_count, vote_count from doc WHERE ( ebook_id = ? ) order by sort asc
2022-07-14 17:35:49.165 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719726563102720[0;39m ==> Parameters: 202714600712572928(Long)
2022-07-14 17:35:49.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==    Columns: id, ebook_id, parent, name, sort, view_count, vote_count
2022-07-14 17:35:49.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202714909656616960, 202714600712572928, 0, 课程导学, 1, 6, 1
2022-07-14 17:35:49.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715069841281024, 202714600712572928, 0, Spring Boot项目搭建, 2, 4, 1
2022-07-14 17:35:49.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715172312322048, 202714600712572928, 0, 后端架构完善与接口开发, 3, 4, 1
2022-07-14 17:35:49.166 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715279778779136, 202714600712572928, 0, Vue 3+ Vue CLI 项目搭建, 4, 4, 1
2022-07-14 17:35:49.167 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715322204164096, 202714600712572928, 0, 前后端交互融合, 5, 2, 1
2022-07-14 17:35:49.167 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715412436226048, 202714600712572928, 0, 电子书管理功能开发, 6, 2, 1
2022-07-14 17:35:49.167 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715466249146368, 202714600712572928, 0, 分类管理功能开发, 7, 2, 1
2022-07-14 17:35:49.167 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715537334210560, 202714600712572928, 0, 文档管理功能开发, 8, 2, 1
2022-07-14 17:35:49.167 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715583089872896, 202714600712572928, 0, 用户管理功能开发, 9, 2, 1
2022-07-14 17:35:49.167 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715650781745152, 202714600712572928, 0, 阅读量&点赞量, 10, 2, 1
2022-07-14 17:35:49.168 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715693119049728, 202714600712572928, 0, 知识库功能开发, 11, 2, 1
2022-07-14 17:35:49.168 TRACE com.zs.wikibb.mapper.DocMapper.selectByExample    :143 
                [32m202719726563102720[0;39m <==        Row: 202715863143550976, 202714600712572928, 0, 项目部署发布, 12, 2, 1
2022-07-14 17:35:49.168 DEBUG com.zs.wikibb.mapper.DocMapper.selectByExample    :137 
                [32m202719726563102720[0;39m <==      Total: 12
2022-07-14 17:35:49.169 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719726563102720[0;39m 返回结果: {"content":[{"ebookId":202714600712572928,"id":202714909656616960,"name":"课程导学","parent":0,"sort":1,"viewCount":6,"voteCount":1},{"ebookId":202714600712572928,"id":202715069841281024,"name":"Spring Boot项目搭建","parent":0,"sort":2,"viewCount":4,"voteCount":1},{"ebookId":202714600712572928,"id":202715172312322048,"name":"后端架构完善与接口开发","parent":0,"sort":3,"viewCount":4,"voteCount":1},{"ebookId":202714600712572928,"id":202715279778779136,"name":"Vue 3+ Vue CLI 项目搭建","parent":0,"sort":4,"viewCount":4,"voteCount":1},{"ebookId":202714600712572928,"id":202715322204164096,"name":"前后端交互融合","parent":0,"sort":5,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715412436226048,"name":"电子书管理功能开发","parent":0,"sort":6,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715466249146368,"name":"分类管理功能开发","parent":0,"sort":7,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715537334210560,"name":"文档管理功能开发","parent":0,"sort":8,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715583089872896,"name":"用户管理功能开发","parent":0,"sort":9,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715650781745152,"name":"阅读量&点赞量","parent":0,"sort":10,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715693119049728,"name":"知识库功能开发","parent":0,"sort":11,"viewCount":2,"voteCount":1},{"ebookId":202714600712572928,"id":202715863143550976,"name":"项目部署发布","parent":0,"sort":12,"viewCount":2,"voteCount":1}],"success":true}
2022-07-14 17:35:49.169 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719726563102720[0;39m ------------- 结束 耗时：6 ms -------------
2022-07-14 17:35:49.186 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202719726659571712[0;39m ------------- 开始 -------------
2022-07-14 17:35:49.186 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202719726659571712[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202714909656616960 GET
2022-07-14 17:35:49.187 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202719726659571712[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:35:49.187 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202719726659571712[0;39m 远程地址: 127.0.0.1
2022-07-14 17:35:49.187 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202719726659571712[0;39m 请求参数: [202714909656616960]
2022-07-14 17:35:49.187 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719726659571712[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:35:49.187 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719726659571712[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:35:49.188 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719726659571712[0;39m <==    Columns: id, content
2022-07-14 17:35:49.188 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202719726659571712[0;39m <==        Row: 202714909656616960, <<BLOB>>
2022-07-14 17:35:49.188 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202719726659571712[0;39m <==      Total: 1
2022-07-14 17:35:49.188 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719726659571712[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:35:49.189 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719726659571712[0;39m ==> Parameters: 202714909656616960(Long)
2022-07-14 17:35:49.294 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202719726659571712[0;39m <==    Updates: 1
2022-07-14 17:35:49.294 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202719726659571712[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:35:49.294 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202719726659571712[0;39m ------------- 结束 耗时：108 ms -------------
2022-07-14 17:35:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719730136649728[0;39m 生成今日电子书快照开始
2022-07-14 17:35:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719730136649728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719730136649728[0;39m ==> Parameters: 
2022-07-14 17:35:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719730136649728[0;39m <==    Updates: 0
2022-07-14 17:35:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719730136649728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:35:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719751091392512[0;39m 生成今日电子书快照开始
2022-07-14 17:35:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719751091392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:35:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719751091392512[0;39m ==> Parameters: 
2022-07-14 17:35:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719751091392512[0;39m <==    Updates: 0
2022-07-14 17:35:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719751091392512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:36:00.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719772079689728[0;39m 生成今日电子书快照开始
2022-07-14 17:36:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719772079689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719772079689728[0;39m ==> Parameters: 
2022-07-14 17:36:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719772079689728[0;39m <==    Updates: 0
2022-07-14 17:36:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719772079689728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:36:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202719793009266688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:36:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719793009266688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:36:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719793009266688[0;39m ==> Parameters: 
2022-07-14 17:36:05.044 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719793009266688[0;39m <==    Updates: 7
2022-07-14 17:36:05.044 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202719793009266688[0;39m 更新电子书下的文档数据结束，耗时：39 毫秒
2022-07-14 17:36:05.044 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719793172844544[0;39m 生成今日电子书快照开始
2022-07-14 17:36:05.045 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719793172844544[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:05.045 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719793172844544[0;39m ==> Parameters: 
2022-07-14 17:36:05.072 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719793172844544[0;39m <==    Updates: 0
2022-07-14 17:36:05.072 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719793172844544[0;39m 生成今日电子书快照结束，耗时：27 毫秒
2022-07-14 17:36:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719813993369600[0;39m 生成今日电子书快照开始
2022-07-14 17:36:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719813993369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719813993369600[0;39m ==> Parameters: 
2022-07-14 17:36:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719813993369600[0;39m <==    Updates: 0
2022-07-14 17:36:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719813993369600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:36:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719834952306688[0;39m 生成今日电子书快照开始
2022-07-14 17:36:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719834952306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719834952306688[0;39m ==> Parameters: 
2022-07-14 17:36:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719834952306688[0;39m <==    Updates: 0
2022-07-14 17:36:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719834952306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:36:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719855932215296[0;39m 生成今日电子书快照开始
2022-07-14 17:36:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719855932215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719855932215296[0;39m ==> Parameters: 
2022-07-14 17:36:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719855932215296[0;39m <==    Updates: 0
2022-07-14 17:36:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719855932215296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:36:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719876916318208[0;39m 生成今日电子书快照开始
2022-07-14 17:36:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719876916318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:25.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719876916318208[0;39m ==> Parameters: 
2022-07-14 17:36:25.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719876916318208[0;39m <==    Updates: 0
2022-07-14 17:36:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719876916318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:36:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719897887838208[0;39m 生成今日电子书快照开始
2022-07-14 17:36:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719897887838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719897887838208[0;39m ==> Parameters: 
2022-07-14 17:36:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719897887838208[0;39m <==    Updates: 0
2022-07-14 17:36:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719897887838208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:36:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719918859358208[0;39m 生成今日电子书快照开始
2022-07-14 17:36:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719918859358208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719918859358208[0;39m ==> Parameters: 
2022-07-14 17:36:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719918859358208[0;39m <==    Updates: 0
2022-07-14 17:36:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719918859358208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:36:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202719918871941120[0;39m 更新电子书下的文档数据开始
2022-07-14 17:36:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719918871941120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:36:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719918871941120[0;39m ==> Parameters: 
2022-07-14 17:36:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202719918871941120[0;39m <==    Updates: 7
2022-07-14 17:36:35.014 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202719918871941120[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:36:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719939797323776[0;39m 生成今日电子书快照开始
2022-07-14 17:36:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719939797323776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719939797323776[0;39m ==> Parameters: 
2022-07-14 17:36:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719939797323776[0;39m <==    Updates: 0
2022-07-14 17:36:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719939797323776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:36:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719960827564032[0;39m 生成今日电子书快照开始
2022-07-14 17:36:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719960827564032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719960827564032[0;39m ==> Parameters: 
2022-07-14 17:36:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719960827564032[0;39m <==    Updates: 0
2022-07-14 17:36:45.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719960827564032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:36:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202719981740363776[0;39m 生成今日电子书快照开始
2022-07-14 17:36:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719981740363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719981740363776[0;39m ==> Parameters: 
2022-07-14 17:36:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202719981740363776[0;39m <==    Updates: 0
2022-07-14 17:36:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202719981740363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:36:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720002724466688[0;39m 生成今日电子书快照开始
2022-07-14 17:36:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720002724466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:36:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720002724466688[0;39m ==> Parameters: 
2022-07-14 17:36:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720002724466688[0;39m <==    Updates: 0
2022-07-14 17:36:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720002724466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:37:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720023700180992[0;39m 生成今日电子书快照开始
2022-07-14 17:37:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720023700180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720023700180992[0;39m ==> Parameters: 
2022-07-14 17:37:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720023700180992[0;39m <==    Updates: 0
2022-07-14 17:37:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720023700180992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:37:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202720044675895296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:37:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720044675895296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:37:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720044675895296[0;39m ==> Parameters: 
2022-07-14 17:37:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720044675895296[0;39m <==    Updates: 7
2022-07-14 17:37:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202720044675895296[0;39m 更新电子书下的文档数据结束，耗时：5 毫秒
2022-07-14 17:37:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720044701061120[0;39m 生成今日电子书快照开始
2022-07-14 17:37:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720044701061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:05.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720044701061120[0;39m ==> Parameters: 
2022-07-14 17:37:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720044701061120[0;39m <==    Updates: 0
2022-07-14 17:37:05.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720044701061120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:37:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720065639026688[0;39m 生成今日电子书快照开始
2022-07-14 17:37:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720065639026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720065639026688[0;39m ==> Parameters: 
2022-07-14 17:37:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720065639026688[0;39m <==    Updates: 0
2022-07-14 17:37:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720065639026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:37:15.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720086606352384[0;39m 生成今日电子书快照开始
2022-07-14 17:37:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720086606352384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720086606352384[0;39m ==> Parameters: 
2022-07-14 17:37:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720086606352384[0;39m <==    Updates: 0
2022-07-14 17:37:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720086606352384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:37:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720107628204032[0;39m 生成今日电子书快照开始
2022-07-14 17:37:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720107628204032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:20.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720107628204032[0;39m ==> Parameters: 
2022-07-14 17:37:20.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720107628204032[0;39m <==    Updates: 0
2022-07-14 17:37:20.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720107628204032[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:37:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720128549392384[0;39m 生成今日电子书快照开始
2022-07-14 17:37:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720128549392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720128549392384[0;39m ==> Parameters: 
2022-07-14 17:37:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720128549392384[0;39m <==    Updates: 0
2022-07-14 17:37:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720128549392384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:37:30.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720149550272512[0;39m 生成今日电子书快照开始
2022-07-14 17:37:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720149550272512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720149550272512[0;39m ==> Parameters: 
2022-07-14 17:37:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720149550272512[0;39m <==    Updates: 0
2022-07-14 17:37:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720149550272512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:37:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202720170505015296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:37:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720170505015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:37:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720170505015296[0;39m ==> Parameters: 
2022-07-14 17:37:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720170505015296[0;39m <==    Updates: 7
2022-07-14 17:37:35.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202720170505015296[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:37:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720170513403904[0;39m 生成今日电子书快照开始
2022-07-14 17:37:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720170513403904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720170513403904[0;39m ==> Parameters: 
2022-07-14 17:37:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720170513403904[0;39m <==    Updates: 0
2022-07-14 17:37:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720170513403904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:37:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720191480729600[0;39m 生成今日电子书快照开始
2022-07-14 17:37:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720191480729600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720191480729600[0;39m ==> Parameters: 
2022-07-14 17:37:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720191480729600[0;39m <==    Updates: 0
2022-07-14 17:37:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720191480729600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:37:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720212435472384[0;39m 生成今日电子书快照开始
2022-07-14 17:37:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720212435472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720212435472384[0;39m ==> Parameters: 
2022-07-14 17:37:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720212435472384[0;39m <==    Updates: 0
2022-07-14 17:37:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720212435472384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:37:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720233398603776[0;39m 生成今日电子书快照开始
2022-07-14 17:37:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720233398603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720233398603776[0;39m ==> Parameters: 
2022-07-14 17:37:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720233398603776[0;39m <==    Updates: 0
2022-07-14 17:37:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720233398603776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:37:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720254378512384[0;39m 生成今日电子书快照开始
2022-07-14 17:37:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720254378512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:37:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720254378512384[0;39m ==> Parameters: 
2022-07-14 17:37:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720254378512384[0;39m <==    Updates: 0
2022-07-14 17:37:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720254378512384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:38:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720275400364032[0;39m 生成今日电子书快照开始
2022-07-14 17:38:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720275400364032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720275400364032[0;39m ==> Parameters: 
2022-07-14 17:38:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720275400364032[0;39m <==    Updates: 0
2022-07-14 17:38:00.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720275400364032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:38:05.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720296313163776[0;39m 生成今日电子书快照开始
2022-07-14 17:38:05.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720296313163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720296313163776[0;39m ==> Parameters: 
2022-07-14 17:38:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720296313163776[0;39m <==    Updates: 0
2022-07-14 17:38:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720296313163776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:38:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202720296325746688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:38:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720296325746688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:38:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720296325746688[0;39m ==> Parameters: 
2022-07-14 17:38:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720296325746688[0;39m <==    Updates: 7
2022-07-14 17:38:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202720296325746688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:38:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720317284683776[0;39m 生成今日电子书快照开始
2022-07-14 17:38:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720317284683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720317284683776[0;39m ==> Parameters: 
2022-07-14 17:38:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720317284683776[0;39m <==    Updates: 0
2022-07-14 17:38:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720317284683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:38:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720338314924032[0;39m 生成今日电子书快照开始
2022-07-14 17:38:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720338314924032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720338314924032[0;39m ==> Parameters: 
2022-07-14 17:38:15.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720338314924032[0;39m <==    Updates: 0
2022-07-14 17:38:15.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720338314924032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:38:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720359227723776[0;39m 生成今日电子书快照开始
2022-07-14 17:38:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720359227723776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720359227723776[0;39m ==> Parameters: 
2022-07-14 17:38:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720359227723776[0;39m <==    Updates: 0
2022-07-14 17:38:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720359227723776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:38:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720380211826688[0;39m 生成今日电子书快照开始
2022-07-14 17:38:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720380211826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720380211826688[0;39m ==> Parameters: 
2022-07-14 17:38:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720380211826688[0;39m <==    Updates: 0
2022-07-14 17:38:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720380211826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:38:25.686 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202720383068147712[0;39m ------------- 开始 -------------
2022-07-14 17:38:25.686 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202720383068147712[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715069841281024 GET
2022-07-14 17:38:25.686 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202720383068147712[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:38:25.686 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202720383068147712[0;39m 远程地址: 127.0.0.1
2022-07-14 17:38:25.686 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202720383068147712[0;39m 请求参数: [202715069841281024]
2022-07-14 17:38:25.687 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720383068147712[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:38:25.687 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720383068147712[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:38:25.687 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202720383068147712[0;39m <==    Columns: id, content
2022-07-14 17:38:25.688 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202720383068147712[0;39m <==        Row: 202715069841281024, <<BLOB>>
2022-07-14 17:38:25.688 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720383068147712[0;39m <==      Total: 1
2022-07-14 17:38:25.688 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720383068147712[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:38:25.688 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720383068147712[0;39m ==> Parameters: 202715069841281024(Long)
2022-07-14 17:38:25.711 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720383068147712[0;39m <==    Updates: 1
2022-07-14 17:38:25.712 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202720383068147712[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:38:25.712 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202720383068147712[0;39m ------------- 结束 耗时：26 ms -------------
2022-07-14 17:38:26.276 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202720385542787072[0;39m ------------- 开始 -------------
2022-07-14 17:38:26.277 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202720385542787072[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715172312322048 GET
2022-07-14 17:38:26.277 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202720385542787072[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:38:26.277 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202720385542787072[0;39m 远程地址: 127.0.0.1
2022-07-14 17:38:26.277 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202720385542787072[0;39m 请求参数: [202715172312322048]
2022-07-14 17:38:26.278 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720385542787072[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:38:26.278 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720385542787072[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:38:26.279 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202720385542787072[0;39m <==    Columns: id, content
2022-07-14 17:38:26.279 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202720385542787072[0;39m <==        Row: 202715172312322048, <<BLOB>>
2022-07-14 17:38:26.279 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720385542787072[0;39m <==      Total: 1
2022-07-14 17:38:26.279 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720385542787072[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:38:26.280 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720385542787072[0;39m ==> Parameters: 202715172312322048(Long)
2022-07-14 17:38:26.305 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720385542787072[0;39m <==    Updates: 1
2022-07-14 17:38:26.305 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202720385542787072[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:38:26.305 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202720385542787072[0;39m ------------- 结束 耗时：29 ms -------------
2022-07-14 17:38:26.725 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202720387426029568[0;39m ------------- 开始 -------------
2022-07-14 17:38:26.726 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202720387426029568[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715279778779136 GET
2022-07-14 17:38:26.726 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202720387426029568[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:38:26.726 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202720387426029568[0;39m 远程地址: 127.0.0.1
2022-07-14 17:38:26.726 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202720387426029568[0;39m 请求参数: [202715279778779136]
2022-07-14 17:38:26.727 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720387426029568[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:38:26.727 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720387426029568[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:38:26.727 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202720387426029568[0;39m <==    Columns: id, content
2022-07-14 17:38:26.728 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202720387426029568[0;39m <==        Row: 202715279778779136, <<BLOB>>
2022-07-14 17:38:26.728 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720387426029568[0;39m <==      Total: 1
2022-07-14 17:38:26.728 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720387426029568[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:38:26.728 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720387426029568[0;39m ==> Parameters: 202715279778779136(Long)
2022-07-14 17:38:26.747 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720387426029568[0;39m <==    Updates: 1
2022-07-14 17:38:26.748 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202720387426029568[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:38:26.748 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202720387426029568[0;39m ------------- 结束 耗时：23 ms -------------
2022-07-14 17:38:27.544 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202720390861164544[0;39m ------------- 开始 -------------
2022-07-14 17:38:27.544 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202720390861164544[0;39m 请求地址: http://127.0.0.1:8880/doc/find-content/202715412436226048 GET
2022-07-14 17:38:27.545 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202720390861164544[0;39m 类名方法: com.zs.wikibb.controller.DocController.findContent
2022-07-14 17:38:27.545 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202720390861164544[0;39m 远程地址: 127.0.0.1
2022-07-14 17:38:27.545 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202720390861164544[0;39m 请求参数: [202715412436226048]
2022-07-14 17:38:27.545 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720390861164544[0;39m ==>  Preparing: select id , content from content where id = ?
2022-07-14 17:38:27.546 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720390861164544[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-14 17:38:27.546 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202720390861164544[0;39m <==    Columns: id, content
2022-07-14 17:38:27.547 TRACE c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:143 
                [32m202720390861164544[0;39m <==        Row: 202715412436226048, <<BLOB>>
2022-07-14 17:38:27.547 DEBUG c.z.wikibb.mapper.ContentMapper.selectByPrimaryKey:137 
                [32m202720390861164544[0;39m <==      Total: 1
2022-07-14 17:38:27.547 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720390861164544[0;39m ==>  Preparing: update doc set view_count=view_count+1 where id=?
2022-07-14 17:38:27.547 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720390861164544[0;39m ==> Parameters: 202715412436226048(Long)
2022-07-14 17:38:27.568 DEBUG c.zs.wikibb.mapper.DocMapperCust.increaseViewCount:137 
                [32m202720390861164544[0;39m <==    Updates: 1
2022-07-14 17:38:27.569 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202720390861164544[0;39m 返回结果: {"content":"","success":true}
2022-07-14 17:38:27.569 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202720390861164544[0;39m ------------- 结束 耗时：25 ms -------------
2022-07-14 17:38:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720401166569472[0;39m 生成今日电子书快照开始
2022-07-14 17:38:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720401166569472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720401166569472[0;39m ==> Parameters: 
2022-07-14 17:38:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720401166569472[0;39m <==    Updates: 0
2022-07-14 17:38:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720401166569472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:38:30.537 INFO  com.zs.wikibb.aspect.LogAspect                    :52  
                [32m202720403414716416[0;39m ------------- 开始 -------------
2022-07-14 17:38:30.537 INFO  com.zs.wikibb.aspect.LogAspect                    :53  
                [32m202720403414716416[0;39m 请求地址: http://127.0.0.1:8880/category/all GET
2022-07-14 17:38:30.537 INFO  com.zs.wikibb.aspect.LogAspect                    :54  
                [32m202720403414716416[0;39m 类名方法: com.zs.wikibb.controller.CategoryController.all
2022-07-14 17:38:30.537 INFO  com.zs.wikibb.aspect.LogAspect                    :55  
                [32m202720403414716416[0;39m 远程地址: 127.0.0.1
2022-07-14 17:38:30.537 INFO  com.zs.wikibb.aspect.LogAspect                    :76  
                [32m202720403414716416[0;39m 请求参数: []
2022-07-14 17:38:30.538 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202720403414716416[0;39m ==>  Preparing: select id, parent, `name`, sort from category order by sort asc
2022-07-14 17:38:30.538 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202720403414716416[0;39m ==> Parameters: 
2022-07-14 17:38:30.539 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==    Columns: id, parent, name, sort
2022-07-14 17:38:30.539 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 100, 0, 前端开发, 100
2022-07-14 17:38:30.539 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 101, 100, Vue, 101
2022-07-14 17:38:30.539 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 102, 100, HTML & CSS, 102
2022-07-14 17:38:30.540 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 200, 0, Java, 200
2022-07-14 17:38:30.540 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 201, 200, 基础应用, 201
2022-07-14 17:38:30.540 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 202, 200, 框架应用, 202
2022-07-14 17:38:30.540 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 181311914796781568, 200, SpringBoot+Vue3 前后端分离知识库系统, 231
2022-07-14 17:38:30.540 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 300, 0, Python, 300
2022-07-14 17:38:30.540 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 301, 300, 基础应用, 301
2022-07-14 17:38:30.540 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 302, 300, 进阶方向应用, 302
2022-07-14 17:38:30.541 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 400, 0, 数据库, 400
2022-07-14 17:38:30.541 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 401, 400, MySQL, 401
2022-07-14 17:38:30.541 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 500, 0, 其它, 500
2022-07-14 17:38:30.541 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 501, 500, 服务器, 501
2022-07-14 17:38:30.541 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 502, 500, 开发工具, 502
2022-07-14 17:38:30.541 TRACE c.zs.wikibb.mapper.CategoryMapper.selectByExample :143 
                [32m202720403414716416[0;39m <==        Row: 503, 500, 热门服务端语言, 503
2022-07-14 17:38:30.542 DEBUG c.zs.wikibb.mapper.CategoryMapper.selectByExample :137 
                [32m202720403414716416[0;39m <==      Total: 16
2022-07-14 17:38:30.542 INFO  com.zs.wikibb.aspect.LogAspect                    :88  
                [32m202720403414716416[0;39m 返回结果: {"content":[{"id":100,"name":"前端开发","parent":0,"sort":100},{"id":101,"name":"Vue","parent":100,"sort":101},{"id":102,"name":"HTML & CSS","parent":100,"sort":102},{"id":200,"name":"Java","parent":0,"sort":200},{"id":201,"name":"基础应用","parent":200,"sort":201},{"id":202,"name":"框架应用","parent":200,"sort":202},{"id":181311914796781568,"name":"SpringBoot+Vue3 前后端分离知识库系统","parent":200,"sort":231},{"id":300,"name":"Python","parent":0,"sort":300},{"id":301,"name":"基础应用","parent":300,"sort":301},{"id":302,"name":"进阶方向应用","parent":300,"sort":302},{"id":400,"name":"数据库","parent":0,"sort":400},{"id":401,"name":"MySQL","parent":400,"sort":401},{"id":500,"name":"其它","parent":0,"sort":500},{"id":501,"name":"服务器","parent":500,"sort":501},{"id":502,"name":"开发工具","parent":500,"sort":502},{"id":503,"name":"热门服务端语言","parent":500,"sort":503}],"success":true}
2022-07-14 17:38:30.542 INFO  com.zs.wikibb.aspect.LogAspect                    :89  
                [32m202720403414716416[0;39m ------------- 结束 耗时：5 ms -------------
2022-07-14 17:38:35.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720422192615424[0;39m 生成今日电子书快照开始
2022-07-14 17:38:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720422192615424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720422192615424[0;39m ==> Parameters: 
2022-07-14 17:38:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720422192615424[0;39m <==    Updates: 0
2022-07-14 17:38:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720422192615424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:38:35.017 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202720422205198336[0;39m 更新电子书下的文档数据开始
2022-07-14 17:38:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720422205198336[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:38:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720422205198336[0;39m ==> Parameters: 
2022-07-14 17:38:35.072 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720422205198336[0;39m <==    Updates: 7
2022-07-14 17:38:35.072 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202720422205198336[0;39m 更新电子书下的文档数据结束，耗时：55 毫秒
2022-07-14 17:38:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720443109609472[0;39m 生成今日电子书快照开始
2022-07-14 17:38:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720443109609472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720443109609472[0;39m ==> Parameters: 
2022-07-14 17:38:40.037 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720443109609472[0;39m <==    Updates: 0
2022-07-14 17:38:40.038 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720443109609472[0;39m 生成今日电子书快照结束，耗时：37 毫秒
2022-07-14 17:38:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720464144044032[0;39m 生成今日电子书快照开始
2022-07-14 17:38:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720464144044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720464144044032[0;39m ==> Parameters: 
2022-07-14 17:38:45.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720464144044032[0;39m <==    Updates: 0
2022-07-14 17:38:45.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720464144044032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:38:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720485061038080[0;39m 生成今日电子书快照开始
2022-07-14 17:38:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720485061038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720485061038080[0;39m ==> Parameters: 
2022-07-14 17:38:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720485061038080[0;39m <==    Updates: 0
2022-07-14 17:38:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720485061038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:38:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720506066112512[0;39m 生成今日电子书快照开始
2022-07-14 17:38:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720506066112512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:38:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720506066112512[0;39m ==> Parameters: 
2022-07-14 17:38:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720506066112512[0;39m <==    Updates: 0
2022-07-14 17:38:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720506066112512[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:39:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720527033438208[0;39m 生成今日电子书快照开始
2022-07-14 17:39:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720527033438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720527033438208[0;39m ==> Parameters: 
2022-07-14 17:39:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720527033438208[0;39m <==    Updates: 0
2022-07-14 17:39:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720527033438208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:39:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720547975598080[0;39m 生成今日电子书快照开始
2022-07-14 17:39:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720547975598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720547975598080[0;39m ==> Parameters: 
2022-07-14 17:39:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720547975598080[0;39m <==    Updates: 0
2022-07-14 17:39:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720547975598080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:39:05.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202720547979792384[0;39m 更新电子书下的文档数据开始
2022-07-14 17:39:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720547979792384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:39:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720547979792384[0;39m ==> Parameters: 
2022-07-14 17:39:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720547979792384[0;39m <==    Updates: 7
2022-07-14 17:39:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202720547979792384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:39:10.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720568942923776[0;39m 生成今日电子书快照开始
2022-07-14 17:39:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720568942923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720568942923776[0;39m ==> Parameters: 
2022-07-14 17:39:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720568942923776[0;39m <==    Updates: 0
2022-07-14 17:39:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720568942923776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:39:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720589914443776[0;39m 生成今日电子书快照开始
2022-07-14 17:39:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720589914443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720589914443776[0;39m ==> Parameters: 
2022-07-14 17:39:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720589914443776[0;39m <==    Updates: 0
2022-07-14 17:39:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720589914443776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:39:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720610885963776[0;39m 生成今日电子书快照开始
2022-07-14 17:39:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720610885963776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720610885963776[0;39m ==> Parameters: 
2022-07-14 17:39:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720610885963776[0;39m <==    Updates: 0
2022-07-14 17:39:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720610885963776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:39:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720631882649600[0;39m 生成今日电子书快照开始
2022-07-14 17:39:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720631882649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720631882649600[0;39m ==> Parameters: 
2022-07-14 17:39:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720631882649600[0;39m <==    Updates: 0
2022-07-14 17:39:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720631882649600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:39:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720652858363904[0;39m 生成今日电子书快照开始
2022-07-14 17:39:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720652858363904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720652858363904[0;39m ==> Parameters: 
2022-07-14 17:39:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720652858363904[0;39m <==    Updates: 0
2022-07-14 17:39:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720652858363904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:39:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720673808912384[0;39m 生成今日电子书快照开始
2022-07-14 17:39:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720673808912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720673808912384[0;39m ==> Parameters: 
2022-07-14 17:39:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720673808912384[0;39m <==    Updates: 0
2022-07-14 17:39:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720673808912384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:39:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202720673817300992[0;39m 更新电子书下的文档数据开始
2022-07-14 17:39:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720673817300992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:39:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720673817300992[0;39m ==> Parameters: 
2022-07-14 17:39:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720673817300992[0;39m <==    Updates: 7
2022-07-14 17:39:35.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202720673817300992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:39:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720694772043776[0;39m 生成今日电子书快照开始
2022-07-14 17:39:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720694772043776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720694772043776[0;39m ==> Parameters: 
2022-07-14 17:39:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720694772043776[0;39m <==    Updates: 0
2022-07-14 17:39:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720694772043776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:39:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720715743563776[0;39m 生成今日电子书快照开始
2022-07-14 17:39:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720715743563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720715743563776[0;39m ==> Parameters: 
2022-07-14 17:39:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720715743563776[0;39m <==    Updates: 0
2022-07-14 17:39:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720715743563776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:39:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720736748638208[0;39m 生成今日电子书快照开始
2022-07-14 17:39:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720736748638208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:50.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720736748638208[0;39m ==> Parameters: 
2022-07-14 17:39:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720736748638208[0;39m <==    Updates: 0
2022-07-14 17:39:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720736748638208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:39:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720757699186688[0;39m 生成今日电子书快照开始
2022-07-14 17:39:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720757699186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:39:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720757699186688[0;39m ==> Parameters: 
2022-07-14 17:39:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720757699186688[0;39m <==    Updates: 0
2022-07-14 17:39:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720757699186688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:40:00.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720778708455424[0;39m 生成今日电子书快照开始
2022-07-14 17:40:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720778708455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720778708455424[0;39m ==> Parameters: 
2022-07-14 17:40:00.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720778708455424[0;39m <==    Updates: 0
2022-07-14 17:40:00.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720778708455424[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:40:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720799633838080[0;39m 生成今日电子书快照开始
2022-07-14 17:40:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720799633838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720799633838080[0;39m ==> Parameters: 
2022-07-14 17:40:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720799633838080[0;39m <==    Updates: 0
2022-07-14 17:40:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720799633838080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:40:05.005 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202720799642226688[0;39m 更新电子书下的文档数据开始
2022-07-14 17:40:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720799642226688[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:40:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720799642226688[0;39m ==> Parameters: 
2022-07-14 17:40:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720799642226688[0;39m <==    Updates: 7
2022-07-14 17:40:05.006 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202720799642226688[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:40:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720820605358080[0;39m 生成今日电子书快照开始
2022-07-14 17:40:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720820605358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720820605358080[0;39m ==> Parameters: 
2022-07-14 17:40:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720820605358080[0;39m <==    Updates: 0
2022-07-14 17:40:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720820605358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:40:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720841614626816[0;39m 生成今日电子书快照开始
2022-07-14 17:40:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720841614626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720841614626816[0;39m ==> Parameters: 
2022-07-14 17:40:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720841614626816[0;39m <==    Updates: 0
2022-07-14 17:40:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720841614626816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:40:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720862548398080[0;39m 生成今日电子书快照开始
2022-07-14 17:40:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720862548398080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720862548398080[0;39m ==> Parameters: 
2022-07-14 17:40:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720862548398080[0;39m <==    Updates: 0
2022-07-14 17:40:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720862548398080[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:40:25.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720883561861120[0;39m 生成今日电子书快照开始
2022-07-14 17:40:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720883561861120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:25.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720883561861120[0;39m ==> Parameters: 
2022-07-14 17:40:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720883561861120[0;39m <==    Updates: 0
2022-07-14 17:40:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720883561861120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:40:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720904487243776[0;39m 生成今日电子书快照开始
2022-07-14 17:40:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720904487243776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720904487243776[0;39m ==> Parameters: 
2022-07-14 17:40:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720904487243776[0;39m <==    Updates: 0
2022-07-14 17:40:30.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720904487243776[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:40:35.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720925450375168[0;39m 生成今日电子书快照开始
2022-07-14 17:40:35.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720925450375168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720925450375168[0;39m ==> Parameters: 
2022-07-14 17:40:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720925450375168[0;39m <==    Updates: 0
2022-07-14 17:40:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720925450375168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:40:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202720925462958080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:40:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720925462958080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:40:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720925462958080[0;39m ==> Parameters: 
2022-07-14 17:40:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202720925462958080[0;39m <==    Updates: 7
2022-07-14 17:40:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202720925462958080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:40:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720946463838208[0;39m 生成今日电子书快照开始
2022-07-14 17:40:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720946463838208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720946463838208[0;39m ==> Parameters: 
2022-07-14 17:40:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720946463838208[0;39m <==    Updates: 0
2022-07-14 17:40:40.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720946463838208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:40:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720967418580992[0;39m 生成今日电子书快照开始
2022-07-14 17:40:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720967418580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720967418580992[0;39m ==> Parameters: 
2022-07-14 17:40:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720967418580992[0;39m <==    Updates: 0
2022-07-14 17:40:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720967418580992[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:40:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202720988381712384[0;39m 生成今日电子书快照开始
2022-07-14 17:40:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720988381712384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720988381712384[0;39m ==> Parameters: 
2022-07-14 17:40:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202720988381712384[0;39m <==    Updates: 0
2022-07-14 17:40:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202720988381712384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:40:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721009361620992[0;39m 生成今日电子书快照开始
2022-07-14 17:40:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721009361620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:40:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721009361620992[0;39m ==> Parameters: 
2022-07-14 17:40:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721009361620992[0;39m <==    Updates: 0
2022-07-14 17:40:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721009361620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:41:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721030316363776[0;39m 生成今日电子书快照开始
2022-07-14 17:41:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721030316363776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721030316363776[0;39m ==> Parameters: 
2022-07-14 17:41:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721030316363776[0;39m <==    Updates: 0
2022-07-14 17:41:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721030316363776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:41:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202721051292078080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:41:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721051292078080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:41:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721051292078080[0;39m ==> Parameters: 
2022-07-14 17:41:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721051292078080[0;39m <==    Updates: 7
2022-07-14 17:41:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202721051292078080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:41:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721051300466688[0;39m 生成今日电子书快照开始
2022-07-14 17:41:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721051300466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721051300466688[0;39m ==> Parameters: 
2022-07-14 17:41:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721051300466688[0;39m <==    Updates: 0
2022-07-14 17:41:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721051300466688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:41:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721072276180992[0;39m 生成今日电子书快照开始
2022-07-14 17:41:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721072276180992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721072276180992[0;39m ==> Parameters: 
2022-07-14 17:41:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721072276180992[0;39m <==    Updates: 0
2022-07-14 17:41:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721072276180992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:41:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721093260283904[0;39m 生成今日电子书快照开始
2022-07-14 17:41:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721093260283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721093260283904[0;39m ==> Parameters: 
2022-07-14 17:41:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721093260283904[0;39m <==    Updates: 0
2022-07-14 17:41:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721093260283904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:41:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721114219220992[0;39m 生成今日电子书快照开始
2022-07-14 17:41:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721114219220992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721114219220992[0;39m ==> Parameters: 
2022-07-14 17:41:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721114219220992[0;39m <==    Updates: 0
2022-07-14 17:41:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721114219220992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:41:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721135199129600[0;39m 生成今日电子书快照开始
2022-07-14 17:41:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721135199129600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721135199129600[0;39m ==> Parameters: 
2022-07-14 17:41:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721135199129600[0;39m <==    Updates: 0
2022-07-14 17:41:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721135199129600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:41:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721156158066688[0;39m 生成今日电子书快照开始
2022-07-14 17:41:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721156158066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721156158066688[0;39m ==> Parameters: 
2022-07-14 17:41:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721156158066688[0;39m <==    Updates: 0
2022-07-14 17:41:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721156158066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:41:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202721177117003776[0;39m 更新电子书下的文档数据开始
2022-07-14 17:41:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721177117003776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:41:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721177117003776[0;39m ==> Parameters: 
2022-07-14 17:41:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721177117003776[0;39m <==    Updates: 7
2022-07-14 17:41:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202721177117003776[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:41:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721177125392384[0;39m 生成今日电子书快照开始
2022-07-14 17:41:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721177125392384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721177125392384[0;39m ==> Parameters: 
2022-07-14 17:41:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721177125392384[0;39m <==    Updates: 0
2022-07-14 17:41:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721177125392384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:41:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721198101106688[0;39m 生成今日电子书快照开始
2022-07-14 17:41:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721198101106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721198101106688[0;39m ==> Parameters: 
2022-07-14 17:41:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721198101106688[0;39m <==    Updates: 0
2022-07-14 17:41:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721198101106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:41:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721219068432384[0;39m 生成今日电子书快照开始
2022-07-14 17:41:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721219068432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721219068432384[0;39m ==> Parameters: 
2022-07-14 17:41:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721219068432384[0;39m <==    Updates: 0
2022-07-14 17:41:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721219068432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:41:50.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721240031563776[0;39m 生成今日电子书快照开始
2022-07-14 17:41:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721240031563776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721240031563776[0;39m ==> Parameters: 
2022-07-14 17:41:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721240031563776[0;39m <==    Updates: 0
2022-07-14 17:41:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721240031563776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:41:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721261007278080[0;39m 生成今日电子书快照开始
2022-07-14 17:41:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721261007278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:41:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721261007278080[0;39m ==> Parameters: 
2022-07-14 17:41:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721261007278080[0;39m <==    Updates: 0
2022-07-14 17:41:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721261007278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:42:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721281999769600[0;39m 生成今日电子书快照开始
2022-07-14 17:42:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721281999769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721281999769600[0;39m ==> Parameters: 
2022-07-14 17:42:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721281999769600[0;39m <==    Updates: 0
2022-07-14 17:42:00.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721281999769600[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:42:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202721302950318080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:42:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721302950318080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:42:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721302950318080[0;39m ==> Parameters: 
2022-07-14 17:42:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721302950318080[0;39m <==    Updates: 7
2022-07-14 17:42:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202721302950318080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:42:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721302958706688[0;39m 生成今日电子书快照开始
2022-07-14 17:42:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721302958706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721302958706688[0;39m ==> Parameters: 
2022-07-14 17:42:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721302958706688[0;39m <==    Updates: 0
2022-07-14 17:42:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721302958706688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:42:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721323951198208[0;39m 生成今日电子书快照开始
2022-07-14 17:42:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721323951198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721323951198208[0;39m ==> Parameters: 
2022-07-14 17:42:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721323951198208[0;39m <==    Updates: 0
2022-07-14 17:42:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721323951198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:42:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721344893358080[0;39m 生成今日电子书快照开始
2022-07-14 17:42:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721344893358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721344893358080[0;39m ==> Parameters: 
2022-07-14 17:42:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721344893358080[0;39m <==    Updates: 0
2022-07-14 17:42:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721344893358080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:42:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721365864878080[0;39m 生成今日电子书快照开始
2022-07-14 17:42:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721365864878080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721365864878080[0;39m ==> Parameters: 
2022-07-14 17:42:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721365864878080[0;39m <==    Updates: 0
2022-07-14 17:42:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721365864878080[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:42:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721386857369600[0;39m 生成今日电子书快照开始
2022-07-14 17:42:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721386857369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721386857369600[0;39m ==> Parameters: 
2022-07-14 17:42:25.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721386857369600[0;39m <==    Updates: 0
2022-07-14 17:42:25.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721386857369600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:42:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721407807918080[0;39m 生成今日电子书快照开始
2022-07-14 17:42:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721407807918080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721407807918080[0;39m ==> Parameters: 
2022-07-14 17:42:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721407807918080[0;39m <==    Updates: 0
2022-07-14 17:42:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721407807918080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:42:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202721428779438080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:42:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721428779438080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:42:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721428779438080[0;39m ==> Parameters: 
2022-07-14 17:42:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721428779438080[0;39m <==    Updates: 7
2022-07-14 17:42:35.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202721428779438080[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:42:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721428783632384[0;39m 生成今日电子书快照开始
2022-07-14 17:42:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721428783632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721428783632384[0;39m ==> Parameters: 
2022-07-14 17:42:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721428783632384[0;39m <==    Updates: 0
2022-07-14 17:42:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721428783632384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:42:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721449746763776[0;39m 生成今日电子书快照开始
2022-07-14 17:42:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721449746763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721449746763776[0;39m ==> Parameters: 
2022-07-14 17:42:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721449746763776[0;39m <==    Updates: 0
2022-07-14 17:42:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721449746763776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:42:45.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721470777004032[0;39m 生成今日电子书快照开始
2022-07-14 17:42:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721470777004032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721470777004032[0;39m ==> Parameters: 
2022-07-14 17:42:45.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721470777004032[0;39m <==    Updates: 0
2022-07-14 17:42:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721470777004032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:42:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721491702386688[0;39m 生成今日电子书快照开始
2022-07-14 17:42:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721491702386688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721491702386688[0;39m ==> Parameters: 
2022-07-14 17:42:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721491702386688[0;39m <==    Updates: 0
2022-07-14 17:42:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721491702386688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:42:55.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721512682295296[0;39m 生成今日电子书快照开始
2022-07-14 17:42:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721512682295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:42:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721512682295296[0;39m ==> Parameters: 
2022-07-14 17:42:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721512682295296[0;39m <==    Updates: 0
2022-07-14 17:42:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721512682295296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:43:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721533662203904[0;39m 生成今日电子书快照开始
2022-07-14 17:43:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721533662203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721533662203904[0;39m ==> Parameters: 
2022-07-14 17:43:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721533662203904[0;39m <==    Updates: 0
2022-07-14 17:43:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721533662203904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:43:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721554621140992[0;39m 生成今日电子书快照开始
2022-07-14 17:43:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721554621140992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721554621140992[0;39m ==> Parameters: 
2022-07-14 17:43:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721554621140992[0;39m <==    Updates: 0
2022-07-14 17:43:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721554621140992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:43:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202721554629529600[0;39m 更新电子书下的文档数据开始
2022-07-14 17:43:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721554629529600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:43:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721554629529600[0;39m ==> Parameters: 
2022-07-14 17:43:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721554629529600[0;39m <==    Updates: 7
2022-07-14 17:43:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202721554629529600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:43:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721575588466688[0;39m 生成今日电子书快照开始
2022-07-14 17:43:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721575588466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721575588466688[0;39m ==> Parameters: 
2022-07-14 17:43:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721575588466688[0;39m <==    Updates: 0
2022-07-14 17:43:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721575588466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:43:15.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721596601929728[0;39m 生成今日电子书快照开始
2022-07-14 17:43:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721596601929728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721596601929728[0;39m ==> Parameters: 
2022-07-14 17:43:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721596601929728[0;39m <==    Updates: 0
2022-07-14 17:43:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721596601929728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:43:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721617573449728[0;39m 生成今日电子书快照开始
2022-07-14 17:43:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721617573449728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721617573449728[0;39m ==> Parameters: 
2022-07-14 17:43:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721617573449728[0;39m <==    Updates: 0
2022-07-14 17:43:20.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721617573449728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:43:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721638503026688[0;39m 生成今日电子书快照开始
2022-07-14 17:43:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721638503026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721638503026688[0;39m ==> Parameters: 
2022-07-14 17:43:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721638503026688[0;39m <==    Updates: 0
2022-07-14 17:43:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721638503026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:43:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721659482935296[0;39m 生成今日电子书快照开始
2022-07-14 17:43:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721659482935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:30.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721659482935296[0;39m ==> Parameters: 
2022-07-14 17:43:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721659482935296[0;39m <==    Updates: 0
2022-07-14 17:43:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721659482935296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:43:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721680458649600[0;39m 生成今日电子书快照开始
2022-07-14 17:43:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721680458649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721680458649600[0;39m ==> Parameters: 
2022-07-14 17:43:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721680458649600[0;39m <==    Updates: 0
2022-07-14 17:43:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721680458649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:43:35.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202721680467038208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:43:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721680467038208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:43:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721680467038208[0;39m ==> Parameters: 
2022-07-14 17:43:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721680467038208[0;39m <==    Updates: 7
2022-07-14 17:43:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202721680467038208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:43:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721701421780992[0;39m 生成今日电子书快照开始
2022-07-14 17:43:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721701421780992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721701421780992[0;39m ==> Parameters: 
2022-07-14 17:43:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721701421780992[0;39m <==    Updates: 0
2022-07-14 17:43:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721701421780992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:43:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721722384912384[0;39m 生成今日电子书快照开始
2022-07-14 17:43:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721722384912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721722384912384[0;39m ==> Parameters: 
2022-07-14 17:43:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721722384912384[0;39m <==    Updates: 0
2022-07-14 17:43:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721722384912384[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:43:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721743364820992[0;39m 生成今日电子书快照开始
2022-07-14 17:43:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721743364820992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721743364820992[0;39m ==> Parameters: 
2022-07-14 17:43:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721743364820992[0;39m <==    Updates: 0
2022-07-14 17:43:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721743364820992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:43:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721764323758080[0;39m 生成今日电子书快照开始
2022-07-14 17:43:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721764323758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:43:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721764323758080[0;39m ==> Parameters: 
2022-07-14 17:43:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721764323758080[0;39m <==    Updates: 0
2022-07-14 17:43:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721764323758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:44:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721785312055296[0;39m 生成今日电子书快照开始
2022-07-14 17:44:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721785312055296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721785312055296[0;39m ==> Parameters: 
2022-07-14 17:44:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721785312055296[0;39m <==    Updates: 0
2022-07-14 17:44:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721785312055296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:44:05.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202721806287769600[0;39m 更新电子书下的文档数据开始
2022-07-14 17:44:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721806287769600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:44:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721806287769600[0;39m ==> Parameters: 
2022-07-14 17:44:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721806287769600[0;39m <==    Updates: 7
2022-07-14 17:44:05.009 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202721806287769600[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:44:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721806291963904[0;39m 生成今日电子书快照开始
2022-07-14 17:44:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721806291963904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721806291963904[0;39m ==> Parameters: 
2022-07-14 17:44:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721806291963904[0;39m <==    Updates: 0
2022-07-14 17:44:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721806291963904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:44:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721827242512384[0;39m 生成今日电子书快照开始
2022-07-14 17:44:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721827242512384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721827242512384[0;39m ==> Parameters: 
2022-07-14 17:44:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721827242512384[0;39m <==    Updates: 0
2022-07-14 17:44:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721827242512384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:44:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721848243392512[0;39m 生成今日电子书快照开始
2022-07-14 17:44:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721848243392512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721848243392512[0;39m ==> Parameters: 
2022-07-14 17:44:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721848243392512[0;39m <==    Updates: 0
2022-07-14 17:44:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721848243392512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:44:20.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721869210718208[0;39m 生成今日电子书快照开始
2022-07-14 17:44:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721869210718208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721869210718208[0;39m ==> Parameters: 
2022-07-14 17:44:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721869210718208[0;39m <==    Updates: 0
2022-07-14 17:44:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721869210718208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:44:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721890148683776[0;39m 生成今日电子书快照开始
2022-07-14 17:44:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721890148683776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721890148683776[0;39m ==> Parameters: 
2022-07-14 17:44:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721890148683776[0;39m <==    Updates: 0
2022-07-14 17:44:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721890148683776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:44:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721911120203776[0;39m 生成今日电子书快照开始
2022-07-14 17:44:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721911120203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721911120203776[0;39m ==> Parameters: 
2022-07-14 17:44:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721911120203776[0;39m <==    Updates: 0
2022-07-14 17:44:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721911120203776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:44:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721932087529472[0;39m 生成今日电子书快照开始
2022-07-14 17:44:35.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721932087529472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721932087529472[0;39m ==> Parameters: 
2022-07-14 17:44:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721932087529472[0;39m <==    Updates: 0
2022-07-14 17:44:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721932087529472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:44:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202721932095918080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:44:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721932095918080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:44:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721932095918080[0;39m ==> Parameters: 
2022-07-14 17:44:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202721932095918080[0;39m <==    Updates: 7
2022-07-14 17:44:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202721932095918080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:44:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721953075826688[0;39m 生成今日电子书快照开始
2022-07-14 17:44:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721953075826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721953075826688[0;39m ==> Parameters: 
2022-07-14 17:44:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721953075826688[0;39m <==    Updates: 0
2022-07-14 17:44:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721953075826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:44:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721974076706816[0;39m 生成今日电子书快照开始
2022-07-14 17:44:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721974076706816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721974076706816[0;39m ==> Parameters: 
2022-07-14 17:44:45.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721974076706816[0;39m <==    Updates: 0
2022-07-14 17:44:45.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721974076706816[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:44:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202721995035643904[0;39m 生成今日电子书快照开始
2022-07-14 17:44:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721995035643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721995035643904[0;39m ==> Parameters: 
2022-07-14 17:44:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202721995035643904[0;39m <==    Updates: 0
2022-07-14 17:44:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202721995035643904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:44:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722015986192384[0;39m 生成今日电子书快照开始
2022-07-14 17:44:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722015986192384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:44:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722015986192384[0;39m ==> Parameters: 
2022-07-14 17:44:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722015986192384[0;39m <==    Updates: 0
2022-07-14 17:44:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722015986192384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:45:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722036961906688[0;39m 生成今日电子书快照开始
2022-07-14 17:45:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722036961906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722036961906688[0;39m ==> Parameters: 
2022-07-14 17:45:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722036961906688[0;39m <==    Updates: 0
2022-07-14 17:45:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722036961906688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:45:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202722057954398208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:45:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722057954398208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:45:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722057954398208[0;39m ==> Parameters: 
2022-07-14 17:45:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722057954398208[0;39m <==    Updates: 7
2022-07-14 17:45:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202722057954398208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:45:05.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722057958592512[0;39m 生成今日电子书快照开始
2022-07-14 17:45:05.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722057958592512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722057958592512[0;39m ==> Parameters: 
2022-07-14 17:45:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722057958592512[0;39m <==    Updates: 0
2022-07-14 17:45:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722057958592512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:45:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722078900752384[0;39m 生成今日电子书快照开始
2022-07-14 17:45:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722078900752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722078900752384[0;39m ==> Parameters: 
2022-07-14 17:45:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722078900752384[0;39m <==    Updates: 0
2022-07-14 17:45:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722078900752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:45:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722099868078080[0;39m 生成今日电子书快照开始
2022-07-14 17:45:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722099868078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:15.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722099868078080[0;39m ==> Parameters: 
2022-07-14 17:45:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722099868078080[0;39m <==    Updates: 0
2022-07-14 17:45:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722099868078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:45:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722120843792384[0;39m 生成今日电子书快照开始
2022-07-14 17:45:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722120843792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722120843792384[0;39m ==> Parameters: 
2022-07-14 17:45:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722120843792384[0;39m <==    Updates: 0
2022-07-14 17:45:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722120843792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:45:25.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722141848866816[0;39m 生成今日电子书快照开始
2022-07-14 17:45:25.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722141848866816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722141848866816[0;39m ==> Parameters: 
2022-07-14 17:45:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722141848866816[0;39m <==    Updates: 0
2022-07-14 17:45:25.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722141848866816[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:45:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722162786832384[0;39m 生成今日电子书快照开始
2022-07-14 17:45:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722162786832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722162786832384[0;39m ==> Parameters: 
2022-07-14 17:45:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722162786832384[0;39m <==    Updates: 0
2022-07-14 17:45:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722162786832384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:45:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722183804489728[0;39m 生成今日电子书快照开始
2022-07-14 17:45:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722183804489728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722183804489728[0;39m ==> Parameters: 
2022-07-14 17:45:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722183804489728[0;39m <==    Updates: 0
2022-07-14 17:45:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722183804489728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:45:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202722183817072640[0;39m 更新电子书下的文档数据开始
2022-07-14 17:45:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722183817072640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:45:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722183817072640[0;39m ==> Parameters: 
2022-07-14 17:45:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722183817072640[0;39m <==    Updates: 7
2022-07-14 17:45:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202722183817072640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:45:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722204717289472[0;39m 生成今日电子书快照开始
2022-07-14 17:45:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722204717289472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722204717289472[0;39m ==> Parameters: 
2022-07-14 17:45:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722204717289472[0;39m <==    Updates: 0
2022-07-14 17:45:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722204717289472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:45:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722225713975296[0;39m 生成今日电子书快照开始
2022-07-14 17:45:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722225713975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722225713975296[0;39m ==> Parameters: 
2022-07-14 17:45:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722225713975296[0;39m <==    Updates: 0
2022-07-14 17:45:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722225713975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:45:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722246672912384[0;39m 生成今日电子书快照开始
2022-07-14 17:45:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722246672912384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722246672912384[0;39m ==> Parameters: 
2022-07-14 17:45:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722246672912384[0;39m <==    Updates: 0
2022-07-14 17:45:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722246672912384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:45:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722267661209600[0;39m 生成今日电子书快照开始
2022-07-14 17:45:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722267661209600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:45:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722267661209600[0;39m ==> Parameters: 
2022-07-14 17:45:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722267661209600[0;39m <==    Updates: 0
2022-07-14 17:45:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722267661209600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:46:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722288653701120[0;39m 生成今日电子书快照开始
2022-07-14 17:46:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722288653701120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:00.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722288653701120[0;39m ==> Parameters: 
2022-07-14 17:46:00.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722288653701120[0;39m <==    Updates: 0
2022-07-14 17:46:00.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722288653701120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:46:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722309621026816[0;39m 生成今日电子书快照开始
2022-07-14 17:46:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722309621026816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722309621026816[0;39m ==> Parameters: 
2022-07-14 17:46:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722309621026816[0;39m <==    Updates: 0
2022-07-14 17:46:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722309621026816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:46:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202722309629415424[0;39m 更新电子书下的文档数据开始
2022-07-14 17:46:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722309629415424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:46:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722309629415424[0;39m ==> Parameters: 
2022-07-14 17:46:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722309629415424[0;39m <==    Updates: 7
2022-07-14 17:46:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202722309629415424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:46:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722330546409472[0;39m 生成今日电子书快照开始
2022-07-14 17:46:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722330546409472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722330546409472[0;39m ==> Parameters: 
2022-07-14 17:46:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722330546409472[0;39m <==    Updates: 0
2022-07-14 17:46:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722330546409472[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:46:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722351538900992[0;39m 生成今日电子书快照开始
2022-07-14 17:46:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722351538900992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722351538900992[0;39m ==> Parameters: 
2022-07-14 17:46:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722351538900992[0;39m <==    Updates: 0
2022-07-14 17:46:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722351538900992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:46:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722372539781120[0;39m 生成今日电子书快照开始
2022-07-14 17:46:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722372539781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722372539781120[0;39m ==> Parameters: 
2022-07-14 17:46:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722372539781120[0;39m <==    Updates: 0
2022-07-14 17:46:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722372539781120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:46:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722393465163776[0;39m 生成今日电子书快照开始
2022-07-14 17:46:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722393465163776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722393465163776[0;39m ==> Parameters: 
2022-07-14 17:46:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722393465163776[0;39m <==    Updates: 0
2022-07-14 17:46:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722393465163776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:46:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722414491209728[0;39m 生成今日电子书快照开始
2022-07-14 17:46:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722414491209728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722414491209728[0;39m ==> Parameters: 
2022-07-14 17:46:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722414491209728[0;39m <==    Updates: 0
2022-07-14 17:46:30.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722414491209728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:46:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202722435445952512[0;39m 更新电子书下的文档数据开始
2022-07-14 17:46:35.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722435445952512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:46:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722435445952512[0;39m ==> Parameters: 
2022-07-14 17:46:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722435445952512[0;39m <==    Updates: 7
2022-07-14 17:46:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202722435445952512[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-14 17:46:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722435462729728[0;39m 生成今日电子书快照开始
2022-07-14 17:46:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722435462729728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722435462729728[0;39m ==> Parameters: 
2022-07-14 17:46:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722435462729728[0;39m <==    Updates: 0
2022-07-14 17:46:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722435462729728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:46:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722456434249728[0;39m 生成今日电子书快照开始
2022-07-14 17:46:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722456434249728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722456434249728[0;39m ==> Parameters: 
2022-07-14 17:46:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722456434249728[0;39m <==    Updates: 0
2022-07-14 17:46:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722456434249728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:46:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722477347049472[0;39m 生成今日电子书快照开始
2022-07-14 17:46:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722477347049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722477347049472[0;39m ==> Parameters: 
2022-07-14 17:46:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722477347049472[0;39m <==    Updates: 0
2022-07-14 17:46:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722477347049472[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 17:46:50.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722498381484032[0;39m 生成今日电子书快照开始
2022-07-14 17:46:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722498381484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722498381484032[0;39m ==> Parameters: 
2022-07-14 17:46:50.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722498381484032[0;39m <==    Updates: 0
2022-07-14 17:46:50.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722498381484032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:46:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722519332032512[0;39m 生成今日电子书快照开始
2022-07-14 17:46:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722519332032512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:46:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722519332032512[0;39m ==> Parameters: 
2022-07-14 17:46:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722519332032512[0;39m <==    Updates: 0
2022-07-14 17:46:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722519332032512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:47:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722540282580992[0;39m 生成今日电子书快照开始
2022-07-14 17:47:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722540282580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722540282580992[0;39m ==> Parameters: 
2022-07-14 17:47:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722540282580992[0;39m <==    Updates: 0
2022-07-14 17:47:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722540282580992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:47:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202722561270878208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:47:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722561270878208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:47:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722561270878208[0;39m ==> Parameters: 
2022-07-14 17:47:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722561270878208[0;39m <==    Updates: 7
2022-07-14 17:47:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202722561270878208[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:47:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722561279266816[0;39m 生成今日电子书快照开始
2022-07-14 17:47:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722561279266816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722561279266816[0;39m ==> Parameters: 
2022-07-14 17:47:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722561279266816[0;39m <==    Updates: 0
2022-07-14 17:47:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722561279266816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:47:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722582225620992[0;39m 生成今日电子书快照开始
2022-07-14 17:47:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722582225620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722582225620992[0;39m ==> Parameters: 
2022-07-14 17:47:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722582225620992[0;39m <==    Updates: 0
2022-07-14 17:47:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722582225620992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:47:15.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722603209723904[0;39m 生成今日电子书快照开始
2022-07-14 17:47:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722603209723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722603209723904[0;39m ==> Parameters: 
2022-07-14 17:47:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722603209723904[0;39m <==    Updates: 0
2022-07-14 17:47:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722603209723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:47:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722624168660992[0;39m 生成今日电子书快照开始
2022-07-14 17:47:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722624168660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722624168660992[0;39m ==> Parameters: 
2022-07-14 17:47:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722624168660992[0;39m <==    Updates: 0
2022-07-14 17:47:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722624168660992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:47:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722645119209472[0;39m 生成今日电子书快照开始
2022-07-14 17:47:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722645119209472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722645119209472[0;39m ==> Parameters: 
2022-07-14 17:47:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722645119209472[0;39m <==    Updates: 0
2022-07-14 17:47:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722645119209472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:47:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722666094923776[0;39m 生成今日电子书快照开始
2022-07-14 17:47:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722666094923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722666094923776[0;39m ==> Parameters: 
2022-07-14 17:47:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722666094923776[0;39m <==    Updates: 0
2022-07-14 17:47:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722666094923776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:47:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202722687062249472[0;39m 更新电子书下的文档数据开始
2022-07-14 17:47:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722687062249472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:47:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722687062249472[0;39m ==> Parameters: 
2022-07-14 17:47:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722687062249472[0;39m <==    Updates: 7
2022-07-14 17:47:35.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202722687062249472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:47:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722687066443776[0;39m 生成今日电子书快照开始
2022-07-14 17:47:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722687066443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722687066443776[0;39m ==> Parameters: 
2022-07-14 17:47:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722687066443776[0;39m <==    Updates: 0
2022-07-14 17:47:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722687066443776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:47:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722708054740992[0;39m 生成今日电子书快照开始
2022-07-14 17:47:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722708054740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722708054740992[0;39m ==> Parameters: 
2022-07-14 17:47:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722708054740992[0;39m <==    Updates: 0
2022-07-14 17:47:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722708054740992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:47:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722729034649600[0;39m 生成今日电子书快照开始
2022-07-14 17:47:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722729034649600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722729034649600[0;39m ==> Parameters: 
2022-07-14 17:47:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722729034649600[0;39m <==    Updates: 0
2022-07-14 17:47:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722729034649600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:47:50.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722750022946816[0;39m 生成今日电子书快照开始
2022-07-14 17:47:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722750022946816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:50.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722750022946816[0;39m ==> Parameters: 
2022-07-14 17:47:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722750022946816[0;39m <==    Updates: 0
2022-07-14 17:47:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722750022946816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:47:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722770948329472[0;39m 生成今日电子书快照开始
2022-07-14 17:47:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722770948329472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:47:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722770948329472[0;39m ==> Parameters: 
2022-07-14 17:47:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722770948329472[0;39m <==    Updates: 0
2022-07-14 17:47:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722770948329472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:48:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722791970181120[0;39m 生成今日电子书快照开始
2022-07-14 17:48:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722791970181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722791970181120[0;39m ==> Parameters: 
2022-07-14 17:48:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722791970181120[0;39m <==    Updates: 0
2022-07-14 17:48:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722791970181120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:48:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722812916535296[0;39m 生成今日电子书快照开始
2022-07-14 17:48:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722812916535296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722812916535296[0;39m ==> Parameters: 
2022-07-14 17:48:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722812916535296[0;39m <==    Updates: 0
2022-07-14 17:48:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722812916535296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:48:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202722812929118208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:48:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722812929118208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:48:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722812929118208[0;39m ==> Parameters: 
2022-07-14 17:48:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722812929118208[0;39m <==    Updates: 7
2022-07-14 17:48:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202722812929118208[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:48:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722833871278080[0;39m 生成今日电子书快照开始
2022-07-14 17:48:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722833871278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722833871278080[0;39m ==> Parameters: 
2022-07-14 17:48:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722833871278080[0;39m <==    Updates: 0
2022-07-14 17:48:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722833871278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:48:15.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722854838603776[0;39m 生成今日电子书快照开始
2022-07-14 17:48:15.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722854838603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722854838603776[0;39m ==> Parameters: 
2022-07-14 17:48:15.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722854838603776[0;39m <==    Updates: 0
2022-07-14 17:48:15.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722854838603776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:48:20.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722875860455424[0;39m 生成今日电子书快照开始
2022-07-14 17:48:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722875860455424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722875860455424[0;39m ==> Parameters: 
2022-07-14 17:48:20.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722875860455424[0;39m <==    Updates: 0
2022-07-14 17:48:20.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722875860455424[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:48:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722896790032384[0;39m 生成今日电子书快照开始
2022-07-14 17:48:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722896790032384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722896790032384[0;39m ==> Parameters: 
2022-07-14 17:48:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722896790032384[0;39m <==    Updates: 0
2022-07-14 17:48:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722896790032384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:48:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722917765746688[0;39m 生成今日电子书快照开始
2022-07-14 17:48:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722917765746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722917765746688[0;39m ==> Parameters: 
2022-07-14 17:48:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722917765746688[0;39m <==    Updates: 0
2022-07-14 17:48:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722917765746688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:48:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202722938754043904[0;39m 更新电子书下的文档数据开始
2022-07-14 17:48:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722938754043904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:48:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722938754043904[0;39m ==> Parameters: 
2022-07-14 17:48:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202722938754043904[0;39m <==    Updates: 7
2022-07-14 17:48:35.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202722938754043904[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:48:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722938762432512[0;39m 生成今日电子书快照开始
2022-07-14 17:48:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722938762432512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722938762432512[0;39m ==> Parameters: 
2022-07-14 17:48:35.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722938762432512[0;39m <==    Updates: 0
2022-07-14 17:48:35.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722938762432512[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:48:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722959742341120[0;39m 生成今日电子书快照开始
2022-07-14 17:48:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722959742341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722959742341120[0;39m ==> Parameters: 
2022-07-14 17:48:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722959742341120[0;39m <==    Updates: 0
2022-07-14 17:48:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722959742341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:48:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202722980697083904[0;39m 生成今日电子书快照开始
2022-07-14 17:48:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722980697083904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722980697083904[0;39m ==> Parameters: 
2022-07-14 17:48:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202722980697083904[0;39m <==    Updates: 0
2022-07-14 17:48:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202722980697083904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:48:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723001635049472[0;39m 生成今日电子书快照开始
2022-07-14 17:48:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723001635049472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723001635049472[0;39m ==> Parameters: 
2022-07-14 17:48:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723001635049472[0;39m <==    Updates: 0
2022-07-14 17:48:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723001635049472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:48:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723022673678336[0;39m 生成今日电子书快照开始
2022-07-14 17:48:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723022673678336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:48:55.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723022673678336[0;39m ==> Parameters: 
2022-07-14 17:48:55.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723022673678336[0;39m <==    Updates: 0
2022-07-14 17:48:55.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723022673678336[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:49:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723043628421120[0;39m 生成今日电子书快照开始
2022-07-14 17:49:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723043628421120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723043628421120[0;39m ==> Parameters: 
2022-07-14 17:49:00.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723043628421120[0;39m <==    Updates: 0
2022-07-14 17:49:00.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723043628421120[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:49:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202723064549609472[0;39m 更新电子书下的文档数据开始
2022-07-14 17:49:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723064549609472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:49:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723064549609472[0;39m ==> Parameters: 
2022-07-14 17:49:05.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723064549609472[0;39m <==    Updates: 7
2022-07-14 17:49:05.007 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202723064549609472[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-14 17:49:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723064574775296[0;39m 生成今日电子书快照开始
2022-07-14 17:49:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723064574775296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723064574775296[0;39m ==> Parameters: 
2022-07-14 17:49:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723064574775296[0;39m <==    Updates: 0
2022-07-14 17:49:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723064574775296[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:49:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723085537906688[0;39m 生成今日电子书快照开始
2022-07-14 17:49:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723085537906688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723085537906688[0;39m ==> Parameters: 
2022-07-14 17:49:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723085537906688[0;39m <==    Updates: 0
2022-07-14 17:49:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723085537906688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:49:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723106517815296[0;39m 生成今日电子书快照开始
2022-07-14 17:49:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723106517815296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723106517815296[0;39m ==> Parameters: 
2022-07-14 17:49:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723106517815296[0;39m <==    Updates: 0
2022-07-14 17:49:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723106517815296[0;39m 生成今日电子书快照结束，耗时：0 毫秒
2022-07-14 17:49:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723127489335296[0;39m 生成今日电子书快照开始
2022-07-14 17:49:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723127489335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723127489335296[0;39m ==> Parameters: 
2022-07-14 17:49:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723127489335296[0;39m <==    Updates: 0
2022-07-14 17:49:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723127489335296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:49:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723148435689472[0;39m 生成今日电子书快照开始
2022-07-14 17:49:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723148435689472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723148435689472[0;39m ==> Parameters: 
2022-07-14 17:49:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723148435689472[0;39m <==    Updates: 0
2022-07-14 17:49:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723148435689472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:49:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723169411403776[0;39m 生成今日电子书快照开始
2022-07-14 17:49:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723169411403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723169411403776[0;39m ==> Parameters: 
2022-07-14 17:49:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723169411403776[0;39m <==    Updates: 0
2022-07-14 17:49:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723169411403776[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:49:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202723190408089600[0;39m 更新电子书下的文档数据开始
2022-07-14 17:49:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723190408089600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:49:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723190408089600[0;39m ==> Parameters: 
2022-07-14 17:49:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723190408089600[0;39m <==    Updates: 7
2022-07-14 17:49:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202723190408089600[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:49:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723190416478208[0;39m 生成今日电子书快照开始
2022-07-14 17:49:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723190416478208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723190416478208[0;39m ==> Parameters: 
2022-07-14 17:49:35.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723190416478208[0;39m <==    Updates: 0
2022-07-14 17:49:35.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723190416478208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:49:40.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723211400581120[0;39m 生成今日电子书快照开始
2022-07-14 17:49:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723211400581120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:40.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723211400581120[0;39m ==> Parameters: 
2022-07-14 17:49:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723211400581120[0;39m <==    Updates: 0
2022-07-14 17:49:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723211400581120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:49:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723232346935296[0;39m 生成今日电子书快照开始
2022-07-14 17:49:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723232346935296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723232346935296[0;39m ==> Parameters: 
2022-07-14 17:49:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723232346935296[0;39m <==    Updates: 0
2022-07-14 17:49:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723232346935296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:49:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723253310066688[0;39m 生成今日电子书快照开始
2022-07-14 17:49:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723253310066688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723253310066688[0;39m ==> Parameters: 
2022-07-14 17:49:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723253310066688[0;39m <==    Updates: 0
2022-07-14 17:49:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723253310066688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:49:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723274294169600[0;39m 生成今日电子书快照开始
2022-07-14 17:49:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723274294169600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:49:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723274294169600[0;39m ==> Parameters: 
2022-07-14 17:49:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723274294169600[0;39m <==    Updates: 0
2022-07-14 17:49:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723274294169600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:50:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723295257300992[0;39m 生成今日电子书快照开始
2022-07-14 17:50:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723295257300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723295257300992[0;39m ==> Parameters: 
2022-07-14 17:50:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723295257300992[0;39m <==    Updates: 0
2022-07-14 17:50:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723295257300992[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:50:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723316224626688[0;39m 生成今日电子书快照开始
2022-07-14 17:50:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723316224626688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723316224626688[0;39m ==> Parameters: 
2022-07-14 17:50:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723316224626688[0;39m <==    Updates: 0
2022-07-14 17:50:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723316224626688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:50:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202723316233015296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:50:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723316233015296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:50:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723316233015296[0;39m ==> Parameters: 
2022-07-14 17:50:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723316233015296[0;39m <==    Updates: 7
2022-07-14 17:50:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202723316233015296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:50:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723337191952384[0;39m 生成今日电子书快照开始
2022-07-14 17:50:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723337191952384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723337191952384[0;39m ==> Parameters: 
2022-07-14 17:50:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723337191952384[0;39m <==    Updates: 0
2022-07-14 17:50:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723337191952384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:50:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723358171860992[0;39m 生成今日电子书快照开始
2022-07-14 17:50:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723358171860992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723358171860992[0;39m ==> Parameters: 
2022-07-14 17:50:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723358171860992[0;39m <==    Updates: 0
2022-07-14 17:50:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723358171860992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:50:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723379164352512[0;39m 生成今日电子书快照开始
2022-07-14 17:50:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723379164352512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723379164352512[0;39m ==> Parameters: 
2022-07-14 17:50:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723379164352512[0;39m <==    Updates: 0
2022-07-14 17:50:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723379164352512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:50:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723400119095296[0;39m 生成今日电子书快照开始
2022-07-14 17:50:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723400119095296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723400119095296[0;39m ==> Parameters: 
2022-07-14 17:50:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723400119095296[0;39m <==    Updates: 0
2022-07-14 17:50:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723400119095296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:50:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723421103198208[0;39m 生成今日电子书快照开始
2022-07-14 17:50:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723421103198208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:30.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723421103198208[0;39m ==> Parameters: 
2022-07-14 17:50:30.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723421103198208[0;39m <==    Updates: 0
2022-07-14 17:50:30.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723421103198208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:50:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723442062135296[0;39m 生成今日电子书快照开始
2022-07-14 17:50:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723442062135296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723442062135296[0;39m ==> Parameters: 
2022-07-14 17:50:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723442062135296[0;39m <==    Updates: 0
2022-07-14 17:50:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723442062135296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:50:35.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202723442070523904[0;39m 更新电子书下的文档数据开始
2022-07-14 17:50:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723442070523904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:50:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723442070523904[0;39m ==> Parameters: 
2022-07-14 17:50:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723442070523904[0;39m <==    Updates: 7
2022-07-14 17:50:35.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202723442070523904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:50:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723463029460992[0;39m 生成今日电子书快照开始
2022-07-14 17:50:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723463029460992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723463029460992[0;39m ==> Parameters: 
2022-07-14 17:50:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723463029460992[0;39m <==    Updates: 0
2022-07-14 17:50:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723463029460992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:50:45.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723483980009472[0;39m 生成今日电子书快照开始
2022-07-14 17:50:45.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723483980009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723483980009472[0;39m ==> Parameters: 
2022-07-14 17:50:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723483980009472[0;39m <==    Updates: 0
2022-07-14 17:50:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723483980009472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:50:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723504968306688[0;39m 生成今日电子书快照开始
2022-07-14 17:50:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723504968306688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723504968306688[0;39m ==> Parameters: 
2022-07-14 17:50:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723504968306688[0;39m <==    Updates: 0
2022-07-14 17:50:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723504968306688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:50:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723525985964032[0;39m 生成今日电子书快照开始
2022-07-14 17:50:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723525985964032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:50:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723525985964032[0;39m ==> Parameters: 
2022-07-14 17:50:55.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723525985964032[0;39m <==    Updates: 0
2022-07-14 17:50:55.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723525985964032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:51:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723546923929600[0;39m 生成今日电子书快照开始
2022-07-14 17:51:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723546923929600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723546923929600[0;39m ==> Parameters: 
2022-07-14 17:51:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723546923929600[0;39m <==    Updates: 0
2022-07-14 17:51:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723546923929600[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:51:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723567878672384[0;39m 生成今日电子书快照开始
2022-07-14 17:51:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723567878672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723567878672384[0;39m ==> Parameters: 
2022-07-14 17:51:05.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723567878672384[0;39m <==    Updates: 0
2022-07-14 17:51:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723567878672384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:51:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202723567891255296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:51:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723567891255296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:51:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723567891255296[0;39m ==> Parameters: 
2022-07-14 17:51:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723567891255296[0;39m <==    Updates: 7
2022-07-14 17:51:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202723567891255296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:51:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723588858580992[0;39m 生成今日电子书快照开始
2022-07-14 17:51:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723588858580992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723588858580992[0;39m ==> Parameters: 
2022-07-14 17:51:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723588858580992[0;39m <==    Updates: 0
2022-07-14 17:51:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723588858580992[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:51:15.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723609872044032[0;39m 生成今日电子书快照开始
2022-07-14 17:51:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723609872044032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723609872044032[0;39m ==> Parameters: 
2022-07-14 17:51:15.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723609872044032[0;39m <==    Updates: 0
2022-07-14 17:51:15.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723609872044032[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:51:20.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723630784843776[0;39m 生成今日电子书快照开始
2022-07-14 17:51:20.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723630784843776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723630784843776[0;39m ==> Parameters: 
2022-07-14 17:51:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723630784843776[0;39m <==    Updates: 0
2022-07-14 17:51:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723630784843776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:51:25.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723651752169472[0;39m 生成今日电子书快照开始
2022-07-14 17:51:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723651752169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723651752169472[0;39m ==> Parameters: 
2022-07-14 17:51:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723651752169472[0;39m <==    Updates: 0
2022-07-14 17:51:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723651752169472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:51:30.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723672753049600[0;39m 生成今日电子书快照开始
2022-07-14 17:51:30.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723672753049600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723672753049600[0;39m ==> Parameters: 
2022-07-14 17:51:30.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723672753049600[0;39m <==    Updates: 0
2022-07-14 17:51:30.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723672753049600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:51:35.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202723693703598080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:51:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723693703598080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:51:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723693703598080[0;39m ==> Parameters: 
2022-07-14 17:51:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723693703598080[0;39m <==    Updates: 7
2022-07-14 17:51:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202723693703598080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:51:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723693711986688[0;39m 生成今日电子书快照开始
2022-07-14 17:51:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723693711986688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723693711986688[0;39m ==> Parameters: 
2022-07-14 17:51:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723693711986688[0;39m <==    Updates: 0
2022-07-14 17:51:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723693711986688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:51:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723714670923776[0;39m 生成今日电子书快照开始
2022-07-14 17:51:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723714670923776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723714670923776[0;39m ==> Parameters: 
2022-07-14 17:51:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723714670923776[0;39m <==    Updates: 0
2022-07-14 17:51:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723714670923776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:51:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723735650832384[0;39m 生成今日电子书快照开始
2022-07-14 17:51:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723735650832384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723735650832384[0;39m ==> Parameters: 
2022-07-14 17:51:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723735650832384[0;39m <==    Updates: 0
2022-07-14 17:51:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723735650832384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:51:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723756609769472[0;39m 生成今日电子书快照开始
2022-07-14 17:51:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723756609769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723756609769472[0;39m ==> Parameters: 
2022-07-14 17:51:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723756609769472[0;39m <==    Updates: 0
2022-07-14 17:51:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723756609769472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:51:55.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723777577095168[0;39m 生成今日电子书快照开始
2022-07-14 17:51:55.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723777577095168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:51:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723777577095168[0;39m ==> Parameters: 
2022-07-14 17:51:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723777577095168[0;39m <==    Updates: 0
2022-07-14 17:51:55.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723777577095168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:52:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723798557003776[0;39m 生成今日电子书快照开始
2022-07-14 17:52:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723798557003776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723798557003776[0;39m ==> Parameters: 
2022-07-14 17:52:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723798557003776[0;39m <==    Updates: 0
2022-07-14 17:52:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723798557003776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:52:05.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723819583049728[0;39m 生成今日电子书快照开始
2022-07-14 17:52:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723819583049728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723819583049728[0;39m ==> Parameters: 
2022-07-14 17:52:05.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723819583049728[0;39m <==    Updates: 0
2022-07-14 17:52:05.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723819583049728[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:52:05.020 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202723819604021248[0;39m 更新电子书下的文档数据开始
2022-07-14 17:52:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723819604021248[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:52:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723819604021248[0;39m ==> Parameters: 
2022-07-14 17:52:05.021 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723819604021248[0;39m <==    Updates: 7
2022-07-14 17:52:05.021 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202723819604021248[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2022-07-14 17:52:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723840495849472[0;39m 生成今日电子书快照开始
2022-07-14 17:52:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723840495849472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723840495849472[0;39m ==> Parameters: 
2022-07-14 17:52:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723840495849472[0;39m <==    Updates: 0
2022-07-14 17:52:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723840495849472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:52:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723861521895424[0;39m 生成今日电子书快照开始
2022-07-14 17:52:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723861521895424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723861521895424[0;39m ==> Parameters: 
2022-07-14 17:52:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723861521895424[0;39m <==    Updates: 0
2022-07-14 17:52:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723861521895424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:52:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723882497609728[0;39m 生成今日电子书快照开始
2022-07-14 17:52:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723882497609728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723882497609728[0;39m ==> Parameters: 
2022-07-14 17:52:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723882497609728[0;39m <==    Updates: 0
2022-07-14 17:52:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723882497609728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:52:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723903427186688[0;39m 生成今日电子书快照开始
2022-07-14 17:52:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723903427186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723903427186688[0;39m ==> Parameters: 
2022-07-14 17:52:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723903427186688[0;39m <==    Updates: 0
2022-07-14 17:52:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723903427186688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:52:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723924386123776[0;39m 生成今日电子书快照开始
2022-07-14 17:52:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723924386123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723924386123776[0;39m ==> Parameters: 
2022-07-14 17:52:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723924386123776[0;39m <==    Updates: 0
2022-07-14 17:52:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723924386123776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:52:35.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202723945353449472[0;39m 更新电子书下的文档数据开始
2022-07-14 17:52:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723945353449472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:52:35.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723945353449472[0;39m ==> Parameters: 
2022-07-14 17:52:35.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202723945353449472[0;39m <==    Updates: 7
2022-07-14 17:52:35.002 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202723945353449472[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:52:35.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723945357643776[0;39m 生成今日电子书快照开始
2022-07-14 17:52:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723945357643776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:35.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723945357643776[0;39m ==> Parameters: 
2022-07-14 17:52:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723945357643776[0;39m <==    Updates: 0
2022-07-14 17:52:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723945357643776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:52:40.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723966324969472[0;39m 生成今日电子书快照开始
2022-07-14 17:52:40.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723966324969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:40.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723966324969472[0;39m ==> Parameters: 
2022-07-14 17:52:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723966324969472[0;39m <==    Updates: 0
2022-07-14 17:52:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723966324969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:52:45.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202723987342626816[0;39m 生成今日电子书快照开始
2022-07-14 17:52:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723987342626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:45.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723987342626816[0;39m ==> Parameters: 
2022-07-14 17:52:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202723987342626816[0;39m <==    Updates: 0
2022-07-14 17:52:45.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202723987342626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:52:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724008284786688[0;39m 生成今日电子书快照开始
2022-07-14 17:52:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724008284786688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724008284786688[0;39m ==> Parameters: 
2022-07-14 17:52:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724008284786688[0;39m <==    Updates: 0
2022-07-14 17:52:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724008284786688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:52:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724029277278208[0;39m 生成今日电子书快照开始
2022-07-14 17:52:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724029277278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:52:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724029277278208[0;39m ==> Parameters: 
2022-07-14 17:52:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724029277278208[0;39m <==    Updates: 0
2022-07-14 17:52:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724029277278208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:53:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724050236215296[0;39m 生成今日电子书快照开始
2022-07-14 17:53:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724050236215296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724050236215296[0;39m ==> Parameters: 
2022-07-14 17:53:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724050236215296[0;39m <==    Updates: 0
2022-07-14 17:53:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724050236215296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:53:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724071195152384[0;39m 生成今日电子书快照开始
2022-07-14 17:53:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724071195152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724071195152384[0;39m ==> Parameters: 
2022-07-14 17:53:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724071195152384[0;39m <==    Updates: 0
2022-07-14 17:53:05.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724071195152384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:53:05.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202724071207735296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:53:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724071207735296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:53:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724071207735296[0;39m ==> Parameters: 
2022-07-14 17:53:05.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724071207735296[0;39m <==    Updates: 7
2022-07-14 17:53:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202724071207735296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:53:10.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724092175060992[0;39m 生成今日电子书快照开始
2022-07-14 17:53:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724092175060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724092175060992[0;39m ==> Parameters: 
2022-07-14 17:53:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724092175060992[0;39m <==    Updates: 0
2022-07-14 17:53:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724092175060992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:53:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724113171746816[0;39m 生成今日电子书快照开始
2022-07-14 17:53:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724113171746816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724113171746816[0;39m ==> Parameters: 
2022-07-14 17:53:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724113171746816[0;39m <==    Updates: 0
2022-07-14 17:53:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724113171746816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:53:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724134122295296[0;39m 生成今日电子书快照开始
2022-07-14 17:53:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724134122295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724134122295296[0;39m ==> Parameters: 
2022-07-14 17:53:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724134122295296[0;39m <==    Updates: 0
2022-07-14 17:53:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724134122295296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:53:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724155085426688[0;39m 生成今日电子书快照开始
2022-07-14 17:53:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724155085426688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724155085426688[0;39m ==> Parameters: 
2022-07-14 17:53:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724155085426688[0;39m <==    Updates: 0
2022-07-14 17:53:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724155085426688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:53:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724176052752384[0;39m 生成今日电子书快照开始
2022-07-14 17:53:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724176052752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724176052752384[0;39m ==> Parameters: 
2022-07-14 17:53:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724176052752384[0;39m <==    Updates: 0
2022-07-14 17:53:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724176052752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:53:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724197028466688[0;39m 生成今日电子书快照开始
2022-07-14 17:53:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724197028466688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724197028466688[0;39m ==> Parameters: 
2022-07-14 17:53:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724197028466688[0;39m <==    Updates: 0
2022-07-14 17:53:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724197028466688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:53:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202724197036855296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:53:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724197036855296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:53:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724197036855296[0;39m ==> Parameters: 
2022-07-14 17:53:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724197036855296[0;39m <==    Updates: 7
2022-07-14 17:53:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202724197036855296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:53:40.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724217987403776[0;39m 生成今日电子书快照开始
2022-07-14 17:53:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724217987403776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724217987403776[0;39m ==> Parameters: 
2022-07-14 17:53:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724217987403776[0;39m <==    Updates: 0
2022-07-14 17:53:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724217987403776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:53:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724238967312384[0;39m 生成今日电子书快照开始
2022-07-14 17:53:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724238967312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724238967312384[0;39m ==> Parameters: 
2022-07-14 17:53:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724238967312384[0;39m <==    Updates: 0
2022-07-14 17:53:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724238967312384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:53:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724259943026688[0;39m 生成今日电子书快照开始
2022-07-14 17:53:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724259943026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724259943026688[0;39m ==> Parameters: 
2022-07-14 17:53:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724259943026688[0;39m <==    Updates: 0
2022-07-14 17:53:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724259943026688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:53:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724280948101120[0;39m 生成今日电子书快照开始
2022-07-14 17:53:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724280948101120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:53:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724280948101120[0;39m ==> Parameters: 
2022-07-14 17:53:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724280948101120[0;39m <==    Updates: 0
2022-07-14 17:53:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724280948101120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:54:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724301873483776[0;39m 生成今日电子书快照开始
2022-07-14 17:54:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724301873483776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724301873483776[0;39m ==> Parameters: 
2022-07-14 17:54:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724301873483776[0;39m <==    Updates: 0
2022-07-14 17:54:00.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724301873483776[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:54:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202724322849198080[0;39m 更新电子书下的文档数据开始
2022-07-14 17:54:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724322849198080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:54:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724322849198080[0;39m ==> Parameters: 
2022-07-14 17:54:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724322849198080[0;39m <==    Updates: 7
2022-07-14 17:54:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202724322849198080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 17:54:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724322857586688[0;39m 生成今日电子书快照开始
2022-07-14 17:54:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724322857586688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724322857586688[0;39m ==> Parameters: 
2022-07-14 17:54:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724322857586688[0;39m <==    Updates: 0
2022-07-14 17:54:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724322857586688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:54:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724343866855424[0;39m 生成今日电子书快照开始
2022-07-14 17:54:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724343866855424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724343866855424[0;39m ==> Parameters: 
2022-07-14 17:54:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724343866855424[0;39m <==    Updates: 0
2022-07-14 17:54:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724343866855424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:54:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724364821598208[0;39m 生成今日电子书快照开始
2022-07-14 17:54:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724364821598208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724364821598208[0;39m ==> Parameters: 
2022-07-14 17:54:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724364821598208[0;39m <==    Updates: 0
2022-07-14 17:54:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724364821598208[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:54:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724385772146688[0;39m 生成今日电子书快照开始
2022-07-14 17:54:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724385772146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724385772146688[0;39m ==> Parameters: 
2022-07-14 17:54:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724385772146688[0;39m <==    Updates: 0
2022-07-14 17:54:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724385772146688[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:54:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724406735278080[0;39m 生成今日电子书快照开始
2022-07-14 17:54:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724406735278080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724406735278080[0;39m ==> Parameters: 
2022-07-14 17:54:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724406735278080[0;39m <==    Updates: 0
2022-07-14 17:54:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724406735278080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:54:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724427702603776[0;39m 生成今日电子书快照开始
2022-07-14 17:54:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724427702603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724427702603776[0;39m ==> Parameters: 
2022-07-14 17:54:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724427702603776[0;39m <==    Updates: 0
2022-07-14 17:54:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724427702603776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:54:35.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724448678318080[0;39m 生成今日电子书快照开始
2022-07-14 17:54:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724448678318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724448678318080[0;39m ==> Parameters: 
2022-07-14 17:54:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724448678318080[0;39m <==    Updates: 0
2022-07-14 17:54:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724448678318080[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 17:54:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202724448695095296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:54:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724448695095296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:54:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724448695095296[0;39m ==> Parameters: 
2022-07-14 17:54:35.008 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724448695095296[0;39m <==    Updates: 7
2022-07-14 17:54:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202724448695095296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:54:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724469662420992[0;39m 生成今日电子书快照开始
2022-07-14 17:54:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724469662420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724469662420992[0;39m ==> Parameters: 
2022-07-14 17:54:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724469662420992[0;39m <==    Updates: 0
2022-07-14 17:54:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724469662420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:54:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724490621358080[0;39m 生成今日电子书快照开始
2022-07-14 17:54:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724490621358080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724490621358080[0;39m ==> Parameters: 
2022-07-14 17:54:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724490621358080[0;39m <==    Updates: 0
2022-07-14 17:54:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724490621358080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:54:50.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724511639015424[0;39m 生成今日电子书快照开始
2022-07-14 17:54:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724511639015424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724511639015424[0;39m ==> Parameters: 
2022-07-14 17:54:50.020 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724511639015424[0;39m <==    Updates: 0
2022-07-14 17:54:50.020 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724511639015424[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 17:54:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724532606341120[0;39m 生成今日电子书快照开始
2022-07-14 17:54:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724532606341120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:54:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724532606341120[0;39m ==> Parameters: 
2022-07-14 17:54:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724532606341120[0;39m <==    Updates: 0
2022-07-14 17:54:55.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724532606341120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:55:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724553552695296[0;39m 生成今日电子书快照开始
2022-07-14 17:55:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724553552695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724553552695296[0;39m ==> Parameters: 
2022-07-14 17:55:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724553552695296[0;39m <==    Updates: 0
2022-07-14 17:55:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724553552695296[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:55:05.010 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202724574536798208[0;39m 更新电子书下的文档数据开始
2022-07-14 17:55:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724574536798208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:55:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724574536798208[0;39m ==> Parameters: 
2022-07-14 17:55:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724574536798208[0;39m <==    Updates: 7
2022-07-14 17:55:05.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202724574536798208[0;39m 更新电子书下的文档数据结束，耗时：6 毫秒
2022-07-14 17:55:05.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724574566158336[0;39m 生成今日电子书快照开始
2022-07-14 17:55:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724574566158336[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:05.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724574566158336[0;39m ==> Parameters: 
2022-07-14 17:55:05.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724574566158336[0;39m <==    Updates: 0
2022-07-14 17:55:05.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724574566158336[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:55:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724595487346688[0;39m 生成今日电子书快照开始
2022-07-14 17:55:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724595487346688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:10.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724595487346688[0;39m ==> Parameters: 
2022-07-14 17:55:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724595487346688[0;39m <==    Updates: 0
2022-07-14 17:55:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724595487346688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:55:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724616463060992[0;39m 生成今日电子书快照开始
2022-07-14 17:55:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724616463060992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724616463060992[0;39m ==> Parameters: 
2022-07-14 17:55:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724616463060992[0;39m <==    Updates: 0
2022-07-14 17:55:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724616463060992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:55:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724637472329728[0;39m 生成今日电子书快照开始
2022-07-14 17:55:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724637472329728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724637472329728[0;39m ==> Parameters: 
2022-07-14 17:55:20.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724637472329728[0;39m <==    Updates: 0
2022-07-14 17:55:20.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724637472329728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:55:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724658406100992[0;39m 生成今日电子书快照开始
2022-07-14 17:55:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724658406100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724658406100992[0;39m ==> Parameters: 
2022-07-14 17:55:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724658406100992[0;39m <==    Updates: 0
2022-07-14 17:55:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724658406100992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:55:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724679365038080[0;39m 生成今日电子书快照开始
2022-07-14 17:55:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724679365038080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724679365038080[0;39m ==> Parameters: 
2022-07-14 17:55:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724679365038080[0;39m <==    Updates: 0
2022-07-14 17:55:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724679365038080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:55:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724700386889728[0;39m 生成今日电子书快照开始
2022-07-14 17:55:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724700386889728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724700386889728[0;39m ==> Parameters: 
2022-07-14 17:55:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724700386889728[0;39m <==    Updates: 0
2022-07-14 17:55:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724700386889728[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:55:35.018 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202724700399472640[0;39m 更新电子书下的文档数据开始
2022-07-14 17:55:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724700399472640[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:55:35.018 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724700399472640[0;39m ==> Parameters: 
2022-07-14 17:55:35.019 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724700399472640[0;39m <==    Updates: 7
2022-07-14 17:55:35.019 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202724700399472640[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:55:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724721320660992[0;39m 生成今日电子书快照开始
2022-07-14 17:55:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724721320660992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724721320660992[0;39m ==> Parameters: 
2022-07-14 17:55:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724721320660992[0;39m <==    Updates: 0
2022-07-14 17:55:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724721320660992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:55:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724742300569600[0;39m 生成今日电子书快照开始
2022-07-14 17:55:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724742300569600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724742300569600[0;39m ==> Parameters: 
2022-07-14 17:55:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724742300569600[0;39m <==    Updates: 0
2022-07-14 17:55:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724742300569600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:55:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724763276283904[0;39m 生成今日电子书快照开始
2022-07-14 17:55:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724763276283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724763276283904[0;39m ==> Parameters: 
2022-07-14 17:55:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724763276283904[0;39m <==    Updates: 0
2022-07-14 17:55:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724763276283904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:55:55.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724784268775424[0;39m 生成今日电子书快照开始
2022-07-14 17:55:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724784268775424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:55:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724784268775424[0;39m ==> Parameters: 
2022-07-14 17:55:55.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724784268775424[0;39m <==    Updates: 0
2022-07-14 17:55:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724784268775424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:56:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724805185769472[0;39m 生成今日电子书快照开始
2022-07-14 17:56:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724805185769472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724805185769472[0;39m ==> Parameters: 
2022-07-14 17:56:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724805185769472[0;39m <==    Updates: 0
2022-07-14 17:56:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724805185769472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:56:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202724826199232512[0;39m 更新电子书下的文档数据开始
2022-07-14 17:56:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724826199232512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:56:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724826199232512[0;39m ==> Parameters: 
2022-07-14 17:56:05.012 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724826199232512[0;39m <==    Updates: 7
2022-07-14 17:56:05.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202724826199232512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:56:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724826203426816[0;39m 生成今日电子书快照开始
2022-07-14 17:56:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724826203426816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724826203426816[0;39m ==> Parameters: 
2022-07-14 17:56:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724826203426816[0;39m <==    Updates: 0
2022-07-14 17:56:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724826203426816[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:56:10.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724847153975296[0;39m 生成今日电子书快照开始
2022-07-14 17:56:10.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724847153975296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724847153975296[0;39m ==> Parameters: 
2022-07-14 17:56:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724847153975296[0;39m <==    Updates: 0
2022-07-14 17:56:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724847153975296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:56:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724868150661120[0;39m 生成今日电子书快照开始
2022-07-14 17:56:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724868150661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724868150661120[0;39m ==> Parameters: 
2022-07-14 17:56:15.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724868150661120[0;39m <==    Updates: 0
2022-07-14 17:56:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724868150661120[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:56:20.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724889130569728[0;39m 生成今日电子书快照开始
2022-07-14 17:56:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724889130569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724889130569728[0;39m ==> Parameters: 
2022-07-14 17:56:20.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724889130569728[0;39m <==    Updates: 0
2022-07-14 17:56:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724889130569728[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:56:25.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724910051758080[0;39m 生成今日电子书快照开始
2022-07-14 17:56:25.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724910051758080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724910051758080[0;39m ==> Parameters: 
2022-07-14 17:56:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724910051758080[0;39m <==    Updates: 0
2022-07-14 17:56:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724910051758080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:56:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724931019083776[0;39m 生成今日电子书快照开始
2022-07-14 17:56:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724931019083776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724931019083776[0;39m ==> Parameters: 
2022-07-14 17:56:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724931019083776[0;39m <==    Updates: 0
2022-07-14 17:56:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724931019083776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:56:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724951998992384[0;39m 生成今日电子书快照开始
2022-07-14 17:56:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724951998992384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724951998992384[0;39m ==> Parameters: 
2022-07-14 17:56:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724951998992384[0;39m <==    Updates: 0
2022-07-14 17:56:35.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724951998992384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:56:35.007 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202724952011575296[0;39m 更新电子书下的文档数据开始
2022-07-14 17:56:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724952011575296[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:56:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724952011575296[0;39m ==> Parameters: 
2022-07-14 17:56:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202724952011575296[0;39m <==    Updates: 7
2022-07-14 17:56:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202724952011575296[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:56:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724972974706688[0;39m 生成今日电子书快照开始
2022-07-14 17:56:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724972974706688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724972974706688[0;39m ==> Parameters: 
2022-07-14 17:56:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724972974706688[0;39m <==    Updates: 0
2022-07-14 17:56:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724972974706688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:56:45.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202724993937838080[0;39m 生成今日电子书快照开始
2022-07-14 17:56:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724993937838080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724993937838080[0;39m ==> Parameters: 
2022-07-14 17:56:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202724993937838080[0;39m <==    Updates: 0
2022-07-14 17:56:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202724993937838080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:56:50.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725014930329600[0;39m 生成今日电子书快照开始
2022-07-14 17:56:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725014930329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:50.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725014930329600[0;39m ==> Parameters: 
2022-07-14 17:56:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725014930329600[0;39m <==    Updates: 0
2022-07-14 17:56:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725014930329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:56:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725035885072384[0;39m 生成今日电子书快照开始
2022-07-14 17:56:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725035885072384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:56:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725035885072384[0;39m ==> Parameters: 
2022-07-14 17:56:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725035885072384[0;39m <==    Updates: 0
2022-07-14 17:56:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725035885072384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:57:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725056848203776[0;39m 生成今日电子书快照开始
2022-07-14 17:57:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725056848203776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725056848203776[0;39m ==> Parameters: 
2022-07-14 17:57:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725056848203776[0;39m <==    Updates: 0
2022-07-14 17:57:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725056848203776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:57:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202725077815529472[0;39m 更新电子书下的文档数据开始
2022-07-14 17:57:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725077815529472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:57:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725077815529472[0;39m ==> Parameters: 
2022-07-14 17:57:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725077815529472[0;39m <==    Updates: 7
2022-07-14 17:57:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202725077815529472[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-14 17:57:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725077828112384[0;39m 生成今日电子书快照开始
2022-07-14 17:57:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725077828112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725077828112384[0;39m ==> Parameters: 
2022-07-14 17:57:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725077828112384[0;39m <==    Updates: 0
2022-07-14 17:57:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725077828112384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:57:10.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725098824798208[0;39m 生成今日电子书快照开始
2022-07-14 17:57:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725098824798208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725098824798208[0;39m ==> Parameters: 
2022-07-14 17:57:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725098824798208[0;39m <==    Updates: 0
2022-07-14 17:57:10.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725098824798208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:57:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725119796318208[0;39m 生成今日电子书快照开始
2022-07-14 17:57:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725119796318208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725119796318208[0;39m ==> Parameters: 
2022-07-14 17:57:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725119796318208[0;39m <==    Updates: 0
2022-07-14 17:57:15.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725119796318208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:57:20.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725140763643904[0;39m 生成今日电子书快照开始
2022-07-14 17:57:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725140763643904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725140763643904[0;39m ==> Parameters: 
2022-07-14 17:57:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725140763643904[0;39m <==    Updates: 0
2022-07-14 17:57:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725140763643904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:57:25.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725161730969600[0;39m 生成今日电子书快照开始
2022-07-14 17:57:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725161730969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725161730969600[0;39m ==> Parameters: 
2022-07-14 17:57:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725161730969600[0;39m <==    Updates: 0
2022-07-14 17:57:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725161730969600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:57:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725182681518080[0;39m 生成今日电子书快照开始
2022-07-14 17:57:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725182681518080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725182681518080[0;39m ==> Parameters: 
2022-07-14 17:57:30.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725182681518080[0;39m <==    Updates: 0
2022-07-14 17:57:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725182681518080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:57:35.013 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202725203694981120[0;39m 更新电子书下的文档数据开始
2022-07-14 17:57:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725203694981120[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:57:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725203694981120[0;39m ==> Parameters: 
2022-07-14 17:57:35.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725203694981120[0;39m <==    Updates: 7
2022-07-14 17:57:35.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202725203694981120[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-14 17:57:35.018 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725203715952640[0;39m 生成今日电子书快照开始
2022-07-14 17:57:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725203715952640[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:35.018 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725203715952640[0;39m ==> Parameters: 
2022-07-14 17:57:35.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725203715952640[0;39m <==    Updates: 0
2022-07-14 17:57:35.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725203715952640[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:57:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725224653918208[0;39m 生成今日电子书快照开始
2022-07-14 17:57:40.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725224653918208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:40.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725224653918208[0;39m ==> Parameters: 
2022-07-14 17:57:40.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725224653918208[0;39m <==    Updates: 0
2022-07-14 17:57:40.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725224653918208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:57:45.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725245612855296[0;39m 生成今日电子书快照开始
2022-07-14 17:57:45.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725245612855296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725245612855296[0;39m ==> Parameters: 
2022-07-14 17:57:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725245612855296[0;39m <==    Updates: 0
2022-07-14 17:57:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725245612855296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:57:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725266567598080[0;39m 生成今日电子书快照开始
2022-07-14 17:57:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725266567598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725266567598080[0;39m ==> Parameters: 
2022-07-14 17:57:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725266567598080[0;39m <==    Updates: 0
2022-07-14 17:57:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725266567598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:57:55.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725287543312384[0;39m 生成今日电子书快照开始
2022-07-14 17:57:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725287543312384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:57:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725287543312384[0;39m ==> Parameters: 
2022-07-14 17:57:55.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725287543312384[0;39m <==    Updates: 0
2022-07-14 17:57:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725287543312384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:58:00.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725308506443776[0;39m 生成今日电子书快照开始
2022-07-14 17:58:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725308506443776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:00.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725308506443776[0;39m ==> Parameters: 
2022-07-14 17:58:00.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725308506443776[0;39m <==    Updates: 0
2022-07-14 17:58:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725308506443776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:58:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725329482158080[0;39m 生成今日电子书快照开始
2022-07-14 17:58:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725329482158080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725329482158080[0;39m ==> Parameters: 
2022-07-14 17:58:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725329482158080[0;39m <==    Updates: 0
2022-07-14 17:58:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725329482158080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:58:05.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202725329494740992[0;39m 更新电子书下的文档数据开始
2022-07-14 17:58:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725329494740992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:58:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725329494740992[0;39m ==> Parameters: 
2022-07-14 17:58:05.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725329494740992[0;39m <==    Updates: 7
2022-07-14 17:58:05.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202725329494740992[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:58:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725350499815424[0;39m 生成今日电子书快照开始
2022-07-14 17:58:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725350499815424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725350499815424[0;39m ==> Parameters: 
2022-07-14 17:58:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725350499815424[0;39m <==    Updates: 0
2022-07-14 17:58:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725350499815424[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:58:15.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725371471335424[0;39m 生成今日电子书快照开始
2022-07-14 17:58:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725371471335424[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:15.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725371471335424[0;39m ==> Parameters: 
2022-07-14 17:58:15.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725371471335424[0;39m <==    Updates: 0
2022-07-14 17:58:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725371471335424[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:58:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725392438661120[0;39m 生成今日电子书快照开始
2022-07-14 17:58:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725392438661120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725392438661120[0;39m ==> Parameters: 
2022-07-14 17:58:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725392438661120[0;39m <==    Updates: 0
2022-07-14 17:58:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725392438661120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:58:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725413372432384[0;39m 生成今日电子书快照开始
2022-07-14 17:58:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725413372432384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725413372432384[0;39m ==> Parameters: 
2022-07-14 17:58:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725413372432384[0;39m <==    Updates: 0
2022-07-14 17:58:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725413372432384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:58:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725434390089728[0;39m 生成今日电子书快照开始
2022-07-14 17:58:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725434390089728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725434390089728[0;39m ==> Parameters: 
2022-07-14 17:58:30.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725434390089728[0;39m <==    Updates: 0
2022-07-14 17:58:30.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725434390089728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:58:35.008 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202725455332249600[0;39m 更新电子书下的文档数据开始
2022-07-14 17:58:35.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725455332249600[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:58:35.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725455332249600[0;39m ==> Parameters: 
2022-07-14 17:58:35.013 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725455332249600[0;39m <==    Updates: 7
2022-07-14 17:58:35.013 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202725455332249600[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-14 17:58:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725455353221120[0;39m 生成今日电子书快照开始
2022-07-14 17:58:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725455353221120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725455353221120[0;39m ==> Parameters: 
2022-07-14 17:58:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725455353221120[0;39m <==    Updates: 0
2022-07-14 17:58:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725455353221120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:58:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725476291186688[0;39m 生成今日电子书快照开始
2022-07-14 17:58:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725476291186688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725476291186688[0;39m ==> Parameters: 
2022-07-14 17:58:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725476291186688[0;39m <==    Updates: 0
2022-07-14 17:58:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725476291186688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:58:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725497250123776[0;39m 生成今日电子书快照开始
2022-07-14 17:58:45.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725497250123776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725497250123776[0;39m ==> Parameters: 
2022-07-14 17:58:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725497250123776[0;39m <==    Updates: 0
2022-07-14 17:58:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725497250123776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:58:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725518276169728[0;39m 生成今日电子书快照开始
2022-07-14 17:58:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725518276169728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:50.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725518276169728[0;39m ==> Parameters: 
2022-07-14 17:58:50.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725518276169728[0;39m <==    Updates: 0
2022-07-14 17:58:50.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725518276169728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:58:55.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725539188969472[0;39m 生成今日电子书快照开始
2022-07-14 17:58:55.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725539188969472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:58:55.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725539188969472[0;39m ==> Parameters: 
2022-07-14 17:58:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725539188969472[0;39m <==    Updates: 0
2022-07-14 17:58:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725539188969472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:59:00.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725560194043904[0;39m 生成今日电子书快照开始
2022-07-14 17:59:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725560194043904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725560194043904[0;39m ==> Parameters: 
2022-07-14 17:59:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725560194043904[0;39m <==    Updates: 0
2022-07-14 17:59:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725560194043904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:59:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725581161369600[0;39m 生成今日电子书快照开始
2022-07-14 17:59:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725581161369600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725581161369600[0;39m ==> Parameters: 
2022-07-14 17:59:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725581161369600[0;39m <==    Updates: 0
2022-07-14 17:59:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725581161369600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:59:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202725581165563904[0;39m 更新电子书下的文档数据开始
2022-07-14 17:59:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725581165563904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:59:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725581165563904[0;39m ==> Parameters: 
2022-07-14 17:59:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725581165563904[0;39m <==    Updates: 7
2022-07-14 17:59:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202725581165563904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:59:10.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725602116112384[0;39m 生成今日电子书快照开始
2022-07-14 17:59:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725602116112384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:10.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725602116112384[0;39m ==> Parameters: 
2022-07-14 17:59:10.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725602116112384[0;39m <==    Updates: 0
2022-07-14 17:59:10.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725602116112384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 17:59:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725623104409600[0;39m 生成今日电子书快照开始
2022-07-14 17:59:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725623104409600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:15.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725623104409600[0;39m ==> Parameters: 
2022-07-14 17:59:15.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725623104409600[0;39m <==    Updates: 0
2022-07-14 17:59:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725623104409600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:59:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725644059152384[0;39m 生成今日电子书快照开始
2022-07-14 17:59:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725644059152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725644059152384[0;39m ==> Parameters: 
2022-07-14 17:59:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725644059152384[0;39m <==    Updates: 0
2022-07-14 17:59:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725644059152384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:59:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725665030672384[0;39m 生成今日电子书快照开始
2022-07-14 17:59:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725665030672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725665030672384[0;39m ==> Parameters: 
2022-07-14 17:59:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725665030672384[0;39m <==    Updates: 0
2022-07-14 17:59:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725665030672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:59:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725685993803776[0;39m 生成今日电子书快照开始
2022-07-14 17:59:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725685993803776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725685993803776[0;39m ==> Parameters: 
2022-07-14 17:59:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725685993803776[0;39m <==    Updates: 0
2022-07-14 17:59:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725685993803776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 17:59:35.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725707011461120[0;39m 生成今日电子书快照开始
2022-07-14 17:59:35.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725707011461120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:35.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725707011461120[0;39m ==> Parameters: 
2022-07-14 17:59:35.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725707011461120[0;39m <==    Updates: 0
2022-07-14 17:59:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725707011461120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:59:35.015 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202725707019849728[0;39m 更新电子书下的文档数据开始
2022-07-14 17:59:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725707019849728[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 17:59:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725707019849728[0;39m ==> Parameters: 
2022-07-14 17:59:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725707019849728[0;39m <==    Updates: 7
2022-07-14 17:59:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202725707019849728[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 17:59:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725727953620992[0;39m 生成今日电子书快照开始
2022-07-14 17:59:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725727953620992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:40.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725727953620992[0;39m ==> Parameters: 
2022-07-14 17:59:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725727953620992[0;39m <==    Updates: 0
2022-07-14 17:59:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725727953620992[0;39m 生成今日电子书快照结束，耗时：9 毫秒
2022-07-14 17:59:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725748916752384[0;39m 生成今日电子书快照开始
2022-07-14 17:59:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725748916752384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725748916752384[0;39m ==> Parameters: 
2022-07-14 17:59:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725748916752384[0;39m <==    Updates: 0
2022-07-14 17:59:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725748916752384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 17:59:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725769888272384[0;39m 生成今日电子书快照开始
2022-07-14 17:59:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725769888272384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725769888272384[0;39m ==> Parameters: 
2022-07-14 17:59:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725769888272384[0;39m <==    Updates: 0
2022-07-14 17:59:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725769888272384[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 17:59:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725790855598080[0;39m 生成今日电子书快照开始
2022-07-14 17:59:55.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725790855598080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 17:59:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725790855598080[0;39m ==> Parameters: 
2022-07-14 17:59:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725790855598080[0;39m <==    Updates: 0
2022-07-14 17:59:55.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725790855598080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:00:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725811869061120[0;39m 生成今日电子书快照开始
2022-07-14 18:00:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725811869061120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725811869061120[0;39m ==> Parameters: 
2022-07-14 18:00:00.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725811869061120[0;39m <==    Updates: 0
2022-07-14 18:00:00.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725811869061120[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 18:00:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725832819609600[0;39m 生成今日电子书快照开始
2022-07-14 18:00:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725832819609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725832819609600[0;39m ==> Parameters: 
2022-07-14 18:00:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725832819609600[0;39m <==    Updates: 0
2022-07-14 18:00:05.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725832819609600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:00:05.009 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202725832823803904[0;39m 更新电子书下的文档数据开始
2022-07-14 18:00:05.009 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725832823803904[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:00:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725832823803904[0;39m ==> Parameters: 
2022-07-14 18:00:05.010 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725832823803904[0;39m <==    Updates: 7
2022-07-14 18:00:05.010 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202725832823803904[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 18:00:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725853795323904[0;39m 生成今日电子书快照开始
2022-07-14 18:00:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725853795323904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725853795323904[0;39m ==> Parameters: 
2022-07-14 18:00:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725853795323904[0;39m <==    Updates: 0
2022-07-14 18:00:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725853795323904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:00:15.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725874754260992[0;39m 生成今日电子书快照开始
2022-07-14 18:00:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725874754260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725874754260992[0;39m ==> Parameters: 
2022-07-14 18:00:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725874754260992[0;39m <==    Updates: 0
2022-07-14 18:00:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725874754260992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:00:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725895755141120[0;39m 生成今日电子书快照开始
2022-07-14 18:00:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725895755141120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:20.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725895755141120[0;39m ==> Parameters: 
2022-07-14 18:00:20.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725895755141120[0;39m <==    Updates: 0
2022-07-14 18:00:20.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725895755141120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:00:25.000 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725916672135168[0;39m 生成今日电子书快照开始
2022-07-14 18:00:25.000 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725916672135168[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:25.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725916672135168[0;39m ==> Parameters: 
2022-07-14 18:00:25.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725916672135168[0;39m <==    Updates: 0
2022-07-14 18:00:25.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725916672135168[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:00:30.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725937698181120[0;39m 生成今日电子书快照开始
2022-07-14 18:00:30.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725937698181120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:30.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725937698181120[0;39m ==> Parameters: 
2022-07-14 18:00:30.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725937698181120[0;39m <==    Updates: 0
2022-07-14 18:00:30.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725937698181120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:00:35.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725958619369472[0;39m 生成今日电子书快照开始
2022-07-14 18:00:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725958619369472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:35.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725958619369472[0;39m ==> Parameters: 
2022-07-14 18:00:35.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725958619369472[0;39m <==    Updates: 0
2022-07-14 18:00:35.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725958619369472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:00:35.004 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202725958631952384[0;39m 更新电子书下的文档数据开始
2022-07-14 18:00:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725958631952384[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:00:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725958631952384[0;39m ==> Parameters: 
2022-07-14 18:00:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202725958631952384[0;39m <==    Updates: 7
2022-07-14 18:00:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202725958631952384[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 18:00:40.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202725979620249600[0;39m 生成今日电子书快照开始
2022-07-14 18:00:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725979620249600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725979620249600[0;39m ==> Parameters: 
2022-07-14 18:00:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202725979620249600[0;39m <==    Updates: 0
2022-07-14 18:00:40.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202725979620249600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:00:45.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726000566603776[0;39m 生成今日电子书快照开始
2022-07-14 18:00:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726000566603776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:45.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726000566603776[0;39m ==> Parameters: 
2022-07-14 18:00:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726000566603776[0;39m <==    Updates: 0
2022-07-14 18:00:45.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726000566603776[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:00:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726021542318080[0;39m 生成今日电子书快照开始
2022-07-14 18:00:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726021542318080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726021542318080[0;39m ==> Parameters: 
2022-07-14 18:00:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726021542318080[0;39m <==    Updates: 0
2022-07-14 18:00:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726021542318080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:00:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726042526420992[0;39m 生成今日电子书快照开始
2022-07-14 18:00:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726042526420992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:00:55.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726042526420992[0;39m ==> Parameters: 
2022-07-14 18:00:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726042526420992[0;39m <==    Updates: 0
2022-07-14 18:00:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726042526420992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:01:00.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726063493746688[0;39m 生成今日电子书快照开始
2022-07-14 18:01:00.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726063493746688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726063493746688[0;39m ==> Parameters: 
2022-07-14 18:01:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726063493746688[0;39m <==    Updates: 0
2022-07-14 18:01:00.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726063493746688[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:01:05.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726084494626816[0;39m 生成今日电子书快照开始
2022-07-14 18:01:05.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726084494626816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726084494626816[0;39m ==> Parameters: 
2022-07-14 18:01:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726084494626816[0;39m <==    Updates: 0
2022-07-14 18:01:05.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726084494626816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:01:05.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202726084503015424[0;39m 更新电子书下的文档数据开始
2022-07-14 18:01:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726084503015424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:01:05.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726084503015424[0;39m ==> Parameters: 
2022-07-14 18:01:05.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726084503015424[0;39m <==    Updates: 7
2022-07-14 18:01:05.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202726084503015424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 18:01:10.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726105420009472[0;39m 生成今日电子书快照开始
2022-07-14 18:01:10.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726105420009472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:10.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726105420009472[0;39m ==> Parameters: 
2022-07-14 18:01:10.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726105420009472[0;39m <==    Updates: 0
2022-07-14 18:01:10.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726105420009472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:01:15.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726126429278208[0;39m 生成今日电子书快照开始
2022-07-14 18:01:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726126429278208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726126429278208[0;39m ==> Parameters: 
2022-07-14 18:01:15.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726126429278208[0;39m <==    Updates: 0
2022-07-14 18:01:15.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726126429278208[0;39m 生成今日电子书快照结束，耗时：7 毫秒
2022-07-14 18:01:20.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726147371438080[0;39m 生成今日电子书快照开始
2022-07-14 18:01:20.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726147371438080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:20.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726147371438080[0;39m ==> Parameters: 
2022-07-14 18:01:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726147371438080[0;39m <==    Updates: 0
2022-07-14 18:01:20.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726147371438080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:01:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726168347152384[0;39m 生成今日电子书快照开始
2022-07-14 18:01:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726168347152384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726168347152384[0;39m ==> Parameters: 
2022-07-14 18:01:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726168347152384[0;39m <==    Updates: 0
2022-07-14 18:01:25.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726168347152384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:01:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726189306089472[0;39m 生成今日电子书快照开始
2022-07-14 18:01:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726189306089472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726189306089472[0;39m ==> Parameters: 
2022-07-14 18:01:30.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726189306089472[0;39m <==    Updates: 0
2022-07-14 18:01:30.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726189306089472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:01:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726210306969600[0;39m 生成今日电子书快照开始
2022-07-14 18:01:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726210306969600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726210306969600[0;39m ==> Parameters: 
2022-07-14 18:01:35.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726210306969600[0;39m <==    Updates: 0
2022-07-14 18:01:35.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726210306969600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:01:35.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202726210319552512[0;39m 更新电子书下的文档数据开始
2022-07-14 18:01:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726210319552512[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:01:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726210319552512[0;39m ==> Parameters: 
2022-07-14 18:01:35.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726210319552512[0;39m <==    Updates: 7
2022-07-14 18:01:35.012 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202726210319552512[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 18:01:40.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726231274295296[0;39m 生成今日电子书快照开始
2022-07-14 18:01:40.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726231274295296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:40.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726231274295296[0;39m ==> Parameters: 
2022-07-14 18:01:40.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726231274295296[0;39m <==    Updates: 0
2022-07-14 18:01:40.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726231274295296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:01:45.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726252250009600[0;39m 生成今日电子书快照开始
2022-07-14 18:01:45.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726252250009600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726252250009600[0;39m ==> Parameters: 
2022-07-14 18:01:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726252250009600[0;39m <==    Updates: 0
2022-07-14 18:01:45.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726252250009600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:01:50.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726273192169472[0;39m 生成今日电子书快照开始
2022-07-14 18:01:50.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726273192169472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:50.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726273192169472[0;39m ==> Parameters: 
2022-07-14 18:01:50.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726273192169472[0;39m <==    Updates: 0
2022-07-14 18:01:50.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726273192169472[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:01:55.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726294172078080[0;39m 生成今日电子书快照开始
2022-07-14 18:01:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726294172078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:01:55.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726294172078080[0;39m ==> Parameters: 
2022-07-14 18:01:55.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726294172078080[0;39m <==    Updates: 0
2022-07-14 18:01:55.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726294172078080[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:02:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726315160375296[0;39m 生成今日电子书快照开始
2022-07-14 18:02:00.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726315160375296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726315160375296[0;39m ==> Parameters: 
2022-07-14 18:02:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726315160375296[0;39m <==    Updates: 0
2022-07-14 18:02:00.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726315160375296[0;39m 生成今日电子书快照结束，耗时：4 毫秒
2022-07-14 18:02:05.003 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202726336115118080[0;39m 更新电子书下的文档数据开始
2022-07-14 18:02:05.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726336115118080[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:02:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726336115118080[0;39m ==> Parameters: 
2022-07-14 18:02:05.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726336115118080[0;39m <==    Updates: 7
2022-07-14 18:02:05.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202726336115118080[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 18:02:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726336123506688[0;39m 生成今日电子书快照开始
2022-07-14 18:02:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726336123506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726336123506688[0;39m ==> Parameters: 
2022-07-14 18:02:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726336123506688[0;39m <==    Updates: 0
2022-07-14 18:02:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726336123506688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:02:10.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726357141164032[0;39m 生成今日电子书快照开始
2022-07-14 18:02:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726357141164032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726357141164032[0;39m ==> Parameters: 
2022-07-14 18:02:10.019 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726357141164032[0;39m <==    Updates: 0
2022-07-14 18:02:10.019 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726357141164032[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:02:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726378091712512[0;39m 生成今日电子书快照开始
2022-07-14 18:02:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726378091712512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:15.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726378091712512[0;39m ==> Parameters: 
2022-07-14 18:02:15.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726378091712512[0;39m <==    Updates: 0
2022-07-14 18:02:15.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726378091712512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:02:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726399042260992[0;39m 生成今日电子书快照开始
2022-07-14 18:02:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726399042260992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726399042260992[0;39m ==> Parameters: 
2022-07-14 18:02:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726399042260992[0;39m <==    Updates: 0
2022-07-14 18:02:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726399042260992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:02:25.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726420051529728[0;39m 生成今日电子书快照开始
2022-07-14 18:02:25.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726420051529728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:25.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726420051529728[0;39m ==> Parameters: 
2022-07-14 18:02:25.021 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726420051529728[0;39m <==    Updates: 0
2022-07-14 18:02:25.021 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726420051529728[0;39m 生成今日电子书快照结束，耗时：6 毫秒
2022-07-14 18:02:30.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726440985300992[0;39m 生成今日电子书快照开始
2022-07-14 18:02:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726440985300992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726440985300992[0;39m ==> Parameters: 
2022-07-14 18:02:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726440985300992[0;39m <==    Updates: 0
2022-07-14 18:02:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726440985300992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:02:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202726461990375424[0;39m 更新电子书下的文档数据开始
2022-07-14 18:02:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726461990375424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:02:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726461990375424[0;39m ==> Parameters: 
2022-07-14 18:02:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726461990375424[0;39m <==    Updates: 7
2022-07-14 18:02:35.015 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202726461990375424[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 18:02:35.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726461994569728[0;39m 生成今日电子书快照开始
2022-07-14 18:02:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726461994569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726461994569728[0;39m ==> Parameters: 
2022-07-14 18:02:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726461994569728[0;39m <==    Updates: 0
2022-07-14 18:02:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726461994569728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:02:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726482924146688[0;39m 生成今日电子书快照开始
2022-07-14 18:02:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726482924146688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726482924146688[0;39m ==> Parameters: 
2022-07-14 18:02:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726482924146688[0;39m <==    Updates: 0
2022-07-14 18:02:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726482924146688[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:02:45.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726503891472384[0;39m 生成今日电子书快照开始
2022-07-14 18:02:45.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726503891472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:45.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726503891472384[0;39m ==> Parameters: 
2022-07-14 18:02:45.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726503891472384[0;39m <==    Updates: 0
2022-07-14 18:02:45.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726503891472384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:02:50.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726524900741120[0;39m 生成今日电子书快照开始
2022-07-14 18:02:50.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726524900741120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:50.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726524900741120[0;39m ==> Parameters: 
2022-07-14 18:02:50.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726524900741120[0;39m <==    Updates: 0
2022-07-14 18:02:50.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726524900741120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:02:55.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726545872261120[0;39m 生成今日电子书快照开始
2022-07-14 18:02:55.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726545872261120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:02:55.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726545872261120[0;39m ==> Parameters: 
2022-07-14 18:02:55.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726545872261120[0;39m <==    Updates: 0
2022-07-14 18:02:55.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726545872261120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:03:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726566843781120[0;39m 生成今日电子书快照开始
2022-07-14 18:03:00.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726566843781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:00.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726566843781120[0;39m ==> Parameters: 
2022-07-14 18:03:00.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726566843781120[0;39m <==    Updates: 0
2022-07-14 18:03:00.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726566843781120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:03:05.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726587794329600[0;39m 生成今日电子书快照开始
2022-07-14 18:03:05.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726587794329600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:05.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726587794329600[0;39m ==> Parameters: 
2022-07-14 18:03:05.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726587794329600[0;39m <==    Updates: 0
2022-07-14 18:03:05.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726587794329600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:03:05.011 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202726587802718208[0;39m 更新电子书下的文档数据开始
2022-07-14 18:03:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726587802718208[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:03:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726587802718208[0;39m ==> Parameters: 
2022-07-14 18:03:05.011 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726587802718208[0;39m <==    Updates: 7
2022-07-14 18:03:05.011 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202726587802718208[0;39m 更新电子书下的文档数据结束，耗时：0 毫秒
2022-07-14 18:03:10.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726608765849600[0;39m 生成今日电子书快照开始
2022-07-14 18:03:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726608765849600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:10.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726608765849600[0;39m ==> Parameters: 
2022-07-14 18:03:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726608765849600[0;39m <==    Updates: 0
2022-07-14 18:03:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726608765849600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:03:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726629733175296[0;39m 生成今日电子书快照开始
2022-07-14 18:03:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726629733175296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726629733175296[0;39m ==> Parameters: 
2022-07-14 18:03:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726629733175296[0;39m <==    Updates: 0
2022-07-14 18:03:15.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726629733175296[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:03:20.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726650721472512[0;39m 生成今日电子书快照开始
2022-07-14 18:03:20.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726650721472512[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:20.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726650721472512[0;39m ==> Parameters: 
2022-07-14 18:03:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726650721472512[0;39m <==    Updates: 0
2022-07-14 18:03:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726650721472512[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:03:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726671663632384[0;39m 生成今日电子书快照开始
2022-07-14 18:03:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726671663632384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726671663632384[0;39m ==> Parameters: 
2022-07-14 18:03:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726671663632384[0;39m <==    Updates: 0
2022-07-14 18:03:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726671663632384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:03:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726692626763776[0;39m 生成今日电子书快照开始
2022-07-14 18:03:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726692626763776[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726692626763776[0;39m ==> Parameters: 
2022-07-14 18:03:30.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726692626763776[0;39m <==    Updates: 0
2022-07-14 18:03:30.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726692626763776[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:03:35.006 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202726713615060992[0;39m 更新电子书下的文档数据开始
2022-07-14 18:03:35.006 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726713615060992[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:03:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726713615060992[0;39m ==> Parameters: 
2022-07-14 18:03:35.007 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726713615060992[0;39m <==    Updates: 7
2022-07-14 18:03:35.008 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202726713615060992[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 18:03:35.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726713623449600[0;39m 生成今日电子书快照开始
2022-07-14 18:03:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726713623449600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:35.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726713623449600[0;39m ==> Parameters: 
2022-07-14 18:03:35.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726713623449600[0;39m <==    Updates: 0
2022-07-14 18:03:35.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726713623449600[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:03:40.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726734573998080[0;39m 生成今日电子书快照开始
2022-07-14 18:03:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726734573998080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:40.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726734573998080[0;39m ==> Parameters: 
2022-07-14 18:03:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726734573998080[0;39m <==    Updates: 0
2022-07-14 18:03:40.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726734573998080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:03:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726755570683904[0;39m 生成今日电子书快照开始
2022-07-14 18:03:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726755570683904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726755570683904[0;39m ==> Parameters: 
2022-07-14 18:03:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726755570683904[0;39m <==    Updates: 0
2022-07-14 18:03:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726755570683904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:03:50.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726776542203904[0;39m 生成今日电子书快照开始
2022-07-14 18:03:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726776542203904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:50.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726776542203904[0;39m ==> Parameters: 
2022-07-14 18:03:50.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726776542203904[0;39m <==    Updates: 0
2022-07-14 18:03:50.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726776542203904[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:03:55.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726797513723904[0;39m 生成今日电子书快照开始
2022-07-14 18:03:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726797513723904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:03:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726797513723904[0;39m ==> Parameters: 
2022-07-14 18:03:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726797513723904[0;39m <==    Updates: 0
2022-07-14 18:03:55.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726797513723904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:04:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726818489438208[0;39m 生成今日电子书快照开始
2022-07-14 18:04:00.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726818489438208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:00.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726818489438208[0;39m ==> Parameters: 
2022-07-14 18:04:00.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726818489438208[0;39m <==    Updates: 0
2022-07-14 18:04:00.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726818489438208[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:04:05.000 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202726839419015168[0;39m 更新电子书下的文档数据开始
2022-07-14 18:04:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726839419015168[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:04:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726839419015168[0;39m ==> Parameters: 
2022-07-14 18:04:05.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726839419015168[0;39m <==    Updates: 7
2022-07-14 18:04:05.004 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202726839419015168[0;39m 更新电子书下的文档数据结束，耗时：4 毫秒
2022-07-14 18:04:05.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726839435792384[0;39m 生成今日电子书快照开始
2022-07-14 18:04:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726839435792384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:05.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726839435792384[0;39m ==> Parameters: 
2022-07-14 18:04:05.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726839435792384[0;39m <==    Updates: 0
2022-07-14 18:04:05.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726839435792384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:04:10.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726860428283904[0;39m 生成今日电子书快照开始
2022-07-14 18:04:10.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726860428283904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:10.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726860428283904[0;39m ==> Parameters: 
2022-07-14 18:04:10.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726860428283904[0;39m <==    Updates: 0
2022-07-14 18:04:10.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726860428283904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:04:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726881383026688[0;39m 生成今日电子书快照开始
2022-07-14 18:04:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726881383026688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726881383026688[0;39m ==> Parameters: 
2022-07-14 18:04:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726881383026688[0;39m <==    Updates: 0
2022-07-14 18:04:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726881383026688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:04:20.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726902358740992[0;39m 生成今日电子书快照开始
2022-07-14 18:04:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726902358740992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:20.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726902358740992[0;39m ==> Parameters: 
2022-07-14 18:04:20.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726902358740992[0;39m <==    Updates: 0
2022-07-14 18:04:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726902358740992[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:04:25.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726923321872384[0;39m 生成今日电子书快照开始
2022-07-14 18:04:25.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726923321872384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:25.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726923321872384[0;39m ==> Parameters: 
2022-07-14 18:04:25.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726923321872384[0;39m <==    Updates: 0
2022-07-14 18:04:25.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726923321872384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:04:30.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726944280809472[0;39m 生成今日电子书快照开始
2022-07-14 18:04:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726944280809472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:30.001 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726944280809472[0;39m ==> Parameters: 
2022-07-14 18:04:30.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726944280809472[0;39m <==    Updates: 0
2022-07-14 18:04:30.002 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726944280809472[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:04:35.002 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202726965256523776[0;39m 更新电子书下的文档数据开始
2022-07-14 18:04:35.003 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726965256523776[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:04:35.004 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726965256523776[0;39m ==> Parameters: 
2022-07-14 18:04:35.005 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202726965256523776[0;39m <==    Updates: 7
2022-07-14 18:04:35.005 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202726965256523776[0;39m 更新电子书下的文档数据结束，耗时：3 毫秒
2022-07-14 18:04:35.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726965269106688[0;39m 生成今日电子书快照开始
2022-07-14 18:04:35.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726965269106688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:35.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726965269106688[0;39m ==> Parameters: 
2022-07-14 18:04:35.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726965269106688[0;39m <==    Updates: 0
2022-07-14 18:04:35.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726965269106688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:04:40.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202726986282569728[0;39m 生成今日电子书快照开始
2022-07-14 18:04:40.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726986282569728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:40.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726986282569728[0;39m ==> Parameters: 
2022-07-14 18:04:40.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202726986282569728[0;39m <==    Updates: 0
2022-07-14 18:04:40.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202726986282569728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:04:45.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727007228923904[0;39m 生成今日电子书快照开始
2022-07-14 18:04:45.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727007228923904[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:45.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727007228923904[0;39m ==> Parameters: 
2022-07-14 18:04:45.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727007228923904[0;39m <==    Updates: 0
2022-07-14 18:04:45.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727007228923904[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:04:50.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727028179472384[0;39m 生成今日电子书快照开始
2022-07-14 18:04:50.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727028179472384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727028179472384[0;39m ==> Parameters: 
2022-07-14 18:04:50.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727028179472384[0;39m <==    Updates: 0
2022-07-14 18:04:50.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727028179472384[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:04:55.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727049167769600[0;39m 生成今日电子书快照开始
2022-07-14 18:04:55.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727049167769600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:04:55.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727049167769600[0;39m ==> Parameters: 
2022-07-14 18:04:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727049167769600[0;39m <==    Updates: 0
2022-07-14 18:04:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727049167769600[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:05:00.001 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727070109929472[0;39m 生成今日电子书快照开始
2022-07-14 18:05:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727070109929472[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:00.002 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727070109929472[0;39m ==> Parameters: 
2022-07-14 18:05:00.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727070109929472[0;39m <==    Updates: 0
2022-07-14 18:05:00.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727070109929472[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:05:05.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727091131781120[0;39m 生成今日电子书快照开始
2022-07-14 18:05:05.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727091131781120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:05.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727091131781120[0;39m ==> Parameters: 
2022-07-14 18:05:05.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727091131781120[0;39m <==    Updates: 0
2022-07-14 18:05:05.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727091131781120[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:05:05.016 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202727091144364032[0;39m 更新电子书下的文档数据开始
2022-07-14 18:05:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202727091144364032[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:05:05.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202727091144364032[0;39m ==> Parameters: 
2022-07-14 18:05:05.017 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202727091144364032[0;39m <==    Updates: 7
2022-07-14 18:05:05.017 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202727091144364032[0;39m 更新电子书下的文档数据结束，耗时：1 毫秒
2022-07-14 18:05:10.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727112111689728[0;39m 生成今日电子书快照开始
2022-07-14 18:05:10.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727112111689728[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:10.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727112111689728[0;39m ==> Parameters: 
2022-07-14 18:05:10.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727112111689728[0;39m <==    Updates: 0
2022-07-14 18:05:10.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727112111689728[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:05:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727133041266688[0;39m 生成今日电子书快照开始
2022-07-14 18:05:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727133041266688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:15.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727133041266688[0;39m ==> Parameters: 
2022-07-14 18:05:15.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727133041266688[0;39m <==    Updates: 0
2022-07-14 18:05:15.011 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727133041266688[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 18:05:20.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727154008592384[0;39m 生成今日电子书快照开始
2022-07-14 18:05:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727154008592384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:20.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727154008592384[0;39m ==> Parameters: 
2022-07-14 18:05:20.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727154008592384[0;39m <==    Updates: 0
2022-07-14 18:05:20.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727154008592384[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:05:25.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727174992695296[0;39m 生成今日电子书快照开始
2022-07-14 18:05:25.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727174992695296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:25.008 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727174992695296[0;39m ==> Parameters: 
2022-07-14 18:05:25.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727174992695296[0;39m <==    Updates: 0
2022-07-14 18:05:25.009 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727174992695296[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:05:30.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727195955826688[0;39m 生成今日电子书快照开始
2022-07-14 18:05:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727195955826688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:30.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727195955826688[0;39m ==> Parameters: 
2022-07-14 18:05:30.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727195955826688[0;39m <==    Updates: 0
2022-07-14 18:05:30.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727195955826688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:05:35.014 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202727216965095424[0;39m 更新电子书下的文档数据开始
2022-07-14 18:05:35.014 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202727216965095424[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:05:35.015 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202727216965095424[0;39m ==> Parameters: 
2022-07-14 18:05:35.016 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202727216965095424[0;39m <==    Updates: 7
2022-07-14 18:05:35.016 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202727216965095424[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 18:05:35.016 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727216973484032[0;39m 生成今日电子书快照开始
2022-07-14 18:05:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727216973484032[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:35.016 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727216973484032[0;39m ==> Parameters: 
2022-07-14 18:05:35.017 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727216973484032[0;39m <==    Updates: 0
2022-07-14 18:05:35.017 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727216973484032[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:05:40.004 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727237894672384[0;39m 生成今日电子书快照开始
2022-07-14 18:05:40.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727237894672384[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:40.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727237894672384[0;39m ==> Parameters: 
2022-07-14 18:05:40.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727237894672384[0;39m <==    Updates: 0
2022-07-14 18:05:40.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727237894672384[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:05:45.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727258903941120[0;39m 生成今日电子书快照开始
2022-07-14 18:05:45.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727258903941120[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:45.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727258903941120[0;39m ==> Parameters: 
2022-07-14 18:05:45.015 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727258903941120[0;39m <==    Updates: 0
2022-07-14 18:05:45.015 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727258903941120[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:05:50.006 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727279846100992[0;39m 生成今日电子书快照开始
2022-07-14 18:05:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727279846100992[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:50.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727279846100992[0;39m ==> Parameters: 
2022-07-14 18:05:50.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727279846100992[0;39m <==    Updates: 0
2022-07-14 18:05:50.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727279846100992[0;39m 生成今日电子书快照结束，耗时：1 毫秒
2022-07-14 18:05:55.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727300834398208[0;39m 生成今日电子书快照开始
2022-07-14 18:05:55.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727300834398208[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:05:55.011 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727300834398208[0;39m ==> Parameters: 
2022-07-14 18:05:55.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727300834398208[0;39m <==    Updates: 0
2022-07-14 18:05:55.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727300834398208[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:06:00.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727321793335296[0;39m 生成今日电子书快照开始
2022-07-14 18:06:00.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727321793335296[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:06:00.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727321793335296[0;39m ==> Parameters: 
2022-07-14 18:06:00.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727321793335296[0;39m <==    Updates: 0
2022-07-14 18:06:00.010 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727321793335296[0;39m 生成今日电子书快照结束，耗时：3 毫秒
2022-07-14 18:06:05.001 INFO  com.zs.wikibb.job.DocJob                          :32  
                [32m202727342739689472[0;39m 更新电子书下的文档数据开始
2022-07-14 18:06:05.001 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202727342739689472[0;39m ==>  Preparing: update ebook t1, (select ebook_id, count(1) doc_count, sum(view_count) view_count, sum(vote_count) vote_count from doc group by ebook_id) t2 set t1.doc_count = t2.doc_count, t1.view_count = t2.view_count, t1.vote_count = t2.vote_count where t1.id = t2.ebook_id
2022-07-14 18:06:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202727342739689472[0;39m ==> Parameters: 
2022-07-14 18:06:05.002 DEBUG com.zs.wikibb.mapper.DocMapperCust.updateEbookInfo:137 
                [32m202727342739689472[0;39m <==    Updates: 7
2022-07-14 18:06:05.003 INFO  com.zs.wikibb.job.DocJob                          :35  
                [32m202727342739689472[0;39m 更新电子书下的文档数据结束，耗时：2 毫秒
2022-07-14 18:06:05.003 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727342748078080[0;39m 生成今日电子书快照开始
2022-07-14 18:06:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727342748078080[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:06:05.003 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727342748078080[0;39m ==> Parameters: 
2022-07-14 18:06:05.004 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727342748078080[0;39m <==    Updates: 0
2022-07-14 18:06:05.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727342748078080[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:06:10.012 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727363757346816[0;39m 生成今日电子书快照开始
2022-07-14 18:06:10.012 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727363757346816[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:06:10.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727363757346816[0;39m ==> Parameters: 
2022-07-14 18:06:10.014 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727363757346816[0;39m <==    Updates: 0
2022-07-14 18:06:10.014 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727363757346816[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:06:15.005 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727384699506688[0;39m 生成今日电子书快照开始
2022-07-14 18:06:15.005 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727384699506688[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:06:15.006 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727384699506688[0;39m ==> Parameters: 
2022-07-14 18:06:15.007 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727384699506688[0;39m <==    Updates: 0
2022-07-14 18:06:15.007 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727384699506688[0;39m 生成今日电子书快照结束，耗时：2 毫秒
2022-07-14 18:06:20.008 INFO  com.zs.wikibb.job.EbookSnapshotJob                :32  
                [32m202727405683609600[0;39m 生成今日电子书快照开始
2022-07-14 18:06:20.009 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727405683609600[0;39m ==>  Preparing: insert into ebook_snapshot(ebook_id, `date`, view_count, vote_count, view_increase, vote_increase) select t1.id, curdate(), 0, 0, 0, 0 from ebook t1 where not exists(select 1 from ebook_snapshot t2 where t1.id = t2.ebook_id and t2.`date` = curdate()); update ebook_snapshot t1,ebook t2 set t1.view_count=t2.view_count, t1.vote_count=t2.vote_count where t1.`date`=curdate() and t1.ebook_id=t2.id; update ebook_snapshot t1 left join (select ebook_id,view_count,vote_count from ebook_snapshot where `date`=date_sub(curdate(), interval 1 day )) t2 on t1.ebook_id=t2.ebook_id set t1.view_increase=(t1.view_count- ifnull(t2.view_count, 0)), t1.vote_increase=t1.vote_count- ifnull(t2.vote_count, 0) where t1.`date`=curdate();
2022-07-14 18:06:20.010 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727405683609600[0;39m ==> Parameters: 
2022-07-14 18:06:20.013 DEBUG c.z.w.mapper.EbookSnapshotMapperCust.genSnapshot  :137 
                [32m202727405683609600[0;39m <==    Updates: 0
2022-07-14 18:06:20.013 INFO  com.zs.wikibb.job.EbookSnapshotJob                :35  
                [32m202727405683609600[0;39m 生成今日电子书快照结束，耗时：5 毫秒
2022-07-14 18:06:21.730 INFO  com.zs.wikibb.websocket.WebSocketServer           :41  
                [32m                  [0;39m 连接关闭，token：eEJfcnFdNq，session id：23！当前连接数：0
2022-07-14 18:06:21.749 INFO  com.zaxxer.hikari.HikariDataSource                :350 
                [32m                  [0;39m HikariPool-1 - Shutdown initiated...
2022-07-14 18:06:21.752 INFO  com.zaxxer.hikari.HikariDataSource                :352 
                [32m                  [0;39m HikariPool-1 - Shutdown completed.
